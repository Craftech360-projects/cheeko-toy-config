var Kv=Object.defineProperty;var cp=e=>{throw TypeError(e)};var Zv=(e,t,r)=>t in e?Kv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Kt=(e,t,r)=>Zv(e,typeof t!="symbol"?t+"":t,r),gh=(e,t,r)=>t.has(e)||cp("Cannot "+r);var Z=(e,t,r)=>(gh(e,t,"read from private field"),r?r.call(e):t.get(e)),St=(e,t,r)=>t.has(e)?cp("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),dt=(e,t,r,i)=>(gh(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),ot=(e,t,r)=>(gh(e,t,"access private method"),r);var Xl=(e,t,r,i)=>({set _(a){dt(e,t,a,r)},get _(){return Z(e,t,i)}});function Bm(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(i,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Fr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Jv(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}),r}var Fm={exports:{}},Ec={},Um={exports:{}},xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ml=Symbol.for("react.element"),eb=Symbol.for("react.portal"),tb=Symbol.for("react.fragment"),rb=Symbol.for("react.strict_mode"),nb=Symbol.for("react.profiler"),ib=Symbol.for("react.provider"),sb=Symbol.for("react.context"),ob=Symbol.for("react.forward_ref"),ab=Symbol.for("react.suspense"),lb=Symbol.for("react.memo"),ub=Symbol.for("react.lazy"),hp=Symbol.iterator;function cb(e){return e===null||typeof e!="object"?null:(e=hp&&e[hp]||e["@@iterator"],typeof e=="function"?e:null)}var zm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wm=Object.assign,Hm={};function da(e,t,r){this.props=e,this.context=t,this.refs=Hm,this.updater=r||zm}da.prototype.isReactComponent={};da.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};da.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Vm(){}Vm.prototype=da.prototype;function P0(e,t,r){this.props=e,this.context=t,this.refs=Hm,this.updater=r||zm}var L0=P0.prototype=new Vm;L0.constructor=P0;Wm(L0,da.prototype);L0.isPureReactComponent=!0;var fp=Array.isArray,$m=Object.prototype.hasOwnProperty,B0={current:null},Gm={key:!0,ref:!0,__self:!0,__source:!0};function Ym(e,t,r){var i,a={},s=null,u=null;if(t!=null)for(i in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(s=""+t.key),t)$m.call(t,i)&&!Gm.hasOwnProperty(i)&&(a[i]=t[i]);var h=arguments.length-2;if(h===1)a.children=r;else if(1<h){for(var f=Array(h),d=0;d<h;d++)f[d]=arguments[d+2];a.children=f}if(e&&e.defaultProps)for(i in h=e.defaultProps,h)a[i]===void 0&&(a[i]=h[i]);return{$$typeof:Ml,type:e,key:s,ref:u,props:a,_owner:B0.current}}function hb(e,t){return{$$typeof:Ml,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function j0(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ml}function fb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var dp=/\/+/g;function mh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fb(""+e.key):t.toString(36)}function Eu(e,t,r,i,a){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case Ml:case eb:u=!0}}if(u)return u=e,a=a(u),e=i===""?"."+mh(u,0):i,fp(a)?(r="",e!=null&&(r=e.replace(dp,"$&/")+"/"),Eu(a,t,r,"",function(d){return d})):a!=null&&(j0(a)&&(a=hb(a,r+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(dp,"$&/")+"/")+e)),t.push(a)),1;if(u=0,i=i===""?".":i+":",fp(e))for(var h=0;h<e.length;h++){s=e[h];var f=i+mh(s,h);u+=Eu(s,t,r,f,a)}else if(f=cb(e),typeof f=="function")for(e=f.call(e),h=0;!(s=e.next()).done;)s=s.value,f=i+mh(s,h++),u+=Eu(s,t,r,f,a);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function ql(e,t,r){if(e==null)return e;var i=[],a=0;return Eu(e,i,"","",function(s){return t.call(r,s,a++)}),i}function db(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var nn={current:null},Su={transition:null},pb={ReactCurrentDispatcher:nn,ReactCurrentBatchConfig:Su,ReactCurrentOwner:B0};function Xm(){throw Error("act(...) is not supported in production builds of React.")}xt.Children={map:ql,forEach:function(e,t,r){ql(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ql(e,function(){t++}),t},toArray:function(e){return ql(e,function(t){return t})||[]},only:function(e){if(!j0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xt.Component=da;xt.Fragment=tb;xt.Profiler=nb;xt.PureComponent=P0;xt.StrictMode=rb;xt.Suspense=ab;xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pb;xt.act=Xm;xt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=Wm({},e.props),a=e.key,s=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,u=B0.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var h=e.type.defaultProps;for(f in t)$m.call(t,f)&&!Gm.hasOwnProperty(f)&&(i[f]=t[f]===void 0&&h!==void 0?h[f]:t[f])}var f=arguments.length-2;if(f===1)i.children=r;else if(1<f){h=Array(f);for(var d=0;d<f;d++)h[d]=arguments[d+2];i.children=h}return{$$typeof:Ml,type:e.type,key:a,ref:s,props:i,_owner:u}};xt.createContext=function(e){return e={$$typeof:sb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ib,_context:e},e.Consumer=e};xt.createElement=Ym;xt.createFactory=function(e){var t=Ym.bind(null,e);return t.type=e,t};xt.createRef=function(){return{current:null}};xt.forwardRef=function(e){return{$$typeof:ob,render:e}};xt.isValidElement=j0;xt.lazy=function(e){return{$$typeof:ub,_payload:{_status:-1,_result:e},_init:db}};xt.memo=function(e,t){return{$$typeof:lb,type:e,compare:t===void 0?null:t}};xt.startTransition=function(e){var t=Su.transition;Su.transition={};try{e()}finally{Su.transition=t}};xt.unstable_act=Xm;xt.useCallback=function(e,t){return nn.current.useCallback(e,t)};xt.useContext=function(e){return nn.current.useContext(e)};xt.useDebugValue=function(){};xt.useDeferredValue=function(e){return nn.current.useDeferredValue(e)};xt.useEffect=function(e,t){return nn.current.useEffect(e,t)};xt.useId=function(){return nn.current.useId()};xt.useImperativeHandle=function(e,t,r){return nn.current.useImperativeHandle(e,t,r)};xt.useInsertionEffect=function(e,t){return nn.current.useInsertionEffect(e,t)};xt.useLayoutEffect=function(e,t){return nn.current.useLayoutEffect(e,t)};xt.useMemo=function(e,t){return nn.current.useMemo(e,t)};xt.useReducer=function(e,t,r){return nn.current.useReducer(e,t,r)};xt.useRef=function(e){return nn.current.useRef(e)};xt.useState=function(e){return nn.current.useState(e)};xt.useSyncExternalStore=function(e,t,r){return nn.current.useSyncExternalStore(e,t,r)};xt.useTransition=function(){return nn.current.useTransition()};xt.version="18.3.1";Um.exports=xt;var De=Um.exports;const qa=jm(De),gb=Bm({__proto__:null,default:qa},[De]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb=De,yb=Symbol.for("react.element"),wb=Symbol.for("react.fragment"),xb=Object.prototype.hasOwnProperty,vb=mb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bb={key:!0,ref:!0,__self:!0,__source:!0};function qm(e,t,r){var i,a={},s=null,u=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(u=t.ref);for(i in t)xb.call(t,i)&&!bb.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:yb,type:e,key:s,ref:u,props:a,_owner:vb.current}}Ec.Fragment=wb;Ec.jsx=qm;Ec.jsxs=qm;Fm.exports=Ec;var te=Fm.exports,Qm={exports:{}},Nn={},Km={exports:{}},Zm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(he,Me){var ne=he.length;he.push(Me);e:for(;0<ne;){var Re=ne-1>>>1,G=he[Re];if(0<a(G,Me))he[Re]=Me,he[ne]=G,ne=Re;else break e}}function r(he){return he.length===0?null:he[0]}function i(he){if(he.length===0)return null;var Me=he[0],ne=he.pop();if(ne!==Me){he[0]=ne;e:for(var Re=0,G=he.length,Oe=G>>>1;Re<Oe;){var Fe=2*(Re+1)-1,oe=he[Fe],Pe=Fe+1,de=he[Pe];if(0>a(oe,ne))Pe<G&&0>a(de,oe)?(he[Re]=de,he[Pe]=ne,Re=Pe):(he[Re]=oe,he[Fe]=ne,Re=Fe);else if(Pe<G&&0>a(de,ne))he[Re]=de,he[Pe]=ne,Re=Pe;else break e}}return Me}function a(he,Me){var ne=he.sortIndex-Me.sortIndex;return ne!==0?ne:he.id-Me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var u=Date,h=u.now();e.unstable_now=function(){return u.now()-h}}var f=[],d=[],m=1,w=null,v=3,b=!1,C=!1,N=!1,R=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(he){for(var Me=r(d);Me!==null;){if(Me.callback===null)i(d);else if(Me.startTime<=he)i(d),Me.sortIndex=Me.expirationTime,t(f,Me);else break;Me=r(d)}}function B(he){if(N=!1,I(he),!C)if(r(f)!==null)C=!0,Be(U);else{var Me=r(d);Me!==null&&_e(B,Me.startTime-he)}}function U(he,Me){C=!1,N&&(N=!1,k(W),W=-1),b=!0;var ne=v;try{for(I(Me),w=r(f);w!==null&&(!(w.expirationTime>Me)||he&&!Ae());){var Re=w.callback;if(typeof Re=="function"){w.callback=null,v=w.priorityLevel;var G=Re(w.expirationTime<=Me);Me=e.unstable_now(),typeof G=="function"?w.callback=G:w===r(f)&&i(f),I(Me)}else i(f);w=r(f)}if(w!==null)var Oe=!0;else{var Fe=r(d);Fe!==null&&_e(B,Fe.startTime-Me),Oe=!1}return Oe}finally{w=null,v=ne,b=!1}}var L=!1,P=null,W=-1,q=5,pe=-1;function Ae(){return!(e.unstable_now()-pe<q)}function H(){if(P!==null){var he=e.unstable_now();pe=he;var Me=!0;try{Me=P(!0,he)}finally{Me?ue():(L=!1,P=null)}}else L=!1}var ue;if(typeof S=="function")ue=function(){S(H)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,z=xe.port2;xe.port1.onmessage=H,ue=function(){z.postMessage(null)}}else ue=function(){R(H,0)};function Be(he){P=he,L||(L=!0,ue())}function _e(he,Me){W=R(function(){he(e.unstable_now())},Me)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(he){he.callback=null},e.unstable_continueExecution=function(){C||b||(C=!0,Be(U))},e.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<he?Math.floor(1e3/he):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return r(f)},e.unstable_next=function(he){switch(v){case 1:case 2:case 3:var Me=3;break;default:Me=v}var ne=v;v=Me;try{return he()}finally{v=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(he,Me){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var ne=v;v=he;try{return Me()}finally{v=ne}},e.unstable_scheduleCallback=function(he,Me,ne){var Re=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?Re+ne:Re):ne=Re,he){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ne+G,he={id:m++,callback:Me,priorityLevel:he,startTime:ne,expirationTime:G,sortIndex:-1},ne>Re?(he.sortIndex=ne,t(d,he),r(f)===null&&he===r(d)&&(N?(k(W),W=-1):N=!0,_e(B,ne-Re))):(he.sortIndex=G,t(f,he),C||b||(C=!0,Be(U))),he},e.unstable_shouldYield=Ae,e.unstable_wrapCallback=function(he){var Me=v;return function(){var ne=v;v=Me;try{return he.apply(this,arguments)}finally{v=ne}}}})(Zm);Km.exports=Zm;var _b=Km.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eb=De,Tn=_b;function qe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jm=new Set,hl={};function ho(e,t){ia(e,t),ia(e+"Capture",t)}function ia(e,t){for(hl[e]=t,e=0;e<t.length;e++)Jm.add(t[e])}var Oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),af=Object.prototype.hasOwnProperty,Sb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pp={},gp={};function Ab(e){return af.call(gp,e)?!0:af.call(pp,e)?!1:Sb.test(e)?gp[e]=!0:(pp[e]=!0,!1)}function Cb(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ib(e,t,r,i){if(t===null||typeof t>"u"||Cb(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function sn(e,t,r,i,a,s,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=u}var zr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){zr[e]=new sn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];zr[t]=new sn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){zr[e]=new sn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zr[e]=new sn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){zr[e]=new sn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){zr[e]=new sn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){zr[e]=new sn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){zr[e]=new sn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){zr[e]=new sn(e,5,!1,e.toLowerCase(),null,!1,!1)});var F0=/[\-:]([a-z])/g;function U0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(F0,U0);zr[t]=new sn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(F0,U0);zr[t]=new sn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(F0,U0);zr[t]=new sn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){zr[e]=new sn(e,1,!1,e.toLowerCase(),null,!1,!1)});zr.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){zr[e]=new sn(e,1,!1,e.toLowerCase(),null,!0,!0)});function z0(e,t,r,i){var a=zr.hasOwnProperty(t)?zr[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ib(t,r,a,i)&&(r=null),i||a===null?Ab(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,i=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Bi=Eb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ql=Symbol.for("react.element"),Bo=Symbol.for("react.portal"),jo=Symbol.for("react.fragment"),W0=Symbol.for("react.strict_mode"),lf=Symbol.for("react.profiler"),ey=Symbol.for("react.provider"),ty=Symbol.for("react.context"),H0=Symbol.for("react.forward_ref"),uf=Symbol.for("react.suspense"),cf=Symbol.for("react.suspense_list"),V0=Symbol.for("react.memo"),os=Symbol.for("react.lazy"),ry=Symbol.for("react.offscreen"),mp=Symbol.iterator;function Oa(e){return e===null||typeof e!="object"?null:(e=mp&&e[mp]||e["@@iterator"],typeof e=="function"?e:null)}var ar=Object.assign,yh;function za(e){if(yh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);yh=t&&t[1]||""}return`
`+yh+e}var wh=!1;function xh(e,t){if(!e||wh)return"";wh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var i=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){i=d}e.call(t.prototype)}else{try{throw Error()}catch(d){i=d}e()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),s=i.stack.split(`
`),u=a.length-1,h=s.length-1;1<=u&&0<=h&&a[u]!==s[h];)h--;for(;1<=u&&0<=h;u--,h--)if(a[u]!==s[h]){if(u!==1||h!==1)do if(u--,h--,0>h||a[u]!==s[h]){var f=`
`+a[u].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=u&&0<=h);break}}}finally{wh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?za(e):""}function Tb(e){switch(e.tag){case 5:return za(e.type);case 16:return za("Lazy");case 13:return za("Suspense");case 19:return za("SuspenseList");case 0:case 2:case 15:return e=xh(e.type,!1),e;case 11:return e=xh(e.type.render,!1),e;case 1:return e=xh(e.type,!0),e;default:return""}}function hf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jo:return"Fragment";case Bo:return"Portal";case lf:return"Profiler";case W0:return"StrictMode";case uf:return"Suspense";case cf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ty:return(e.displayName||"Context")+".Consumer";case ey:return(e._context.displayName||"Context")+".Provider";case H0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V0:return t=e.displayName||null,t!==null?t:hf(e.type)||"Memo";case os:t=e._payload,e=e._init;try{return hf(e(t))}catch{}}return null}function Nb(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hf(t);case 8:return t===W0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function As(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ny(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ob(e){var t=ny(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(u){i=""+u,s.call(this,u)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(u){i=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Kl(e){e._valueTracker||(e._valueTracker=Ob(e))}function iy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=ny(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function Vu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ff(e,t){var r=t.checked;return ar({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function yp(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=As(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sy(e,t){t=t.checked,t!=null&&z0(e,"checked",t,!1)}function df(e,t){sy(e,t);var r=As(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?pf(e,t.type,r):t.hasOwnProperty("defaultValue")&&pf(e,t.type,As(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function wp(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function pf(e,t,r){(t!=="number"||Vu(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Wa=Array.isArray;function Qo(e,t,r,i){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&i&&(e[r].defaultSelected=!0)}else{for(r=""+As(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function gf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(qe(91));return ar({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xp(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(qe(92));if(Wa(r)){if(1<r.length)throw Error(qe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:As(r)}}function oy(e,t){var r=As(t.value),i=As(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function vp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ay(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ay(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zl,ly=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zl=Zl||document.createElement("div"),Zl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function fl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Qa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kb=["Webkit","ms","Moz","O"];Object.keys(Qa).forEach(function(e){kb.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qa[t]=Qa[e]})});function uy(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Qa.hasOwnProperty(e)&&Qa[e]?(""+t).trim():t+"px"}function cy(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,a=uy(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,a):e[r]=a}}var Rb=ar({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yf(e,t){if(t){if(Rb[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(qe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(qe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(qe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(qe(62))}}function wf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xf=null;function $0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vf=null,Ko=null,Zo=null;function bp(e){if(e=Ll(e)){if(typeof vf!="function")throw Error(qe(280));var t=e.stateNode;t&&(t=Tc(t),vf(e.stateNode,e.type,t))}}function hy(e){Ko?Zo?Zo.push(e):Zo=[e]:Ko=e}function fy(){if(Ko){var e=Ko,t=Zo;if(Zo=Ko=null,bp(e),t)for(e=0;e<t.length;e++)bp(t[e])}}function dy(e,t){return e(t)}function py(){}var vh=!1;function gy(e,t,r){if(vh)return e(t,r);vh=!0;try{return dy(e,t,r)}finally{vh=!1,(Ko!==null||Zo!==null)&&(py(),fy())}}function dl(e,t){var r=e.stateNode;if(r===null)return null;var i=Tc(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(qe(231,t,typeof r));return r}var bf=!1;if(Oi)try{var ka={};Object.defineProperty(ka,"passive",{get:function(){bf=!0}}),window.addEventListener("test",ka,ka),window.removeEventListener("test",ka,ka)}catch{bf=!1}function Mb(e,t,r,i,a,s,u,h,f){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(m){this.onError(m)}}var Ka=!1,$u=null,Gu=!1,_f=null,Db={onError:function(e){Ka=!0,$u=e}};function Pb(e,t,r,i,a,s,u,h,f){Ka=!1,$u=null,Mb.apply(Db,arguments)}function Lb(e,t,r,i,a,s,u,h,f){if(Pb.apply(this,arguments),Ka){if(Ka){var d=$u;Ka=!1,$u=null}else throw Error(qe(198));Gu||(Gu=!0,_f=d)}}function fo(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function my(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _p(e){if(fo(e)!==e)throw Error(qe(188))}function Bb(e){var t=e.alternate;if(!t){if(t=fo(e),t===null)throw Error(qe(188));return t!==e?null:e}for(var r=e,i=t;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(i=a.return,i!==null){r=i;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return _p(a),e;if(s===i)return _p(a),t;s=s.sibling}throw Error(qe(188))}if(r.return!==i.return)r=a,i=s;else{for(var u=!1,h=a.child;h;){if(h===r){u=!0,r=a,i=s;break}if(h===i){u=!0,i=a,r=s;break}h=h.sibling}if(!u){for(h=s.child;h;){if(h===r){u=!0,r=s,i=a;break}if(h===i){u=!0,i=s,r=a;break}h=h.sibling}if(!u)throw Error(qe(189))}}if(r.alternate!==i)throw Error(qe(190))}if(r.tag!==3)throw Error(qe(188));return r.stateNode.current===r?e:t}function yy(e){return e=Bb(e),e!==null?wy(e):null}function wy(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=wy(e);if(t!==null)return t;e=e.sibling}return null}var xy=Tn.unstable_scheduleCallback,Ep=Tn.unstable_cancelCallback,jb=Tn.unstable_shouldYield,Fb=Tn.unstable_requestPaint,gr=Tn.unstable_now,Ub=Tn.unstable_getCurrentPriorityLevel,G0=Tn.unstable_ImmediatePriority,vy=Tn.unstable_UserBlockingPriority,Yu=Tn.unstable_NormalPriority,zb=Tn.unstable_LowPriority,by=Tn.unstable_IdlePriority,Sc=null,di=null;function Wb(e){if(di&&typeof di.onCommitFiberRoot=="function")try{di.onCommitFiberRoot(Sc,e,void 0,(e.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:$b,Hb=Math.log,Vb=Math.LN2;function $b(e){return e>>>=0,e===0?32:31-(Hb(e)/Vb|0)|0}var Jl=64,eu=4194304;function Ha(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xu(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,s=e.pingedLanes,u=r&268435455;if(u!==0){var h=u&~a;h!==0?i=Ha(h):(s&=u,s!==0&&(i=Ha(s)))}else u=r&~a,u!==0?i=Ha(u):s!==0&&(i=Ha(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&a)&&(a=i&-i,s=t&-t,a>=s||a===16&&(s&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Kn(t),a=1<<r,i|=e[r],t&=~a;return i}function Gb(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yb(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Kn(s),h=1<<u,f=a[u];f===-1?(!(h&r)||h&i)&&(a[u]=Gb(h,t)):f<=t&&(e.expiredLanes|=h),s&=~h}}function Ef(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _y(){var e=Jl;return Jl<<=1,!(Jl&4194240)&&(Jl=64),e}function bh(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Dl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kn(t),e[t]=r}function Xb(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Kn(r),s=1<<a;t[a]=0,i[a]=-1,e[a]=-1,r&=~s}}function Y0(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-Kn(r),a=1<<i;a&t|e[i]&t&&(e[i]|=t),r&=~a}}var Mt=0;function Ey(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Sy,X0,Ay,Cy,Iy,Sf=!1,tu=[],ms=null,ys=null,ws=null,pl=new Map,gl=new Map,us=[],qb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sp(e,t){switch(e){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":ws=null;break;case"pointerover":case"pointerout":pl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gl.delete(t.pointerId)}}function Ra(e,t,r,i,a,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[a]},t!==null&&(t=Ll(t),t!==null&&X0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Qb(e,t,r,i,a){switch(t){case"focusin":return ms=Ra(ms,e,t,r,i,a),!0;case"dragenter":return ys=Ra(ys,e,t,r,i,a),!0;case"mouseover":return ws=Ra(ws,e,t,r,i,a),!0;case"pointerover":var s=a.pointerId;return pl.set(s,Ra(pl.get(s)||null,e,t,r,i,a)),!0;case"gotpointercapture":return s=a.pointerId,gl.set(s,Ra(gl.get(s)||null,e,t,r,i,a)),!0}return!1}function Ty(e){var t=Xs(e.target);if(t!==null){var r=fo(t);if(r!==null){if(t=r.tag,t===13){if(t=my(r),t!==null){e.blockedOn=t,Iy(e.priority,function(){Ay(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Au(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Af(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);xf=i,r.target.dispatchEvent(i),xf=null}else return t=Ll(r),t!==null&&X0(t),e.blockedOn=r,!1;t.shift()}return!0}function Ap(e,t,r){Au(e)&&r.delete(t)}function Kb(){Sf=!1,ms!==null&&Au(ms)&&(ms=null),ys!==null&&Au(ys)&&(ys=null),ws!==null&&Au(ws)&&(ws=null),pl.forEach(Ap),gl.forEach(Ap)}function Ma(e,t){e.blockedOn===t&&(e.blockedOn=null,Sf||(Sf=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,Kb)))}function ml(e){function t(a){return Ma(a,e)}if(0<tu.length){Ma(tu[0],e);for(var r=1;r<tu.length;r++){var i=tu[r];i.blockedOn===e&&(i.blockedOn=null)}}for(ms!==null&&Ma(ms,e),ys!==null&&Ma(ys,e),ws!==null&&Ma(ws,e),pl.forEach(t),gl.forEach(t),r=0;r<us.length;r++)i=us[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<us.length&&(r=us[0],r.blockedOn===null);)Ty(r),r.blockedOn===null&&us.shift()}var Jo=Bi.ReactCurrentBatchConfig,qu=!0;function Zb(e,t,r,i){var a=Mt,s=Jo.transition;Jo.transition=null;try{Mt=1,q0(e,t,r,i)}finally{Mt=a,Jo.transition=s}}function Jb(e,t,r,i){var a=Mt,s=Jo.transition;Jo.transition=null;try{Mt=4,q0(e,t,r,i)}finally{Mt=a,Jo.transition=s}}function q0(e,t,r,i){if(qu){var a=Af(e,t,r,i);if(a===null)kh(e,t,i,Qu,r),Sp(e,i);else if(Qb(a,e,t,r,i))i.stopPropagation();else if(Sp(e,i),t&4&&-1<qb.indexOf(e)){for(;a!==null;){var s=Ll(a);if(s!==null&&Sy(s),s=Af(e,t,r,i),s===null&&kh(e,t,i,Qu,r),s===a)break;a=s}a!==null&&i.stopPropagation()}else kh(e,t,i,null,r)}}var Qu=null;function Af(e,t,r,i){if(Qu=null,e=$0(i),e=Xs(e),e!==null)if(t=fo(e),t===null)e=null;else if(r=t.tag,r===13){if(e=my(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qu=e,null}function Ny(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ub()){case G0:return 1;case vy:return 4;case Yu:case zb:return 16;case by:return 536870912;default:return 16}default:return 16}}var ds=null,Q0=null,Cu=null;function Oy(){if(Cu)return Cu;var e,t=Q0,r=t.length,i,a="value"in ds?ds.value:ds.textContent,s=a.length;for(e=0;e<r&&t[e]===a[e];e++);var u=r-e;for(i=1;i<=u&&t[r-i]===a[s-i];i++);return Cu=a.slice(e,1<i?1-i:void 0)}function Iu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ru(){return!0}function Cp(){return!1}function On(e){function t(r,i,a,s,u){this._reactName=r,this._targetInst=a,this.type=i,this.nativeEvent=s,this.target=u,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(r=e[h],this[h]=r?r(s):s[h]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ru:Cp,this.isPropagationStopped=Cp,this}return ar(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ru)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ru)},persist:function(){},isPersistent:ru}),t}var pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},K0=On(pa),Pl=ar({},pa,{view:0,detail:0}),e_=On(Pl),_h,Eh,Da,Ac=ar({},Pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Z0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Da&&(Da&&e.type==="mousemove"?(_h=e.screenX-Da.screenX,Eh=e.screenY-Da.screenY):Eh=_h=0,Da=e),_h)},movementY:function(e){return"movementY"in e?e.movementY:Eh}}),Ip=On(Ac),t_=ar({},Ac,{dataTransfer:0}),r_=On(t_),n_=ar({},Pl,{relatedTarget:0}),Sh=On(n_),i_=ar({},pa,{animationName:0,elapsedTime:0,pseudoElement:0}),s_=On(i_),o_=ar({},pa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),a_=On(o_),l_=ar({},pa,{data:0}),Tp=On(l_),u_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},c_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=h_[e])?!!t[e]:!1}function Z0(){return f_}var d_=ar({},Pl,{key:function(e){if(e.key){var t=u_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Iu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?c_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Z0,charCode:function(e){return e.type==="keypress"?Iu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Iu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),p_=On(d_),g_=ar({},Ac,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Np=On(g_),m_=ar({},Pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Z0}),y_=On(m_),w_=ar({},pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),x_=On(w_),v_=ar({},Ac,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),b_=On(v_),__=[9,13,27,32],J0=Oi&&"CompositionEvent"in window,Za=null;Oi&&"documentMode"in document&&(Za=document.documentMode);var E_=Oi&&"TextEvent"in window&&!Za,ky=Oi&&(!J0||Za&&8<Za&&11>=Za),Op=" ",kp=!1;function Ry(e,t){switch(e){case"keyup":return __.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function My(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fo=!1;function S_(e,t){switch(e){case"compositionend":return My(t);case"keypress":return t.which!==32?null:(kp=!0,Op);case"textInput":return e=t.data,e===Op&&kp?null:e;default:return null}}function A_(e,t){if(Fo)return e==="compositionend"||!J0&&Ry(e,t)?(e=Oy(),Cu=Q0=ds=null,Fo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ky&&t.locale!=="ko"?null:t.data;default:return null}}var C_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!C_[e.type]:t==="textarea"}function Dy(e,t,r,i){hy(i),t=Ku(t,"onChange"),0<t.length&&(r=new K0("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Ja=null,yl=null;function I_(e){$y(e,0)}function Cc(e){var t=Wo(e);if(iy(t))return e}function T_(e,t){if(e==="change")return t}var Py=!1;if(Oi){var Ah;if(Oi){var Ch="oninput"in document;if(!Ch){var Mp=document.createElement("div");Mp.setAttribute("oninput","return;"),Ch=typeof Mp.oninput=="function"}Ah=Ch}else Ah=!1;Py=Ah&&(!document.documentMode||9<document.documentMode)}function Dp(){Ja&&(Ja.detachEvent("onpropertychange",Ly),yl=Ja=null)}function Ly(e){if(e.propertyName==="value"&&Cc(yl)){var t=[];Dy(t,yl,e,$0(e)),gy(I_,t)}}function N_(e,t,r){e==="focusin"?(Dp(),Ja=t,yl=r,Ja.attachEvent("onpropertychange",Ly)):e==="focusout"&&Dp()}function O_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Cc(yl)}function k_(e,t){if(e==="click")return Cc(t)}function R_(e,t){if(e==="input"||e==="change")return Cc(t)}function M_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Jn=typeof Object.is=="function"?Object.is:M_;function wl(e,t){if(Jn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var a=r[i];if(!af.call(t,a)||!Jn(e[a],t[a]))return!1}return!0}function Pp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lp(e,t){var r=Pp(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Pp(r)}}function By(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?By(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jy(){for(var e=window,t=Vu();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Vu(e.document)}return t}function e1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function D_(e){var t=jy(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&By(r.ownerDocument.documentElement,r)){if(i!==null&&e1(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(i.start,a);i=i.end===void 0?s:Math.min(i.end,a),!e.extend&&s>i&&(a=i,i=s,s=a),a=Lp(r,s);var u=Lp(r,i);a&&u&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var P_=Oi&&"documentMode"in document&&11>=document.documentMode,Uo=null,Cf=null,el=null,If=!1;function Bp(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;If||Uo==null||Uo!==Vu(i)||(i=Uo,"selectionStart"in i&&e1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),el&&wl(el,i)||(el=i,i=Ku(Cf,"onSelect"),0<i.length&&(t=new K0("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=Uo)))}function nu(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var zo={animationend:nu("Animation","AnimationEnd"),animationiteration:nu("Animation","AnimationIteration"),animationstart:nu("Animation","AnimationStart"),transitionend:nu("Transition","TransitionEnd")},Ih={},Fy={};Oi&&(Fy=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function Ic(e){if(Ih[e])return Ih[e];if(!zo[e])return e;var t=zo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Fy)return Ih[e]=t[r];return e}var Uy=Ic("animationend"),zy=Ic("animationiteration"),Wy=Ic("animationstart"),Hy=Ic("transitionend"),Vy=new Map,jp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ts(e,t){Vy.set(e,t),ho(t,[e])}for(var Th=0;Th<jp.length;Th++){var Nh=jp[Th],L_=Nh.toLowerCase(),B_=Nh[0].toUpperCase()+Nh.slice(1);Ts(L_,"on"+B_)}Ts(Uy,"onAnimationEnd");Ts(zy,"onAnimationIteration");Ts(Wy,"onAnimationStart");Ts("dblclick","onDoubleClick");Ts("focusin","onFocus");Ts("focusout","onBlur");Ts(Hy,"onTransitionEnd");ia("onMouseEnter",["mouseout","mouseover"]);ia("onMouseLeave",["mouseout","mouseover"]);ia("onPointerEnter",["pointerout","pointerover"]);ia("onPointerLeave",["pointerout","pointerover"]);ho("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ho("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ho("onBeforeInput",["compositionend","keypress","textInput","paste"]);ho("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ho("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ho("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Va="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Va));function Fp(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,Lb(i,t,void 0,e),e.currentTarget=null}function $y(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],a=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var u=i.length-1;0<=u;u--){var h=i[u],f=h.instance,d=h.currentTarget;if(h=h.listener,f!==s&&a.isPropagationStopped())break e;Fp(a,h,d),s=f}else for(u=0;u<i.length;u++){if(h=i[u],f=h.instance,d=h.currentTarget,h=h.listener,f!==s&&a.isPropagationStopped())break e;Fp(a,h,d),s=f}}}if(Gu)throw e=_f,Gu=!1,_f=null,e}function Gt(e,t){var r=t[Rf];r===void 0&&(r=t[Rf]=new Set);var i=e+"__bubble";r.has(i)||(Gy(t,e,2,!1),r.add(i))}function Oh(e,t,r){var i=0;t&&(i|=4),Gy(r,e,i,t)}var iu="_reactListening"+Math.random().toString(36).slice(2);function xl(e){if(!e[iu]){e[iu]=!0,Jm.forEach(function(r){r!=="selectionchange"&&(j_.has(r)||Oh(r,!1,e),Oh(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[iu]||(t[iu]=!0,Oh("selectionchange",!1,t))}}function Gy(e,t,r,i){switch(Ny(t)){case 1:var a=Zb;break;case 4:a=Jb;break;default:a=q0}r=a.bind(null,t,r,e),a=void 0,!bf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function kh(e,t,r,i,a){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var u=i.tag;if(u===3||u===4){var h=i.stateNode.containerInfo;if(h===a||h.nodeType===8&&h.parentNode===a)break;if(u===4)for(u=i.return;u!==null;){var f=u.tag;if((f===3||f===4)&&(f=u.stateNode.containerInfo,f===a||f.nodeType===8&&f.parentNode===a))return;u=u.return}for(;h!==null;){if(u=Xs(h),u===null)return;if(f=u.tag,f===5||f===6){i=s=u;continue e}h=h.parentNode}}i=i.return}gy(function(){var d=s,m=$0(r),w=[];e:{var v=Vy.get(e);if(v!==void 0){var b=K0,C=e;switch(e){case"keypress":if(Iu(r)===0)break e;case"keydown":case"keyup":b=p_;break;case"focusin":C="focus",b=Sh;break;case"focusout":C="blur",b=Sh;break;case"beforeblur":case"afterblur":b=Sh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Ip;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=r_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=y_;break;case Uy:case zy:case Wy:b=s_;break;case Hy:b=x_;break;case"scroll":b=e_;break;case"wheel":b=b_;break;case"copy":case"cut":case"paste":b=a_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Np}var N=(t&4)!==0,R=!N&&e==="scroll",k=N?v!==null?v+"Capture":null:v;N=[];for(var S=d,I;S!==null;){I=S;var B=I.stateNode;if(I.tag===5&&B!==null&&(I=B,k!==null&&(B=dl(S,k),B!=null&&N.push(vl(S,B,I)))),R)break;S=S.return}0<N.length&&(v=new b(v,C,null,r,m),w.push({event:v,listeners:N}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",v&&r!==xf&&(C=r.relatedTarget||r.fromElement)&&(Xs(C)||C[ki]))break e;if((b||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,b?(C=r.relatedTarget||r.toElement,b=d,C=C?Xs(C):null,C!==null&&(R=fo(C),C!==R||C.tag!==5&&C.tag!==6)&&(C=null)):(b=null,C=d),b!==C)){if(N=Ip,B="onMouseLeave",k="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(N=Np,B="onPointerLeave",k="onPointerEnter",S="pointer"),R=b==null?v:Wo(b),I=C==null?v:Wo(C),v=new N(B,S+"leave",b,r,m),v.target=R,v.relatedTarget=I,B=null,Xs(m)===d&&(N=new N(k,S+"enter",C,r,m),N.target=I,N.relatedTarget=R,B=N),R=B,b&&C)t:{for(N=b,k=C,S=0,I=N;I;I=No(I))S++;for(I=0,B=k;B;B=No(B))I++;for(;0<S-I;)N=No(N),S--;for(;0<I-S;)k=No(k),I--;for(;S--;){if(N===k||k!==null&&N===k.alternate)break t;N=No(N),k=No(k)}N=null}else N=null;b!==null&&Up(w,v,b,N,!1),C!==null&&R!==null&&Up(w,R,C,N,!0)}}e:{if(v=d?Wo(d):window,b=v.nodeName&&v.nodeName.toLowerCase(),b==="select"||b==="input"&&v.type==="file")var U=T_;else if(Rp(v))if(Py)U=R_;else{U=O_;var L=N_}else(b=v.nodeName)&&b.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(U=k_);if(U&&(U=U(e,d))){Dy(w,U,r,m);break e}L&&L(e,v,d),e==="focusout"&&(L=v._wrapperState)&&L.controlled&&v.type==="number"&&pf(v,"number",v.value)}switch(L=d?Wo(d):window,e){case"focusin":(Rp(L)||L.contentEditable==="true")&&(Uo=L,Cf=d,el=null);break;case"focusout":el=Cf=Uo=null;break;case"mousedown":If=!0;break;case"contextmenu":case"mouseup":case"dragend":If=!1,Bp(w,r,m);break;case"selectionchange":if(P_)break;case"keydown":case"keyup":Bp(w,r,m)}var P;if(J0)e:{switch(e){case"compositionstart":var W="onCompositionStart";break e;case"compositionend":W="onCompositionEnd";break e;case"compositionupdate":W="onCompositionUpdate";break e}W=void 0}else Fo?Ry(e,r)&&(W="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(W="onCompositionStart");W&&(ky&&r.locale!=="ko"&&(Fo||W!=="onCompositionStart"?W==="onCompositionEnd"&&Fo&&(P=Oy()):(ds=m,Q0="value"in ds?ds.value:ds.textContent,Fo=!0)),L=Ku(d,W),0<L.length&&(W=new Tp(W,e,null,r,m),w.push({event:W,listeners:L}),P?W.data=P:(P=My(r),P!==null&&(W.data=P)))),(P=E_?S_(e,r):A_(e,r))&&(d=Ku(d,"onBeforeInput"),0<d.length&&(m=new Tp("onBeforeInput","beforeinput",null,r,m),w.push({event:m,listeners:d}),m.data=P))}$y(w,t)})}function vl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ku(e,t){for(var r=t+"Capture",i=[];e!==null;){var a=e,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=dl(e,r),s!=null&&i.unshift(vl(e,s,a)),s=dl(e,t),s!=null&&i.push(vl(e,s,a))),e=e.return}return i}function No(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Up(e,t,r,i,a){for(var s=t._reactName,u=[];r!==null&&r!==i;){var h=r,f=h.alternate,d=h.stateNode;if(f!==null&&f===i)break;h.tag===5&&d!==null&&(h=d,a?(f=dl(r,s),f!=null&&u.unshift(vl(r,f,h))):a||(f=dl(r,s),f!=null&&u.push(vl(r,f,h)))),r=r.return}u.length!==0&&e.push({event:t,listeners:u})}var F_=/\r\n?/g,U_=/\u0000|\uFFFD/g;function zp(e){return(typeof e=="string"?e:""+e).replace(F_,`
`).replace(U_,"")}function su(e,t,r){if(t=zp(t),zp(e)!==t&&r)throw Error(qe(425))}function Zu(){}var Tf=null,Nf=null;function Of(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kf=typeof setTimeout=="function"?setTimeout:void 0,z_=typeof clearTimeout=="function"?clearTimeout:void 0,Wp=typeof Promise=="function"?Promise:void 0,W_=typeof queueMicrotask=="function"?queueMicrotask:typeof Wp<"u"?function(e){return Wp.resolve(null).then(e).catch(H_)}:kf;function H_(e){setTimeout(function(){throw e})}function Rh(e,t){var r=t,i=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(i===0){e.removeChild(a),ml(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=a}while(r);ml(t)}function xs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Hp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ga=Math.random().toString(36).slice(2),ci="__reactFiber$"+ga,bl="__reactProps$"+ga,ki="__reactContainer$"+ga,Rf="__reactEvents$"+ga,V_="__reactListeners$"+ga,$_="__reactHandles$"+ga;function Xs(e){var t=e[ci];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ki]||r[ci]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Hp(e);e!==null;){if(r=e[ci])return r;e=Hp(e)}return t}e=r,r=e.parentNode}return null}function Ll(e){return e=e[ci]||e[ki],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(qe(33))}function Tc(e){return e[bl]||null}var Mf=[],Ho=-1;function Ns(e){return{current:e}}function qt(e){0>Ho||(e.current=Mf[Ho],Mf[Ho]=null,Ho--)}function Vt(e,t){Ho++,Mf[Ho]=e.current,e.current=t}var Cs={},Qr=Ns(Cs),gn=Ns(!1),so=Cs;function sa(e,t){var r=e.type.contextTypes;if(!r)return Cs;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mn(e){return e=e.childContextTypes,e!=null}function Ju(){qt(gn),qt(Qr)}function Vp(e,t,r){if(Qr.current!==Cs)throw Error(qe(168));Vt(Qr,t),Vt(gn,r)}function Yy(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(qe(108,Nb(e)||"Unknown",a));return ar({},r,i)}function ec(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,so=Qr.current,Vt(Qr,e),Vt(gn,gn.current),!0}function $p(e,t,r){var i=e.stateNode;if(!i)throw Error(qe(169));r?(e=Yy(e,t,so),i.__reactInternalMemoizedMergedChildContext=e,qt(gn),qt(Qr),Vt(Qr,e)):qt(gn),Vt(gn,r)}var Si=null,Nc=!1,Mh=!1;function Xy(e){Si===null?Si=[e]:Si.push(e)}function G_(e){Nc=!0,Xy(e)}function Os(){if(!Mh&&Si!==null){Mh=!0;var e=0,t=Mt;try{var r=Si;for(Mt=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Si=null,Nc=!1}catch(a){throw Si!==null&&(Si=Si.slice(e+1)),xy(G0,Os),a}finally{Mt=t,Mh=!1}}return null}var Vo=[],$o=0,tc=null,rc=0,Pn=[],Ln=0,oo=null,Ci=1,Ii="";function Hs(e,t){Vo[$o++]=rc,Vo[$o++]=tc,tc=e,rc=t}function qy(e,t,r){Pn[Ln++]=Ci,Pn[Ln++]=Ii,Pn[Ln++]=oo,oo=e;var i=Ci;e=Ii;var a=32-Kn(i)-1;i&=~(1<<a),r+=1;var s=32-Kn(t)+a;if(30<s){var u=a-a%5;s=(i&(1<<u)-1).toString(32),i>>=u,a-=u,Ci=1<<32-Kn(t)+a|r<<a|i,Ii=s+e}else Ci=1<<s|r<<a|i,Ii=e}function t1(e){e.return!==null&&(Hs(e,1),qy(e,1,0))}function r1(e){for(;e===tc;)tc=Vo[--$o],Vo[$o]=null,rc=Vo[--$o],Vo[$o]=null;for(;e===oo;)oo=Pn[--Ln],Pn[Ln]=null,Ii=Pn[--Ln],Pn[Ln]=null,Ci=Pn[--Ln],Pn[Ln]=null}var In=null,Cn=null,er=!1,Qn=null;function Qy(e,t){var r=Bn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Gp(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,In=e,Cn=xs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,In=e,Cn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=oo!==null?{id:Ci,overflow:Ii}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Bn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,In=e,Cn=null,!0):!1;default:return!1}}function Df(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Pf(e){if(er){var t=Cn;if(t){var r=t;if(!Gp(e,t)){if(Df(e))throw Error(qe(418));t=xs(r.nextSibling);var i=In;t&&Gp(e,t)?Qy(i,r):(e.flags=e.flags&-4097|2,er=!1,In=e)}}else{if(Df(e))throw Error(qe(418));e.flags=e.flags&-4097|2,er=!1,In=e}}}function Yp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;In=e}function ou(e){if(e!==In)return!1;if(!er)return Yp(e),er=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Of(e.type,e.memoizedProps)),t&&(t=Cn)){if(Df(e))throw Ky(),Error(qe(418));for(;t;)Qy(e,t),t=xs(t.nextSibling)}if(Yp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(qe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Cn=xs(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Cn=null}}else Cn=In?xs(e.stateNode.nextSibling):null;return!0}function Ky(){for(var e=Cn;e;)e=xs(e.nextSibling)}function oa(){Cn=In=null,er=!1}function n1(e){Qn===null?Qn=[e]:Qn.push(e)}var Y_=Bi.ReactCurrentBatchConfig;function Pa(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(qe(309));var i=r.stateNode}if(!i)throw Error(qe(147,e));var a=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(u){var h=a.refs;u===null?delete h[s]:h[s]=u},t._stringRef=s,t)}if(typeof e!="string")throw Error(qe(284));if(!r._owner)throw Error(qe(290,e))}return e}function au(e,t){throw e=Object.prototype.toString.call(t),Error(qe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xp(e){var t=e._init;return t(e._payload)}function Zy(e){function t(k,S){if(e){var I=k.deletions;I===null?(k.deletions=[S],k.flags|=16):I.push(S)}}function r(k,S){if(!e)return null;for(;S!==null;)t(k,S),S=S.sibling;return null}function i(k,S){for(k=new Map;S!==null;)S.key!==null?k.set(S.key,S):k.set(S.index,S),S=S.sibling;return k}function a(k,S){return k=Es(k,S),k.index=0,k.sibling=null,k}function s(k,S,I){return k.index=I,e?(I=k.alternate,I!==null?(I=I.index,I<S?(k.flags|=2,S):I):(k.flags|=2,S)):(k.flags|=1048576,S)}function u(k){return e&&k.alternate===null&&(k.flags|=2),k}function h(k,S,I,B){return S===null||S.tag!==6?(S=Uh(I,k.mode,B),S.return=k,S):(S=a(S,I),S.return=k,S)}function f(k,S,I,B){var U=I.type;return U===jo?m(k,S,I.props.children,B,I.key):S!==null&&(S.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===os&&Xp(U)===S.type)?(B=a(S,I.props),B.ref=Pa(k,S,I),B.return=k,B):(B=Du(I.type,I.key,I.props,null,k.mode,B),B.ref=Pa(k,S,I),B.return=k,B)}function d(k,S,I,B){return S===null||S.tag!==4||S.stateNode.containerInfo!==I.containerInfo||S.stateNode.implementation!==I.implementation?(S=zh(I,k.mode,B),S.return=k,S):(S=a(S,I.children||[]),S.return=k,S)}function m(k,S,I,B,U){return S===null||S.tag!==7?(S=to(I,k.mode,B,U),S.return=k,S):(S=a(S,I),S.return=k,S)}function w(k,S,I){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Uh(""+S,k.mode,I),S.return=k,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ql:return I=Du(S.type,S.key,S.props,null,k.mode,I),I.ref=Pa(k,null,S),I.return=k,I;case Bo:return S=zh(S,k.mode,I),S.return=k,S;case os:var B=S._init;return w(k,B(S._payload),I)}if(Wa(S)||Oa(S))return S=to(S,k.mode,I,null),S.return=k,S;au(k,S)}return null}function v(k,S,I,B){var U=S!==null?S.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return U!==null?null:h(k,S,""+I,B);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Ql:return I.key===U?f(k,S,I,B):null;case Bo:return I.key===U?d(k,S,I,B):null;case os:return U=I._init,v(k,S,U(I._payload),B)}if(Wa(I)||Oa(I))return U!==null?null:m(k,S,I,B,null);au(k,I)}return null}function b(k,S,I,B,U){if(typeof B=="string"&&B!==""||typeof B=="number")return k=k.get(I)||null,h(S,k,""+B,U);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Ql:return k=k.get(B.key===null?I:B.key)||null,f(S,k,B,U);case Bo:return k=k.get(B.key===null?I:B.key)||null,d(S,k,B,U);case os:var L=B._init;return b(k,S,I,L(B._payload),U)}if(Wa(B)||Oa(B))return k=k.get(I)||null,m(S,k,B,U,null);au(S,B)}return null}function C(k,S,I,B){for(var U=null,L=null,P=S,W=S=0,q=null;P!==null&&W<I.length;W++){P.index>W?(q=P,P=null):q=P.sibling;var pe=v(k,P,I[W],B);if(pe===null){P===null&&(P=q);break}e&&P&&pe.alternate===null&&t(k,P),S=s(pe,S,W),L===null?U=pe:L.sibling=pe,L=pe,P=q}if(W===I.length)return r(k,P),er&&Hs(k,W),U;if(P===null){for(;W<I.length;W++)P=w(k,I[W],B),P!==null&&(S=s(P,S,W),L===null?U=P:L.sibling=P,L=P);return er&&Hs(k,W),U}for(P=i(k,P);W<I.length;W++)q=b(P,k,W,I[W],B),q!==null&&(e&&q.alternate!==null&&P.delete(q.key===null?W:q.key),S=s(q,S,W),L===null?U=q:L.sibling=q,L=q);return e&&P.forEach(function(Ae){return t(k,Ae)}),er&&Hs(k,W),U}function N(k,S,I,B){var U=Oa(I);if(typeof U!="function")throw Error(qe(150));if(I=U.call(I),I==null)throw Error(qe(151));for(var L=U=null,P=S,W=S=0,q=null,pe=I.next();P!==null&&!pe.done;W++,pe=I.next()){P.index>W?(q=P,P=null):q=P.sibling;var Ae=v(k,P,pe.value,B);if(Ae===null){P===null&&(P=q);break}e&&P&&Ae.alternate===null&&t(k,P),S=s(Ae,S,W),L===null?U=Ae:L.sibling=Ae,L=Ae,P=q}if(pe.done)return r(k,P),er&&Hs(k,W),U;if(P===null){for(;!pe.done;W++,pe=I.next())pe=w(k,pe.value,B),pe!==null&&(S=s(pe,S,W),L===null?U=pe:L.sibling=pe,L=pe);return er&&Hs(k,W),U}for(P=i(k,P);!pe.done;W++,pe=I.next())pe=b(P,k,W,pe.value,B),pe!==null&&(e&&pe.alternate!==null&&P.delete(pe.key===null?W:pe.key),S=s(pe,S,W),L===null?U=pe:L.sibling=pe,L=pe);return e&&P.forEach(function(H){return t(k,H)}),er&&Hs(k,W),U}function R(k,S,I,B){if(typeof I=="object"&&I!==null&&I.type===jo&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Ql:e:{for(var U=I.key,L=S;L!==null;){if(L.key===U){if(U=I.type,U===jo){if(L.tag===7){r(k,L.sibling),S=a(L,I.props.children),S.return=k,k=S;break e}}else if(L.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===os&&Xp(U)===L.type){r(k,L.sibling),S=a(L,I.props),S.ref=Pa(k,L,I),S.return=k,k=S;break e}r(k,L);break}else t(k,L);L=L.sibling}I.type===jo?(S=to(I.props.children,k.mode,B,I.key),S.return=k,k=S):(B=Du(I.type,I.key,I.props,null,k.mode,B),B.ref=Pa(k,S,I),B.return=k,k=B)}return u(k);case Bo:e:{for(L=I.key;S!==null;){if(S.key===L)if(S.tag===4&&S.stateNode.containerInfo===I.containerInfo&&S.stateNode.implementation===I.implementation){r(k,S.sibling),S=a(S,I.children||[]),S.return=k,k=S;break e}else{r(k,S);break}else t(k,S);S=S.sibling}S=zh(I,k.mode,B),S.return=k,k=S}return u(k);case os:return L=I._init,R(k,S,L(I._payload),B)}if(Wa(I))return C(k,S,I,B);if(Oa(I))return N(k,S,I,B);au(k,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,S!==null&&S.tag===6?(r(k,S.sibling),S=a(S,I),S.return=k,k=S):(r(k,S),S=Uh(I,k.mode,B),S.return=k,k=S),u(k)):r(k,S)}return R}var aa=Zy(!0),Jy=Zy(!1),nc=Ns(null),ic=null,Go=null,i1=null;function s1(){i1=Go=ic=null}function o1(e){var t=nc.current;qt(nc),e._currentValue=t}function Lf(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function ea(e,t){ic=e,i1=Go=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(pn=!0),e.firstContext=null)}function Fn(e){var t=e._currentValue;if(i1!==e)if(e={context:e,memoizedValue:t,next:null},Go===null){if(ic===null)throw Error(qe(308));Go=e,ic.dependencies={lanes:0,firstContext:e}}else Go=Go.next=e;return t}var qs=null;function a1(e){qs===null?qs=[e]:qs.push(e)}function ew(e,t,r,i){var a=t.interleaved;return a===null?(r.next=r,a1(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ri(e,i)}function Ri(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var as=!1;function l1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ni(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vs(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,At&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,Ri(e,r)}return a=i.interleaved,a===null?(t.next=t,a1(i)):(t.next=a.next,a.next=t),i.interleaved=t,Ri(e,r)}function Tu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Y0(e,r)}}function qp(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var u={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=u:s=s.next=u,r=r.next}while(r!==null);s===null?a=s=t:s=s.next=t}else a=s=t;r={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function sc(e,t,r,i){var a=e.updateQueue;as=!1;var s=a.firstBaseUpdate,u=a.lastBaseUpdate,h=a.shared.pending;if(h!==null){a.shared.pending=null;var f=h,d=f.next;f.next=null,u===null?s=d:u.next=d,u=f;var m=e.alternate;m!==null&&(m=m.updateQueue,h=m.lastBaseUpdate,h!==u&&(h===null?m.firstBaseUpdate=d:h.next=d,m.lastBaseUpdate=f))}if(s!==null){var w=a.baseState;u=0,m=d=f=null,h=s;do{var v=h.lane,b=h.eventTime;if((i&v)===v){m!==null&&(m=m.next={eventTime:b,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var C=e,N=h;switch(v=t,b=r,N.tag){case 1:if(C=N.payload,typeof C=="function"){w=C.call(b,w,v);break e}w=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=N.payload,v=typeof C=="function"?C.call(b,w,v):C,v==null)break e;w=ar({},w,v);break e;case 2:as=!0}}h.callback!==null&&h.lane!==0&&(e.flags|=64,v=a.effects,v===null?a.effects=[h]:v.push(h))}else b={eventTime:b,lane:v,tag:h.tag,payload:h.payload,callback:h.callback,next:null},m===null?(d=m=b,f=w):m=m.next=b,u|=v;if(h=h.next,h===null){if(h=a.shared.pending,h===null)break;v=h,h=v.next,v.next=null,a.lastBaseUpdate=v,a.shared.pending=null}}while(!0);if(m===null&&(f=w),a.baseState=f,a.firstBaseUpdate=d,a.lastBaseUpdate=m,t=a.shared.interleaved,t!==null){a=t;do u|=a.lane,a=a.next;while(a!==t)}else s===null&&(a.shared.lanes=0);lo|=u,e.lanes=u,e.memoizedState=w}}function Qp(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=r,typeof a!="function")throw Error(qe(191,a));a.call(i)}}}var Bl={},pi=Ns(Bl),_l=Ns(Bl),El=Ns(Bl);function Qs(e){if(e===Bl)throw Error(qe(174));return e}function u1(e,t){switch(Vt(El,t),Vt(_l,e),Vt(pi,Bl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:mf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=mf(t,e)}qt(pi),Vt(pi,t)}function la(){qt(pi),qt(_l),qt(El)}function rw(e){Qs(El.current);var t=Qs(pi.current),r=mf(t,e.type);t!==r&&(Vt(_l,e),Vt(pi,r))}function c1(e){_l.current===e&&(qt(pi),qt(_l))}var ir=Ns(0);function oc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Dh=[];function h1(){for(var e=0;e<Dh.length;e++)Dh[e]._workInProgressVersionPrimary=null;Dh.length=0}var Nu=Bi.ReactCurrentDispatcher,Ph=Bi.ReactCurrentBatchConfig,ao=0,sr=null,_r=null,Nr=null,ac=!1,tl=!1,Sl=0,X_=0;function Gr(){throw Error(qe(321))}function f1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Jn(e[r],t[r]))return!1;return!0}function d1(e,t,r,i,a,s){if(ao=s,sr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Nu.current=e===null||e.memoizedState===null?Z_:J_,e=r(i,a),tl){s=0;do{if(tl=!1,Sl=0,25<=s)throw Error(qe(301));s+=1,Nr=_r=null,t.updateQueue=null,Nu.current=eE,e=r(i,a)}while(tl)}if(Nu.current=lc,t=_r!==null&&_r.next!==null,ao=0,Nr=_r=sr=null,ac=!1,t)throw Error(qe(300));return e}function p1(){var e=Sl!==0;return Sl=0,e}function li(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nr===null?sr.memoizedState=Nr=e:Nr=Nr.next=e,Nr}function Un(){if(_r===null){var e=sr.alternate;e=e!==null?e.memoizedState:null}else e=_r.next;var t=Nr===null?sr.memoizedState:Nr.next;if(t!==null)Nr=t,_r=e;else{if(e===null)throw Error(qe(310));_r=e,e={memoizedState:_r.memoizedState,baseState:_r.baseState,baseQueue:_r.baseQueue,queue:_r.queue,next:null},Nr===null?sr.memoizedState=Nr=e:Nr=Nr.next=e}return Nr}function Al(e,t){return typeof t=="function"?t(e):t}function Lh(e){var t=Un(),r=t.queue;if(r===null)throw Error(qe(311));r.lastRenderedReducer=e;var i=_r,a=i.baseQueue,s=r.pending;if(s!==null){if(a!==null){var u=a.next;a.next=s.next,s.next=u}i.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,i=i.baseState;var h=u=null,f=null,d=s;do{var m=d.lane;if((ao&m)===m)f!==null&&(f=f.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:e(i,d.action);else{var w={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};f===null?(h=f=w,u=i):f=f.next=w,sr.lanes|=m,lo|=m}d=d.next}while(d!==null&&d!==s);f===null?u=i:f.next=h,Jn(i,t.memoizedState)||(pn=!0),t.memoizedState=i,t.baseState=u,t.baseQueue=f,r.lastRenderedState=i}if(e=r.interleaved,e!==null){a=e;do s=a.lane,sr.lanes|=s,lo|=s,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Bh(e){var t=Un(),r=t.queue;if(r===null)throw Error(qe(311));r.lastRenderedReducer=e;var i=r.dispatch,a=r.pending,s=t.memoizedState;if(a!==null){r.pending=null;var u=a=a.next;do s=e(s,u.action),u=u.next;while(u!==a);Jn(s,t.memoizedState)||(pn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,i]}function nw(){}function iw(e,t){var r=sr,i=Un(),a=t(),s=!Jn(i.memoizedState,a);if(s&&(i.memoizedState=a,pn=!0),i=i.queue,g1(aw.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||Nr!==null&&Nr.memoizedState.tag&1){if(r.flags|=2048,Cl(9,ow.bind(null,r,i,a,t),void 0,null),Or===null)throw Error(qe(349));ao&30||sw(r,t,a)}return a}function sw(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=sr.updateQueue,t===null?(t={lastEffect:null,stores:null},sr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function ow(e,t,r,i){t.value=r,t.getSnapshot=i,lw(t)&&uw(e)}function aw(e,t,r){return r(function(){lw(t)&&uw(e)})}function lw(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Jn(e,r)}catch{return!0}}function uw(e){var t=Ri(e,1);t!==null&&Zn(t,e,1,-1)}function Kp(e){var t=li();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:e},t.queue=e,e=e.dispatch=K_.bind(null,sr,e),[t.memoizedState,e]}function Cl(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=sr.updateQueue,t===null?(t={lastEffect:null,stores:null},sr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function cw(){return Un().memoizedState}function Ou(e,t,r,i){var a=li();sr.flags|=e,a.memoizedState=Cl(1|t,r,void 0,i===void 0?null:i)}function Oc(e,t,r,i){var a=Un();i=i===void 0?null:i;var s=void 0;if(_r!==null){var u=_r.memoizedState;if(s=u.destroy,i!==null&&f1(i,u.deps)){a.memoizedState=Cl(t,r,s,i);return}}sr.flags|=e,a.memoizedState=Cl(1|t,r,s,i)}function Zp(e,t){return Ou(8390656,8,e,t)}function g1(e,t){return Oc(2048,8,e,t)}function hw(e,t){return Oc(4,2,e,t)}function fw(e,t){return Oc(4,4,e,t)}function dw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pw(e,t,r){return r=r!=null?r.concat([e]):null,Oc(4,4,dw.bind(null,t,e),r)}function m1(){}function gw(e,t){var r=Un();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&f1(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function mw(e,t){var r=Un();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&f1(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function yw(e,t,r){return ao&21?(Jn(r,t)||(r=_y(),sr.lanes|=r,lo|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,pn=!0),e.memoizedState=r)}function q_(e,t){var r=Mt;Mt=r!==0&&4>r?r:4,e(!0);var i=Ph.transition;Ph.transition={};try{e(!1),t()}finally{Mt=r,Ph.transition=i}}function ww(){return Un().memoizedState}function Q_(e,t,r){var i=_s(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},xw(e))vw(t,r);else if(r=ew(e,t,r,i),r!==null){var a=rn();Zn(r,e,i,a),bw(r,t,i)}}function K_(e,t,r){var i=_s(e),a={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(xw(e))vw(t,a);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var u=t.lastRenderedState,h=s(u,r);if(a.hasEagerState=!0,a.eagerState=h,Jn(h,u)){var f=t.interleaved;f===null?(a.next=a,a1(t)):(a.next=f.next,f.next=a),t.interleaved=a;return}}catch{}finally{}r=ew(e,t,a,i),r!==null&&(a=rn(),Zn(r,e,i,a),bw(r,t,i))}}function xw(e){var t=e.alternate;return e===sr||t!==null&&t===sr}function vw(e,t){tl=ac=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function bw(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Y0(e,r)}}var lc={readContext:Fn,useCallback:Gr,useContext:Gr,useEffect:Gr,useImperativeHandle:Gr,useInsertionEffect:Gr,useLayoutEffect:Gr,useMemo:Gr,useReducer:Gr,useRef:Gr,useState:Gr,useDebugValue:Gr,useDeferredValue:Gr,useTransition:Gr,useMutableSource:Gr,useSyncExternalStore:Gr,useId:Gr,unstable_isNewReconciler:!1},Z_={readContext:Fn,useCallback:function(e,t){return li().memoizedState=[e,t===void 0?null:t],e},useContext:Fn,useEffect:Zp,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ou(4194308,4,dw.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ou(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ou(4,2,e,t)},useMemo:function(e,t){var r=li();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=li();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Q_.bind(null,sr,e),[i.memoizedState,e]},useRef:function(e){var t=li();return e={current:e},t.memoizedState=e},useState:Kp,useDebugValue:m1,useDeferredValue:function(e){return li().memoizedState=e},useTransition:function(){var e=Kp(!1),t=e[0];return e=q_.bind(null,e[1]),li().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=sr,a=li();if(er){if(r===void 0)throw Error(qe(407));r=r()}else{if(r=t(),Or===null)throw Error(qe(349));ao&30||sw(i,t,r)}a.memoizedState=r;var s={value:r,getSnapshot:t};return a.queue=s,Zp(aw.bind(null,i,s,e),[e]),i.flags|=2048,Cl(9,ow.bind(null,i,s,r,t),void 0,null),r},useId:function(){var e=li(),t=Or.identifierPrefix;if(er){var r=Ii,i=Ci;r=(i&~(1<<32-Kn(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Sl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=X_++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},J_={readContext:Fn,useCallback:gw,useContext:Fn,useEffect:g1,useImperativeHandle:pw,useInsertionEffect:hw,useLayoutEffect:fw,useMemo:mw,useReducer:Lh,useRef:cw,useState:function(){return Lh(Al)},useDebugValue:m1,useDeferredValue:function(e){var t=Un();return yw(t,_r.memoizedState,e)},useTransition:function(){var e=Lh(Al)[0],t=Un().memoizedState;return[e,t]},useMutableSource:nw,useSyncExternalStore:iw,useId:ww,unstable_isNewReconciler:!1},eE={readContext:Fn,useCallback:gw,useContext:Fn,useEffect:g1,useImperativeHandle:pw,useInsertionEffect:hw,useLayoutEffect:fw,useMemo:mw,useReducer:Bh,useRef:cw,useState:function(){return Bh(Al)},useDebugValue:m1,useDeferredValue:function(e){var t=Un();return _r===null?t.memoizedState=e:yw(t,_r.memoizedState,e)},useTransition:function(){var e=Bh(Al)[0],t=Un().memoizedState;return[e,t]},useMutableSource:nw,useSyncExternalStore:iw,useId:ww,unstable_isNewReconciler:!1};function Gn(e,t){if(e&&e.defaultProps){t=ar({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Bf(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:ar({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var kc={isMounted:function(e){return(e=e._reactInternals)?fo(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=rn(),a=_s(e),s=Ni(i,a);s.payload=t,r!=null&&(s.callback=r),t=vs(e,s,a),t!==null&&(Zn(t,e,a,i),Tu(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=rn(),a=_s(e),s=Ni(i,a);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=vs(e,s,a),t!==null&&(Zn(t,e,a,i),Tu(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=rn(),i=_s(e),a=Ni(r,i);a.tag=2,t!=null&&(a.callback=t),t=vs(e,a,i),t!==null&&(Zn(t,e,i,r),Tu(t,e,i))}};function Jp(e,t,r,i,a,s,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,u):t.prototype&&t.prototype.isPureReactComponent?!wl(r,i)||!wl(a,s):!0}function _w(e,t,r){var i=!1,a=Cs,s=t.contextType;return typeof s=="object"&&s!==null?s=Fn(s):(a=mn(t)?so:Qr.current,i=t.contextTypes,s=(i=i!=null)?sa(e,a):Cs),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=kc,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function eg(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&kc.enqueueReplaceState(t,t.state,null)}function jf(e,t,r,i){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},l1(e);var s=t.contextType;typeof s=="object"&&s!==null?a.context=Fn(s):(s=mn(t)?so:Qr.current,a.context=sa(e,s)),a.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Bf(e,t,s,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&kc.enqueueReplaceState(a,a.state,null),sc(e,r,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ua(e,t){try{var r="",i=t;do r+=Tb(i),i=i.return;while(i);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:a,digest:null}}function jh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ff(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var tE=typeof WeakMap=="function"?WeakMap:Map;function Ew(e,t,r){r=Ni(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){cc||(cc=!0,qf=i),Ff(e,t)},r}function Sw(e,t,r){r=Ni(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;r.payload=function(){return i(a)},r.callback=function(){Ff(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Ff(e,t),typeof i!="function"&&(bs===null?bs=new Set([this]):bs.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),r}function tg(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new tE;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(r)||(a.add(r),e=gE.bind(null,e,t,r),t.then(e,e))}function rg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ng(e,t,r,i,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ni(-1,1),t.tag=2,vs(r,t,1))),r.lanes|=1),e)}var rE=Bi.ReactCurrentOwner,pn=!1;function en(e,t,r,i){t.child=e===null?Jy(t,null,r,i):aa(t,e.child,r,i)}function ig(e,t,r,i,a){r=r.render;var s=t.ref;return ea(t,a),i=d1(e,t,r,i,s,a),r=p1(),e!==null&&!pn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Mi(e,t,a)):(er&&r&&t1(t),t.flags|=1,en(e,t,i,a),t.child)}function sg(e,t,r,i,a){if(e===null){var s=r.type;return typeof s=="function"&&!S1(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,Aw(e,t,s,i,a)):(e=Du(r.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&a)){var u=s.memoizedProps;if(r=r.compare,r=r!==null?r:wl,r(u,i)&&e.ref===t.ref)return Mi(e,t,a)}return t.flags|=1,e=Es(s,i),e.ref=t.ref,e.return=t,t.child=e}function Aw(e,t,r,i,a){if(e!==null){var s=e.memoizedProps;if(wl(s,i)&&e.ref===t.ref)if(pn=!1,t.pendingProps=i=s,(e.lanes&a)!==0)e.flags&131072&&(pn=!0);else return t.lanes=e.lanes,Mi(e,t,a)}return Uf(e,t,r,i,a)}function Cw(e,t,r){var i=t.pendingProps,a=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(Xo,Sn),Sn|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Vt(Xo,Sn),Sn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,Vt(Xo,Sn),Sn|=i}else s!==null?(i=s.baseLanes|r,t.memoizedState=null):i=r,Vt(Xo,Sn),Sn|=i;return en(e,t,a,r),t.child}function Iw(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Uf(e,t,r,i,a){var s=mn(r)?so:Qr.current;return s=sa(t,s),ea(t,a),r=d1(e,t,r,i,s,a),i=p1(),e!==null&&!pn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Mi(e,t,a)):(er&&i&&t1(t),t.flags|=1,en(e,t,r,a),t.child)}function og(e,t,r,i,a){if(mn(r)){var s=!0;ec(t)}else s=!1;if(ea(t,a),t.stateNode===null)ku(e,t),_w(t,r,i),jf(t,r,i,a),i=!0;else if(e===null){var u=t.stateNode,h=t.memoizedProps;u.props=h;var f=u.context,d=r.contextType;typeof d=="object"&&d!==null?d=Fn(d):(d=mn(r)?so:Qr.current,d=sa(t,d));var m=r.getDerivedStateFromProps,w=typeof m=="function"||typeof u.getSnapshotBeforeUpdate=="function";w||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==i||f!==d)&&eg(t,u,i,d),as=!1;var v=t.memoizedState;u.state=v,sc(t,i,u,a),f=t.memoizedState,h!==i||v!==f||gn.current||as?(typeof m=="function"&&(Bf(t,r,m,i),f=t.memoizedState),(h=as||Jp(t,r,h,i,v,f,d))?(w||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=f),u.props=i,u.state=f,u.context=d,i=h):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{u=t.stateNode,tw(e,t),h=t.memoizedProps,d=t.type===t.elementType?h:Gn(t.type,h),u.props=d,w=t.pendingProps,v=u.context,f=r.contextType,typeof f=="object"&&f!==null?f=Fn(f):(f=mn(r)?so:Qr.current,f=sa(t,f));var b=r.getDerivedStateFromProps;(m=typeof b=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==w||v!==f)&&eg(t,u,i,f),as=!1,v=t.memoizedState,u.state=v,sc(t,i,u,a);var C=t.memoizedState;h!==w||v!==C||gn.current||as?(typeof b=="function"&&(Bf(t,r,b,i),C=t.memoizedState),(d=as||Jp(t,r,d,i,v,C,f)||!1)?(m||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,C,f),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,C,f)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=C),u.props=i,u.state=C,u.context=f,i=d):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),i=!1)}return zf(e,t,r,i,s,a)}function zf(e,t,r,i,a,s){Iw(e,t);var u=(t.flags&128)!==0;if(!i&&!u)return a&&$p(t,r,!1),Mi(e,t,s);i=t.stateNode,rE.current=t;var h=u&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&u?(t.child=aa(t,e.child,null,s),t.child=aa(t,null,h,s)):en(e,t,h,s),t.memoizedState=i.state,a&&$p(t,r,!0),t.child}function Tw(e){var t=e.stateNode;t.pendingContext?Vp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vp(e,t.context,!1),u1(e,t.containerInfo)}function ag(e,t,r,i,a){return oa(),n1(a),t.flags|=256,en(e,t,r,i),t.child}var Wf={dehydrated:null,treeContext:null,retryLane:0};function Hf(e){return{baseLanes:e,cachePool:null,transitions:null}}function Nw(e,t,r){var i=t.pendingProps,a=ir.current,s=!1,u=(t.flags&128)!==0,h;if((h=u)||(h=e!==null&&e.memoizedState===null?!1:(a&2)!==0),h?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Vt(ir,a&1),e===null)return Pf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=u):s=Dc(u,i,0,null),e=to(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Hf(r),t.memoizedState=Wf,e):y1(t,u));if(a=e.memoizedState,a!==null&&(h=a.dehydrated,h!==null))return nE(e,t,u,i,h,a,r);if(s){s=i.fallback,u=t.mode,a=e.child,h=a.sibling;var f={mode:"hidden",children:i.children};return!(u&1)&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=f,t.deletions=null):(i=Es(a,f),i.subtreeFlags=a.subtreeFlags&14680064),h!==null?s=Es(h,s):(s=to(s,u,r,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=e.child.memoizedState,u=u===null?Hf(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~r,t.memoizedState=Wf,i}return s=e.child,e=s.sibling,i=Es(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function y1(e,t){return t=Dc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function lu(e,t,r,i){return i!==null&&n1(i),aa(t,e.child,null,r),e=y1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nE(e,t,r,i,a,s,u){if(r)return t.flags&256?(t.flags&=-257,i=jh(Error(qe(422))),lu(e,t,u,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,a=t.mode,i=Dc({mode:"visible",children:i.children},a,0,null),s=to(s,a,u,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&aa(t,e.child,null,u),t.child.memoizedState=Hf(u),t.memoizedState=Wf,s);if(!(t.mode&1))return lu(e,t,u,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var h=i.dgst;return i=h,s=Error(qe(419)),i=jh(s,i,void 0),lu(e,t,u,i)}if(h=(u&e.childLanes)!==0,pn||h){if(i=Or,i!==null){switch(u&-u){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|u)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,Ri(e,a),Zn(i,e,a,-1))}return E1(),i=jh(Error(qe(421))),lu(e,t,u,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=mE.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,Cn=xs(a.nextSibling),In=t,er=!0,Qn=null,e!==null&&(Pn[Ln++]=Ci,Pn[Ln++]=Ii,Pn[Ln++]=oo,Ci=e.id,Ii=e.overflow,oo=t),t=y1(t,i.children),t.flags|=4096,t)}function lg(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Lf(e.return,t,r)}function Fh(e,t,r,i,a){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=a)}function Ow(e,t,r){var i=t.pendingProps,a=i.revealOrder,s=i.tail;if(en(e,t,i.children,r),i=ir.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lg(e,r,t);else if(e.tag===19)lg(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Vt(ir,i),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&oc(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Fh(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&oc(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Fh(t,!0,r,null,s);break;case"together":Fh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ku(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Mi(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),lo|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(qe(153));if(t.child!==null){for(e=t.child,r=Es(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Es(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function iE(e,t,r){switch(t.tag){case 3:Tw(t),oa();break;case 5:rw(t);break;case 1:mn(t.type)&&ec(t);break;case 4:u1(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;Vt(nc,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Vt(ir,ir.current&1),t.flags|=128,null):r&t.child.childLanes?Nw(e,t,r):(Vt(ir,ir.current&1),e=Mi(e,t,r),e!==null?e.sibling:null);Vt(ir,ir.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return Ow(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Vt(ir,ir.current),i)break;return null;case 22:case 23:return t.lanes=0,Cw(e,t,r)}return Mi(e,t,r)}var kw,Vf,Rw,Mw;kw=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Vf=function(){};Rw=function(e,t,r,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,Qs(pi.current);var s=null;switch(r){case"input":a=ff(e,a),i=ff(e,i),s=[];break;case"select":a=ar({},a,{value:void 0}),i=ar({},i,{value:void 0}),s=[];break;case"textarea":a=gf(e,a),i=gf(e,i),s=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Zu)}yf(r,i);var u;r=null;for(d in a)if(!i.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var h=a[d];for(u in h)h.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(hl.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in i){var f=i[d];if(h=a!=null?a[d]:void 0,i.hasOwnProperty(d)&&f!==h&&(f!=null||h!=null))if(d==="style")if(h){for(u in h)!h.hasOwnProperty(u)||f&&f.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in f)f.hasOwnProperty(u)&&h[u]!==f[u]&&(r||(r={}),r[u]=f[u])}else r||(s||(s=[]),s.push(d,r)),r=f;else d==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,h=h?h.__html:void 0,f!=null&&h!==f&&(s=s||[]).push(d,f)):d==="children"?typeof f!="string"&&typeof f!="number"||(s=s||[]).push(d,""+f):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(hl.hasOwnProperty(d)?(f!=null&&d==="onScroll"&&Gt("scroll",e),s||h===f||(s=[])):(s=s||[]).push(d,f))}r&&(s=s||[]).push("style",r);var d=s;(t.updateQueue=d)&&(t.flags|=4)}};Mw=function(e,t,r,i){r!==i&&(t.flags|=4)};function La(e,t){if(!er)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Yr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function sE(e,t,r){var i=t.pendingProps;switch(r1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yr(t),null;case 1:return mn(t.type)&&Ju(),Yr(t),null;case 3:return i=t.stateNode,la(),qt(gn),qt(Qr),h1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(ou(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qn!==null&&(Zf(Qn),Qn=null))),Vf(e,t),Yr(t),null;case 5:c1(t);var a=Qs(El.current);if(r=t.type,e!==null&&t.stateNode!=null)Rw(e,t,r,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(qe(166));return Yr(t),null}if(e=Qs(pi.current),ou(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[ci]=t,i[bl]=s,e=(t.mode&1)!==0,r){case"dialog":Gt("cancel",i),Gt("close",i);break;case"iframe":case"object":case"embed":Gt("load",i);break;case"video":case"audio":for(a=0;a<Va.length;a++)Gt(Va[a],i);break;case"source":Gt("error",i);break;case"img":case"image":case"link":Gt("error",i),Gt("load",i);break;case"details":Gt("toggle",i);break;case"input":yp(i,s),Gt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Gt("invalid",i);break;case"textarea":xp(i,s),Gt("invalid",i)}yf(r,s),a=null;for(var u in s)if(s.hasOwnProperty(u)){var h=s[u];u==="children"?typeof h=="string"?i.textContent!==h&&(s.suppressHydrationWarning!==!0&&su(i.textContent,h,e),a=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(s.suppressHydrationWarning!==!0&&su(i.textContent,h,e),a=["children",""+h]):hl.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&Gt("scroll",i)}switch(r){case"input":Kl(i),wp(i,s,!0);break;case"textarea":Kl(i),vp(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Zu)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{u=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ay(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=u.createElement(r,{is:i.is}):(e=u.createElement(r),r==="select"&&(u=e,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):e=u.createElementNS(e,r),e[ci]=t,e[bl]=i,kw(e,t,!1,!1),t.stateNode=e;e:{switch(u=wf(r,i),r){case"dialog":Gt("cancel",e),Gt("close",e),a=i;break;case"iframe":case"object":case"embed":Gt("load",e),a=i;break;case"video":case"audio":for(a=0;a<Va.length;a++)Gt(Va[a],e);a=i;break;case"source":Gt("error",e),a=i;break;case"img":case"image":case"link":Gt("error",e),Gt("load",e),a=i;break;case"details":Gt("toggle",e),a=i;break;case"input":yp(e,i),a=ff(e,i),Gt("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=ar({},i,{value:void 0}),Gt("invalid",e);break;case"textarea":xp(e,i),a=gf(e,i),Gt("invalid",e);break;default:a=i}yf(r,a),h=a;for(s in h)if(h.hasOwnProperty(s)){var f=h[s];s==="style"?cy(e,f):s==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&ly(e,f)):s==="children"?typeof f=="string"?(r!=="textarea"||f!=="")&&fl(e,f):typeof f=="number"&&fl(e,""+f):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(hl.hasOwnProperty(s)?f!=null&&s==="onScroll"&&Gt("scroll",e):f!=null&&z0(e,s,f,u))}switch(r){case"input":Kl(e),wp(e,i,!1);break;case"textarea":Kl(e),vp(e);break;case"option":i.value!=null&&e.setAttribute("value",""+As(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?Qo(e,!!i.multiple,s,!1):i.defaultValue!=null&&Qo(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Zu)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Yr(t),null;case 6:if(e&&t.stateNode!=null)Mw(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(qe(166));if(r=Qs(El.current),Qs(pi.current),ou(t)){if(i=t.stateNode,r=t.memoizedProps,i[ci]=t,(s=i.nodeValue!==r)&&(e=In,e!==null))switch(e.tag){case 3:su(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&su(i.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[ci]=t,t.stateNode=i}return Yr(t),null;case 13:if(qt(ir),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(er&&Cn!==null&&t.mode&1&&!(t.flags&128))Ky(),oa(),t.flags|=98560,s=!1;else if(s=ou(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(qe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(qe(317));s[ci]=t}else oa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Yr(t),s=!1}else Qn!==null&&(Zf(Qn),Qn=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||ir.current&1?Sr===0&&(Sr=3):E1())),t.updateQueue!==null&&(t.flags|=4),Yr(t),null);case 4:return la(),Vf(e,t),e===null&&xl(t.stateNode.containerInfo),Yr(t),null;case 10:return o1(t.type._context),Yr(t),null;case 17:return mn(t.type)&&Ju(),Yr(t),null;case 19:if(qt(ir),s=t.memoizedState,s===null)return Yr(t),null;if(i=(t.flags&128)!==0,u=s.rendering,u===null)if(i)La(s,!1);else{if(Sr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=oc(e),u!==null){for(t.flags|=128,La(s,!1),i=u.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)s=r,e=i,s.flags&=14680066,u=s.alternate,u===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Vt(ir,ir.current&1|2),t.child}e=e.sibling}s.tail!==null&&gr()>ca&&(t.flags|=128,i=!0,La(s,!1),t.lanes=4194304)}else{if(!i)if(e=oc(u),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),La(s,!0),s.tail===null&&s.tailMode==="hidden"&&!u.alternate&&!er)return Yr(t),null}else 2*gr()-s.renderingStartTime>ca&&r!==1073741824&&(t.flags|=128,i=!0,La(s,!1),t.lanes=4194304);s.isBackwards?(u.sibling=t.child,t.child=u):(r=s.last,r!==null?r.sibling=u:t.child=u,s.last=u)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=gr(),t.sibling=null,r=ir.current,Vt(ir,i?r&1|2:r&1),t):(Yr(t),null);case 22:case 23:return _1(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Sn&1073741824&&(Yr(t),t.subtreeFlags&6&&(t.flags|=8192)):Yr(t),null;case 24:return null;case 25:return null}throw Error(qe(156,t.tag))}function oE(e,t){switch(r1(t),t.tag){case 1:return mn(t.type)&&Ju(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return la(),qt(gn),qt(Qr),h1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return c1(t),null;case 13:if(qt(ir),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(qe(340));oa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qt(ir),null;case 4:return la(),null;case 10:return o1(t.type._context),null;case 22:case 23:return _1(),null;case 24:return null;default:return null}}var uu=!1,qr=!1,aE=typeof WeakSet=="function"?WeakSet:Set,st=null;function Yo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){fr(e,t,i)}else r.current=null}function $f(e,t,r){try{r()}catch(i){fr(e,t,i)}}var ug=!1;function lE(e,t){if(Tf=qu,e=jy(),e1(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var a=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var u=0,h=-1,f=-1,d=0,m=0,w=e,v=null;t:for(;;){for(var b;w!==r||a!==0&&w.nodeType!==3||(h=u+a),w!==s||i!==0&&w.nodeType!==3||(f=u+i),w.nodeType===3&&(u+=w.nodeValue.length),(b=w.firstChild)!==null;)v=w,w=b;for(;;){if(w===e)break t;if(v===r&&++d===a&&(h=u),v===s&&++m===i&&(f=u),(b=w.nextSibling)!==null)break;w=v,v=w.parentNode}w=b}r=h===-1||f===-1?null:{start:h,end:f}}else r=null}r=r||{start:0,end:0}}else r=null;for(Nf={focusedElem:e,selectionRange:r},qu=!1,st=t;st!==null;)if(t=st,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,st=e;else for(;st!==null;){t=st;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var N=C.memoizedProps,R=C.memoizedState,k=t.stateNode,S=k.getSnapshotBeforeUpdate(t.elementType===t.type?N:Gn(t.type,N),R);k.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var I=t.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(qe(163))}}catch(B){fr(t,t.return,B)}if(e=t.sibling,e!==null){e.return=t.return,st=e;break}st=t.return}return C=ug,ug=!1,C}function rl(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,s!==void 0&&$f(t,r,s)}a=a.next}while(a!==i)}}function Rc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function Gf(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Dw(e){var t=e.alternate;t!==null&&(e.alternate=null,Dw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ci],delete t[bl],delete t[Rf],delete t[V_],delete t[$_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Pw(e){return e.tag===5||e.tag===3||e.tag===4}function cg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Pw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yf(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Zu));else if(i!==4&&(e=e.child,e!==null))for(Yf(e,t,r),e=e.sibling;e!==null;)Yf(e,t,r),e=e.sibling}function Xf(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Xf(e,t,r),e=e.sibling;e!==null;)Xf(e,t,r),e=e.sibling}var jr=null,Yn=!1;function Ki(e,t,r){for(r=r.child;r!==null;)Lw(e,t,r),r=r.sibling}function Lw(e,t,r){if(di&&typeof di.onCommitFiberUnmount=="function")try{di.onCommitFiberUnmount(Sc,r)}catch{}switch(r.tag){case 5:qr||Yo(r,t);case 6:var i=jr,a=Yn;jr=null,Ki(e,t,r),jr=i,Yn=a,jr!==null&&(Yn?(e=jr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):jr.removeChild(r.stateNode));break;case 18:jr!==null&&(Yn?(e=jr,r=r.stateNode,e.nodeType===8?Rh(e.parentNode,r):e.nodeType===1&&Rh(e,r),ml(e)):Rh(jr,r.stateNode));break;case 4:i=jr,a=Yn,jr=r.stateNode.containerInfo,Yn=!0,Ki(e,t,r),jr=i,Yn=a;break;case 0:case 11:case 14:case 15:if(!qr&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var s=a,u=s.destroy;s=s.tag,u!==void 0&&(s&2||s&4)&&$f(r,t,u),a=a.next}while(a!==i)}Ki(e,t,r);break;case 1:if(!qr&&(Yo(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(h){fr(r,t,h)}Ki(e,t,r);break;case 21:Ki(e,t,r);break;case 22:r.mode&1?(qr=(i=qr)||r.memoizedState!==null,Ki(e,t,r),qr=i):Ki(e,t,r);break;default:Ki(e,t,r)}}function hg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new aE),t.forEach(function(i){var a=yE.bind(null,e,i);r.has(i)||(r.add(i),i.then(a,a))})}}function Hn(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var a=r[i];try{var s=e,u=t,h=u;e:for(;h!==null;){switch(h.tag){case 5:jr=h.stateNode,Yn=!1;break e;case 3:jr=h.stateNode.containerInfo,Yn=!0;break e;case 4:jr=h.stateNode.containerInfo,Yn=!0;break e}h=h.return}if(jr===null)throw Error(qe(160));Lw(s,u,a),jr=null,Yn=!1;var f=a.alternate;f!==null&&(f.return=null),a.return=null}catch(d){fr(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Bw(t,e),t=t.sibling}function Bw(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Hn(t,e),si(e),i&4){try{rl(3,e,e.return),Rc(3,e)}catch(N){fr(e,e.return,N)}try{rl(5,e,e.return)}catch(N){fr(e,e.return,N)}}break;case 1:Hn(t,e),si(e),i&512&&r!==null&&Yo(r,r.return);break;case 5:if(Hn(t,e),si(e),i&512&&r!==null&&Yo(r,r.return),e.flags&32){var a=e.stateNode;try{fl(a,"")}catch(N){fr(e,e.return,N)}}if(i&4&&(a=e.stateNode,a!=null)){var s=e.memoizedProps,u=r!==null?r.memoizedProps:s,h=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{h==="input"&&s.type==="radio"&&s.name!=null&&sy(a,s),wf(h,u);var d=wf(h,s);for(u=0;u<f.length;u+=2){var m=f[u],w=f[u+1];m==="style"?cy(a,w):m==="dangerouslySetInnerHTML"?ly(a,w):m==="children"?fl(a,w):z0(a,m,w,d)}switch(h){case"input":df(a,s);break;case"textarea":oy(a,s);break;case"select":var v=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var b=s.value;b!=null?Qo(a,!!s.multiple,b,!1):v!==!!s.multiple&&(s.defaultValue!=null?Qo(a,!!s.multiple,s.defaultValue,!0):Qo(a,!!s.multiple,s.multiple?[]:"",!1))}a[bl]=s}catch(N){fr(e,e.return,N)}}break;case 6:if(Hn(t,e),si(e),i&4){if(e.stateNode===null)throw Error(qe(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(N){fr(e,e.return,N)}}break;case 3:if(Hn(t,e),si(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{ml(t.containerInfo)}catch(N){fr(e,e.return,N)}break;case 4:Hn(t,e),si(e);break;case 13:Hn(t,e),si(e),a=e.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(v1=gr())),i&4&&hg(e);break;case 22:if(m=r!==null&&r.memoizedState!==null,e.mode&1?(qr=(d=qr)||m,Hn(t,e),qr=d):Hn(t,e),si(e),i&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(st=e,m=e.child;m!==null;){for(w=st=m;st!==null;){switch(v=st,b=v.child,v.tag){case 0:case 11:case 14:case 15:rl(4,v,v.return);break;case 1:Yo(v,v.return);var C=v.stateNode;if(typeof C.componentWillUnmount=="function"){i=v,r=v.return;try{t=i,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(N){fr(i,r,N)}}break;case 5:Yo(v,v.return);break;case 22:if(v.memoizedState!==null){dg(w);continue}}b!==null?(b.return=v,st=b):dg(w)}m=m.sibling}e:for(m=null,w=e;;){if(w.tag===5){if(m===null){m=w;try{a=w.stateNode,d?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(h=w.stateNode,f=w.memoizedProps.style,u=f!=null&&f.hasOwnProperty("display")?f.display:null,h.style.display=uy("display",u))}catch(N){fr(e,e.return,N)}}}else if(w.tag===6){if(m===null)try{w.stateNode.nodeValue=d?"":w.memoizedProps}catch(N){fr(e,e.return,N)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break e;for(;w.sibling===null;){if(w.return===null||w.return===e)break e;m===w&&(m=null),w=w.return}m===w&&(m=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Hn(t,e),si(e),i&4&&hg(e);break;case 21:break;default:Hn(t,e),si(e)}}function si(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Pw(r)){var i=r;break e}r=r.return}throw Error(qe(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(fl(a,""),i.flags&=-33);var s=cg(e);Xf(e,s,a);break;case 3:case 4:var u=i.stateNode.containerInfo,h=cg(e);Yf(e,h,u);break;default:throw Error(qe(161))}}catch(f){fr(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uE(e,t,r){st=e,jw(e)}function jw(e,t,r){for(var i=(e.mode&1)!==0;st!==null;){var a=st,s=a.child;if(a.tag===22&&i){var u=a.memoizedState!==null||uu;if(!u){var h=a.alternate,f=h!==null&&h.memoizedState!==null||qr;h=uu;var d=qr;if(uu=u,(qr=f)&&!d)for(st=a;st!==null;)u=st,f=u.child,u.tag===22&&u.memoizedState!==null?pg(a):f!==null?(f.return=u,st=f):pg(a);for(;s!==null;)st=s,jw(s),s=s.sibling;st=a,uu=h,qr=d}fg(e)}else a.subtreeFlags&8772&&s!==null?(s.return=a,st=s):fg(e)}}function fg(e){for(;st!==null;){var t=st;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qr||Rc(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!qr)if(r===null)i.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Gn(t.type,r.memoizedProps);i.componentDidUpdate(a,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Qp(t,s,i);break;case 3:var u=t.updateQueue;if(u!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Qp(t,u,r)}break;case 5:var h=t.stateNode;if(r===null&&t.flags&4){r=h;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&r.focus();break;case"img":f.src&&(r.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var w=m.dehydrated;w!==null&&ml(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(qe(163))}qr||t.flags&512&&Gf(t)}catch(v){fr(t,t.return,v)}}if(t===e){st=null;break}if(r=t.sibling,r!==null){r.return=t.return,st=r;break}st=t.return}}function dg(e){for(;st!==null;){var t=st;if(t===e){st=null;break}var r=t.sibling;if(r!==null){r.return=t.return,st=r;break}st=t.return}}function pg(e){for(;st!==null;){var t=st;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Rc(4,t)}catch(f){fr(t,r,f)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch(f){fr(t,a,f)}}var s=t.return;try{Gf(t)}catch(f){fr(t,s,f)}break;case 5:var u=t.return;try{Gf(t)}catch(f){fr(t,u,f)}}}catch(f){fr(t,t.return,f)}if(t===e){st=null;break}var h=t.sibling;if(h!==null){h.return=t.return,st=h;break}st=t.return}}var cE=Math.ceil,uc=Bi.ReactCurrentDispatcher,w1=Bi.ReactCurrentOwner,jn=Bi.ReactCurrentBatchConfig,At=0,Or=null,xr=null,Ur=0,Sn=0,Xo=Ns(0),Sr=0,Il=null,lo=0,Mc=0,x1=0,nl=null,fn=null,v1=0,ca=1/0,vi=null,cc=!1,qf=null,bs=null,cu=!1,ps=null,hc=0,il=0,Qf=null,Ru=-1,Mu=0;function rn(){return At&6?gr():Ru!==-1?Ru:Ru=gr()}function _s(e){return e.mode&1?At&2&&Ur!==0?Ur&-Ur:Y_.transition!==null?(Mu===0&&(Mu=_y()),Mu):(e=Mt,e!==0||(e=window.event,e=e===void 0?16:Ny(e.type)),e):1}function Zn(e,t,r,i){if(50<il)throw il=0,Qf=null,Error(qe(185));Dl(e,r,i),(!(At&2)||e!==Or)&&(e===Or&&(!(At&2)&&(Mc|=r),Sr===4&&cs(e,Ur)),yn(e,i),r===1&&At===0&&!(t.mode&1)&&(ca=gr()+500,Nc&&Os()))}function yn(e,t){var r=e.callbackNode;Yb(e,t);var i=Xu(e,e===Or?Ur:0);if(i===0)r!==null&&Ep(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&Ep(r),t===1)e.tag===0?G_(gg.bind(null,e)):Xy(gg.bind(null,e)),W_(function(){!(At&6)&&Os()}),r=null;else{switch(Ey(i)){case 1:r=G0;break;case 4:r=vy;break;case 16:r=Yu;break;case 536870912:r=by;break;default:r=Yu}r=Gw(r,Fw.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Fw(e,t){if(Ru=-1,Mu=0,At&6)throw Error(qe(327));var r=e.callbackNode;if(ta()&&e.callbackNode!==r)return null;var i=Xu(e,e===Or?Ur:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=fc(e,i);else{t=i;var a=At;At|=2;var s=zw();(Or!==e||Ur!==t)&&(vi=null,ca=gr()+500,eo(e,t));do try{dE();break}catch(h){Uw(e,h)}while(!0);s1(),uc.current=s,At=a,xr!==null?t=0:(Or=null,Ur=0,t=Sr)}if(t!==0){if(t===2&&(a=Ef(e),a!==0&&(i=a,t=Kf(e,a))),t===1)throw r=Il,eo(e,0),cs(e,i),yn(e,gr()),r;if(t===6)cs(e,i);else{if(a=e.current.alternate,!(i&30)&&!hE(a)&&(t=fc(e,i),t===2&&(s=Ef(e),s!==0&&(i=s,t=Kf(e,s))),t===1))throw r=Il,eo(e,0),cs(e,i),yn(e,gr()),r;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(qe(345));case 2:Vs(e,fn,vi);break;case 3:if(cs(e,i),(i&130023424)===i&&(t=v1+500-gr(),10<t)){if(Xu(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){rn(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=kf(Vs.bind(null,e,fn,vi),t);break}Vs(e,fn,vi);break;case 4:if(cs(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var u=31-Kn(i);s=1<<u,u=t[u],u>a&&(a=u),i&=~s}if(i=a,i=gr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*cE(i/1960))-i,10<i){e.timeoutHandle=kf(Vs.bind(null,e,fn,vi),i);break}Vs(e,fn,vi);break;case 5:Vs(e,fn,vi);break;default:throw Error(qe(329))}}}return yn(e,gr()),e.callbackNode===r?Fw.bind(null,e):null}function Kf(e,t){var r=nl;return e.current.memoizedState.isDehydrated&&(eo(e,t).flags|=256),e=fc(e,t),e!==2&&(t=fn,fn=r,t!==null&&Zf(t)),e}function Zf(e){fn===null?fn=e:fn.push.apply(fn,e)}function hE(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var a=r[i],s=a.getSnapshot;a=a.value;try{if(!Jn(s(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cs(e,t){for(t&=~x1,t&=~Mc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Kn(t),i=1<<r;e[r]=-1,t&=~i}}function gg(e){if(At&6)throw Error(qe(327));ta();var t=Xu(e,0);if(!(t&1))return yn(e,gr()),null;var r=fc(e,t);if(e.tag!==0&&r===2){var i=Ef(e);i!==0&&(t=i,r=Kf(e,i))}if(r===1)throw r=Il,eo(e,0),cs(e,t),yn(e,gr()),r;if(r===6)throw Error(qe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vs(e,fn,vi),yn(e,gr()),null}function b1(e,t){var r=At;At|=1;try{return e(t)}finally{At=r,At===0&&(ca=gr()+500,Nc&&Os())}}function uo(e){ps!==null&&ps.tag===0&&!(At&6)&&ta();var t=At;At|=1;var r=jn.transition,i=Mt;try{if(jn.transition=null,Mt=1,e)return e()}finally{Mt=i,jn.transition=r,At=t,!(At&6)&&Os()}}function _1(){Sn=Xo.current,qt(Xo)}function eo(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,z_(r)),xr!==null)for(r=xr.return;r!==null;){var i=r;switch(r1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ju();break;case 3:la(),qt(gn),qt(Qr),h1();break;case 5:c1(i);break;case 4:la();break;case 13:qt(ir);break;case 19:qt(ir);break;case 10:o1(i.type._context);break;case 22:case 23:_1()}r=r.return}if(Or=e,xr=e=Es(e.current,null),Ur=Sn=t,Sr=0,Il=null,x1=Mc=lo=0,fn=nl=null,qs!==null){for(t=0;t<qs.length;t++)if(r=qs[t],i=r.interleaved,i!==null){r.interleaved=null;var a=i.next,s=r.pending;if(s!==null){var u=s.next;s.next=a,i.next=u}r.pending=i}qs=null}return e}function Uw(e,t){do{var r=xr;try{if(s1(),Nu.current=lc,ac){for(var i=sr.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}ac=!1}if(ao=0,Nr=_r=sr=null,tl=!1,Sl=0,w1.current=null,r===null||r.return===null){Sr=1,Il=t,xr=null;break}e:{var s=e,u=r.return,h=r,f=t;if(t=Ur,h.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var d=f,m=h,w=m.tag;if(!(m.mode&1)&&(w===0||w===11||w===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var b=rg(u);if(b!==null){b.flags&=-257,ng(b,u,h,s,t),b.mode&1&&tg(s,d,t),t=b,f=d;var C=t.updateQueue;if(C===null){var N=new Set;N.add(f),t.updateQueue=N}else C.add(f);break e}else{if(!(t&1)){tg(s,d,t),E1();break e}f=Error(qe(426))}}else if(er&&h.mode&1){var R=rg(u);if(R!==null){!(R.flags&65536)&&(R.flags|=256),ng(R,u,h,s,t),n1(ua(f,h));break e}}s=f=ua(f,h),Sr!==4&&(Sr=2),nl===null?nl=[s]:nl.push(s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var k=Ew(s,f,t);qp(s,k);break e;case 1:h=f;var S=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(bs===null||!bs.has(I)))){s.flags|=65536,t&=-t,s.lanes|=t;var B=Sw(s,h,t);qp(s,B);break e}}s=s.return}while(s!==null)}Hw(r)}catch(U){t=U,xr===r&&r!==null&&(xr=r=r.return);continue}break}while(!0)}function zw(){var e=uc.current;return uc.current=lc,e===null?lc:e}function E1(){(Sr===0||Sr===3||Sr===2)&&(Sr=4),Or===null||!(lo&268435455)&&!(Mc&268435455)||cs(Or,Ur)}function fc(e,t){var r=At;At|=2;var i=zw();(Or!==e||Ur!==t)&&(vi=null,eo(e,t));do try{fE();break}catch(a){Uw(e,a)}while(!0);if(s1(),At=r,uc.current=i,xr!==null)throw Error(qe(261));return Or=null,Ur=0,Sr}function fE(){for(;xr!==null;)Ww(xr)}function dE(){for(;xr!==null&&!jb();)Ww(xr)}function Ww(e){var t=$w(e.alternate,e,Sn);e.memoizedProps=e.pendingProps,t===null?Hw(e):xr=t,w1.current=null}function Hw(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=oE(r,t),r!==null){r.flags&=32767,xr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Sr=6,xr=null;return}}else if(r=sE(r,t,Sn),r!==null){xr=r;return}if(t=t.sibling,t!==null){xr=t;return}xr=t=e}while(t!==null);Sr===0&&(Sr=5)}function Vs(e,t,r){var i=Mt,a=jn.transition;try{jn.transition=null,Mt=1,pE(e,t,r,i)}finally{jn.transition=a,Mt=i}return null}function pE(e,t,r,i){do ta();while(ps!==null);if(At&6)throw Error(qe(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(qe(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(Xb(e,s),e===Or&&(xr=Or=null,Ur=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||cu||(cu=!0,Gw(Yu,function(){return ta(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=jn.transition,jn.transition=null;var u=Mt;Mt=1;var h=At;At|=4,w1.current=null,lE(e,r),Bw(r,e),D_(Nf),qu=!!Tf,Nf=Tf=null,e.current=r,uE(r),Fb(),At=h,Mt=u,jn.transition=s}else e.current=r;if(cu&&(cu=!1,ps=e,hc=a),s=e.pendingLanes,s===0&&(bs=null),Wb(r.stateNode),yn(e,gr()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],i(a.value,{componentStack:a.stack,digest:a.digest});if(cc)throw cc=!1,e=qf,qf=null,e;return hc&1&&e.tag!==0&&ta(),s=e.pendingLanes,s&1?e===Qf?il++:(il=0,Qf=e):il=0,Os(),null}function ta(){if(ps!==null){var e=Ey(hc),t=jn.transition,r=Mt;try{if(jn.transition=null,Mt=16>e?16:e,ps===null)var i=!1;else{if(e=ps,ps=null,hc=0,At&6)throw Error(qe(331));var a=At;for(At|=4,st=e.current;st!==null;){var s=st,u=s.child;if(st.flags&16){var h=s.deletions;if(h!==null){for(var f=0;f<h.length;f++){var d=h[f];for(st=d;st!==null;){var m=st;switch(m.tag){case 0:case 11:case 15:rl(8,m,s)}var w=m.child;if(w!==null)w.return=m,st=w;else for(;st!==null;){m=st;var v=m.sibling,b=m.return;if(Dw(m),m===d){st=null;break}if(v!==null){v.return=b,st=v;break}st=b}}}var C=s.alternate;if(C!==null){var N=C.child;if(N!==null){C.child=null;do{var R=N.sibling;N.sibling=null,N=R}while(N!==null)}}st=s}}if(s.subtreeFlags&2064&&u!==null)u.return=s,st=u;else e:for(;st!==null;){if(s=st,s.flags&2048)switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var k=s.sibling;if(k!==null){k.return=s.return,st=k;break e}st=s.return}}var S=e.current;for(st=S;st!==null;){u=st;var I=u.child;if(u.subtreeFlags&2064&&I!==null)I.return=u,st=I;else e:for(u=S;st!==null;){if(h=st,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Rc(9,h)}}catch(U){fr(h,h.return,U)}if(h===u){st=null;break e}var B=h.sibling;if(B!==null){B.return=h.return,st=B;break e}st=h.return}}if(At=a,Os(),di&&typeof di.onPostCommitFiberRoot=="function")try{di.onPostCommitFiberRoot(Sc,e)}catch{}i=!0}return i}finally{Mt=r,jn.transition=t}}return!1}function mg(e,t,r){t=ua(r,t),t=Ew(e,t,1),e=vs(e,t,1),t=rn(),e!==null&&(Dl(e,1,t),yn(e,t))}function fr(e,t,r){if(e.tag===3)mg(e,e,r);else for(;t!==null;){if(t.tag===3){mg(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(bs===null||!bs.has(i))){e=ua(r,e),e=Sw(t,e,1),t=vs(t,e,1),e=rn(),t!==null&&(Dl(t,1,e),yn(t,e));break}}t=t.return}}function gE(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=rn(),e.pingedLanes|=e.suspendedLanes&r,Or===e&&(Ur&r)===r&&(Sr===4||Sr===3&&(Ur&130023424)===Ur&&500>gr()-v1?eo(e,0):x1|=r),yn(e,t)}function Vw(e,t){t===0&&(e.mode&1?(t=eu,eu<<=1,!(eu&130023424)&&(eu=4194304)):t=1);var r=rn();e=Ri(e,t),e!==null&&(Dl(e,t,r),yn(e,r))}function mE(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Vw(e,r)}function yE(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(qe(314))}i!==null&&i.delete(t),Vw(e,r)}var $w;$w=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||gn.current)pn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return pn=!1,iE(e,t,r);pn=!!(e.flags&131072)}else pn=!1,er&&t.flags&1048576&&qy(t,rc,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;ku(e,t),e=t.pendingProps;var a=sa(t,Qr.current);ea(t,r),a=d1(null,t,i,e,a,r);var s=p1();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mn(i)?(s=!0,ec(t)):s=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,l1(t),a.updater=kc,t.stateNode=a,a._reactInternals=t,jf(t,i,e,r),t=zf(null,t,i,!0,s,r)):(t.tag=0,er&&s&&t1(t),en(null,t,a,r),t=t.child),t;case 16:i=t.elementType;e:{switch(ku(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=xE(i),e=Gn(i,e),a){case 0:t=Uf(null,t,i,e,r);break e;case 1:t=og(null,t,i,e,r);break e;case 11:t=ig(null,t,i,e,r);break e;case 14:t=sg(null,t,i,Gn(i.type,e),r);break e}throw Error(qe(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Gn(i,a),Uf(e,t,i,a,r);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Gn(i,a),og(e,t,i,a,r);case 3:e:{if(Tw(t),e===null)throw Error(qe(387));i=t.pendingProps,s=t.memoizedState,a=s.element,tw(e,t),sc(t,i,null,r);var u=t.memoizedState;if(i=u.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){a=ua(Error(qe(423)),t),t=ag(e,t,i,r,a);break e}else if(i!==a){a=ua(Error(qe(424)),t),t=ag(e,t,i,r,a);break e}else for(Cn=xs(t.stateNode.containerInfo.firstChild),In=t,er=!0,Qn=null,r=Jy(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(oa(),i===a){t=Mi(e,t,r);break e}en(e,t,i,r)}t=t.child}return t;case 5:return rw(t),e===null&&Pf(t),i=t.type,a=t.pendingProps,s=e!==null?e.memoizedProps:null,u=a.children,Of(i,a)?u=null:s!==null&&Of(i,s)&&(t.flags|=32),Iw(e,t),en(e,t,u,r),t.child;case 6:return e===null&&Pf(t),null;case 13:return Nw(e,t,r);case 4:return u1(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=aa(t,null,i,r):en(e,t,i,r),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Gn(i,a),ig(e,t,i,a,r);case 7:return en(e,t,t.pendingProps,r),t.child;case 8:return en(e,t,t.pendingProps.children,r),t.child;case 12:return en(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,s=t.memoizedProps,u=a.value,Vt(nc,i._currentValue),i._currentValue=u,s!==null)if(Jn(s.value,u)){if(s.children===a.children&&!gn.current){t=Mi(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var h=s.dependencies;if(h!==null){u=s.child;for(var f=h.firstContext;f!==null;){if(f.context===i){if(s.tag===1){f=Ni(-1,r&-r),f.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?f.next=f:(f.next=m.next,m.next=f),d.pending=f}}s.lanes|=r,f=s.alternate,f!==null&&(f.lanes|=r),Lf(s.return,r,t),h.lanes|=r;break}f=f.next}}else if(s.tag===10)u=s.type===t.type?null:s.child;else if(s.tag===18){if(u=s.return,u===null)throw Error(qe(341));u.lanes|=r,h=u.alternate,h!==null&&(h.lanes|=r),Lf(u,r,t),u=s.sibling}else u=s.child;if(u!==null)u.return=s;else for(u=s;u!==null;){if(u===t){u=null;break}if(s=u.sibling,s!==null){s.return=u.return,u=s;break}u=u.return}s=u}en(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,ea(t,r),a=Fn(a),i=i(a),t.flags|=1,en(e,t,i,r),t.child;case 14:return i=t.type,a=Gn(i,t.pendingProps),a=Gn(i.type,a),sg(e,t,i,a,r);case 15:return Aw(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Gn(i,a),ku(e,t),t.tag=1,mn(i)?(e=!0,ec(t)):e=!1,ea(t,r),_w(t,i,a),jf(t,i,a,r),zf(null,t,i,!0,e,r);case 19:return Ow(e,t,r);case 22:return Cw(e,t,r)}throw Error(qe(156,t.tag))};function Gw(e,t){return xy(e,t)}function wE(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(e,t,r,i){return new wE(e,t,r,i)}function S1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xE(e){if(typeof e=="function")return S1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===H0)return 11;if(e===V0)return 14}return 2}function Es(e,t){var r=e.alternate;return r===null?(r=Bn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Du(e,t,r,i,a,s){var u=2;if(i=e,typeof e=="function")S1(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case jo:return to(r.children,a,s,t);case W0:u=8,a|=8;break;case lf:return e=Bn(12,r,t,a|2),e.elementType=lf,e.lanes=s,e;case uf:return e=Bn(13,r,t,a),e.elementType=uf,e.lanes=s,e;case cf:return e=Bn(19,r,t,a),e.elementType=cf,e.lanes=s,e;case ry:return Dc(r,a,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ey:u=10;break e;case ty:u=9;break e;case H0:u=11;break e;case V0:u=14;break e;case os:u=16,i=null;break e}throw Error(qe(130,e==null?e:typeof e,""))}return t=Bn(u,r,t,a),t.elementType=e,t.type=i,t.lanes=s,t}function to(e,t,r,i){return e=Bn(7,e,i,t),e.lanes=r,e}function Dc(e,t,r,i){return e=Bn(22,e,i,t),e.elementType=ry,e.lanes=r,e.stateNode={isHidden:!1},e}function Uh(e,t,r){return e=Bn(6,e,null,t),e.lanes=r,e}function zh(e,t,r){return t=Bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vE(e,t,r,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bh(0),this.expirationTimes=bh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bh(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function A1(e,t,r,i,a,s,u,h,f){return e=new vE(e,t,r,h,f),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Bn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},l1(s),e}function bE(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bo,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function Yw(e){if(!e)return Cs;e=e._reactInternals;e:{if(fo(e)!==e||e.tag!==1)throw Error(qe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(qe(171))}if(e.tag===1){var r=e.type;if(mn(r))return Yy(e,r,t)}return t}function Xw(e,t,r,i,a,s,u,h,f){return e=A1(r,i,!0,e,a,s,u,h,f),e.context=Yw(null),r=e.current,i=rn(),a=_s(r),s=Ni(i,a),s.callback=t??null,vs(r,s,a),e.current.lanes=a,Dl(e,a,i),yn(e,i),e}function Pc(e,t,r,i){var a=t.current,s=rn(),u=_s(a);return r=Yw(r),t.context===null?t.context=r:t.pendingContext=r,t=Ni(s,u),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=vs(a,t,u),e!==null&&(Zn(e,a,u,s),Tu(e,a,u)),u}function dc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function C1(e,t){yg(e,t),(e=e.alternate)&&yg(e,t)}function _E(){return null}var qw=typeof reportError=="function"?reportError:function(e){console.error(e)};function I1(e){this._internalRoot=e}Lc.prototype.render=I1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(qe(409));Pc(e,t,null,null)};Lc.prototype.unmount=I1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;uo(function(){Pc(null,e,null,null)}),t[ki]=null}};function Lc(e){this._internalRoot=e}Lc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cy();e={blockedOn:null,target:e,priority:t};for(var r=0;r<us.length&&t!==0&&t<us[r].priority;r++);us.splice(r,0,e),r===0&&Ty(e)}};function T1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function wg(){}function EE(e,t,r,i,a){if(a){if(typeof i=="function"){var s=i;i=function(){var d=dc(u);s.call(d)}}var u=Xw(t,i,e,0,null,!1,!1,"",wg);return e._reactRootContainer=u,e[ki]=u.current,xl(e.nodeType===8?e.parentNode:e),uo(),u}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var h=i;i=function(){var d=dc(f);h.call(d)}}var f=A1(e,0,!1,null,null,!1,!1,"",wg);return e._reactRootContainer=f,e[ki]=f.current,xl(e.nodeType===8?e.parentNode:e),uo(function(){Pc(t,f,r,i)}),f}function jc(e,t,r,i,a){var s=r._reactRootContainer;if(s){var u=s;if(typeof a=="function"){var h=a;a=function(){var f=dc(u);h.call(f)}}Pc(t,u,e,a)}else u=EE(r,t,e,a,i);return dc(u)}Sy=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ha(t.pendingLanes);r!==0&&(Y0(t,r|1),yn(t,gr()),!(At&6)&&(ca=gr()+500,Os()))}break;case 13:uo(function(){var i=Ri(e,1);if(i!==null){var a=rn();Zn(i,e,1,a)}}),C1(e,1)}};X0=function(e){if(e.tag===13){var t=Ri(e,134217728);if(t!==null){var r=rn();Zn(t,e,134217728,r)}C1(e,134217728)}};Ay=function(e){if(e.tag===13){var t=_s(e),r=Ri(e,t);if(r!==null){var i=rn();Zn(r,e,t,i)}C1(e,t)}};Cy=function(){return Mt};Iy=function(e,t){var r=Mt;try{return Mt=e,t()}finally{Mt=r}};vf=function(e,t,r){switch(t){case"input":if(df(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var a=Tc(i);if(!a)throw Error(qe(90));iy(i),df(i,a)}}}break;case"textarea":oy(e,r);break;case"select":t=r.value,t!=null&&Qo(e,!!r.multiple,t,!1)}};dy=b1;py=uo;var SE={usingClientEntryPoint:!1,Events:[Ll,Wo,Tc,hy,fy,b1]},Ba={findFiberByHostInstance:Xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AE={bundleType:Ba.bundleType,version:Ba.version,rendererPackageName:Ba.rendererPackageName,rendererConfig:Ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yy(e),e===null?null:e.stateNode},findFiberByHostInstance:Ba.findFiberByHostInstance||_E,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{Sc=hu.inject(AE),di=hu}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SE;Nn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T1(t))throw Error(qe(200));return bE(e,t,null,r)};Nn.createRoot=function(e,t){if(!T1(e))throw Error(qe(299));var r=!1,i="",a=qw;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=A1(e,1,!1,null,null,r,!1,i,a),e[ki]=t.current,xl(e.nodeType===8?e.parentNode:e),new I1(t)};Nn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(qe(188)):(e=Object.keys(e).join(","),Error(qe(268,e)));return e=yy(t),e=e===null?null:e.stateNode,e};Nn.flushSync=function(e){return uo(e)};Nn.hydrate=function(e,t,r){if(!Bc(t))throw Error(qe(200));return jc(null,e,t,!0,r)};Nn.hydrateRoot=function(e,t,r){if(!T1(e))throw Error(qe(405));var i=r!=null&&r.hydratedSources||null,a=!1,s="",u=qw;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),t=Xw(t,null,e,1,r??null,a,!1,s,u),e[ki]=t.current,xl(e),i)for(e=0;e<i.length;e++)r=i[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Lc(t)};Nn.render=function(e,t,r){if(!Bc(t))throw Error(qe(200));return jc(null,e,t,!1,r)};Nn.unmountComponentAtNode=function(e){if(!Bc(e))throw Error(qe(40));return e._reactRootContainer?(uo(function(){jc(null,null,e,!1,function(){e._reactRootContainer=null,e[ki]=null})}),!0):!1};Nn.unstable_batchedUpdates=b1;Nn.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Bc(r))throw Error(qe(200));if(e==null||e._reactInternals===void 0)throw Error(qe(38));return jc(e,t,r,!1,i)};Nn.version="18.3.1-next-f1338f8080-20240426";function Qw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qw)}catch(e){console.error(e)}}Qw(),Qm.exports=Nn;var CE=Qm.exports,Kw,xg=CE;Kw=xg.createRoot,xg.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tl(){return Tl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Tl.apply(this,arguments)}var gs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(gs||(gs={}));const vg="popstate";function IE(e){e===void 0&&(e={});function t(a,s){let{pathname:u="/",search:h="",hash:f=""}=po(a.location.hash.substr(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Jf("",{pathname:u,search:h,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(a,s){let u=a.document.querySelector("base"),h="";if(u&&u.getAttribute("href")){let f=a.location.href,d=f.indexOf("#");h=d===-1?f:f.slice(0,d)}return h+"#"+(typeof s=="string"?s:pc(s))}function i(a,s){N1(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return NE(t,r,i,e)}function mr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function N1(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function TE(){return Math.random().toString(36).substr(2,8)}function bg(e,t){return{usr:e.state,key:e.key,idx:t}}function Jf(e,t,r,i){return r===void 0&&(r=null),Tl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?po(t):t,{state:r,key:t&&t.key||i||TE()})}function pc(e){let{pathname:t="/",search:r="",hash:i=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function po(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function NE(e,t,r,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:s=!1}=i,u=a.history,h=gs.Pop,f=null,d=m();d==null&&(d=0,u.replaceState(Tl({},u.state,{idx:d}),""));function m(){return(u.state||{idx:null}).idx}function w(){h=gs.Pop;let R=m(),k=R==null?null:R-d;d=R,f&&f({action:h,location:N.location,delta:k})}function v(R,k){h=gs.Push;let S=Jf(N.location,R,k);r&&r(S,R),d=m()+1;let I=bg(S,d),B=N.createHref(S);try{u.pushState(I,"",B)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;a.location.assign(B)}s&&f&&f({action:h,location:N.location,delta:1})}function b(R,k){h=gs.Replace;let S=Jf(N.location,R,k);r&&r(S,R),d=m();let I=bg(S,d),B=N.createHref(S);u.replaceState(I,"",B),s&&f&&f({action:h,location:N.location,delta:0})}function C(R){let k=a.location.origin!=="null"?a.location.origin:a.location.href,S=typeof R=="string"?R:pc(R);return S=S.replace(/ $/,"%20"),mr(k,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,k)}let N={get action(){return h},get location(){return e(a,u)},listen(R){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(vg,w),f=R,()=>{a.removeEventListener(vg,w),f=null}},createHref(R){return t(a,R)},createURL:C,encodeLocation(R){let k=C(R);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:v,replace:b,go(R){return u.go(R)}};return N}var _g;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(_g||(_g={}));function OE(e,t,r){return r===void 0&&(r="/"),kE(e,t,r,!1)}function kE(e,t,r,i){let a=typeof t=="string"?po(t):t,s=O1(a.pathname||"/",r);if(s==null)return null;let u=Zw(e);RE(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let d=HE(s);h=zE(u[f],d,i)}return h}function Zw(e,t,r,i){t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i="");let a=(s,u,h)=>{let f={relativePath:h===void 0?s.path||"":h,caseSensitive:s.caseSensitive===!0,childrenIndex:u,route:s};f.relativePath.startsWith("/")&&(mr(f.relativePath.startsWith(i),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(i.length));let d=Ss([i,f.relativePath]),m=r.concat(f);s.children&&s.children.length>0&&(mr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Zw(s.children,t,m,d)),!(s.path==null&&!s.index)&&t.push({path:d,score:FE(d,s.index),routesMeta:m})};return e.forEach((s,u)=>{var h;if(s.path===""||!((h=s.path)!=null&&h.includes("?")))a(s,u);else for(let f of Jw(s.path))a(s,u,f)}),t}function Jw(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(i.length===0)return a?[s,""]:[s];let u=Jw(i.join("/")),h=[];return h.push(...u.map(f=>f===""?s:[s,f].join("/"))),a&&h.push(...u),h.map(f=>e.startsWith("/")&&f===""?"/":f)}function RE(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:UE(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const ME=/^:[\w-]+$/,DE=3,PE=2,LE=1,BE=10,jE=-2,Eg=e=>e==="*";function FE(e,t){let r=e.split("/"),i=r.length;return r.some(Eg)&&(i+=jE),t&&(i+=PE),r.filter(a=>!Eg(a)).reduce((a,s)=>a+(ME.test(s)?DE:s===""?LE:BE),i)}function UE(e,t){return e.length===t.length&&e.slice(0,-1).every((i,a)=>i===t[a])?e[e.length-1]-t[t.length-1]:0}function zE(e,t,r){let{routesMeta:i}=e,a={},s="/",u=[];for(let h=0;h<i.length;++h){let f=i[h],d=h===i.length-1,m=s==="/"?t:t.slice(s.length)||"/",w=Sg({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},m),v=f.route;if(!w&&d&&r&&!i[i.length-1].route.index&&(w=Sg({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!w)return null;Object.assign(a,w.params),u.push({params:a,pathname:Ss([s,w.pathname]),pathnameBase:YE(Ss([s,w.pathnameBase])),route:v}),w.pathnameBase!=="/"&&(s=Ss([s,w.pathnameBase]))}return u}function Sg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=WE(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],u=s.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:i.reduce((d,m,w)=>{let{paramName:v,isOptional:b}=m;if(v==="*"){let N=h[w]||"";u=s.slice(0,s.length-N.length).replace(/(.)\/+$/,"$1")}const C=h[w];return b&&!C?d[v]=void 0:d[v]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:u,pattern:e}}function WE(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),N1(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function HE(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return N1(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function O1(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}function VE(e,t){t===void 0&&(t="/");let{pathname:r,search:i="",hash:a=""}=typeof e=="string"?po(e):e;return{pathname:r?r.startsWith("/")?r:$E(r,t):t,search:XE(i),hash:qE(a)}}function $E(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Wh(e,t,r,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GE(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function k1(e,t){let r=GE(e);return t?r.map((i,a)=>a===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function R1(e,t,r,i){i===void 0&&(i=!1);let a;typeof e=="string"?a=po(e):(a=Tl({},e),mr(!a.pathname||!a.pathname.includes("?"),Wh("?","pathname","search",a)),mr(!a.pathname||!a.pathname.includes("#"),Wh("#","pathname","hash",a)),mr(!a.search||!a.search.includes("#"),Wh("#","search","hash",a)));let s=e===""||a.pathname==="",u=s?"/":a.pathname,h;if(u==null)h=r;else{let w=t.length-1;if(!i&&u.startsWith("..")){let v=u.split("/");for(;v[0]==="..";)v.shift(),w-=1;a.pathname=v.join("/")}h=w>=0?t[w]:"/"}let f=VE(a,h),d=u&&u!=="/"&&u.endsWith("/"),m=(s||u===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(d||m)&&(f.pathname+="/"),f}const Ss=e=>e.join("/").replace(/\/\/+/g,"/"),YE=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),XE=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,qE=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function QE(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const e2=["post","put","patch","delete"];new Set(e2);const KE=["get",...e2];new Set(KE);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nl(){return Nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Nl.apply(this,arguments)}const M1=De.createContext(null),ZE=De.createContext(null),ks=De.createContext(null),Fc=De.createContext(null),ji=De.createContext({outlet:null,matches:[],isDataRoute:!1}),t2=De.createContext(null);function JE(e,t){let{relative:r}=t===void 0?{}:t;ma()||mr(!1);let{basename:i,navigator:a}=De.useContext(ks),{hash:s,pathname:u,search:h}=n2(e,{relative:r}),f=u;return i!=="/"&&(f=u==="/"?i:Ss([i,u])),a.createHref({pathname:f,search:h,hash:s})}function ma(){return De.useContext(Fc)!=null}function go(){return ma()||mr(!1),De.useContext(Fc).location}function r2(e){De.useContext(ks).static||De.useLayoutEffect(e)}function mo(){let{isDataRoute:e}=De.useContext(ji);return e?dS():eS()}function eS(){ma()||mr(!1);let e=De.useContext(M1),{basename:t,future:r,navigator:i}=De.useContext(ks),{matches:a}=De.useContext(ji),{pathname:s}=go(),u=JSON.stringify(k1(a,r.v7_relativeSplatPath)),h=De.useRef(!1);return r2(()=>{h.current=!0}),De.useCallback(function(d,m){if(m===void 0&&(m={}),!h.current)return;if(typeof d=="number"){i.go(d);return}let w=R1(d,JSON.parse(u),s,m.relative==="path");e==null&&t!=="/"&&(w.pathname=w.pathname==="/"?t:Ss([t,w.pathname])),(m.replace?i.replace:i.push)(w,m.state,m)},[t,i,u,s,e])}function tS(){let{matches:e}=De.useContext(ji),t=e[e.length-1];return t?t.params:{}}function n2(e,t){let{relative:r}=t===void 0?{}:t,{future:i}=De.useContext(ks),{matches:a}=De.useContext(ji),{pathname:s}=go(),u=JSON.stringify(k1(a,i.v7_relativeSplatPath));return De.useMemo(()=>R1(e,JSON.parse(u),s,r==="path"),[e,u,s,r])}function rS(e,t){return nS(e,t)}function nS(e,t,r,i){ma()||mr(!1);let{navigator:a,static:s}=De.useContext(ks),{matches:u}=De.useContext(ji),h=u[u.length-1],f=h?h.params:{};h&&h.pathname;let d=h?h.pathnameBase:"/";h&&h.route;let m=go(),w;if(t){var v;let k=typeof t=="string"?po(t):t;d==="/"||(v=k.pathname)!=null&&v.startsWith(d)||mr(!1),w=k}else w=m;let b=w.pathname||"/",C=b;if(d!=="/"){let k=d.replace(/^\//,"").split("/");C="/"+b.replace(/^\//,"").split("/").slice(k.length).join("/")}let N=!s&&r&&r.matches&&r.matches.length>0?r.matches:OE(e,{pathname:C}),R=lS(N&&N.map(k=>Object.assign({},k,{params:Object.assign({},f,k.params),pathname:Ss([d,a.encodeLocation?a.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?d:Ss([d,a.encodeLocation?a.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),u,r,i);return t&&R?De.createElement(Fc.Provider,{value:{location:Nl({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:gs.Pop}},R):R}function iS(){let e=fS(),t=QE(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return De.createElement(De.Fragment,null,De.createElement("h2",null,"Unexpected Application Error!"),De.createElement("h3",{style:{fontStyle:"italic"}},t),r?De.createElement("pre",{style:a},r):null,null)}const sS=De.createElement(iS,null);class oS extends De.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?De.createElement(ji.Provider,{value:this.props.routeContext},De.createElement(t2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function aS(e){let{routeContext:t,match:r,children:i}=e,a=De.useContext(M1);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),De.createElement(ji.Provider,{value:t},i)}function lS(e,t,r,i){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),i===void 0&&(i=null),e==null){var s;if(!r)return null;if(r.errors)e=r.matches;else if((s=i)!=null&&s.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let u=e,h=(a=r)==null?void 0:a.errors;if(h!=null){let m=u.findIndex(w=>w.route.id&&(h==null?void 0:h[w.route.id])!==void 0);m>=0||mr(!1),u=u.slice(0,Math.min(u.length,m+1))}let f=!1,d=-1;if(r&&i&&i.v7_partialHydration)for(let m=0;m<u.length;m++){let w=u[m];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(d=m),w.route.id){let{loaderData:v,errors:b}=r,C=w.route.loader&&v[w.route.id]===void 0&&(!b||b[w.route.id]===void 0);if(w.route.lazy||C){f=!0,d>=0?u=u.slice(0,d+1):u=[u[0]];break}}}return u.reduceRight((m,w,v)=>{let b,C=!1,N=null,R=null;r&&(b=h&&w.route.id?h[w.route.id]:void 0,N=w.route.errorElement||sS,f&&(d<0&&v===0?(C=!0,R=null):d===v&&(C=!0,R=w.route.hydrateFallbackElement||null)));let k=t.concat(u.slice(0,v+1)),S=()=>{let I;return b?I=N:C?I=R:w.route.Component?I=De.createElement(w.route.Component,null):w.route.element?I=w.route.element:I=m,De.createElement(aS,{match:w,routeContext:{outlet:m,matches:k,isDataRoute:r!=null},children:I})};return r&&(w.route.ErrorBoundary||w.route.errorElement||v===0)?De.createElement(oS,{location:r.location,revalidation:r.revalidation,component:N,error:b,children:S(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):S()},null)}var i2=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(i2||{}),gc=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(gc||{});function uS(e){let t=De.useContext(M1);return t||mr(!1),t}function cS(e){let t=De.useContext(ZE);return t||mr(!1),t}function hS(e){let t=De.useContext(ji);return t||mr(!1),t}function s2(e){let t=hS(),r=t.matches[t.matches.length-1];return r.route.id||mr(!1),r.route.id}function fS(){var e;let t=De.useContext(t2),r=cS(gc.UseRouteError),i=s2(gc.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[i]}function dS(){let{router:e}=uS(i2.UseNavigateStable),t=s2(gc.UseNavigateStable),r=De.useRef(!1);return r2(()=>{r.current=!0}),De.useCallback(function(a,s){s===void 0&&(s={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Nl({fromRouteId:t},s)))},[e,t])}function pS(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ja(e){let{to:t,replace:r,state:i,relative:a}=e;ma()||mr(!1);let{future:s,static:u}=De.useContext(ks),{matches:h}=De.useContext(ji),{pathname:f}=go(),d=mo(),m=R1(t,k1(h,s.v7_relativeSplatPath),f,a==="path"),w=JSON.stringify(m);return De.useEffect(()=>d(JSON.parse(w),{replace:r,state:i,relative:a}),[d,w,a,r,i]),null}function Do(e){mr(!1)}function gS(e){let{basename:t="/",children:r=null,location:i,navigationType:a=gs.Pop,navigator:s,static:u=!1,future:h}=e;ma()&&mr(!1);let f=t.replace(/^\/*/,"/"),d=De.useMemo(()=>({basename:f,navigator:s,static:u,future:Nl({v7_relativeSplatPath:!1},h)}),[f,h,s,u]);typeof i=="string"&&(i=po(i));let{pathname:m="/",search:w="",hash:v="",state:b=null,key:C="default"}=i,N=De.useMemo(()=>{let R=O1(m,f);return R==null?null:{location:{pathname:R,search:w,hash:v,state:b,key:C},navigationType:a}},[f,m,w,v,b,C,a]);return N==null?null:De.createElement(ks.Provider,{value:d},De.createElement(Fc.Provider,{children:r,value:N}))}function mS(e){let{children:t,location:r}=e;return rS(ed(t),r)}new Promise(()=>{});function ed(e,t){t===void 0&&(t=[]);let r=[];return De.Children.forEach(e,(i,a)=>{if(!De.isValidElement(i))return;let s=[...t,a];if(i.type===De.Fragment){r.push.apply(r,ed(i.props.children,s));return}i.type!==Do&&mr(!1),!i.props.index||!i.props.children||mr(!1);let u={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=ed(i.props.children,s)),r.push(u)}),r}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function td(){return td=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},td.apply(this,arguments)}function yS(e,t){if(e==null)return{};var r={},i=Object.keys(e),a,s;for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function wS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function xS(e,t){return e.button===0&&(!t||t==="_self")&&!wS(e)}const vS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],bS="6";try{window.__reactRouterVersion=bS}catch{}const _S="startTransition",Ag=gb[_S];function ES(e){let{basename:t,children:r,future:i,window:a}=e,s=De.useRef();s.current==null&&(s.current=IE({window:a,v5Compat:!0}));let u=s.current,[h,f]=De.useState({action:u.action,location:u.location}),{v7_startTransition:d}=i||{},m=De.useCallback(w=>{d&&Ag?Ag(()=>f(w)):f(w)},[f,d]);return De.useLayoutEffect(()=>u.listen(m),[u,m]),De.useEffect(()=>pS(i),[i]),De.createElement(gS,{basename:t,children:r,location:h.location,navigationType:h.action,navigator:u,future:i})}const SS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ra=De.forwardRef(function(t,r){let{onClick:i,relative:a,reloadDocument:s,replace:u,state:h,target:f,to:d,preventScrollReset:m,viewTransition:w}=t,v=yS(t,vS),{basename:b}=De.useContext(ks),C,N=!1;if(typeof d=="string"&&AS.test(d)&&(C=d,SS))try{let I=new URL(window.location.href),B=d.startsWith("//")?new URL(I.protocol+d):new URL(d),U=O1(B.pathname,b);B.origin===I.origin&&U!=null?d=U+B.search+B.hash:N=!0}catch{}let R=JE(d,{relative:a}),k=CS(d,{replace:u,state:h,target:f,preventScrollReset:m,relative:a,viewTransition:w});function S(I){i&&i(I),I.defaultPrevented||k(I)}return De.createElement("a",td({},v,{href:C||R,onClick:N||s?i:S,ref:r,target:f}))});var Cg;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Cg||(Cg={}));var Ig;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ig||(Ig={}));function CS(e,t){let{target:r,replace:i,state:a,preventScrollReset:s,relative:u,viewTransition:h}=t===void 0?{}:t,f=mo(),d=go(),m=n2(e,{relative:u});return De.useCallback(w=>{if(xS(w,r)){w.preventDefault();let v=i!==void 0?i:pc(d)===pc(m);f(e,{replace:v,state:a,preventScrollReset:s,relative:u,viewTransition:h})}},[d,f,m,i,a,r,e,s,u,h])}let IS={data:""},TS=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||IS,NS=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,OS=/\/\*[^]*?\*\/|  +/g,Tg=/\n+/g,hs=(e,t)=>{let r="",i="",a="";for(let s in e){let u=e[s];s[0]=="@"?s[1]=="i"?r=s+" "+u+";":i+=s[1]=="f"?hs(u,s):s+"{"+hs(u,s[1]=="k"?"":t)+"}":typeof u=="object"?i+=hs(u,t?t.replace(/([^,])+/g,h=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,f=>/&/.test(f)?f.replace(/&/g,h):h?h+" "+f:f)):s):u!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=hs.p?hs.p(s,u):s+":"+u+";")}return r+(t&&a?t+"{"+a+"}":a)+i},mi={},o2=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+o2(e[r]);return t}return e},kS=(e,t,r,i,a)=>{let s=o2(e),u=mi[s]||(mi[s]=(f=>{let d=0,m=11;for(;d<f.length;)m=101*m+f.charCodeAt(d++)>>>0;return"go"+m})(s));if(!mi[u]){let f=s!==e?e:(d=>{let m,w,v=[{}];for(;m=NS.exec(d.replace(OS,""));)m[4]?v.shift():m[3]?(w=m[3].replace(Tg," ").trim(),v.unshift(v[0][w]=v[0][w]||{})):v[0][m[1]]=m[2].replace(Tg," ").trim();return v[0]})(e);mi[u]=hs(a?{["@keyframes "+u]:f}:f,r?"":"."+u)}let h=r&&mi.g?mi.g:null;return r&&(mi.g=mi[u]),((f,d,m,w)=>{w?d.data=d.data.replace(w,f):d.data.indexOf(f)===-1&&(d.data=m?f+d.data:d.data+f)})(mi[u],t,i,h),u},RS=(e,t,r)=>e.reduce((i,a,s)=>{let u=t[s];if(u&&u.call){let h=u(r),f=h&&h.props&&h.props.className||/^go/.test(h)&&h;u=f?"."+f:h&&typeof h=="object"?h.props?"":hs(h,""):h===!1?"":h}return i+a+(u??"")},"");function Uc(e){let t=this||{},r=e.call?e(t.p):e;return kS(r.unshift?r.raw?RS(r,[].slice.call(arguments,1),t.p):r.reduce((i,a)=>Object.assign(i,a&&a.call?a(t.p):a),{}):r,TS(t.target),t.g,t.o,t.k)}let a2,rd,nd;Uc.bind({g:1});let Di=Uc.bind({k:1});function MS(e,t,r,i){hs.p=t,a2=e,rd=r,nd=i}function Rs(e,t){let r=this||{};return function(){let i=arguments;function a(s,u){let h=Object.assign({},s),f=h.className||a.className;r.p=Object.assign({theme:rd&&rd()},h),r.o=/ *go\d+/.test(f),h.className=Uc.apply(r,i)+(f?" "+f:"");let d=e;return e[0]&&(d=h.as||e,delete h.as),nd&&d[0]&&nd(h),a2(d,h)}return a}}var DS=e=>typeof e=="function",mc=(e,t)=>DS(e)?e(t):e,PS=(()=>{let e=0;return()=>(++e).toString()})(),l2=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),LS=20,u2=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,LS)};case 1:return{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:r}=t;return u2(e,{type:e.toasts.find(s=>s.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=t;return{...e,toasts:e.toasts.map(s=>s.id===i||i===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+a}))}}},Pu=[],Ks={toasts:[],pausedAt:void 0},yo=e=>{Ks=u2(Ks,e),Pu.forEach(t=>{t(Ks)})},BS={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},jS=(e={})=>{let[t,r]=De.useState(Ks),i=De.useRef(Ks);De.useEffect(()=>(i.current!==Ks&&r(Ks),Pu.push(r),()=>{let s=Pu.indexOf(r);s>-1&&Pu.splice(s,1)}),[]);let a=t.toasts.map(s=>{var u,h,f;return{...e,...e[s.type],...s,removeDelay:s.removeDelay||((u=e[s.type])==null?void 0:u.removeDelay)||(e==null?void 0:e.removeDelay),duration:s.duration||((h=e[s.type])==null?void 0:h.duration)||(e==null?void 0:e.duration)||BS[s.type],style:{...e.style,...(f=e[s.type])==null?void 0:f.style,...s.style}}});return{...t,toasts:a}},FS=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||PS()}),jl=e=>(t,r)=>{let i=FS(t,e,r);return yo({type:2,toast:i}),i.id},tn=(e,t)=>jl("blank")(e,t);tn.error=jl("error");tn.success=jl("success");tn.loading=jl("loading");tn.custom=jl("custom");tn.dismiss=e=>{yo({type:3,toastId:e})};tn.remove=e=>yo({type:4,toastId:e});tn.promise=(e,t,r)=>{let i=tn.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let s=t.success?mc(t.success,a):void 0;return s?tn.success(s,{id:i,...r,...r==null?void 0:r.success}):tn.dismiss(i),a}).catch(a=>{let s=t.error?mc(t.error,a):void 0;s?tn.error(s,{id:i,...r,...r==null?void 0:r.error}):tn.dismiss(i)}),e};var US=(e,t)=>{yo({type:1,toast:{id:e,height:t}})},zS=()=>{yo({type:5,time:Date.now()})},sl=new Map,WS=1e3,HS=(e,t=WS)=>{if(sl.has(e))return;let r=setTimeout(()=>{sl.delete(e),yo({type:4,toastId:e})},t);sl.set(e,r)},VS=e=>{let{toasts:t,pausedAt:r}=jS(e);De.useEffect(()=>{if(r)return;let s=Date.now(),u=t.map(h=>{if(h.duration===1/0)return;let f=(h.duration||0)+h.pauseDuration-(s-h.createdAt);if(f<0){h.visible&&tn.dismiss(h.id);return}return setTimeout(()=>tn.dismiss(h.id),f)});return()=>{u.forEach(h=>h&&clearTimeout(h))}},[t,r]);let i=De.useCallback(()=>{r&&yo({type:6,time:Date.now()})},[r]),a=De.useCallback((s,u)=>{let{reverseOrder:h=!1,gutter:f=8,defaultPosition:d}=u||{},m=t.filter(b=>(b.position||d)===(s.position||d)&&b.height),w=m.findIndex(b=>b.id===s.id),v=m.filter((b,C)=>C<w&&b.visible).length;return m.filter(b=>b.visible).slice(...h?[v+1]:[0,v]).reduce((b,C)=>b+(C.height||0)+f,0)},[t]);return De.useEffect(()=>{t.forEach(s=>{if(s.dismissed)HS(s.id,s.removeDelay);else{let u=sl.get(s.id);u&&(clearTimeout(u),sl.delete(s.id))}})},[t]),{toasts:t,handlers:{updateHeight:US,startPause:zS,endPause:i,calculateOffset:a}}},$S=Di`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,GS=Di`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,YS=Di`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,XS=Rs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$S} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${GS} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${YS} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,qS=Di`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,QS=Rs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${qS} 1s linear infinite;
`,KS=Di`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ZS=Di`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,JS=Rs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${KS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ZS} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,eA=Rs("div")`
  position: absolute;
`,tA=Rs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,rA=Di`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,nA=Rs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${rA} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,iA=({toast:e})=>{let{icon:t,type:r,iconTheme:i}=e;return t!==void 0?typeof t=="string"?De.createElement(nA,null,t):t:r==="blank"?null:De.createElement(tA,null,De.createElement(QS,{...i}),r!=="loading"&&De.createElement(eA,null,r==="error"?De.createElement(XS,{...i}):De.createElement(JS,{...i})))},sA=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,oA=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,aA="0%{opacity:0;} 100%{opacity:1;}",lA="0%{opacity:1;} 100%{opacity:0;}",uA=Rs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,cA=Rs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,hA=(e,t)=>{let r=e.includes("top")?1:-1,[i,a]=l2()?[aA,lA]:[sA(r),oA(r)];return{animation:t?`${Di(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Di(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},fA=De.memo(({toast:e,position:t,style:r,children:i})=>{let a=e.height?hA(e.position||t||"top-center",e.visible):{opacity:0},s=De.createElement(iA,{toast:e}),u=De.createElement(cA,{...e.ariaProps},mc(e.message,e));return De.createElement(uA,{className:e.className,style:{...a,...r,...e.style}},typeof i=="function"?i({icon:s,message:u}):De.createElement(De.Fragment,null,s,u))});MS(De.createElement);var dA=({id:e,className:t,style:r,onHeightUpdate:i,children:a})=>{let s=De.useCallback(u=>{if(u){let h=()=>{let f=u.getBoundingClientRect().height;i(e,f)};h(),new MutationObserver(h).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[e,i]);return De.createElement("div",{ref:s,className:t,style:r},a)},pA=(e,t)=>{let r=e.includes("top"),i=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:l2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...i,...a}},gA=Uc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,fu=16,mA=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:i,children:a,containerStyle:s,containerClassName:u})=>{let{toasts:h,handlers:f}=VS(r);return De.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:fu,left:fu,right:fu,bottom:fu,pointerEvents:"none",...s},className:u,onMouseEnter:f.startPause,onMouseLeave:f.endPause},h.map(d=>{let m=d.position||t,w=f.calculateOffset(d,{reverseOrder:e,gutter:i,defaultPosition:t}),v=pA(m,w);return De.createElement(dA,{id:d.id,key:d.id,onHeightUpdate:f.updateHeight,className:d.visible?gA:"",style:v},d.type==="custom"?mc(d.message,d):a?a(d):De.createElement(fA,{toast:d,position:m}))}))},dr=tn;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Kr=(e,t)=>{const r=De.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:u,className:h="",children:f,...d},m)=>De.createElement("svg",{ref:m,...yA,width:a,height:a,stroke:i,strokeWidth:u?Number(s)*24/Number(a):s,className:["lucide",`lucide-${wA(e)}`,h].join(" "),...d},[...t.map(([w,v])=>De.createElement(w,v)),...Array.isArray(f)?f:[f]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=Kr("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=Kr("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=Kr("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=Kr("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=Kr("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=Kr("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=Kr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=Kr("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=Kr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=Kr("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=Kr("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=Kr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=Kr("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=Kr("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=Kr("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=Kr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),kA="modulepreload",RA=function(e){return"/"+e},Ng={},ha=function(t,r,i){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(r.map(f=>{if(f=RA(f),f in Ng)return;Ng[f]=!0;const d=f.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const w=document.createElement("link");if(w.rel=d?"stylesheet":kA,d||(w.as="script"),w.crossOrigin="",w.href=f,h&&w.setAttribute("nonce",h),document.head.appendChild(w),d)return new Promise((v,b)=>{w.addEventListener("load",v),w.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return a.then(u=>{for(const h of u||[])h.status==="rejected"&&s(h.reason);return t().catch(s)})},MA=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ha(async()=>{const{default:i}=await Promise.resolve().then(()=>ya);return{default:i}},void 0).then(({default:i})=>i(...r)):t=fetch,(...r)=>t(...r)};class D1 extends Error{constructor(t,r="FunctionsError",i){super(t),this.name=r,this.context=i}}class DA extends D1{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class PA extends D1{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class LA extends D1{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var sd;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(sd||(sd={}));var BA=function(e,t,r,i){function a(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function h(m){try{d(i.next(m))}catch(w){u(w)}}function f(m){try{d(i.throw(m))}catch(w){u(w)}}function d(m){m.done?s(m.value):a(m.value).then(h,f)}d((i=i.apply(e,t||[])).next())})};class jA{constructor(t,{headers:r={},customFetch:i,region:a=sd.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=MA(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var i;return BA(this,void 0,void 0,function*(){try{const{headers:a,method:s,body:u}=r;let h={},{region:f}=r;f||(f=this.region),f&&f!=="any"&&(h["x-region"]=f);let d;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",d=u):typeof u=="string"?(h["Content-Type"]="text/plain",d=u):typeof FormData<"u"&&u instanceof FormData?d=u:(h["Content-Type"]="application/json",d=JSON.stringify(u)));const m=yield this.fetch(`${this.url}/${t}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:d}).catch(C=>{throw new DA(C)}),w=m.headers.get("x-relay-error");if(w&&w==="true")throw new PA(m);if(!m.ok)throw new LA(m);let v=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),b;return v==="application/json"?b=yield m.json():v==="application/octet-stream"?b=yield m.blob():v==="text/event-stream"?b=m:v==="multipart/form-data"?b=yield m.formData():b=yield m.text(),{data:b,error:null}}catch(a){return{data:null,error:a}}})}}var dn={},P1={},zc={},Fl={},Wc={},Hc={},FA=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},fa=FA();const UA=fa.fetch,f2=fa.fetch.bind(fa),d2=fa.Headers,zA=fa.Request,WA=fa.Response,ya=Object.freeze(Object.defineProperty({__proto__:null,Headers:d2,Request:zA,Response:WA,default:f2,fetch:UA},Symbol.toStringTag,{value:"Module"})),HA=Jv(ya);var Vc={};Object.defineProperty(Vc,"__esModule",{value:!0});let VA=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Vc.default=VA;var p2=Fr&&Fr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hc,"__esModule",{value:!0});const $A=p2(HA),GA=p2(Vc);let YA=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=$A.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let a=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var u,h,f;let d=null,m=null,w=null,v=s.status,b=s.statusText;if(s.ok){if(this.method!=="HEAD"){const k=await s.text();k===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?m=k:m=JSON.parse(k))}const N=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),R=(h=s.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");N&&R&&R.length>1&&(w=parseInt(R[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(d={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,w=null,v=406,b="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const N=await s.text();try{d=JSON.parse(N),Array.isArray(d)&&s.status===404&&(m=[],d=null,v=200,b="OK")}catch{s.status===404&&N===""?(v=204,b="No Content"):d={message:N}}if(d&&this.isMaybeSingle&&(!((f=d==null?void 0:d.details)===null||f===void 0)&&f.includes("0 rows"))&&(d=null,v=200,b="OK"),d&&this.shouldThrowOnError)throw new GA.default(d)}return{error:d,data:m,count:w,status:v,statusText:b}});return this.shouldThrowOnError||(a=a.catch(s=>{var u,h,f;return{error:{message:`${(u=s==null?void 0:s.name)!==null&&u!==void 0?u:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(h=s==null?void 0:s.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=s==null?void 0:s.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};Hc.default=YA;var XA=Fr&&Fr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wc,"__esModule",{value:!0});const qA=XA(Hc);let QA=class extends qA.default{select(t){let r=!1;const i=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:i,foreignTable:a,referencedTable:s=a}={}){const u=s?`${s}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${t}.${r?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:i=r}={}){const a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:i,referencedTable:a=i}={}){const s=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(u,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:i=!1,buffers:a=!1,wal:s=!1,format:u="text"}={}){var h;const f=[t?"analyze":null,r?"verbose":null,i?"settings":null,a?"buffers":null,s?"wal":null].filter(Boolean).join("|"),d=(h=this.headers.Accept)!==null&&h!==void 0?h:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${d}"; options=${f};`,u==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Wc.default=QA;var KA=Fr&&Fr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fl,"__esModule",{value:!0});const ZA=KA(Wc);let JA=class extends ZA.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const i=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${i})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:i,type:a}={}){let s="";a==="plain"?s="pl":a==="phrase"?s="ph":a==="websearch"&&(s="w");const u=i===void 0?"":`(${i})`;return this.url.searchParams.append(t,`${s}fts${u}.${r}`),this}match(t){return Object.entries(t).forEach(([r,i])=>{this.url.searchParams.append(r,`eq.${i}`)}),this}not(t,r,i){return this.url.searchParams.append(t,`not.${r}.${i}`),this}or(t,{foreignTable:r,referencedTable:i=r}={}){const a=i?`${i}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,i){return this.url.searchParams.append(t,`${r}.${i}`),this}};Fl.default=JA;var eC=Fr&&Fr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zc,"__esModule",{value:!0});const Fa=eC(Fl);let tC=class{constructor(t,{headers:r={},schema:i,fetch:a}){this.url=t,this.headers=r,this.schema=i,this.fetch=a}select(t,{head:r=!1,count:i}={}){const a=r?"HEAD":"GET";let s=!1;const u=(t??"*").split("").map(h=>/\s/.test(h)&&!s?"":(h==='"'&&(s=!s),h)).join("");return this.url.searchParams.set("select",u),i&&(this.headers.Prefer=`count=${i}`),new Fa.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:i=!0}={}){const a="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),i||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const u=t.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(u.length>0){const h=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new Fa.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:i=!1,count:a,defaultToNull:s=!0}={}){const u="POST",h=[`resolution=${i?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&h.push(this.headers.Prefer),a&&h.push(`count=${a}`),s||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(t)){const f=t.reduce((d,m)=>d.concat(Object.keys(m)),[]);if(f.length>0){const d=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",d.join(","))}}return new Fa.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const i="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new Fa.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",i=[];return t&&i.push(`count=${t}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new Fa.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};zc.default=tC;var $c={},Gc={};Object.defineProperty(Gc,"__esModule",{value:!0});Gc.version=void 0;Gc.version="0.0.0-automated";Object.defineProperty($c,"__esModule",{value:!0});$c.DEFAULT_HEADERS=void 0;const rC=Gc;$c.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${rC.version}`};var g2=Fr&&Fr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(P1,"__esModule",{value:!0});const nC=g2(zc),iC=g2(Fl),sC=$c;let oC=class m2{constructor(t,{headers:r={},schema:i,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},sC.DEFAULT_HEADERS),r),this.schemaName=i,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new nC.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new m2(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:i=!1,get:a=!1,count:s}={}){let u;const h=new URL(`${this.url}/rpc/${t}`);let f;i||a?(u=i?"HEAD":"GET",Object.entries(r).filter(([m,w])=>w!==void 0).map(([m,w])=>[m,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([m,w])=>{h.searchParams.append(m,w)})):(u="POST",f=r);const d=Object.assign({},this.headers);return s&&(d.Prefer=`count=${s}`),new iC.default({method:u,url:h,headers:d,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}};P1.default=oC;var wa=Fr&&Fr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dn,"__esModule",{value:!0});dn.PostgrestError=dn.PostgrestBuilder=dn.PostgrestTransformBuilder=dn.PostgrestFilterBuilder=dn.PostgrestQueryBuilder=dn.PostgrestClient=void 0;const y2=wa(P1);dn.PostgrestClient=y2.default;const w2=wa(zc);dn.PostgrestQueryBuilder=w2.default;const x2=wa(Fl);dn.PostgrestFilterBuilder=x2.default;const v2=wa(Wc);dn.PostgrestTransformBuilder=v2.default;const b2=wa(Hc);dn.PostgrestBuilder=b2.default;const _2=wa(Vc);dn.PostgrestError=_2.default;var aC=dn.default={PostgrestClient:y2.default,PostgrestQueryBuilder:w2.default,PostgrestFilterBuilder:x2.default,PostgrestTransformBuilder:v2.default,PostgrestBuilder:b2.default,PostgrestError:_2.default};const{PostgrestClient:lC,PostgrestQueryBuilder:A4,PostgrestFilterBuilder:C4,PostgrestTransformBuilder:I4,PostgrestBuilder:T4,PostgrestError:N4}=aC,uC="2.11.2",cC={"X-Client-Info":`realtime-js/${uC}`},hC="1.0.0",E2=1e4,fC=1e3;var na;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(na||(na={}));var vn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(vn||(vn={}));var Xn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Xn||(Xn={}));var od;(function(e){e.websocket="websocket"})(od||(od={}));var Ys;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ys||(Ys={}));class dC{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,r,i)}_decodeBroadcast(t,r,i){const a=r.getUint8(1),s=r.getUint8(2);let u=this.HEADER_LENGTH+2;const h=i.decode(t.slice(u,u+a));u=u+a;const f=i.decode(t.slice(u,u+s));u=u+s;const d=JSON.parse(i.decode(t.slice(u,t.byteLength)));return{ref:null,topic:h,event:f,payload:d}}}class S2{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ht;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ht||(Ht={}));const Og=(e,t,r={})=>{var i;const a=(i=r.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(t).reduce((s,u)=>(s[u]=pC(u,e,t,a),s),{})},pC=(e,t,r,i)=>{const a=t.find(h=>h.name===e),s=a==null?void 0:a.type,u=r[e];return s&&!i.includes(s)?A2(s,u):ad(u)},A2=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return wC(t,r)}switch(e){case Ht.bool:return gC(t);case Ht.float4:case Ht.float8:case Ht.int2:case Ht.int4:case Ht.int8:case Ht.numeric:case Ht.oid:return mC(t);case Ht.json:case Ht.jsonb:return yC(t);case Ht.timestamp:return xC(t);case Ht.abstime:case Ht.date:case Ht.daterange:case Ht.int4range:case Ht.int8range:case Ht.money:case Ht.reltime:case Ht.text:case Ht.time:case Ht.timestamptz:case Ht.timetz:case Ht.tsrange:case Ht.tstzrange:return ad(t);default:return ad(t)}},ad=e=>e,gC=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},mC=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},yC=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},wC=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,i=e[r];if(e[0]==="{"&&i==="}"){let s;const u=e.slice(1,r);try{s=JSON.parse("["+u+"]")}catch{s=u?u.split(","):[]}return s.map(h=>A2(t,h))}return e},xC=e=>typeof e=="string"?e.replace(" ","T"):e,C2=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Hh{constructor(t,r,i={},a=E2){this.channel=t,this.event=r,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var i;return this._hasReceived(t)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var kg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(kg||(kg={}));class ol{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:s,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ol.syncState(this.state,a,s,u),this.pendingDiffs.forEach(f=>{this.state=ol.syncDiff(this.state,f,s,u)}),this.pendingDiffs=[],h()}),this.channel._on(i.diff,{},a=>{const{onJoin:s,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=ol.syncDiff(this.state,a,s,u),h())}),this.onJoin((a,s,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:u})}),this.onLeave((a,s,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,i,a){const s=this.cloneDeep(t),u=this.transformState(r),h={},f={};return this.map(s,(d,m)=>{u[d]||(f[d]=m)}),this.map(u,(d,m)=>{const w=s[d];if(w){const v=m.map(R=>R.presence_ref),b=w.map(R=>R.presence_ref),C=m.filter(R=>b.indexOf(R.presence_ref)<0),N=w.filter(R=>v.indexOf(R.presence_ref)<0);C.length>0&&(h[d]=C),N.length>0&&(f[d]=N)}else h[d]=m}),this.syncDiff(s,{joins:h,leaves:f},i,a)}static syncDiff(t,r,i,a){const{joins:s,leaves:u}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(s,(h,f)=>{var d;const m=(d=t[h])!==null&&d!==void 0?d:[];if(t[h]=this.cloneDeep(f),m.length>0){const w=t[h].map(b=>b.presence_ref),v=m.filter(b=>w.indexOf(b.presence_ref)<0);t[h].unshift(...v)}i(h,m,f)}),this.map(u,(h,f)=>{let d=t[h];if(!d)return;const m=f.map(w=>w.presence_ref);d=d.filter(w=>m.indexOf(w.presence_ref)<0),t[h]=d,a(h,d,f),d.length===0&&delete t[h]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(i=>r(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,i)=>{const a=t[i];return"metas"in a?r[i]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[i]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Rg;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Rg||(Rg={}));var Mg;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Mg||(Mg={}));var bi;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(bi||(bi={}));class L1{constructor(t,r={config:{}},i){this.topic=t,this.params=r,this.socket=i,this.bindings={},this.state=vn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Hh(this,Xn.join,this.params,this.timeout),this.rejoinTimer=new S2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xn.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new ol(this),this.broadcastEndpointURL=C2(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var i,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:u,private:h}}=this.params;this._onError(m=>t==null?void 0:t(bi.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(bi.CLOSED));const f={},d={broadcast:s,presence:u,postgres_changes:(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(m=>m.filter))!==null&&a!==void 0?a:[],private:h};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var w;if(this.socket.setAuth(),m===void 0){t==null||t(bi.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(w=v==null?void 0:v.length)!==null&&w!==void 0?w:0,C=[];for(let N=0;N<b;N++){const R=v[N],{filter:{event:k,schema:S,table:I,filter:B}}=R,U=m&&m[N];if(U&&U.event===k&&U.schema===S&&U.table===I&&U.filter===B)C.push(Object.assign(Object.assign({},R),{id:U.id}));else{this.unsubscribe(),t==null||t(bi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,t&&t(bi.SUBSCRIBED);return}}).receive("error",m=>{t==null||t(bi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(bi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,i){return this._on(t,r,i)}async send(t,r={}){var i,a;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:u}=t,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:u,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var u,h,f;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.ack)&&s("ok"),d.receive("ok",()=>s("ok")),d.receive("error",()=>s("error")),d.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=vn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xn.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(i=>{const a=new Hh(this,Xn.leave,{},t);a.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(t,r,i){const a=new AbortController,s=setTimeout(()=>a.abort(),i),u=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(s),u}_push(t,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Hh(this,t,r,i);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,i){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,i){var a,s;const u=t.toLocaleLowerCase(),{close:h,error:f,leave:d,join:m}=Xn;if(i&&[h,f,d,m].indexOf(u)>=0&&i!==this._joinRef())return;let v=this._onMessage(u,r,i);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(b=>{var C,N,R;return((C=b.filter)===null||C===void 0?void 0:C.event)==="*"||((R=(N=b.filter)===null||N===void 0?void 0:N.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===u}).map(b=>b.callback(v,i)):(s=this.bindings[u])===null||s===void 0||s.filter(b=>{var C,N,R,k,S,I;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in b){const B=b.id,U=(C=b.filter)===null||C===void 0?void 0:C.event;return B&&((N=r.ids)===null||N===void 0?void 0:N.includes(B))&&(U==="*"||(U==null?void 0:U.toLocaleLowerCase())===((R=r.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const B=(S=(k=b==null?void 0:b.filter)===null||k===void 0?void 0:k.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return B==="*"||B===((I=r==null?void 0:r.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===u}).map(b=>{if(typeof v=="object"&&"ids"in v){const C=v.data,{schema:N,table:R,commit_timestamp:k,type:S,errors:I}=C;v=Object.assign(Object.assign({},{schema:N,table:R,commit_timestamp:k,eventType:S,new:{},old:{},errors:I}),this._getPayloadRecords(C))}b.callback(v,i)})}_isClosed(){return this.state===vn.closed}_isJoined(){return this.state===vn.joined}_isJoining(){return this.state===vn.joining}_isLeaving(){return this.state===vn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,i){const a=t.toLocaleLowerCase(),s={type:a,filter:r,callback:i};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(t,r){const i=t.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&L1.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const i in t)if(t[i]!==r[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Xn.close,{},t)}_onError(t){this._on(Xn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Og(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Og(t.columns,t.old_record)),r}}const vC=()=>{},bC=typeof WebSocket<"u",_C=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class EC{constructor(t,r){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=cC,this.params={},this.timeout=E2,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=vC,this.conn=null,this.sendBuffer=[],this.serializer=new dC,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let u;return s?u=s:typeof fetch>"u"?u=(...h)=>ha(async()=>{const{default:f}=await Promise.resolve().then(()=>ya);return{default:f}},void 0).then(({default:f})=>f(...h)):u=fetch,(...h)=>u(...h)},this.endPoint=`${t}/${od.websocket}`,this.httpEndpoint=C2(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(i=r==null?void 0:r.params)===null||i===void 0?void 0:i.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(s,u)=>u(JSON.stringify(s)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new S2(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(bC){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new SC(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ha(async()=>{const{default:t}=await import("./browser-B_PLVb6f.js").then(r=>r.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:hC}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),t}log(t,r,i){this.logger(t,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case na.connecting:return Ys.Connecting;case na.open:return Ys.Open;case na.closing:return Ys.Closing;default:return Ys.Closed}}isConnected(){return this.connectionState()===Ys.Open}channel(t,r={config:{}}){const i=new L1(`realtime:${t}`,r,this);return this.channels.push(i),i}push(t){const{topic:r,event:i,payload:a,ref:s}=t,u=()=>{this.encode(t,h=>{var f;(f=this.conn)===null||f===void 0||f.send(h)})};this.log("push",`${r} ${i} (${s})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let i=null;try{i=JSON.parse(atob(r.split(".")[1]))}catch{}if(i&&i.exp&&!(Math.floor(Date.now()/1e3)-i.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`);this.accessTokenValue=r,this.channels.forEach(a=>{r&&a.updateJoinPayload({access_token:r}),a.joinedOnce&&a._isJoined()&&a._push(Xn.access_token,{access_token:r})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(fC,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:i,event:a,payload:s,ref:u}=r;u&&u===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${i} ${a} ${u&&"("+u+")"||""}`,s),this.channels.filter(h=>h._isMember(i)).forEach(h=>h._trigger(a,s,u)),this.stateChangeCallbacks.message.forEach(h=>h(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Xn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const i=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${i}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const i=new Blob([_C],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}}class SC{constructor(t,r,i){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=na.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=i.close}}class B1 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Tr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class AC extends B1{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ld extends B1{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var CC=function(e,t,r,i){function a(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function h(m){try{d(i.next(m))}catch(w){u(w)}}function f(m){try{d(i.throw(m))}catch(w){u(w)}}function d(m){m.done?s(m.value):a(m.value).then(h,f)}d((i=i.apply(e,t||[])).next())})};const I2=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ha(async()=>{const{default:i}=await Promise.resolve().then(()=>ya);return{default:i}},void 0).then(({default:i})=>i(...r)):t=fetch,(...r)=>t(...r)},IC=()=>CC(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ha(()=>Promise.resolve().then(()=>ya),void 0)).Response:Response}),ud=e=>{if(Array.isArray(e))return e.map(r=>ud(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,i])=>{const a=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[a]=ud(i)}),t};var wo=function(e,t,r,i){function a(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function h(m){try{d(i.next(m))}catch(w){u(w)}}function f(m){try{d(i.throw(m))}catch(w){u(w)}}function d(m){m.done?s(m.value):a(m.value).then(h,f)}d((i=i.apply(e,t||[])).next())})};const Vh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),TC=(e,t,r)=>wo(void 0,void 0,void 0,function*(){const i=yield IC();e instanceof i&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{t(new AC(Vh(a),e.status||500))}).catch(a=>{t(new ld(Vh(a),a))}):t(new ld(Vh(e),e))}),NC=(e,t,r,i)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i&&(a.body=JSON.stringify(i)),Object.assign(Object.assign({},a),r))};function Ul(e,t,r,i,a,s){return wo(this,void 0,void 0,function*(){return new Promise((u,h)=>{e(r,NC(t,i,a,s)).then(f=>{if(!f.ok)throw f;return i!=null&&i.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>TC(f,h,i))})})}function yc(e,t,r,i){return wo(this,void 0,void 0,function*(){return Ul(e,"GET",t,r,i)})}function ls(e,t,r,i,a){return wo(this,void 0,void 0,function*(){return Ul(e,"POST",t,i,a,r)})}function OC(e,t,r,i,a){return wo(this,void 0,void 0,function*(){return Ul(e,"PUT",t,i,a,r)})}function kC(e,t,r,i){return wo(this,void 0,void 0,function*(){return Ul(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function T2(e,t,r,i,a){return wo(this,void 0,void 0,function*(){return Ul(e,"DELETE",t,i,a,r)})}var hn=function(e,t,r,i){function a(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function h(m){try{d(i.next(m))}catch(w){u(w)}}function f(m){try{d(i.throw(m))}catch(w){u(w)}}function d(m){m.done?s(m.value):a(m.value).then(h,f)}d((i=i.apply(e,t||[])).next())})};const RC={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class MC{constructor(t,r={},i,a){this.url=t,this.headers=r,this.bucketId=i,this.fetch=I2(a)}uploadOrUpdate(t,r,i,a){return hn(this,void 0,void 0,function*(){try{let s;const u=Object.assign(Object.assign({},Dg),a);let h=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",u.cacheControl),f&&s.append("metadata",this.encodeMetadata(f)),s.append("",i)):typeof FormData<"u"&&i instanceof FormData?(s=i,s.append("cacheControl",u.cacheControl),f&&s.append("metadata",this.encodeMetadata(f))):(s=i,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,f&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),a!=null&&a.headers&&(h=Object.assign(Object.assign({},h),a.headers));const d=this._removeEmptyFolders(r),m=this._getFinalPath(d),w=yield this.fetch(`${this.url}/object/${m}`,Object.assign({method:t,body:s,headers:h},u!=null&&u.duplex?{duplex:u.duplex}:{})),v=yield w.json();return w.ok?{data:{path:d,id:v.Id,fullPath:v.Key},error:null}:{data:null,error:v}}catch(s){if(Tr(s))return{data:null,error:s};throw s}})}upload(t,r,i){return hn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,i)})}uploadToSignedUrl(t,r,i,a){return hn(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),u=this._getFinalPath(s),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",r);try{let f;const d=Object.assign({upsert:Dg.upsert},a),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&i instanceof Blob?(f=new FormData,f.append("cacheControl",d.cacheControl),f.append("",i)):typeof FormData<"u"&&i instanceof FormData?(f=i,f.append("cacheControl",d.cacheControl)):(f=i,m["cache-control"]=`max-age=${d.cacheControl}`,m["content-type"]=d.contentType);const w=yield this.fetch(h.toString(),{method:"PUT",body:f,headers:m}),v=yield w.json();return w.ok?{data:{path:s,fullPath:v.Key},error:null}:{data:null,error:v}}catch(f){if(Tr(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(t,r){return hn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const s=yield ls(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:a}),u=new URL(this.url+s.url),h=u.searchParams.get("token");if(!h)throw new B1("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:h},error:null}}catch(i){if(Tr(i))return{data:null,error:i};throw i}})}update(t,r,i){return hn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,i)})}move(t,r,i){return hn(this,void 0,void 0,function*(){try{return{data:yield ls(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Tr(a))return{data:null,error:a};throw a}})}copy(t,r,i){return hn(this,void 0,void 0,function*(){try{return{data:{path:(yield ls(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Tr(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,i){return hn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),s=yield ls(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${u}`)},{data:s,error:null}}catch(a){if(Tr(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,i){return hn(this,void 0,void 0,function*(){try{const a=yield ls(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),s=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${s}`):null})),error:null}}catch(a){if(Tr(a))return{data:null,error:a};throw a}})}download(t,r){return hn(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),u=s?`?${s}`:"";try{const h=this._getFinalPath(t);return{data:yield(yield yc(this.fetch,`${this.url}/${a}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(Tr(h))return{data:null,error:h};throw h}})}info(t){return hn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const i=yield yc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ud(i),error:null}}catch(i){if(Tr(i))return{data:null,error:i};throw i}})}exists(t){return hn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield kC(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Tr(i)&&i instanceof ld){const a=i.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,r){const i=this._getFinalPath(t),a=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&a.push(s);const h=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});f!==""&&a.push(f);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${i}${d}`)}}}remove(t){return hn(this,void 0,void 0,function*(){try{return{data:yield T2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Tr(r))return{data:null,error:r};throw r}})}list(t,r,i){return hn(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},RC),r),{prefix:t||""});return{data:yield ls(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},i),error:null}}catch(a){if(Tr(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const DC="2.7.1",PC={"X-Client-Info":`storage-js/${DC}`};var Oo=function(e,t,r,i){function a(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function h(m){try{d(i.next(m))}catch(w){u(w)}}function f(m){try{d(i.throw(m))}catch(w){u(w)}}function d(m){m.done?s(m.value):a(m.value).then(h,f)}d((i=i.apply(e,t||[])).next())})};class LC{constructor(t,r={},i){this.url=t,this.headers=Object.assign(Object.assign({},PC),r),this.fetch=I2(i)}listBuckets(){return Oo(this,void 0,void 0,function*(){try{return{data:yield yc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Tr(t))return{data:null,error:t};throw t}})}getBucket(t){return Oo(this,void 0,void 0,function*(){try{return{data:yield yc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Tr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Oo(this,void 0,void 0,function*(){try{return{data:yield ls(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Tr(i))return{data:null,error:i};throw i}})}updateBucket(t,r){return Oo(this,void 0,void 0,function*(){try{return{data:yield OC(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Tr(i))return{data:null,error:i};throw i}})}emptyBucket(t){return Oo(this,void 0,void 0,function*(){try{return{data:yield ls(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Tr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Oo(this,void 0,void 0,function*(){try{return{data:yield T2(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Tr(r))return{data:null,error:r};throw r}})}}class BC extends LC{constructor(t,r={},i){super(t,r,i)}from(t){return new MC(this.url,this.headers,t,this.fetch)}}const jC="2.49.4";let $a="";typeof Deno<"u"?$a="deno":typeof document<"u"?$a="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$a="react-native":$a="node";const FC={"X-Client-Info":`supabase-js-${$a}/${jC}`},UC={headers:FC},zC={schema:"public"},WC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},HC={};var VC=function(e,t,r,i){function a(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function h(m){try{d(i.next(m))}catch(w){u(w)}}function f(m){try{d(i.throw(m))}catch(w){u(w)}}function d(m){m.done?s(m.value):a(m.value).then(h,f)}d((i=i.apply(e,t||[])).next())})};const $C=e=>{let t;return e?t=e:typeof fetch>"u"?t=f2:t=fetch,(...r)=>t(...r)},GC=()=>typeof Headers>"u"?d2:Headers,YC=(e,t,r)=>{const i=$C(r),a=GC();return(s,u)=>VC(void 0,void 0,void 0,function*(){var h;const f=(h=yield t())!==null&&h!==void 0?h:e;let d=new a(u==null?void 0:u.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${f}`),i(s,Object.assign(Object.assign({},u),{headers:d}))})};var XC=function(e,t,r,i){function a(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function h(m){try{d(i.next(m))}catch(w){u(w)}}function f(m){try{d(i.throw(m))}catch(w){u(w)}}function d(m){m.done?s(m.value):a(m.value).then(h,f)}d((i=i.apply(e,t||[])).next())})};function qC(e){return e.replace(/\/$/,"")}function QC(e,t){const{db:r,auth:i,realtime:a,global:s}=e,{db:u,auth:h,realtime:f,global:d}=t,m={db:Object.assign(Object.assign({},u),r),auth:Object.assign(Object.assign({},h),i),realtime:Object.assign(Object.assign({},f),a),global:Object.assign(Object.assign({},d),s),accessToken:()=>XC(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const N2="2.69.1",Po=30*1e3,cd=3,$h=cd*Po,KC="http://localhost:9999",ZC="supabase.auth.token",JC={"X-Client-Info":`gotrue-js/${N2}`},hd="X-Supabase-Api-Version",O2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},e3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,t3=6e5;class j1 extends Error{constructor(t,r,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function mt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class r3 extends j1{constructor(t,r,i){super(t,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function n3(e){return mt(e)&&e.name==="AuthApiError"}class k2 extends j1{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ms extends j1{constructor(t,r,i,a){super(t,i,a),this.name=r,this.status=i}}class Ji extends Ms{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function i3(e){return mt(e)&&e.name==="AuthSessionMissingError"}class Gh extends Ms{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class du extends Ms{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class pu extends Ms{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function s3(e){return mt(e)&&e.name==="AuthImplicitGrantRedirectError"}class Pg extends Ms{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fd extends Ms{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Yh(e){return mt(e)&&e.name==="AuthRetryableFetchError"}class Lg extends Ms{constructor(t,r,i){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class al extends Ms{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jg=` 	
\r=`.split(""),o3=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<jg.length;t+=1)e[jg[t].charCodeAt(0)]=-2;for(let t=0;t<Bg.length;t+=1)e[Bg[t].charCodeAt(0)]=t;return e})();function R2(e,t,r){const i=o3[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Fg(e){const t=[],r=u=>{t.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=u=>{u3(u,i,r)};for(let u=0;u<e.length;u+=1)R2(e.charCodeAt(u),a,s);return t.join("")}function a3(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function l3(e,t){for(let r=0;r<e.length;r+=1){let i=e.charCodeAt(r);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}a3(i,t)}}function u3(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let i=1;i<6;i+=1)if(!(e>>7-i&1)){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function c3(e){const t=[],r={queue:0,queuedBits:0},i=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)R2(e.charCodeAt(a),r,i);return new Uint8Array(t)}function h3(e){const t=[];return l3(e,r=>t.push(r)),new Uint8Array(t)}function f3(e){return Math.round(Date.now()/1e3)+e}function d3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const oi=()=>typeof window<"u"&&typeof document<"u",Fs={tested:!1,writable:!1},ll=()=>{if(!oi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fs.tested)return Fs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Fs.tested=!0,Fs.writable=!0}catch{Fs.tested=!0,Fs.writable=!1}return Fs.writable};function p3(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,s)=>{t[s]=a})}catch{}return r.searchParams.forEach((i,a)=>{t[a]=i}),t}const M2=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ha(async()=>{const{default:i}=await Promise.resolve().then(()=>ya);return{default:i}},void 0).then(({default:i})=>i(...r)):t=fetch,(...r)=>t(...r)},g3=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",D2=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},gu=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},mu=async(e,t)=>{await e.removeItem(t)};class Yc{constructor(){this.promise=new Yc.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Yc.promiseConstructor=Promise;function Xh(e){const t=e.split(".");if(t.length!==3)throw new al("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!e3.test(t[i]))throw new al("JWT not in base64url format");return{header:JSON.parse(Fg(t[0])),payload:JSON.parse(Fg(t[1])),signature:c3(t[2]),raw:{header:t[0],payload:t[1]}}}async function m3(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function y3(e,t){return new Promise((i,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const u=await e(s);if(!t(s,null,u)){i(u);return}}catch(u){if(!t(s,u)){a(u);return}}})()})}function w3(e){return("0"+e.toString(16)).substr(-2)}function x3(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let a="";for(let s=0;s<56;s++)a+=r.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(t),Array.from(t,w3).join("")}async function v3(e){const r=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(i);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function b3(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await v3(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ko(e,t,r=!1){const i=x3();let a=i;r&&(a+="/PASSWORD_RECOVERY"),await D2(e,`${t}-code-verifier`,a);const s=await b3(i);return[s,i===s?"plain":"s256"]}const _3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function E3(e){const t=e.headers.get(hd);if(!t||!t.match(_3))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function S3(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function A3(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var C3=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(r[i[a]]=e[i[a]]);return r};const $s=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),I3=[502,503,504];async function Ug(e){var t;if(!g3(e))throw new fd($s(e),0);if(I3.includes(e.status))throw new fd($s(e),e.status);let r;try{r=await e.json()}catch(s){throw new k2($s(s),s)}let i;const a=E3(e);if(a&&a.getTime()>=O2["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new Lg($s(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new Ji}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,u)=>s&&typeof u=="string",!0))throw new Lg($s(r),e.status,r.weak_password.reasons);throw new r3($s(r),e.status||500,i)}const T3=(e,t,r,i)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),r))};async function bt(e,t,r,i){var a;const s=Object.assign({},i==null?void 0:i.headers);s[hd]||(s[hd]=O2["2024-01-01"].name),i!=null&&i.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const u=(a=i==null?void 0:i.query)!==null&&a!==void 0?a:{};i!=null&&i.redirectTo&&(u.redirect_to=i.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await N3(e,t,r+h,{headers:s,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(f):{data:Object.assign({},f),error:null}}async function N3(e,t,r,i,a,s){const u=T3(t,i,a,s);let h;try{h=await e(r,Object.assign({},u))}catch(f){throw console.error(f),new fd($s(f),0)}if(h.ok||await Ug(h),i!=null&&i.noResolveJson)return h;try{return await h.json()}catch(f){await Ug(f)}}function es(e){var t;let r=null;M3(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=f3(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:i},error:null}}function zg(e){const t=es(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function fs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function O3(e){return{data:e,error:null}}function k3(e){const{action_link:t,email_otp:r,hashed_token:i,redirect_to:a,verification_type:s}=e,u=C3(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:t,email_otp:r,hashed_token:i,redirect_to:a,verification_type:s},f=Object.assign({},u);return{data:{properties:h,user:f},error:null}}function R3(e){return e}function M3(e){return e.access_token&&e.refresh_token&&e.expires_in}var D3=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(r[i[a]]=e[i[a]]);return r};class P3{constructor({url:t="",headers:r={},fetch:i}){this.url=t,this.headers=r,this.fetch=M2(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r="global"){try{return await bt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(mt(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,r={}){try{return await bt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:fs})}catch(i){if(mt(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:r}=t,i=D3(t,["options"]),a=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(a.new_email=i==null?void 0:i.newEmail,delete a.newEmail),await bt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:k3,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(mt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await bt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:fs})}catch(r){if(mt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,i,a,s,u,h,f;try{const d={nextPage:null,lastPage:0,total:0},m=await bt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:R3});if(m.error)throw m.error;const w=await m.json(),v=(u=m.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(f=(h=m.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return b.length>0&&(b.forEach(C=>{const N=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(C.split(";")[1].split("=")[1]);d[`${R}Page`]=N}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},w),d),error:null}}catch(d){if(mt(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){try{return await bt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:fs})}catch(r){if(mt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){try{return await bt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:fs})}catch(i){if(mt(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,r=!1){try{return await bt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:fs})}catch(i){if(mt(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){try{const{data:r,error:i}=await bt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:i}}catch(r){if(mt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){try{return{data:await bt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}}}const L3={getItem:e=>ll()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{ll()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{ll()&&globalThis.localStorage.removeItem(e)}};function Wg(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function B3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ro={debug:!!(globalThis&&ll()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class P2 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class j3 extends P2{}async function F3(e,t,r){Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new j3(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ro.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}B3();const U3={url:KC,storageKey:ZC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:JC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Hg(e,t,r){return await r()}class kl{constructor(t){var r,i;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=kl.nextInstanceID,kl.nextInstanceID+=1,this.instanceID>0&&oi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},U3),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new P3({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=M2(a.fetch),this.lock=a.lock||Hg,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:oi()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=F3:this.lock=Hg,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:ll()?this.storage=L3:(this.memoryStorage={},this.storage=Wg(this.memoryStorage)):(this.memoryStorage={},this.storage=Wg(this.memoryStorage)),oi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${N2}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=p3(window.location.href);let i="none";if(this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce"),oi()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:s}=await this._getSessionFromURL(r,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),s3(s)){const f=(t=s.details)===null||t===void 0?void 0:t.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:u,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return mt(r)?{error:r}:{error:new k2("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,i,a;try{const s=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:es}),{data:u,error:h}=s;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,d=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(s){if(mt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var r,i,a;try{let s;if("email"in t){const{email:m,password:w,options:v}=t;let b=null,C=null;this.flowType==="pkce"&&([b,C]=await ko(this.storage,this.storageKey)),s=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:m,password:w,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:b,code_challenge_method:C},xform:es})}else if("phone"in t){const{phone:m,password:w,options:v}=t;s=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:w,data:(i=v==null?void 0:v.data)!==null&&i!==void 0?i:{},channel:(a=v==null?void 0:v.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:es})}else throw new du("You must provide either an email or phone number and a password");const{data:u,error:h}=s;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,d=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(s){if(mt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let r;if("email"in t){const{email:s,password:u,options:h}=t;r=await bt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:zg})}else if("phone"in t){const{phone:s,password:u,options:h}=t;r=await bt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:zg})}else throw new du("You must provide either an email or phone number and a password");const{data:i,error:a}=r;return a?{data:{user:null,session:null},error:a}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Gh}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(r){if(mt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,i,a,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const r=await gu(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(r??"").split("/");try{const{data:s,error:u}=await bt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:es});if(await mu(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Gh}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:u})}catch(s){if(mt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:r,provider:i,token:a,access_token:s,nonce:u}=t,h=await bt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:s,nonce:u,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:es}),{data:f,error:d}=h;return d?{data:{user:null,session:null},error:d}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Gh}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:d})}catch(r){if(mt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,i,a,s,u;try{if("email"in t){const{email:h,options:f}=t;let d=null,m=null;this.flowType==="pkce"&&([d,m]=await ko(this.storage,this.storageKey));const{error:w}=await bt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},create_user:(i=f==null?void 0:f.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:d,code_challenge_method:m},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in t){const{phone:h,options:f}=t,{data:d,error:m}=await bt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=f==null?void 0:f.data)!==null&&a!==void 0?a:{},create_user:(s=f==null?void 0:f.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(u=f==null?void 0:f.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:m}}throw new du("You must provide either an email or phone number.")}catch(h){if(mt(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(t){var r,i;try{let a,s;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,s=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:h}=await bt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:es});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,d=u.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(a){if(mt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,i,a;try{let s=null,u=null;return this.flowType==="pkce"&&([s,u]=await ko(this.storage,this.storageKey)),await bt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:u}),headers:this.headers,xform:O3})}catch(s){if(mt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:i}=t;if(i)throw i;if(!r)throw new Ji;const{error:a}=await bt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(mt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:i,type:a,options:s}=t,{error:u}=await bt(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in t){const{phone:i,type:a,options:s}=t,{data:u,error:h}=await bt(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new du("You must provide either an email or phone number and a type")}catch(r){if(mt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await gu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<$h:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.storage.isServer){let u=this.suppressGetSessionWarning;t=new Proxy(t,{get:(f,d,m)=>(!u&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,d,m))})}return{data:{session:t},error:null}}const{session:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await bt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:fs}):await this._useSession(async r=>{var i,a,s;const{data:u,error:h}=r;if(h)throw h;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ji}:await bt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:fs})})}catch(r){if(mt(r))return i3(r)&&(await this._removeSession(),await mu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async i=>{const{data:a,error:s}=i;if(s)throw s;if(!a.session)throw new Ji;const u=a.session;let h=null,f=null;this.flowType==="pkce"&&t.email!=null&&([h,f]=await ko(this.storage,this.storageKey));const{data:d,error:m}=await bt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:h,code_challenge_method:f}),jwt:u.access_token,xform:fs});if(m)throw m;return u.user=d.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(i){if(mt(i))return{data:{user:null},error:i};throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ji;const r=Date.now()/1e3;let i=r,a=!0,s=null;const{payload:u}=Xh(t.access_token);if(u.exp&&(i=u.exp,a=i<=r),a){const{session:h,error:f}=await this._callRefreshToken(t.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!h)return{data:{user:null,session:null},error:null};s=h}else{const{data:h,error:f}=await this._getUser(t.access_token);if(f)throw f;s={access_token:t.access_token,refresh_token:t.refresh_token,user:h.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(mt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var i;if(!t){const{data:u,error:h}=r;if(h)throw h;t=(i=u.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new Ji;const{session:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(mt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!oi())throw new pu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new pu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Pg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Pg("No code detected.");const{data:S,error:I}=await this._exchangeCodeForSession(t.code);if(I)throw I;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:s,refresh_token:u,expires_in:h,expires_at:f,token_type:d}=t;if(!s||!h||!u||!d)throw new pu("No session defined in URL");const m=Math.round(Date.now()/1e3),w=parseInt(h);let v=m+w;f&&(v=parseInt(f));const b=v-m;b*1e3<=Po&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${w}s`);const C=v-w;m-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,v,m):m-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,v,m);const{data:N,error:R}=await this._getUser(s);if(R)throw R;const k={provider_token:i,provider_refresh_token:a,access_token:s,expires_in:w,expires_at:v,refresh_token:u,token_type:d,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:t.type},error:null}}catch(i){if(mt(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await gu(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:a,error:s}=r;if(s)return{error:s};const u=(i=a.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:h}=await this.admin.signOut(u,t);if(h&&!(n3(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return t!=="others"&&(await this._removeSession(),await mu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=d3(),i={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async r=>{var i,a;try{const{data:{session:s},error:u}=r;if(u)throw u;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,r={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await ko(this.storage,this.storageKey,!0));try{return await bt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(mt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:i,error:a}=await this._useSession(async s=>{var u,h,f,d,m;const{data:w,error:v}=s;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=t.options)===null||h===void 0?void 0:h.scopes,queryParams:(f=t.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await bt(this.fetch,"GET",b,{headers:this.headers,jwt:(m=(d=w.session)===null||d===void 0?void 0:d.access_token)!==null&&m!==void 0?m:void 0})});if(a)throw a;return oi()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:t.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(mt(i))return{data:{provider:t.provider,url:null},error:i};throw i}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var i,a;const{data:s,error:u}=r;if(u)throw u;return await bt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(mt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await y3(async a=>(a>0&&await m3(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await bt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:es})),(a,s)=>{const u=200*Math.pow(2,a);return s&&Yh(s)&&Date.now()+u-i<Po})}catch(i){if(this._debug(r,"error",i),mt(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",i),oi()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await gu(this.storage,this.storageKey);if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<$h;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${$h}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),Yh(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,i;if(!t)throw new Ji;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Yc;const{data:s,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!s.session)throw new Ji;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const h={session:s.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(s){if(this._debug(a,"error",s),mt(s)){const u={session:null,error:s};return Yh(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,i=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:r});const s=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(t,r)}catch(f){s.push(f)}});if(await Promise.all(u),s.length>0){for(let h=0;h<s.length;h+=1)console.error(s[h]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await D2(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await mu(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&oi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Po);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-t)/Po);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Po}ms, refresh threshold is ${cd} ticks`),a<=cd&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof P2)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!oi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,i){const a=[`provider=${encodeURIComponent(r)}`];if(i!=null&&i.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[s,u]=await ko(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(h.toString())}if(i!=null&&i.queryParams){const s=new URLSearchParams(i.queryParams);a.push(s.toString())}return i!=null&&i.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var i;const{data:a,error:s}=r;return s?{data:null,error:s}:await bt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(mt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var i,a;const{data:s,error:u}=r;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:f,error:d}=await bt(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=f==null?void 0:f.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(r){if(mt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:a,error:s}=r;if(s)return{data:null,error:s};const{data:u,error:h}=await bt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(r){if(mt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:a,error:s}=r;return s?{data:null,error:s}:await bt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(mt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:i}=await this._challenge({factorId:t.factorId});return i?{data:null,error:i}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const i=(t==null?void 0:t.factors)||[],a=i.filter(u=>u.factor_type==="totp"&&u.status==="verified"),s=i.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:i,totp:a,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,i;const{data:{session:a},error:s}=t;if(s)return{data:null,error:s};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Xh(a.access_token);let h=null;u.aal&&(h=u.aal);let f=h;((i=(r=a.user.factors)===null||r===void 0?void 0:r.filter(w=>w.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(f="aal2");const m=u.amr||[];return{data:{currentLevel:h,nextLevel:f,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(t,r={keys:[]}){let i=r.keys.find(u=>u.kid===t);if(i||(i=this.jwks.keys.find(u=>u.kid===t),i&&this.jwks_cached_at+t3>Date.now()))return i;const{data:a,error:s}=await bt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!a.keys||a.keys.length===0)throw new al("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),i=a.keys.find(u=>u.kid===t),!i)throw new al("No matching signing key found in JWKS");return i}async getClaims(t,r={keys:[]}){try{let i=t;if(!i){const{data:b,error:C}=await this.getSession();if(C||!b.session)return{data:null,error:C};i=b.session.access_token}const{header:a,payload:s,signature:u,raw:{header:h,payload:f}}=Xh(i);if(S3(s.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(i);if(b)throw b;return{data:{claims:s,header:a,signature:u},error:null}}const d=A3(a.alg),m=await this.fetchJwk(a.kid,r),w=await crypto.subtle.importKey("jwk",m,d,!0,["verify"]);if(!await crypto.subtle.verify(d,w,u,h3(`${h}.${f}`)))throw new al("Invalid JWT signature");return{data:{claims:s,header:a,signature:u},error:null}}catch(i){if(mt(i))return{data:null,error:i};throw i}}}kl.nextInstanceID=0;const z3=kl;class W3 extends z3{constructor(t){super(t)}}var H3=function(e,t,r,i){function a(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function h(m){try{d(i.next(m))}catch(w){u(w)}}function f(m){try{d(i.throw(m))}catch(w){u(w)}}function d(m){m.done?s(m.value):a(m.value).then(h,f)}d((i=i.apply(e,t||[])).next())})};class V3{constructor(t,r,i){var a,s,u;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const h=qC(t);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:zC,realtime:HC,auth:Object.assign(Object.assign({},WC),{storageKey:f}),global:UC},m=QC(i??{},d);this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(s=m.global.headers)!==null&&s!==void 0?s:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(w,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=m.auth)!==null&&u!==void 0?u:{},this.headers,m.global.fetch),this.fetch=YC(r,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new lC(`${h}/rest/v1`,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new jA(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new BC(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},i={}){return this.rest.rpc(t,r,i)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return H3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(r=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:i,storage:a,storageKey:s,flowType:u,lock:h,debug:f},d,m){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new W3({url:this.authUrl,headers:Object.assign(Object.assign({},w),d),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:i,storage:a,flowType:u,lock:h,debug:f,fetch:m,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new EC(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(t,r,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $3=(e,t,r)=>new V3(e,t,r),G3="https://popppjirsdedxhetcphs.supabase.co",Y3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBvcHBwamlyc2RlZHhoZXRjcGhzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM3NjMxMDAsImV4cCI6MjA1OTMzOTEwMH0.Ihv60cbfUSeDN5dPDsOZRz4y79ek3D5YZZgKwBsMkSc",X3="https://glittery-gnome-eb1888.netlify.app",Er=$3(G3,Y3,{auth:{flowType:"pkce",autoRefreshToken:!0,detectSessionInUrl:!0,persistSession:!0,storage:window.localStorage}}),q3=()=>`${X3}/#/login`,L2="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDQwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHRleHQgeD0iMTAiIHk9Ijc1IiBmb250LWZhbWlseT0iQXJpYWwgQmxhY2siIGZvbnQtc2l6ZT0iODAiIGZpbGw9IiNGRkQ3MDAiPkM8L3RleHQ+CiAgPHRleHQgeD0iNzUiIHk9Ijc1IiBmb250LWZhbWlseT0iQXJpYWwgQmxhY2siIGZvbnQtc2l6ZT0iODAiIGZpbGw9IiNGRjhDMDAiPkg8L3RleHQ+CiAgPHRleHQgeD0iMTQwIiB5PSI3NSIgZm9udC1mYW1pbHk9IkFyaWFsIEJsYWNrIiBmb250LXNpemU9IjgwIiBmaWxsPSIjRkY0NTAwIj5FPC90ZXh0PgogIDx0ZXh0IHg9IjIwNSIgeT0iNzUiIGZvbnQtZmFtaWx5PSJBcmlhbCBCbGFjayIgZm9udC1zaXplPSI4MCIgZmlsbD0iI0ZGNjM0NyI+RTwvdGV4dD4KICA8dGV4dCB4PSIyNzAiIHk9Ijc1IiBmb250LWZhbWlseT0iQXJpYWwgQmxhY2siIGZvbnQtc2l6ZT0iODAiIGZpbGw9IiNGRjhDMDAiPks8L3RleHQ+CiAgPHRleHQgeD0iMzM1IiB5PSI3NSIgZm9udC1mYW1pbHk9IkFyaWFsIEJsYWNrIiBmb250LXNpemU9IjgwIiBmaWxsPSIjRkZENzAwIj5PPC90ZXh0Pgo8L3N2Zz4=";function Q3(){const e=mo(),[t,r]=De.useState(""),[i,a]=De.useState(""),[s,u]=De.useState(!1),[h,f]=De.useState(!1),d=async w=>{w.preventDefault(),u(!0);try{if(t.toLowerCase()==="rahul@craftech360.com"){if(!i)throw new Error("Password is required for admin login");console.log("Attempting admin sign in with:",{email:t.toLowerCase(),passwordLength:(i==null?void 0:i.length)||0});const{data:b,error:C}=await Er.auth.signInWithPassword({email:t.toLowerCase(),password:i});if(console.log("Sign in response:",{data:b,error:C}),C)throw C;dr.success("Successfully signed in!"),e("/admin")}else{console.log("Attempting magic link sign in for:",t.toLowerCase());const{error:b}=await Er.auth.signInWithOtp({email:t.toLowerCase(),options:{emailRedirectTo:q3()}});if(console.log("Magic link response error:",b),b)throw b;f(!0),dr.success("Check your email for the magic link!")}}catch(v){console.log("Authentication error details:",{message:v==null?void 0:v.message,error:v,email:t.toLowerCase(),isAdmin:t.toLowerCase()==="rahul@craftech360.com"});const b=(v==null?void 0:v.message)||"Authentication failed. Please check your credentials.";dr.error(b),console.error("Auth error:",v)}finally{u(!1)}},m=t.toLowerCase()==="rahul@craftech360.com";return te.jsx("div",{className:"min-h-screen bg-primary-50 flex flex-col items-center justify-center p-4",children:te.jsx("div",{className:"w-full max-w-md",children:te.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[te.jsx("div",{className:"flex justify-center mb-8",children:te.jsx("img",{src:L2,alt:"Cheeko",className:"h-16 w-auto"})}),h?te.jsxs("div",{className:"text-center space-y-4",children:[te.jsx("p",{className:"text-primary-700",children:"Magic link has been sent to your email!"}),te.jsx("p",{className:"text-sm text-primary-500",children:"Please check your email and click the link to sign in."}),te.jsx("button",{onClick:()=>f(!1),className:"text-primary-600 hover:text-primary-700 text-sm",children:"Use a different email"})]}):te.jsxs("form",{onSubmit:d,className:"space-y-4",children:[te.jsxs("div",{children:[te.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-primary-700",children:"Email"}),te.jsxs("div",{className:"mt-1 relative",children:[te.jsx("input",{id:"email",type:"email",value:t,onChange:w=>r(w.target.value),className:"block w-full px-4 py-3 rounded-lg border border-primary-200 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter your email",required:!0}),te.jsx(SA,{className:"absolute right-3 top-3 text-primary-400",size:20})]})]}),m&&te.jsxs("div",{children:[te.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-primary-700",children:"Password"}),te.jsxs("div",{className:"mt-1 relative",children:[te.jsx("input",{id:"password",type:"password",value:i,onChange:w=>a(w.target.value),className:"block w-full px-4 py-3 rounded-lg border border-primary-200 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter your password",required:m}),te.jsx(_A,{className:"absolute right-3 top-3 text-primary-400",size:20})]})]}),te.jsx("button",{type:"submit",disabled:s,className:"w-full bg-primary-500 text-white py-3 rounded-lg hover:bg-primary-600 transition-colors disabled:opacity-50",children:s?"Signing in...":m?"Sign In":"Send Magic Link"})]})]})})})}function co(){const e=mo(),t=async()=>{try{await Er.auth.signOut(),e("/login"),dr.success("Logged out successfully")}catch{dr.error("Failed to log out")}};return te.jsx("header",{className:"bg-white border-b border-primary-100",children:te.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:te.jsxs("div",{className:"flex justify-between items-center h-16",children:[te.jsx(ra,{to:"/",className:"flex items-center",children:te.jsx("img",{src:L2,alt:"Cheeko",className:"h-10 w-auto"})}),te.jsxs("button",{onClick:t,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-primary-600 hover:text-primary-700 focus:outline-none transition",children:[te.jsx(EA,{className:"h-4 w-4 mr-2"}),"Logout"]})]})})})}function Xc(){const t=go().pathname.split("/").filter(i=>i),r={"add-toy":"Add Toy",settings:"Settings"};return te.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-gray-500 mb-6",children:[te.jsx(ra,{to:"/",className:"flex items-center hover:text-gray-900",children:te.jsx(bA,{className:"h-4 w-4"})}),t.map((i,a)=>{const s=`/${t.slice(0,a+1).join("/")}`,u=a===t.length-1;return isNaN(Number(i))?te.jsxs(qa.Fragment,{children:[te.jsx(vA,{className:"h-4 w-4 text-gray-400"}),u?te.jsx("span",{className:"text-gray-900 font-medium",children:r[i]||i}):te.jsx(ra,{to:s,className:"hover:text-gray-900",children:r[i]||i})]},i):null})]})}function K3(){const[e,t]=qa.useState([]),[r,i]=qa.useState(!0);qa.useEffect(()=>{a()},[]);const a=async()=>{try{const{data:{user:u}}=await Er.auth.getUser();if(!u)throw new Error("Not authenticated");const{data:h,error:f}=await Er.from("toys").select("*").eq("user_id",u.id).order("created_at",{ascending:!1});if(f)throw f;t(h||[])}catch(u){console.error("Error loading toys:",u)}finally{i(!1)}},s=u=>{if(!u)return!1;const h=new Date(u);return new Date().getTime()-h.getTime()<5*60*1e3};return r?te.jsxs("div",{className:"min-h-screen bg-primary-50",children:[te.jsx(co,{}),te.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:te.jsx("div",{className:"flex items-center justify-center h-64",children:te.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})})})]}):te.jsxs("div",{className:"min-h-screen bg-primary-50",children:[te.jsx(co,{}),te.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[te.jsxs("div",{className:"flex justify-between items-center mb-6",children:[te.jsx(Xc,{}),te.jsxs(ra,{to:"/add-toy",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-500 hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[te.jsx(c2,{className:"h-4 w-4 mr-2"}),"Add Toy"]})]}),e.length===0?te.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[te.jsx(id,{className:"h-12 w-12 text-primary-400 mx-auto mb-4"}),te.jsx("h3",{className:"text-lg font-medium text-primary-900 mb-2",children:"No toys yet"}),te.jsx("p",{className:"text-primary-500 mb-4",children:"Get started by adding your first AI toy"}),te.jsx(ra,{to:"/add-toy",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary-500 bg-primary-50 hover:bg-primary-100",children:"Add Your First Toy"})]}):te.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:e.map(u=>te.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-primary-100 hover:shadow-md transition-shadow",children:te.jsxs("div",{className:"p-6",children:[te.jsxs("div",{className:"flex items-start justify-between",children:[te.jsxs("div",{className:"flex items-center space-x-3",children:[te.jsx("div",{className:"flex-shrink-0",children:te.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:te.jsx(id,{className:"h-6 w-6 text-primary-500"})})}),te.jsxs("div",{children:[te.jsx("h3",{className:"text-lg font-medium text-primary-900",children:u.name}),te.jsx("p",{className:"text-sm text-primary-500",children:u.role_type})]})]}),te.jsx(ra,{to:`/toy/${u.id}/settings`,className:"p-2 text-primary-400 hover:text-primary-500 rounded-full hover:bg-primary-50",children:te.jsx(IA,{className:"h-5 w-5"})})]}),te.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[te.jsx("div",{className:"flex items-center space-x-1",children:s(u.last_online)?te.jsxs(te.Fragment,{children:[te.jsx(OA,{className:"h-4 w-4 text-green-500"}),te.jsx("span",{className:"text-sm text-green-500",children:"Online"})]}):te.jsxs(te.Fragment,{children:[te.jsx(NA,{className:"h-4 w-4 text-primary-400"}),te.jsx("span",{className:"text-sm text-primary-400",children:"Offline"})]})}),te.jsxs("span",{className:"text-xs text-primary-400",children:["SN: ",u.serial_number]})]})]})},u.id))})]})]})}var nt;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(nt||(nt={}));var Vg=new Map([[nt.QR_CODE,"QR_CODE"],[nt.AZTEC,"AZTEC"],[nt.CODABAR,"CODABAR"],[nt.CODE_39,"CODE_39"],[nt.CODE_93,"CODE_93"],[nt.CODE_128,"CODE_128"],[nt.DATA_MATRIX,"DATA_MATRIX"],[nt.MAXICODE,"MAXICODE"],[nt.ITF,"ITF"],[nt.EAN_13,"EAN_13"],[nt.EAN_8,"EAN_8"],[nt.PDF_417,"PDF_417"],[nt.RSS_14,"RSS_14"],[nt.RSS_EXPANDED,"RSS_EXPANDED"],[nt.UPC_A,"UPC_A"],[nt.UPC_E,"UPC_E"],[nt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),$g;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})($g||($g={}));function Z3(e){return Object.values(nt).includes(e)}var Is;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Is||(Is={}));var qn=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Is.SCAN_TYPE_CAMERA,Is.SCAN_TYPE_FILE],e}(),B2=function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Vg.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Vg.get(t))},e}(),Gg=function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),dd;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(dd||(dd={}));var j2=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:dd.UNKWOWN_ERROR}},e}(),F2=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function ui(e){return typeof e>"u"||e===null}function J3(e,t,r){return e>r?r:e<t?t:e}var qo=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),Rt=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),Yg=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),U2=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var i=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],s=new Set(a),u=Object.keys(t),h=0,f=u;h<f.length;h++){var d=f[h];if(s.has(d))return r.logError("".concat(d," is not supported videoConstaints."),!0),!1}return!0},e}(),pd={exports:{}};(function(e,t){(function(r,i){i(t)})(Fr,function(r){function i(M){return M==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,n){M.__proto__=n}||function(M,n){for(var o in n)n.hasOwnProperty(o)&&(M[o]=n[o])};function s(M,n){a(M,n);function o(){this.constructor=M}M.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}function u(M,n){var o=Object.setPrototypeOf;o?o(M,n):M.__proto__=n}function h(M,n){n===void 0&&(n=M.constructor);var o=Error.captureStackTrace;o&&o(M,n)}var f=function(M){s(n,M);function n(o){var l=this.constructor,c=M.call(this,o)||this;return Object.defineProperty(c,"name",{value:l.name,enumerable:!1}),u(c,l.prototype),h(c),c}return n}(Error);class d extends f{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}d.kind="Exception";class m extends d{}m.kind="ArgumentException";class w extends d{}w.kind="IllegalArgumentException";class v{constructor(n){if(this.binarizer=n,n===null)throw new w("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,o){return this.binarizer.getBlackRow(n,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,o,l,c){const p=this.binarizer.getLuminanceSource().crop(n,o,l,c);return new v(this.binarizer.createBinarizer(p))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new v(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new v(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class b extends d{static getChecksumInstance(){return new b}}b.kind="ChecksumException";class C{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class N{static arraycopy(n,o,l,c,p){for(;p--;)l[c++]=n[o++]}static currentTimeMillis(){return Date.now()}}class R extends d{}R.kind="IndexOutOfBoundsException";class k extends R{constructor(n=void 0,o=void 0){super(o),this.index=n,this.message=o}}k.kind="ArrayIndexOutOfBoundsException";class S{static fill(n,o){for(let l=0,c=n.length;l<c;l++)n[l]=o}static fillWithin(n,o,l,c){S.rangeCheck(n.length,o,l);for(let p=o;p<l;p++)n[p]=c}static rangeCheck(n,o,l){if(o>l)throw new w("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new k(o);if(l>n)throw new k(l)}static asList(...n){return n}static create(n,o,l){return Array.from({length:n}).map(p=>Array.from({length:o}).fill(l))}static createInt32Array(n,o,l){return Array.from({length:n}).map(p=>Int32Array.from({length:o}).fill(l))}static equals(n,o){if(!n||!o||!n.length||!o.length||n.length!==o.length)return!1;for(let l=0,c=n.length;l<c;l++)if(n[l]!==o[l])return!1;return!0}static hashCode(n){if(n===null)return 0;let o=1;for(const l of n)o=31*o+l;return o}static fillUint8Array(n,o){for(let l=0;l!==n.length;l++)n[l]=o}static copyOf(n,o){return n.slice(0,o)}static copyOfUint8Array(n,o){if(n.length<=o){const l=new Uint8Array(o);return l.set(n),l}return n.slice(0,o)}static copyOfRange(n,o,l){const c=l-o,p=new Int32Array(c);return N.arraycopy(n,o,p,0,c),p}static binarySearch(n,o,l){l===void 0&&(l=S.numberComparator);let c=0,p=n.length-1;for(;c<=p;){const g=p+c>>1,y=l(o,n[g]);if(y>0)c=g+1;else if(y<0)p=g-1;else return g}return-c-1}static numberComparator(n,o){return n-o}}class I{static numberOfTrailingZeros(n){let o;if(n===0)return 32;let l=31;return o=n<<16,o!==0&&(l-=16,n=o),o=n<<8,o!==0&&(l-=8,n=o),o=n<<4,o!==0&&(l-=4,n=o),o=n<<2,o!==0&&(l-=2,n=o),l-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let o=1;return n>>>16||(o+=16,n<<=16),n>>>24||(o+=8,n<<=8),n>>>28||(o+=4,n<<=4),n>>>30||(o+=2,n<<=2),o-=n>>>31,o}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,o){return Math.trunc(n/o)}static parseInt(n,o=void 0){return parseInt(n,o)}}I.MIN_VALUE_32_BITS=-2147483648,I.MAX_VALUE=Number.MAX_SAFE_INTEGER;class B{constructor(n,o){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,o==null?this.bits=B.makeArray(n):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const o=B.makeArray(n);N.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const o=this.size;if(n>=o)return o;const l=this.bits;let c=Math.floor(n/32),p=l[c];p&=~((1<<(n&31))-1);const g=l.length;for(;p===0;){if(++c===g)return o;p=l[c]}const y=c*32+I.numberOfTrailingZeros(p);return y>o?o:y}getNextUnset(n){const o=this.size;if(n>=o)return o;const l=this.bits;let c=Math.floor(n/32),p=~l[c];p&=~((1<<(n&31))-1);const g=l.length;for(;p===0;){if(++c===g)return o;p=~l[c]}const y=c*32+I.numberOfTrailingZeros(p);return y>o?o:y}setBulk(n,o){this.bits[Math.floor(n/32)]=o}setRange(n,o){if(o<n||n<0||o>this.size)throw new w;if(o===n)return;o--;const l=Math.floor(n/32),c=Math.floor(o/32),p=this.bits;for(let g=l;g<=c;g++){const y=g>l?0:n&31,_=(2<<(g<c?31:o&31))-(1<<y);p[g]|=_}}clear(){const n=this.bits.length,o=this.bits;for(let l=0;l<n;l++)o[l]=0}isRange(n,o,l){if(o<n||n<0||o>this.size)throw new w;if(o===n)return!0;o--;const c=Math.floor(n/32),p=Math.floor(o/32),g=this.bits;for(let y=c;y<=p;y++){const x=y>c?0:n&31,O=(2<<(y<p?31:o&31))-(1<<x)&4294967295;if((g[y]&O)!==(l?O:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,o){if(o<0||o>32)throw new w("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((n>>l-1&1)===1)}appendBitArray(n){const o=n.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(n.get(l))}xor(n){if(this.size!==n.size)throw new w("Sizes don't match");const o=this.bits;for(let l=0,c=o.length;l<c;l++)o[l]^=n.bits[l]}toBytes(n,o,l,c){for(let p=0;p<c;p++){let g=0;for(let y=0;y<8;y++)this.get(n)&&(g|=1<<7-y),n++;o[l+p]=g}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,c=this.bits;for(let p=0;p<l;p++){let g=c[p];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,n[o-p]=g}if(this.size!==l*32){const p=l*32-this.size;let g=n[0]>>>p;for(let y=1;y<l;y++){const x=n[y];g|=x<<32-p,n[y-1]=g,g=x>>>p}n[l-1]=g}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof B))return!1;const o=n;return this.size===o.size&&S.equals(this.bits,o.bits)}hashCode(){return 31*this.size+S.hashCode(this.bits)}toString(){let n="";for(let o=0,l=this.size;o<l;o++)o&7||(n+=" "),n+=this.get(o)?"X":".";return n}clone(){return new B(this.size,this.bits.slice())}}var U;(function(M){M[M.OTHER=0]="OTHER",M[M.PURE_BARCODE=1]="PURE_BARCODE",M[M.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",M[M.TRY_HARDER=3]="TRY_HARDER",M[M.CHARACTER_SET=4]="CHARACTER_SET",M[M.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",M[M.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",M[M.ASSUME_GS1=7]="ASSUME_GS1",M[M.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",M[M.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",M[M.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(U||(U={}));var L=U;class P extends d{static getFormatInstance(){return new P}}P.kind="FormatException";var W;(function(M){M[M.Cp437=0]="Cp437",M[M.ISO8859_1=1]="ISO8859_1",M[M.ISO8859_2=2]="ISO8859_2",M[M.ISO8859_3=3]="ISO8859_3",M[M.ISO8859_4=4]="ISO8859_4",M[M.ISO8859_5=5]="ISO8859_5",M[M.ISO8859_6=6]="ISO8859_6",M[M.ISO8859_7=7]="ISO8859_7",M[M.ISO8859_8=8]="ISO8859_8",M[M.ISO8859_9=9]="ISO8859_9",M[M.ISO8859_10=10]="ISO8859_10",M[M.ISO8859_11=11]="ISO8859_11",M[M.ISO8859_13=12]="ISO8859_13",M[M.ISO8859_14=13]="ISO8859_14",M[M.ISO8859_15=14]="ISO8859_15",M[M.ISO8859_16=15]="ISO8859_16",M[M.SJIS=16]="SJIS",M[M.Cp1250=17]="Cp1250",M[M.Cp1251=18]="Cp1251",M[M.Cp1252=19]="Cp1252",M[M.Cp1256=20]="Cp1256",M[M.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",M[M.UTF8=22]="UTF8",M[M.ASCII=23]="ASCII",M[M.Big5=24]="Big5",M[M.GB18030=25]="GB18030",M[M.EUC_KR=26]="EUC_KR"})(W||(W={}));class q{constructor(n,o,l,...c){this.valueIdentifier=n,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=c,q.VALUE_IDENTIFIER_TO_ECI.set(n,this),q.NAME_TO_ECI.set(l,this);const p=this.values;for(let g=0,y=p.length;g!==y;g++){const x=p[g];q.VALUES_TO_ECI.set(x,this)}for(const g of c)q.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new P("incorect value");const o=q.VALUES_TO_ECI.get(n);if(o===void 0)throw new P("incorect value");return o}static getCharacterSetECIByName(n){const o=q.NAME_TO_ECI.get(n);if(o===void 0)throw new P("incorect value");return o}equals(n){if(!(n instanceof q))return!1;const o=n;return this.getName()===o.getName()}}q.VALUE_IDENTIFIER_TO_ECI=new Map,q.VALUES_TO_ECI=new Map,q.NAME_TO_ECI=new Map,q.Cp437=new q(W.Cp437,Int32Array.from([0,2]),"Cp437"),q.ISO8859_1=new q(W.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),q.ISO8859_2=new q(W.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),q.ISO8859_3=new q(W.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),q.ISO8859_4=new q(W.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),q.ISO8859_5=new q(W.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),q.ISO8859_6=new q(W.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),q.ISO8859_7=new q(W.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),q.ISO8859_8=new q(W.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),q.ISO8859_9=new q(W.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),q.ISO8859_10=new q(W.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),q.ISO8859_11=new q(W.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),q.ISO8859_13=new q(W.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),q.ISO8859_14=new q(W.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),q.ISO8859_15=new q(W.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),q.ISO8859_16=new q(W.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),q.SJIS=new q(W.SJIS,20,"SJIS","Shift_JIS"),q.Cp1250=new q(W.Cp1250,21,"Cp1250","windows-1250"),q.Cp1251=new q(W.Cp1251,22,"Cp1251","windows-1251"),q.Cp1252=new q(W.Cp1252,23,"Cp1252","windows-1252"),q.Cp1256=new q(W.Cp1256,24,"Cp1256","windows-1256"),q.UnicodeBigUnmarked=new q(W.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),q.UTF8=new q(W.UTF8,26,"UTF8","UTF-8"),q.ASCII=new q(W.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),q.Big5=new q(W.Big5,28,"Big5"),q.GB18030=new q(W.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),q.EUC_KR=new q(W.EUC_KR,30,"EUC_KR","EUC-KR");class pe extends d{}pe.kind="UnsupportedOperationException";class Ae{static decode(n,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(n,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(n,l):new TextDecoder(l).decode(n)}static shouldDecodeOnFallback(n){return!Ae.isBrowser()&&n==="ISO-8859-1"}static encode(n,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(n,l):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof q?n:q.getCharacterSetECIByName(n)}static decodeFallback(n,o){const l=this.encodingCharacterSet(o);if(Ae.isDecodeFallbackSupported(l)){let c="";for(let p=0,g=n.length;p<g;p++){let y=n[p].toString(16);y.length<2&&(y="0"+y),c+="%"+y}return decodeURIComponent(c)}if(l.equals(q.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new pe(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(q.UTF8)||n.equals(q.ISO8859_1)||n.equals(q.ASCII)}static encodeFallback(n){const l=btoa(unescape(encodeURIComponent(n))).split(""),c=[];for(let p=0;p<l.length;p++)c.push(l[p].charCodeAt(0));return new Uint8Array(c)}}class H{static castAsNonUtf8Char(n,o=null){const l=o?o.getName():this.ISO88591;return Ae.decode(new Uint8Array([n]),l)}static guessEncoding(n,o){if(o!=null&&o.get(L.CHARACTER_SET)!==void 0)return o.get(L.CHARACTER_SET).toString();const l=n.length;let c=!0,p=!0,g=!0,y=0,x=0,_=0,O=0,D=0,F=0,Y=0,se=0,ae=0,we=0,Te=0;const Qe=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let Ke=0;Ke<l&&(c||p||g);Ke++){const Ge=n[Ke]&255;g&&(y>0?Ge&128?y--:g=!1:Ge&128&&(Ge&64?(y++,Ge&32?(y++,Ge&16?(y++,Ge&8?g=!1:O++):_++):x++):g=!1)),c&&(Ge>127&&Ge<160?c=!1:Ge>159&&(Ge<192||Ge===215||Ge===247)&&Te++),p&&(D>0?Ge<64||Ge===127||Ge>252?p=!1:D--:Ge===128||Ge===160||Ge>239?p=!1:Ge>160&&Ge<224?(F++,se=0,Y++,Y>ae&&(ae=Y)):Ge>127?(D++,Y=0,se++,se>we&&(we=se)):(Y=0,se=0))}return g&&y>0&&(g=!1),p&&D>0&&(p=!1),g&&(Qe||x+_+O>0)?H.UTF8:p&&(H.ASSUME_SHIFT_JIS||ae>=3||we>=3)?H.SHIFT_JIS:c&&p?ae===2&&F===2||Te*10>=l?H.SHIFT_JIS:H.ISO88591:c?H.ISO88591:p?H.SHIFT_JIS:g?H.UTF8:H.PLATFORM_DEFAULT_ENCODING}static format(n,...o){let l=-1;function c(g,y,x,_,O,D){if(g==="%%")return"%";if(o[++l]===void 0)return;g=_?parseInt(_.substr(1)):void 0;let F=O?parseInt(O.substr(1)):void 0,Y;switch(D){case"s":Y=o[l];break;case"c":Y=o[l][0];break;case"f":Y=parseFloat(o[l]).toFixed(g);break;case"p":Y=parseFloat(o[l]).toPrecision(g);break;case"e":Y=parseFloat(o[l]).toExponential(g);break;case"x":Y=parseInt(o[l]).toString(F||16);break;case"d":Y=parseFloat(parseInt(o[l],F||10).toPrecision(g)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(F);let se=parseInt(x),ae=x&&x[0]+""=="0"?"0":" ";for(;Y.length<se;)Y=y!==void 0?Y+ae:ae+Y;return Y}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(p,c)}static getBytes(n,o){return Ae.encode(n,o)}static getCharCode(n,o=0){return n.charCodeAt(o)}static getCharAt(n){return String.fromCharCode(n)}}H.SHIFT_JIS=q.SJIS.getName(),H.GB2312="GB2312",H.ISO88591=q.ISO8859_1.getName(),H.EUC_JP="EUC_JP",H.UTF8=q.UTF8.getName(),H.PLATFORM_DEFAULT_ENCODING=H.UTF8,H.ASSUME_SHIFT_JIS=!1;class ue{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=H.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,o,l){for(let c=o;o<o+l;c++)this.append(n[c]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,o){this.value=this.value.substr(0,n)+o+this.value.substr(n+1)}substring(n,o){return this.value.substring(n,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,o){this.value=this.value.substr(0,n)+o+this.value.substr(n+o.length)}}class xe{constructor(n,o,l,c){if(this.width=n,this.height=o,this.rowSize=l,this.bits=c,o==null&&(o=n),this.height=o,n<1||o<1)throw new w("Both dimensions must be greater than 0");l==null&&(l=Math.floor((n+31)/32)),this.rowSize=l,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const o=n.length,l=n[0].length,c=new xe(l,o);for(let p=0;p<o;p++){const g=n[p];for(let y=0;y<l;y++)g[y]&&c.set(y,p)}return c}static parseFromString(n,o,l){if(n===null)throw new w("stringRepresentation cannot be null");const c=new Array(n.length);let p=0,g=0,y=-1,x=0,_=0;for(;_<n.length;)if(n.charAt(_)===`
`||n.charAt(_)==="\r"){if(p>g){if(y===-1)y=p-g;else if(p-g!==y)throw new w("row lengths do not match");g=p,x++}_++}else if(n.substring(_,_+o.length)===o)_+=o.length,c[p]=!0,p++;else if(n.substring(_,_+l.length)===l)_+=l.length,c[p]=!1,p++;else throw new w("illegal character encountered: "+n.substring(_));if(p>g){if(y===-1)y=p-g;else if(p-g!==y)throw new w("row lengths do not match");x++}const O=new xe(y,x);for(let D=0;D<p;D++)c[D]&&O.set(Math.floor(D%y),Math.floor(D/y));return O}get(n,o){const l=o*this.rowSize+Math.floor(n/32);return(this.bits[l]>>>(n&31)&1)!==0}set(n,o){const l=o*this.rowSize+Math.floor(n/32);this.bits[l]|=1<<(n&31)&4294967295}unset(n,o){const l=o*this.rowSize+Math.floor(n/32);this.bits[l]&=~(1<<(n&31)&4294967295)}flip(n,o){const l=o*this.rowSize+Math.floor(n/32);this.bits[l]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new w("input matrix dimensions do not match");const o=new B(Math.floor(this.width/32)+1),l=this.rowSize,c=this.bits;for(let p=0,g=this.height;p<g;p++){const y=p*l,x=n.getRow(p,o).getBitArray();for(let _=0;_<l;_++)c[y+_]^=x[_]}}clear(){const n=this.bits,o=n.length;for(let l=0;l<o;l++)n[l]=0}setRegion(n,o,l,c){if(o<0||n<0)throw new w("Left and top must be nonnegative");if(c<1||l<1)throw new w("Height and width must be at least 1");const p=n+l,g=o+c;if(g>this.height||p>this.width)throw new w("The region must fit inside the matrix");const y=this.rowSize,x=this.bits;for(let _=o;_<g;_++){const O=_*y;for(let D=n;D<p;D++)x[O+Math.floor(D/32)]|=1<<(D&31)&4294967295}}getRow(n,o){o==null||o.getSize()<this.width?o=new B(this.width):o.clear();const l=this.rowSize,c=this.bits,p=n*l;for(let g=0;g<l;g++)o.setBulk(g*32,c[p+g]);return o}setRow(n,o){N.arraycopy(o.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),o=this.getHeight();let l=new B(n),c=new B(n);for(let p=0,g=Math.floor((o+1)/2);p<g;p++)l=this.getRow(p,l),c=this.getRow(o-1-p,c),l.reverse(),c.reverse(),this.setRow(p,c),this.setRow(o-1-p,l)}getEnclosingRectangle(){const n=this.width,o=this.height,l=this.rowSize,c=this.bits;let p=n,g=o,y=-1,x=-1;for(let _=0;_<o;_++)for(let O=0;O<l;O++){const D=c[_*l+O];if(D!==0){if(_<g&&(g=_),_>x&&(x=_),O*32<p){let F=0;for(;!(D<<31-F&4294967295);)F++;O*32+F<p&&(p=O*32+F)}if(O*32+31>y){let F=31;for(;!(D>>>F);)F--;O*32+F>y&&(y=O*32+F)}}}return y<p||x<g?null:Int32Array.from([p,g,y-p+1,x-g+1])}getTopLeftOnBit(){const n=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const c=l/n;let p=l%n*32;const g=o[l];let y=0;for(;!(g<<31-y&4294967295);)y++;return p+=y,Int32Array.from([p,c])}getBottomRightOnBit(){const n=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const c=Math.floor(l/n);let p=Math.floor(l%n)*32;const g=o[l];let y=31;for(;!(g>>>y);)y--;return p+=y,Int32Array.from([p,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof xe))return!1;const o=n;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&S.equals(this.bits,o.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+S.hashCode(this.bits),n}toString(n="X ",o="  ",l=`
`){return this.buildToString(n,o,l)}buildToString(n,o,l){let c=new ue;for(let p=0,g=this.height;p<g;p++){for(let y=0,x=this.width;y<x;y++)c.append(this.get(y,p)?n:o);c.append(l)}return c.toString()}clone(){return new xe(this.width,this.height,this.rowSize,this.bits.slice())}}class z extends d{static getNotFoundInstance(){return new z}}z.kind="NotFoundException";class Be extends C{constructor(n){super(n),this.luminances=Be.EMPTY,this.buckets=new Int32Array(Be.LUMINANCE_BUCKETS)}getBlackRow(n,o){const l=this.getLuminanceSource(),c=l.getWidth();o==null||o.getSize()<c?o=new B(c):o.clear(),this.initArrays(c);const p=l.getRow(n,this.luminances),g=this.buckets;for(let x=0;x<c;x++)g[(p[x]&255)>>Be.LUMINANCE_SHIFT]++;const y=Be.estimateBlackPoint(g);if(c<3)for(let x=0;x<c;x++)(p[x]&255)<y&&o.set(x);else{let x=p[0]&255,_=p[1]&255;for(let O=1;O<c-1;O++){const D=p[O+1]&255;(_*4-x-D)/2<y&&o.set(O),x=_,_=D}}return o}getBlackMatrix(){const n=this.getLuminanceSource(),o=n.getWidth(),l=n.getHeight(),c=new xe(o,l);this.initArrays(o);const p=this.buckets;for(let x=1;x<5;x++){const _=Math.floor(l*x/5),O=n.getRow(_,this.luminances),D=Math.floor(o*4/5);for(let F=Math.floor(o/5);F<D;F++){const Y=O[F]&255;p[Y>>Be.LUMINANCE_SHIFT]++}}const g=Be.estimateBlackPoint(p),y=n.getMatrix();for(let x=0;x<l;x++){const _=x*o;for(let O=0;O<o;O++)(y[_+O]&255)<g&&c.set(O,x)}return c}createBinarizer(n){return new Be(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const o=this.buckets;for(let l=0;l<Be.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(n){const o=n.length;let l=0,c=0,p=0;for(let O=0;O<o;O++)n[O]>p&&(c=O,p=n[O]),n[O]>l&&(l=n[O]);let g=0,y=0;for(let O=0;O<o;O++){const D=O-c,F=n[O]*D*D;F>y&&(g=O,y=F)}if(c>g){const O=c;c=g,g=O}if(g-c<=o/16)throw new z;let x=g-1,_=-1;for(let O=g-1;O>c;O--){const D=O-c,F=D*D*(g-O)*(l-n[O]);F>_&&(x=O,_=F)}return x<<Be.LUMINANCE_SHIFT}}Be.LUMINANCE_BITS=5,Be.LUMINANCE_SHIFT=8-Be.LUMINANCE_BITS,Be.LUMINANCE_BUCKETS=1<<Be.LUMINANCE_BITS,Be.EMPTY=Uint8ClampedArray.from([0]);class _e extends Be{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),o=n.getWidth(),l=n.getHeight();if(o>=_e.MINIMUM_DIMENSION&&l>=_e.MINIMUM_DIMENSION){const c=n.getMatrix();let p=o>>_e.BLOCK_SIZE_POWER;o&_e.BLOCK_SIZE_MASK&&p++;let g=l>>_e.BLOCK_SIZE_POWER;l&_e.BLOCK_SIZE_MASK&&g++;const y=_e.calculateBlackPoints(c,p,g,o,l),x=new xe(o,l);_e.calculateThresholdForBlock(c,p,g,o,l,y,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new _e(n)}static calculateThresholdForBlock(n,o,l,c,p,g,y){const x=p-_e.BLOCK_SIZE,_=c-_e.BLOCK_SIZE;for(let O=0;O<l;O++){let D=O<<_e.BLOCK_SIZE_POWER;D>x&&(D=x);const F=_e.cap(O,2,l-3);for(let Y=0;Y<o;Y++){let se=Y<<_e.BLOCK_SIZE_POWER;se>_&&(se=_);const ae=_e.cap(Y,2,o-3);let we=0;for(let Qe=-2;Qe<=2;Qe++){const Ke=g[F+Qe];we+=Ke[ae-2]+Ke[ae-1]+Ke[ae]+Ke[ae+1]+Ke[ae+2]}const Te=we/25;_e.thresholdBlock(n,se,D,Te,c,y)}}}static cap(n,o,l){return n<o?o:n>l?l:n}static thresholdBlock(n,o,l,c,p,g){for(let y=0,x=l*p+o;y<_e.BLOCK_SIZE;y++,x+=p)for(let _=0;_<_e.BLOCK_SIZE;_++)(n[x+_]&255)<=c&&g.set(o+_,l+y)}static calculateBlackPoints(n,o,l,c,p){const g=p-_e.BLOCK_SIZE,y=c-_e.BLOCK_SIZE,x=new Array(l);for(let _=0;_<l;_++){x[_]=new Int32Array(o);let O=_<<_e.BLOCK_SIZE_POWER;O>g&&(O=g);for(let D=0;D<o;D++){let F=D<<_e.BLOCK_SIZE_POWER;F>y&&(F=y);let Y=0,se=255,ae=0;for(let Te=0,Qe=O*c+F;Te<_e.BLOCK_SIZE;Te++,Qe+=c){for(let Ke=0;Ke<_e.BLOCK_SIZE;Ke++){const Ge=n[Qe+Ke]&255;Y+=Ge,Ge<se&&(se=Ge),Ge>ae&&(ae=Ge)}if(ae-se>_e.MIN_DYNAMIC_RANGE)for(Te++,Qe+=c;Te<_e.BLOCK_SIZE;Te++,Qe+=c)for(let Ke=0;Ke<_e.BLOCK_SIZE;Ke++)Y+=n[Qe+Ke]&255}let we=Y>>_e.BLOCK_SIZE_POWER*2;if(ae-se<=_e.MIN_DYNAMIC_RANGE&&(we=se/2,_>0&&D>0)){const Te=(x[_-1][D]+2*x[_][D-1]+x[_-1][D-1])/4;se<Te&&(we=Te)}x[_][D]=we}}return x}}_e.BLOCK_SIZE_POWER=3,_e.BLOCK_SIZE=1<<_e.BLOCK_SIZE_POWER,_e.BLOCK_SIZE_MASK=_e.BLOCK_SIZE-1,_e.MINIMUM_DIMENSION=_e.BLOCK_SIZE*5,_e.MIN_DYNAMIC_RANGE=24;class he{constructor(n,o){this.width=n,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,o,l,c){throw new pe("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new pe("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new pe("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let o=new ue;for(let l=0;l<this.height;l++){const c=this.getRow(l,n);for(let p=0;p<this.width;p++){const g=c[p]&255;let y;g<64?y="#":g<128?y="+":g<192?y=".":y=" ",o.append(y)}o.append(`
`)}return o.toString()}}class Me extends he{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,o){const l=this.delegate.getRow(n,o),c=this.getWidth();for(let p=0;p<c;p++)l[p]=255-(l[p]&255);return l}getMatrix(){const n=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let c=0;c<o;c++)l[c]=255-(n[c]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(n,o,l,c){return new Me(this.delegate.crop(n,o,l,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Me(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Me(this.delegate.rotateCounterClockwise45())}}class ne extends he{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=ne.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const o=n.getContext("2d").getImageData(0,0,n.width,n.height);return ne.toGrayscaleBuffer(o.data,n.width,n.height)}static toGrayscaleBuffer(n,o,l){const c=new Uint8ClampedArray(o*l);for(let p=0,g=0,y=n.length;p<y;p+=4,g++){let x;if(n[p+3]===0)x=255;else{const O=n[p],D=n[p+1],F=n[p+2];x=306*O+601*D+117*F+512>>10}c[g]=x}return c}getRow(n,o){if(n<0||n>=this.getHeight())throw new w("Requested row is outside the image: "+n);const l=this.getWidth(),c=n*l;return o===null?o=this.buffer.slice(c,c+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(c,c+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,o,l,c){return super.crop(n,o,l,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const o=this.getTempCanvasElement(),l=o.getContext("2d"),c=n*ne.DEGREE_TO_RADIANS,p=this.canvas.width,g=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(c))*p+Math.abs(Math.sin(c))*g),x=Math.ceil(Math.abs(Math.sin(c))*p+Math.abs(Math.cos(c))*g);return o.width=y,o.height=x,l.translate(y/2,x/2),l.rotate(c),l.drawImage(this.canvas,p/-2,g/-2),this.buffer=ne.makeBufferFromCanvasImageData(o),this}invert(){return new Me(this)}}ne.DEGREE_TO_RADIANS=Math.PI/180;class Re{constructor(n,o,l){this.deviceId=n,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var G=(globalThis||Fr||self||window||void 0)&&(globalThis||Fr||self||window||void 0).__awaiter||function(M,n,o,l){function c(p){return p instanceof o?p:new o(function(g){g(p)})}return new(o||(o=Promise))(function(p,g){function y(O){try{_(l.next(O))}catch(D){g(D)}}function x(O){try{_(l.throw(O))}catch(D){g(D)}}function _(O){O.done?p(O.value):c(O.value).then(y,x)}_((l=l.apply(M,n||[])).next())})};class Oe{constructor(n,o=500,l){this.reader=n,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return G(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of n){const c=l.kind==="video"?"videoinput":l.kind;if(c!=="videoinput")continue;const p=l.deviceId||l.id,g=l.label||`Video device ${o.length+1}`,y=l.groupId,x={deviceId:p,label:g,kind:c,groupId:y};o.push(x)}return o})}getVideoInputDevices(){return G(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new Re(o.deviceId,o.label))})}findDeviceById(n){return G(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===n):null})}decodeFromInputVideoDevice(n,o){return G(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,o)})}decodeOnceFromVideoDevice(n,o){return G(this,void 0,void 0,function*(){this.reset();let l;n?l={deviceId:{exact:n}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeOnceFromConstraints(c,o)})}decodeOnceFromConstraints(n,o){return G(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(n,o){return G(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(n,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(n,o,l){return G(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,o,l)})}decodeFromVideoDevice(n,o,l){return G(this,void 0,void 0,function*(){let c;n?c={deviceId:{exact:n}}:c={facingMode:"environment"};const p={video:c};return yield this.decodeFromConstraints(p,o,l)})}decodeFromConstraints(n,o,l){return G(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(c,o,l)})}decodeFromStream(n,o,l){return G(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(n,o);return yield this.decodeContinuously(c,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,o){return G(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,n),this.videoElement=l,this.stream=n,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(n){return new Promise((o,l)=>this.playVideoOnLoad(n,()=>o()))}playVideoOnLoad(n,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",o),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return G(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,o){const l=document.getElementById(n);if(!l)throw new m(`element with id '${n}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new m(`element with id '${n}' must be an ${o} element`);return l}decodeFromImage(n,o){if(!n&&!o)throw new m("either imageElement with a src set or an url must be provided");return o&&!n?this.decodeFromImageUrl(o):this.decodeFromImageElement(n)}decodeFromVideo(n,o){if(!n&&!o)throw new m("Either an element with a src set or an URL must be provided");return o&&!n?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,o,l){if(n===void 0&&o===void 0)throw new m("Either an element with a src set or an URL must be provided");return o&&!n?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(n,l)}decodeFromImageElement(n){if(!n)throw new m("An image element must be provided.");this.reset();const o=this.prepareImageElement(n);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(n){const o=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(n,o){const l=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(n){if(!n)throw new m("A video element must be provided.");this.reset();const o=this.prepareVideoElement(n);return this.videoElement=o,o}decodeFromImageUrl(n){if(!n)throw new m("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=n,l}decodeFromVideoUrl(n){if(!n)throw new m("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=n,l}decodeFromVideoUrlContinuously(n,o){if(!n)throw new m("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(l,o);return l.src=n,c}_decodeOnLoadImage(n){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(o,l),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return G(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,o){return G(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,o)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let o;return typeof n>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof n=="string"&&(o=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(o=n),o}prepareVideoElement(n){let o;return!n&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof n=="string"&&(o=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(o=n),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(n,o=!0,l=!0){this._stopAsyncDecode=!1;const c=(p,g)=>{if(this._stopAsyncDecode){g(new z("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(n);p(y)}catch(y){const x=o&&y instanceof z,O=(y instanceof b||y instanceof P)&&l;if(x||O)return setTimeout(c,this._timeBetweenDecodingAttempts,p,g);g(y)}};return new Promise((p,g)=>c(p,g))}decodeContinuously(n,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(n);o(c,null),setTimeout(l,this.timeBetweenScansMillis)}catch(c){o(null,c);const p=c instanceof b||c instanceof P,g=c instanceof z;(p||g)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(n){const o=this.createBinaryBitmap(n);return this.decodeBitmap(o)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,o,l){o||(o={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(n,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(n,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(n,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const o=this.getCaptureCanvas(n),l=new ne(o),c=new _e(l);return new v(c)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const o=this.createCaptureCanvas(n);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,c;return typeof n<"u"&&(n instanceof HTMLVideoElement?(l=n.videoWidth,c=n.videoHeight):n instanceof HTMLImageElement&&(l=n.naturalWidth||n.width,c=n.naturalHeight||n.height)),o.style.width=l+"px",o.style.height=c+"px",o.width=l,o.height=c,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,o){try{n.srcObject=o}catch{n.src=URL.createObjectURL(o)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class Fe{constructor(n,o,l=o==null?0:8*o.length,c,p,g=N.currentTimeMillis()){this.text=n,this.rawBytes=o,this.numBits=l,this.resultPoints=c,this.format=p,this.timestamp=g,this.text=n,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=c,this.format=p,this.resultMetadata=null,g==null?this.timestamp=N.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,o)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const o=this.resultPoints;if(o===null)this.resultPoints=n;else if(n!==null&&n.length>0){const l=new Array(o.length+n.length);N.arraycopy(o,0,l,0,o.length),N.arraycopy(n,0,l,o.length,n.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var oe;(function(M){M[M.AZTEC=0]="AZTEC",M[M.CODABAR=1]="CODABAR",M[M.CODE_39=2]="CODE_39",M[M.CODE_93=3]="CODE_93",M[M.CODE_128=4]="CODE_128",M[M.DATA_MATRIX=5]="DATA_MATRIX",M[M.EAN_8=6]="EAN_8",M[M.EAN_13=7]="EAN_13",M[M.ITF=8]="ITF",M[M.MAXICODE=9]="MAXICODE",M[M.PDF_417=10]="PDF_417",M[M.QR_CODE=11]="QR_CODE",M[M.RSS_14=12]="RSS_14",M[M.RSS_EXPANDED=13]="RSS_EXPANDED",M[M.UPC_A=14]="UPC_A",M[M.UPC_E=15]="UPC_E",M[M.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(oe||(oe={}));var Pe=oe,de;(function(M){M[M.OTHER=0]="OTHER",M[M.ORIENTATION=1]="ORIENTATION",M[M.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",M[M.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",M[M.ISSUE_NUMBER=4]="ISSUE_NUMBER",M[M.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",M[M.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",M[M.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",M[M.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",M[M.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",M[M.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(de||(de={}));var ee=de;class Ne{constructor(n,o,l,c,p=-1,g=-1){this.rawBytes=n,this.text=o,this.byteSegments=l,this.ecLevel=c,this.structuredAppendSequenceNumber=p,this.structuredAppendParity=g,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ce{exp(n){return this.expTable[n]}log(n){if(n===0)throw new w;return this.logTable[n]}static addOrSubtract(n,o){return n^o}}class le{constructor(n,o){if(o.length===0)throw new w;this.field=n;const l=o.length;if(l>1&&o[0]===0){let c=1;for(;c<l&&o[c]===0;)c++;c===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-c),N.arraycopy(o,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(n===1){l=0;for(let g=0,y=o.length;g!==y;g++){const x=o[g];l=ce.addOrSubtract(l,x)}return l}l=o[0];const c=o.length,p=this.field;for(let g=1;g<c;g++)l=ce.addOrSubtract(p.multiply(n,l),o[g]);return l}addOrSubtract(n){if(!this.field.equals(n.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let o=this.coefficients,l=n.coefficients;if(o.length>l.length){const g=o;o=l,l=g}let c=new Int32Array(l.length);const p=l.length-o.length;N.arraycopy(l,0,c,0,p);for(let g=p;g<l.length;g++)c[g]=ce.addOrSubtract(o[g-p],l[g]);return new le(this.field,c)}multiply(n){if(!this.field.equals(n.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,c=n.coefficients,p=c.length,g=new Int32Array(l+p-1),y=this.field;for(let x=0;x<l;x++){const _=o[x];for(let O=0;O<p;O++)g[x+O]=ce.addOrSubtract(g[x+O],y.multiply(_,c[O]))}return new le(y,g)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const o=this.coefficients.length,l=this.field,c=new Int32Array(o),p=this.coefficients;for(let g=0;g<o;g++)c[g]=l.multiply(p[g],n);return new le(l,c)}multiplyByMonomial(n,o){if(n<0)throw new w;if(o===0)return this.field.getZero();const l=this.coefficients,c=l.length,p=new Int32Array(c+n),g=this.field;for(let y=0;y<c;y++)p[y]=g.multiply(l[y],o);return new le(g,p)}divide(n){if(!this.field.equals(n.field))throw new w("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new w("Divide by 0");const o=this.field;let l=o.getZero(),c=this;const p=n.getCoefficient(n.getDegree()),g=o.inverse(p);for(;c.getDegree()>=n.getDegree()&&!c.isZero();){const y=c.getDegree()-n.getDegree(),x=o.multiply(c.getCoefficient(c.getDegree()),g),_=n.multiplyByMonomial(y,x),O=o.buildMonomial(y,x);l=l.addOrSubtract(O),c=c.addOrSubtract(_)}return[l,c]}toString(){let n="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(n+=" - ",l=-l):n.length>0&&(n+=" + "),o===0||l!==1){const c=this.field.log(l);c===0?n+="1":c===1?n+="a":(n+="a^",n+=c)}o!==0&&(o===1?n+="x":(n+="x^",n+=o))}}return n}}class fe extends d{}fe.kind="ArithmeticException";class Se extends ce{constructor(n,o,l){super(),this.primitive=n,this.size=o,this.generatorBase=l;const c=new Int32Array(o);let p=1;for(let y=0;y<o;y++)c[y]=p,p*=2,p>=o&&(p^=n,p&=o-1);this.expTable=c;const g=new Int32Array(o);for(let y=0;y<o-1;y++)g[c[y]]=y;this.logTable=g,this.zero=new le(this,Int32Array.from([0])),this.one=new le(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,o){if(n<0)throw new w;if(o===0)return this.zero;const l=new Int32Array(n+1);return l[0]=o,new le(this,l)}inverse(n){if(n===0)throw new fe;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,o){return n===0||o===0?0:this.expTable[(this.logTable[n]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+I.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}Se.AZTEC_DATA_12=new Se(4201,4096,1),Se.AZTEC_DATA_10=new Se(1033,1024,1),Se.AZTEC_DATA_6=new Se(67,64,1),Se.AZTEC_PARAM=new Se(19,16,1),Se.QR_CODE_FIELD_256=new Se(285,256,0),Se.DATA_MATRIX_FIELD_256=new Se(301,256,1),Se.AZTEC_DATA_8=Se.DATA_MATRIX_FIELD_256,Se.MAXICODE_FIELD_64=Se.AZTEC_DATA_6;class ke extends d{}ke.kind="ReedSolomonException";class J extends d{}J.kind="IllegalStateException";class ie{constructor(n){this.field=n}decode(n,o){const l=this.field,c=new le(l,n),p=new Int32Array(o);let g=!0;for(let Y=0;Y<o;Y++){const se=c.evaluateAt(l.exp(Y+l.getGeneratorBase()));p[p.length-1-Y]=se,se!==0&&(g=!1)}if(g)return;const y=new le(l,p),x=this.runEuclideanAlgorithm(l.buildMonomial(o,1),y,o),_=x[0],O=x[1],D=this.findErrorLocations(_),F=this.findErrorMagnitudes(O,D);for(let Y=0;Y<D.length;Y++){const se=n.length-1-l.log(D[Y]);if(se<0)throw new ke("Bad error location");n[se]=Se.addOrSubtract(n[se],F[Y])}}runEuclideanAlgorithm(n,o,l){if(n.getDegree()<o.getDegree()){const Y=n;n=o,o=Y}const c=this.field;let p=n,g=o,y=c.getZero(),x=c.getOne();for(;g.getDegree()>=(l/2|0);){let Y=p,se=y;if(p=g,y=x,p.isZero())throw new ke("r_{i-1} was zero");g=Y;let ae=c.getZero();const we=p.getCoefficient(p.getDegree()),Te=c.inverse(we);for(;g.getDegree()>=p.getDegree()&&!g.isZero();){const Qe=g.getDegree()-p.getDegree(),Ke=c.multiply(g.getCoefficient(g.getDegree()),Te);ae=ae.addOrSubtract(c.buildMonomial(Qe,Ke)),g=g.addOrSubtract(p.multiplyByMonomial(Qe,Ke))}if(x=ae.multiply(y).addOrSubtract(se),g.getDegree()>=p.getDegree())throw new J("Division algorithm failed to reduce polynomial?")}const _=x.getCoefficient(0);if(_===0)throw new ke("sigmaTilde(0) was zero");const O=c.inverse(_),D=x.multiplyScalar(O),F=g.multiplyScalar(O);return[D,F]}findErrorLocations(n){const o=n.getDegree();if(o===1)return Int32Array.from([n.getCoefficient(1)]);const l=new Int32Array(o);let c=0;const p=this.field;for(let g=1;g<p.getSize()&&c<o;g++)n.evaluateAt(g)===0&&(l[c]=p.inverse(g),c++);if(c!==o)throw new ke("Error locator degree does not match number of roots");return l}findErrorMagnitudes(n,o){const l=o.length,c=new Int32Array(l),p=this.field;for(let g=0;g<l;g++){const y=p.inverse(o[g]);let x=1;for(let _=0;_<l;_++)if(g!==_){const O=p.multiply(o[_],y),D=O&1?O&-2:O|1;x=p.multiply(x,D)}c[g]=p.multiply(n.evaluateAt(y),p.inverse(x)),p.getGeneratorBase()!==0&&(c[g]=p.multiply(c[g],y))}return c}}var ge;(function(M){M[M.UPPER=0]="UPPER",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.DIGIT=3]="DIGIT",M[M.PUNCT=4]="PUNCT",M[M.BINARY=5]="BINARY"})(ge||(ge={}));class Ee{decode(n){this.ddata=n;let o=n.getBits(),l=this.extractBits(o),c=this.correctBits(l),p=Ee.convertBoolArrayToByteArray(c),g=Ee.getEncodedData(c),y=new Ne(p,g,null,null);return y.setNumBits(c.length),y}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let o=n.length,l=ge.UPPER,c=ge.UPPER,p="",g=0;for(;g<o;)if(c===ge.BINARY){if(o-g<5)break;let y=Ee.readCode(n,g,5);if(g+=5,y===0){if(o-g<11)break;y=Ee.readCode(n,g,11)+31,g+=11}for(let x=0;x<y;x++){if(o-g<8){g=o;break}const _=Ee.readCode(n,g,8);p+=H.castAsNonUtf8Char(_),g+=8}c=l}else{let y=c===ge.DIGIT?4:5;if(o-g<y)break;let x=Ee.readCode(n,g,y);g+=y;let _=Ee.getCharacter(c,x);_.startsWith("CTRL_")?(l=c,c=Ee.getTable(_.charAt(5)),_.charAt(6)==="L"&&(l=c)):(p+=_,c=l)}return p}static getTable(n){switch(n){case"L":return ge.LOWER;case"P":return ge.PUNCT;case"M":return ge.MIXED;case"D":return ge.DIGIT;case"B":return ge.BINARY;case"U":default:return ge.UPPER}}static getCharacter(n,o){switch(n){case ge.UPPER:return Ee.UPPER_TABLE[o];case ge.LOWER:return Ee.LOWER_TABLE[o];case ge.MIXED:return Ee.MIXED_TABLE[o];case ge.PUNCT:return Ee.PUNCT_TABLE[o];case ge.DIGIT:return Ee.DIGIT_TABLE[o];default:throw new J("Bad table")}}correctBits(n){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=Se.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=Se.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=Se.AZTEC_DATA_10):(l=12,o=Se.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),p=n.length/l;if(p<c)throw new P;let g=n.length%l,y=new Int32Array(p);for(let F=0;F<p;F++,g+=l)y[F]=Ee.readCode(n,g,l);try{new ie(o).decode(y,p-c)}catch(F){throw new P(F)}let x=(1<<l)-1,_=0;for(let F=0;F<c;F++){let Y=y[F];if(Y===0||Y===x)throw new P;(Y===1||Y===x-1)&&_++}let O=new Array(c*l-_),D=0;for(let F=0;F<c;F++){let Y=y[F];if(Y===1||Y===x-1)O.fill(Y>1,D,D+l-1),D+=l-1;else for(let se=l-1;se>=0;--se)O[D++]=(Y&1<<se)!==0}return O}extractBits(n){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),c=(o?11:14)+l*4,p=new Int32Array(c),g=new Array(this.totalBitsInLayer(l,o));if(o)for(let y=0;y<p.length;y++)p[y]=y;else{let y=c+1+2*I.truncDivision(I.truncDivision(c,2)-1,15),x=c/2,_=I.truncDivision(y,2);for(let O=0;O<x;O++){let D=O+I.truncDivision(O,15);p[x-O-1]=_-D-1,p[x+O]=_+D+1}}for(let y=0,x=0;y<l;y++){let _=(l-y)*4+(o?9:12),O=y*2,D=c-1-O;for(let F=0;F<_;F++){let Y=F*2;for(let se=0;se<2;se++)g[x+Y+se]=n.get(p[O+se],p[O+F]),g[x+2*_+Y+se]=n.get(p[O+F],p[D-se]),g[x+4*_+Y+se]=n.get(p[D-se],p[D-F]),g[x+6*_+Y+se]=n.get(p[D-F],p[O+se])}x+=_*8}return g}static readCode(n,o,l){let c=0;for(let p=o;p<o+l;p++)c<<=1,n[p]&&(c|=1);return c}static readByte(n,o){let l=n.length-o;return l>=8?Ee.readCode(n,o,8):Ee.readCode(n,o,l)<<8-l}static convertBoolArrayToByteArray(n){let o=new Uint8Array((n.length+7)/8);for(let l=0;l<o.length;l++)o[l]=Ee.readByte(n,8*l);return o}totalBitsInLayer(n,o){return((o?88:112)+16*n)*n}}Ee.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ee.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ee.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ee.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ee.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ve{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,o,l,c){const p=n-l,g=o-c;return Math.sqrt(p*p+g*g)}static sum(n){let o=0;for(let l=0,c=n.length;l!==c;l++){const p=n[l];o+=p}return o}}class je{static floatToIntBits(n){return n}}je.MAX_VALUE=Number.MAX_SAFE_INTEGER;class X{constructor(n,o){this.x=n,this.y=o}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof X){const o=n;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*je.floatToIntBits(this.x)+je.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const o=this.distance(n[0],n[1]),l=this.distance(n[1],n[2]),c=this.distance(n[0],n[2]);let p,g,y;if(l>=o&&l>=c?(g=n[0],p=n[1],y=n[2]):c>=l&&c>=o?(g=n[1],p=n[0],y=n[2]):(g=n[2],p=n[0],y=n[1]),this.crossProductZ(p,g,y)<0){const x=p;p=y,y=x}n[0]=p,n[1]=g,n[2]=y}static distance(n,o){return ve.distance(n.x,n.y,o.x,o.y)}static crossProductZ(n,o,l){const c=o.x,p=o.y;return(l.x-c)*(n.y-p)-(l.y-p)*(n.x-c)}}class Le{constructor(n,o){this.bits=n,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Ye extends Le{constructor(n,o,l,c,p){super(n,o),this.compact=l,this.nbDatablocks=c,this.nbLayers=p}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ce{constructor(n,o,l,c){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),o==null&&(o=Ce.INIT_SIZE),l==null&&(l=n.getWidth()/2|0),c==null&&(c=n.getHeight()/2|0);const p=o/2|0;if(this.leftInit=l-p,this.rightInit=l+p,this.upInit=c-p,this.downInit=c+p,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new z}detect(){let n=this.leftInit,o=this.rightInit,l=this.upInit,c=this.downInit,p=!1,g=!0,y=!1,x=!1,_=!1,O=!1,D=!1;const F=this.width,Y=this.height;for(;g;){g=!1;let se=!0;for(;(se||!x)&&o<F;)se=this.containsBlackPoint(l,c,o,!1),se?(o++,g=!0,x=!0):x||o++;if(o>=F){p=!0;break}let ae=!0;for(;(ae||!_)&&c<Y;)ae=this.containsBlackPoint(n,o,c,!0),ae?(c++,g=!0,_=!0):_||c++;if(c>=Y){p=!0;break}let we=!0;for(;(we||!O)&&n>=0;)we=this.containsBlackPoint(l,c,n,!1),we?(n--,g=!0,O=!0):O||n--;if(n<0){p=!0;break}let Te=!0;for(;(Te||!D)&&l>=0;)Te=this.containsBlackPoint(n,o,l,!0),Te?(l--,g=!0,D=!0):D||l--;if(l<0){p=!0;break}g&&(y=!0)}if(!p&&y){const se=o-n;let ae=null;for(let Ke=1;ae===null&&Ke<se;Ke++)ae=this.getBlackPointOnSegment(n,c-Ke,n+Ke,c);if(ae==null)throw new z;let we=null;for(let Ke=1;we===null&&Ke<se;Ke++)we=this.getBlackPointOnSegment(n,l+Ke,n+Ke,l);if(we==null)throw new z;let Te=null;for(let Ke=1;Te===null&&Ke<se;Ke++)Te=this.getBlackPointOnSegment(o,l+Ke,o-Ke,l);if(Te==null)throw new z;let Qe=null;for(let Ke=1;Qe===null&&Ke<se;Ke++)Qe=this.getBlackPointOnSegment(o,c-Ke,o-Ke,c);if(Qe==null)throw new z;return this.centerEdges(Qe,ae,Te,we)}else throw new z}getBlackPointOnSegment(n,o,l,c){const p=ve.round(ve.distance(n,o,l,c)),g=(l-n)/p,y=(c-o)/p,x=this.image;for(let _=0;_<p;_++){const O=ve.round(n+_*g),D=ve.round(o+_*y);if(x.get(O,D))return new X(O,D)}return null}centerEdges(n,o,l,c){const p=n.getX(),g=n.getY(),y=o.getX(),x=o.getY(),_=l.getX(),O=l.getY(),D=c.getX(),F=c.getY(),Y=Ce.CORR;return p<this.width/2?[new X(D-Y,F+Y),new X(y+Y,x+Y),new X(_-Y,O-Y),new X(p+Y,g-Y)]:[new X(D+Y,F+Y),new X(y+Y,x-Y),new X(_-Y,O+Y),new X(p-Y,g-Y)]}containsBlackPoint(n,o,l,c){const p=this.image;if(c){for(let g=n;g<=o;g++)if(p.get(g,l))return!0}else for(let g=n;g<=o;g++)if(p.get(l,g))return!0;return!1}}Ce.INIT_SIZE=10,Ce.CORR=1;class ct{static checkAndNudgePoints(n,o){const l=n.getWidth(),c=n.getHeight();let p=!0;for(let g=0;g<o.length&&p;g+=2){const y=Math.floor(o[g]),x=Math.floor(o[g+1]);if(y<-1||y>l||x<-1||x>c)throw new z;p=!1,y===-1?(o[g]=0,p=!0):y===l&&(o[g]=l-1,p=!0),x===-1?(o[g+1]=0,p=!0):x===c&&(o[g+1]=c-1,p=!0)}p=!0;for(let g=o.length-2;g>=0&&p;g-=2){const y=Math.floor(o[g]),x=Math.floor(o[g+1]);if(y<-1||y>l||x<-1||x>c)throw new z;p=!1,y===-1?(o[g]=0,p=!0):y===l&&(o[g]=l-1,p=!0),x===-1?(o[g+1]=0,p=!0):x===c&&(o[g+1]=c-1,p=!0)}}}class E{constructor(n,o,l,c,p,g,y,x,_){this.a11=n,this.a21=o,this.a31=l,this.a12=c,this.a22=p,this.a32=g,this.a13=y,this.a23=x,this.a33=_}static quadrilateralToQuadrilateral(n,o,l,c,p,g,y,x,_,O,D,F,Y,se,ae,we){const Te=E.quadrilateralToSquare(n,o,l,c,p,g,y,x);return E.squareToQuadrilateral(_,O,D,F,Y,se,ae,we).times(Te)}transformPoints(n){const o=n.length,l=this.a11,c=this.a12,p=this.a13,g=this.a21,y=this.a22,x=this.a23,_=this.a31,O=this.a32,D=this.a33;for(let F=0;F<o;F+=2){const Y=n[F],se=n[F+1],ae=p*Y+x*se+D;n[F]=(l*Y+g*se+_)/ae,n[F+1]=(c*Y+y*se+O)/ae}}transformPointsWithValues(n,o){const l=this.a11,c=this.a12,p=this.a13,g=this.a21,y=this.a22,x=this.a23,_=this.a31,O=this.a32,D=this.a33,F=n.length;for(let Y=0;Y<F;Y++){const se=n[Y],ae=o[Y],we=p*se+x*ae+D;n[Y]=(l*se+g*ae+_)/we,o[Y]=(c*se+y*ae+O)/we}}static squareToQuadrilateral(n,o,l,c,p,g,y,x){const _=n-l+p-y,O=o-c+g-x;if(_===0&&O===0)return new E(l-n,p-l,n,c-o,g-c,o,0,0,1);{const D=l-p,F=y-p,Y=c-g,se=x-g,ae=D*se-F*Y,we=(_*se-F*O)/ae,Te=(D*O-_*Y)/ae;return new E(l-n+we*l,y-n+Te*y,n,c-o+we*c,x-o+Te*x,o,we,Te,1)}}static quadrilateralToSquare(n,o,l,c,p,g,y,x){return E.squareToQuadrilateral(n,o,l,c,p,g,y,x).buildAdjoint()}buildAdjoint(){return new E(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new E(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class A extends ct{sampleGrid(n,o,l,c,p,g,y,x,_,O,D,F,Y,se,ae,we,Te,Qe,Ke){const Ge=E.quadrilateralToQuadrilateral(c,p,g,y,x,_,O,D,F,Y,se,ae,we,Te,Qe,Ke);return this.sampleGridWithTransform(n,o,l,Ge)}sampleGridWithTransform(n,o,l,c){if(o<=0||l<=0)throw new z;const p=new xe(o,l),g=new Float32Array(2*o);for(let y=0;y<l;y++){const x=g.length,_=y+.5;for(let O=0;O<x;O+=2)g[O]=O/2+.5,g[O+1]=_;c.transformPoints(g),ct.checkAndNudgePoints(n,g);try{for(let O=0;O<x;O+=2)n.get(Math.floor(g[O]),Math.floor(g[O+1]))&&p.set(O/2,y)}catch{throw new z}}return p}}class T{static setGridSampler(n){T.gridSampler=n}static getInstance(){return T.gridSampler}}T.gridSampler=new A;class j{constructor(n,o){this.x=n,this.y=o}toResultPoint(){return new X(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class K{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(n){let g=l[0];l[0]=l[2],l[2]=g}this.extractParameters(l);let c=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),p=this.getMatrixCornerPoints(l);return new Ye(c,p,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new z;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(n[0],n[1],o),this.sampleLine(n[1],n[2],o),this.sampleLine(n[2],n[3],o),this.sampleLine(n[3],n[0],o)]);this.shift=this.getRotation(l,o);let c=0;for(let g=0;g<4;g++){let y=l[(this.shift+g)%4];this.compact?(c<<=7,c+=y>>1&127):(c<<=10,c+=(y>>2&992)+(y>>1&31))}let p=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(p>>6)+1,this.nbDataBlocks=(p&63)+1):(this.nbLayers=(p>>11)+1,this.nbDataBlocks=(p&2047)+1)}getRotation(n,o){let l=0;n.forEach((c,p,g)=>{let y=(c>>o-2<<1)+(c&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let c=0;c<4;c++)if(I.bitCount(l^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new z}getCorrectedParameterData(n,o){let l,c;o?(l=7,c=2):(l=10,c=4);let p=l-c,g=new Int32Array(l);for(let x=l-1;x>=0;--x)g[x]=n&15,n>>=4;try{new ie(Se.AZTEC_PARAM).decode(g,p)}catch{throw new z}let y=0;for(let x=0;x<c;x++)y=(y<<4)+g[x];return y}getBullsEyeCorners(n){let o=n,l=n,c=n,p=n,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let D=this.getFirstDifferent(o,g,1,-1),F=this.getFirstDifferent(l,g,1,1),Y=this.getFirstDifferent(c,g,-1,1),se=this.getFirstDifferent(p,g,-1,-1);if(this.nbCenterLayers>2){let ae=this.distancePoint(se,D)*this.nbCenterLayers/(this.distancePoint(p,o)*(this.nbCenterLayers+2));if(ae<.75||ae>1.25||!this.isWhiteOrBlackRectangle(D,F,Y,se))break}o=D,l=F,c=Y,p=se,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new z;this.compact=this.nbCenterLayers===5;let y=new X(o.getX()+.5,o.getY()-.5),x=new X(l.getX()+.5,l.getY()+.5),_=new X(c.getX()-.5,c.getY()+.5),O=new X(p.getX()-.5,p.getY()-.5);return this.expandSquare([y,x,_,O],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,o,l,c;try{let y=new Ce(this.image).detect();n=y[0],o=y[1],l=y[2],c=y[3]}catch{let x=this.image.getWidth()/2,_=this.image.getHeight()/2;n=this.getFirstDifferent(new j(x+7,_-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new j(x+7,_+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new j(x-7,_+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new j(x-7,_-7),!1,-1,-1).toResultPoint()}let p=ve.round((n.getX()+c.getX()+o.getX()+l.getX())/4),g=ve.round((n.getY()+c.getY()+o.getY()+l.getY())/4);try{let y=new Ce(this.image,15,p,g).detect();n=y[0],o=y[1],l=y[2],c=y[3]}catch{n=this.getFirstDifferent(new j(p+7,g-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new j(p+7,g+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new j(p-7,g+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new j(p-7,g-7),!1,-1,-1).toResultPoint()}return p=ve.round((n.getX()+c.getX()+o.getX()+l.getX())/4),g=ve.round((n.getY()+c.getY()+o.getY()+l.getY())/4),new j(p,g)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,o,l,c,p){let g=T.getInstance(),y=this.getDimension(),x=y/2-this.nbCenterLayers,_=y/2+this.nbCenterLayers;return g.sampleGrid(n,y,y,x,x,_,x,_,_,x,_,o.getX(),o.getY(),l.getX(),l.getY(),c.getX(),c.getY(),p.getX(),p.getY())}sampleLine(n,o,l){let c=0,p=this.distanceResultPoint(n,o),g=p/l,y=n.getX(),x=n.getY(),_=g*(o.getX()-n.getX())/p,O=g*(o.getY()-n.getY())/p;for(let D=0;D<l;D++)this.image.get(ve.round(y+D*_),ve.round(x+D*O))&&(c|=1<<l-D-1);return c}isWhiteOrBlackRectangle(n,o,l,c){let p=3;n=new j(n.getX()-p,n.getY()+p),o=new j(o.getX()-p,o.getY()-p),l=new j(l.getX()+p,l.getY()-p),c=new j(c.getX()+p,c.getY()+p);let g=this.getColor(c,n);if(g===0)return!1;let y=this.getColor(n,o);return y!==g||(y=this.getColor(o,l),y!==g)?!1:(y=this.getColor(l,c),y===g)}getColor(n,o){let l=this.distancePoint(n,o),c=(o.getX()-n.getX())/l,p=(o.getY()-n.getY())/l,g=0,y=n.getX(),x=n.getY(),_=this.image.get(n.getX(),n.getY()),O=Math.ceil(l);for(let F=0;F<O;F++)y+=c,x+=p,this.image.get(ve.round(y),ve.round(x))!==_&&g++;let D=g/l;return D>.1&&D<.9?0:D<=.1===_?1:-1}getFirstDifferent(n,o,l,c){let p=n.getX()+l,g=n.getY()+c;for(;this.isValid(p,g)&&this.image.get(p,g)===o;)p+=l,g+=c;for(p-=l,g-=c;this.isValid(p,g)&&this.image.get(p,g)===o;)p+=l;for(p-=l;this.isValid(p,g)&&this.image.get(p,g)===o;)g+=c;return g-=c,new j(p,g)}expandSquare(n,o,l){let c=l/(2*o),p=n[0].getX()-n[2].getX(),g=n[0].getY()-n[2].getY(),y=(n[0].getX()+n[2].getX())/2,x=(n[0].getY()+n[2].getY())/2,_=new X(y+c*p,x+c*g),O=new X(y-c*p,x-c*g);p=n[1].getX()-n[3].getX(),g=n[1].getY()-n[3].getY(),y=(n[1].getX()+n[3].getX())/2,x=(n[1].getY()+n[3].getY())/2;let D=new X(y+c*p,x+c*g),F=new X(y-c*p,x-c*g);return[_,D,O,F]}isValid(n,o){return n>=0&&n<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(n){let o=ve.round(n.getX()),l=ve.round(n.getY());return this.isValid(o,l)}distancePoint(n,o){return ve.distance(n.getX(),n.getY(),o.getX(),o.getY())}distanceResultPoint(n,o){return ve.distance(n.getX(),n.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(I.truncDivision(this.nbLayers-4,8)+1)+15}}class re{decode(n,o=null){let l=null,c=new K(n.getBlackMatrix()),p=null,g=null;try{let O=c.detectMirror(!1);p=O.getPoints(),this.reportFoundResultPoints(o,p),g=new Ee().decode(O)}catch(O){l=O}if(g==null)try{let O=c.detectMirror(!0);p=O.getPoints(),this.reportFoundResultPoints(o,p),g=new Ee().decode(O)}catch(O){throw l??O}let y=new Fe(g.getText(),g.getRawBytes(),g.getNumBits(),p,Pe.AZTEC,N.currentTimeMillis()),x=g.getByteSegments();x!=null&&y.putMetadata(ee.BYTE_SEGMENTS,x);let _=g.getECLevel();return _!=null&&y.putMetadata(ee.ERROR_CORRECTION_LEVEL,_),y}reportFoundResultPoints(n,o){if(n!=null){let l=n.get(L.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((c,p,g)=>{l.foundPossibleResultPoint(c)})}}reset(){}}class me extends Oe{constructor(n=500){super(new re,n)}}class Ve{decode(n,o){try{return this.doDecode(n,o)}catch{if(o&&o.get(L.TRY_HARDER)===!0&&n.isRotateSupported()){const p=n.rotateCounterClockwise(),g=this.doDecode(p,o),y=g.getResultMetadata();let x=270;y!==null&&y.get(ee.ORIENTATION)===!0&&(x=x+y.get(ee.ORIENTATION)%360),g.putMetadata(ee.ORIENTATION,x);const _=g.getResultPoints();if(_!==null){const O=p.getHeight();for(let D=0;D<_.length;D++)_[D]=new X(O-_[D].getY()-1,_[D].getX())}return g}else throw new z}}reset(){}doDecode(n,o){const l=n.getWidth(),c=n.getHeight();let p=new B(l);const g=o&&o.get(L.TRY_HARDER)===!0,y=Math.max(1,c>>(g?8:5));let x;g?x=c:x=15;const _=Math.trunc(c/2);for(let O=0;O<x;O++){const D=Math.trunc((O+1)/2),F=(O&1)===0,Y=_+y*(F?D:-D);if(Y<0||Y>=c)break;try{p=n.getBlackRow(Y,p)}catch{continue}for(let se=0;se<2;se++){if(se===1&&(p.reverse(),o&&o.get(L.NEED_RESULT_POINT_CALLBACK)===!0)){const ae=new Map;o.forEach((we,Te)=>ae.set(Te,we)),ae.delete(L.NEED_RESULT_POINT_CALLBACK),o=ae}try{const ae=this.decodeRow(Y,p,o);if(se===1){ae.putMetadata(ee.ORIENTATION,180);const we=ae.getResultPoints();we!==null&&(we[0]=new X(l-we[0].getX()-1,we[0].getY()),we[1]=new X(l-we[1].getX()-1,we[1].getY()))}return ae}catch{}}}throw new z}static recordPattern(n,o,l){const c=l.length;for(let _=0;_<c;_++)l[_]=0;const p=n.getSize();if(o>=p)throw new z;let g=!n.get(o),y=0,x=o;for(;x<p;){if(n.get(x)!==g)l[y]++;else{if(++y===c)break;l[y]=1,g=!g}x++}if(!(y===c||y===c-1&&x===p))throw new z}static recordPatternInReverse(n,o,l){let c=l.length,p=n.get(o);for(;o>0&&c>=0;)n.get(--o)!==p&&(c--,p=!p);if(c>=0)throw new z;Ve.recordPattern(n,o+1,l)}static patternMatchVariance(n,o,l){const c=n.length;let p=0,g=0;for(let _=0;_<c;_++)p+=n[_],g+=o[_];if(p<g)return Number.POSITIVE_INFINITY;const y=p/g;l*=y;let x=0;for(let _=0;_<c;_++){const O=n[_],D=o[_]*y,F=O>D?O-D:D-O;if(F>l)return Number.POSITIVE_INFINITY;x+=F}return x/p}}class ye extends Ve{static findStartPattern(n){const o=n.getSize(),l=n.getNextSet(0);let c=0,p=Int32Array.from([0,0,0,0,0,0]),g=l,y=!1;const x=6;for(let _=l;_<o;_++)if(n.get(_)!==y)p[c]++;else{if(c===x-1){let O=ye.MAX_AVG_VARIANCE,D=-1;for(let F=ye.CODE_START_A;F<=ye.CODE_START_C;F++){const Y=Ve.patternMatchVariance(p,ye.CODE_PATTERNS[F],ye.MAX_INDIVIDUAL_VARIANCE);Y<O&&(O=Y,D=F)}if(D>=0&&n.isRange(Math.max(0,g-(_-g)/2),g,!1))return Int32Array.from([g,_,D]);g+=p[0]+p[1],p=p.slice(2,p.length-1),p[c-1]=0,p[c]=0,c--}else c++;p[c]=1,y=!y}throw new z}static decodeCode(n,o,l){Ve.recordPattern(n,l,o);let c=ye.MAX_AVG_VARIANCE,p=-1;for(let g=0;g<ye.CODE_PATTERNS.length;g++){const y=ye.CODE_PATTERNS[g],x=this.patternMatchVariance(o,y,ye.MAX_INDIVIDUAL_VARIANCE);x<c&&(c=x,p=g)}if(p>=0)return p;throw new z}decodeRow(n,o,l){const c=l&&l.get(L.ASSUME_GS1)===!0,p=ye.findStartPattern(o),g=p[2];let y=0;const x=new Uint8Array(20);x[y++]=g;let _;switch(g){case ye.CODE_START_A:_=ye.CODE_CODE_A;break;case ye.CODE_START_B:_=ye.CODE_CODE_B;break;case ye.CODE_START_C:_=ye.CODE_CODE_C;break;default:throw new P}let O=!1,D=!1,F="",Y=p[0],se=p[1];const ae=Int32Array.from([0,0,0,0,0,0]);let we=0,Te=0,Qe=g,Ke=0,Ge=!0,vt=!1,gt=!1;for(;!O;){const To=D;switch(D=!1,we=Te,Te=ye.decodeCode(o,ae,se),x[y++]=Te,Te!==ye.CODE_STOP&&(Ge=!0),Te!==ye.CODE_STOP&&(Ke++,Qe+=Ke*Te),Y=se,se+=ae.reduce((qv,Qv)=>qv+Qv,0),Te){case ye.CODE_START_A:case ye.CODE_START_B:case ye.CODE_START_C:throw new P}switch(_){case ye.CODE_CODE_A:if(Te<64)gt===vt?F+=String.fromCharCode(32+Te):F+=String.fromCharCode(32+Te+128),gt=!1;else if(Te<96)gt===vt?F+=String.fromCharCode(Te-64):F+=String.fromCharCode(Te+64),gt=!1;else switch(Te!==ye.CODE_STOP&&(Ge=!1),Te){case ye.CODE_FNC_1:c&&(F.length===0?F+="]C1":F+="");break;case ye.CODE_FNC_2:case ye.CODE_FNC_3:break;case ye.CODE_FNC_4_A:!vt&&gt?(vt=!0,gt=!1):vt&&gt?(vt=!1,gt=!1):gt=!0;break;case ye.CODE_SHIFT:D=!0,_=ye.CODE_CODE_B;break;case ye.CODE_CODE_B:_=ye.CODE_CODE_B;break;case ye.CODE_CODE_C:_=ye.CODE_CODE_C;break;case ye.CODE_STOP:O=!0;break}break;case ye.CODE_CODE_B:if(Te<96)gt===vt?F+=String.fromCharCode(32+Te):F+=String.fromCharCode(32+Te+128),gt=!1;else switch(Te!==ye.CODE_STOP&&(Ge=!1),Te){case ye.CODE_FNC_1:c&&(F.length===0?F+="]C1":F+="");break;case ye.CODE_FNC_2:case ye.CODE_FNC_3:break;case ye.CODE_FNC_4_B:!vt&&gt?(vt=!0,gt=!1):vt&&gt?(vt=!1,gt=!1):gt=!0;break;case ye.CODE_SHIFT:D=!0,_=ye.CODE_CODE_A;break;case ye.CODE_CODE_A:_=ye.CODE_CODE_A;break;case ye.CODE_CODE_C:_=ye.CODE_CODE_C;break;case ye.CODE_STOP:O=!0;break}break;case ye.CODE_CODE_C:if(Te<100)Te<10&&(F+="0"),F+=Te;else switch(Te!==ye.CODE_STOP&&(Ge=!1),Te){case ye.CODE_FNC_1:c&&(F.length===0?F+="]C1":F+="");break;case ye.CODE_CODE_A:_=ye.CODE_CODE_A;break;case ye.CODE_CODE_B:_=ye.CODE_CODE_B;break;case ye.CODE_STOP:O=!0;break}break}To&&(_=_===ye.CODE_CODE_A?ye.CODE_CODE_B:ye.CODE_CODE_A)}const un=se-Y;if(se=o.getNextUnset(se),!o.isRange(se,Math.min(o.getSize(),se+(se-Y)/2),!1))throw new z;if(Qe-=Ke*we,Qe%103!==we)throw new b;const Wn=F.length;if(Wn===0)throw new z;Wn>0&&Ge&&(_===ye.CODE_CODE_C?F=F.substring(0,Wn-2):F=F.substring(0,Wn-1));const cn=(p[1]+p[0])/2,Ut=Y+un/2,Lr=x.length,xn=new Uint8Array(Lr);for(let To=0;To<Lr;To++)xn[To]=x[To];const Io=[new X(cn,n),new X(Ut,n)];return new Fe(F,xn,0,Io,Pe.CODE_128,new Date().getTime())}}ye.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ye.MAX_AVG_VARIANCE=.25,ye.MAX_INDIVIDUAL_VARIANCE=.7,ye.CODE_SHIFT=98,ye.CODE_CODE_C=99,ye.CODE_CODE_B=100,ye.CODE_CODE_A=101,ye.CODE_FNC_1=102,ye.CODE_FNC_2=97,ye.CODE_FNC_3=96,ye.CODE_FNC_4_A=101,ye.CODE_FNC_4_B=100,ye.CODE_START_A=103,ye.CODE_START_B=104,ye.CODE_START_C=105,ye.CODE_STOP=106;class Je extends Ve{constructor(n=!1,o=!1){super(),this.usingCheckDigit=n,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,o,l){let c=this.counters;c.fill(0),this.decodeRowResult="";let p=Je.findAsteriskPattern(o,c),g=o.getNextSet(p[1]),y=o.getSize(),x,_;do{Je.recordPattern(o,g,c);let ae=Je.toNarrowWidePattern(c);if(ae<0)throw new z;x=Je.patternToChar(ae),this.decodeRowResult+=x,_=g;for(let we of c)g+=we;g=o.getNextSet(g)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let O=0;for(let ae of c)O+=ae;let D=g-_-O;if(g!==y&&D*2<O)throw new z;if(this.usingCheckDigit){let ae=this.decodeRowResult.length-1,we=0;for(let Te=0;Te<ae;Te++)we+=Je.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Te));if(this.decodeRowResult.charAt(ae)!==Je.ALPHABET_STRING.charAt(we%43))throw new b;this.decodeRowResult=this.decodeRowResult.substring(0,ae)}if(this.decodeRowResult.length===0)throw new z;let F;this.extendedMode?F=Je.decodeExtended(this.decodeRowResult):F=this.decodeRowResult;let Y=(p[1]+p[0])/2,se=_+O/2;return new Fe(F,null,0,[new X(Y,n),new X(se,n)],Pe.CODE_39,new Date().getTime())}static findAsteriskPattern(n,o){let l=n.getSize(),c=n.getNextSet(0),p=0,g=c,y=!1,x=o.length;for(let _=c;_<l;_++)if(n.get(_)!==y)o[p]++;else{if(p===x-1){if(this.toNarrowWidePattern(o)===Je.ASTERISK_ENCODING&&n.isRange(Math.max(0,g-Math.floor((_-g)/2)),g,!1))return[g,_];g+=o[0]+o[1],o.copyWithin(0,2,2+p-1),o[p-1]=0,o[p]=0,p--}else p++;o[p]=1,y=!y}throw new z}static toNarrowWidePattern(n){let o=n.length,l=0,c;do{let p=2147483647;for(let x of n)x<p&&x>l&&(p=x);l=p,c=0;let g=0,y=0;for(let x=0;x<o;x++){let _=n[x];_>l&&(y|=1<<o-1-x,c++,g+=_)}if(c===3){for(let x=0;x<o&&c>0;x++){let _=n[x];if(_>l&&(c--,_*2>=g))return-1}return y}}while(c>3);return-1}static patternToChar(n){for(let o=0;o<Je.CHARACTER_ENCODINGS.length;o++)if(Je.CHARACTER_ENCODINGS[o]===n)return Je.ALPHABET_STRING.charAt(o);if(n===Je.ASTERISK_ENCODING)return"*";throw new z}static decodeExtended(n){let o=n.length,l="";for(let c=0;c<o;c++){let p=n.charAt(c);if(p==="+"||p==="$"||p==="%"||p==="/"){let g=n.charAt(c+1),y="\0";switch(p){case"+":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)+32);else throw new P;break;case"$":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)-64);else throw new P;break;case"%":if(g>="A"&&g<="E")y=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")y=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")y=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")y="\0";else if(g==="V")y="@";else if(g==="W")y="`";else if(g==="X"||g==="Y"||g==="Z")y="";else throw new P;break;case"/":if(g>="A"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")y=":";else throw new P;break}l+=y,c++}else l+=p}return l}}Je.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Je.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Je.ASTERISK_ENCODING=148;class tt extends Ve{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,o,l){let c=this.decodeStart(o),p=this.decodeEnd(o),g=new ue;tt.decodeMiddle(o,c[1],p[0],g);let y=g.toString(),x=null;l!=null&&(x=l.get(L.ALLOWED_LENGTHS)),x==null&&(x=tt.DEFAULT_ALLOWED_LENGTHS);let _=y.length,O=!1,D=0;for(let se of x){if(_===se){O=!0;break}se>D&&(D=se)}if(!O&&_>D&&(O=!0),!O)throw new P;const F=[new X(c[1],n),new X(p[0],n)];return new Fe(y,null,0,F,Pe.ITF,new Date().getTime())}static decodeMiddle(n,o,l,c){let p=new Int32Array(10),g=new Int32Array(5),y=new Int32Array(5);for(p.fill(0),g.fill(0),y.fill(0);o<l;){Ve.recordPattern(n,o,p);for(let _=0;_<5;_++){let O=2*_;g[_]=p[O],y[_]=p[O+1]}let x=tt.decodeDigit(g);c.append(x.toString()),x=this.decodeDigit(y),c.append(x.toString()),p.forEach(function(_){o+=_})}}decodeStart(n){let o=tt.skipWhiteSpace(n),l=tt.findGuardPattern(n,o,tt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(n,l[0]),l}validateQuietZone(n,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let c=o-1;l>0&&c>=0&&!n.get(c);c--)l--;if(l!==0)throw new z}static skipWhiteSpace(n){const o=n.getSize(),l=n.getNextSet(0);if(l===o)throw new z;return l}decodeEnd(n){n.reverse();try{let o=tt.skipWhiteSpace(n),l;try{l=tt.findGuardPattern(n,o,tt.END_PATTERN_REVERSED[0])}catch(p){p instanceof z&&(l=tt.findGuardPattern(n,o,tt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,l[0]);let c=l[0];return l[0]=n.getSize()-l[1],l[1]=n.getSize()-c,l}finally{n.reverse()}}static findGuardPattern(n,o,l){let c=l.length,p=new Int32Array(c),g=n.getSize(),y=!1,x=0,_=o;p.fill(0);for(let O=o;O<g;O++)if(n.get(O)!==y)p[x]++;else{if(x===c-1){if(Ve.patternMatchVariance(p,l,tt.MAX_INDIVIDUAL_VARIANCE)<tt.MAX_AVG_VARIANCE)return[_,O];_+=p[0]+p[1],N.arraycopy(p,2,p,0,x-1),p[x-1]=0,p[x]=0,x--}else x++;p[x]=1,y=!y}throw new z}static decodeDigit(n){let o=tt.MAX_AVG_VARIANCE,l=-1,c=tt.PATTERNS.length;for(let p=0;p<c;p++){let g=tt.PATTERNS[p],y=Ve.patternMatchVariance(n,g,tt.MAX_INDIVIDUAL_VARIANCE);y<o?(o=y,l=p):y===o&&(l=-1)}if(l>=0)return l%10;throw new z}}tt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],tt.MAX_AVG_VARIANCE=.38,tt.MAX_INDIVIDUAL_VARIANCE=.5,tt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],tt.START_PATTERN=Int32Array.from([1,1,1,1]),tt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class et extends Ve{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let o=!1,l,c=0,p=Int32Array.from([0,0,0]);for(;!o;){p=Int32Array.from([0,0,0]),l=et.findGuardPattern(n,c,!1,this.START_END_PATTERN,p);let g=l[0];c=l[1];let y=g-(c-g);y>=0&&(o=n.isRange(y,g,!1))}return l}static checkChecksum(n){return et.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let o=n.length;if(o===0)return!1;let l=parseInt(n.charAt(o-1),10);return et.getStandardUPCEANChecksum(n.substring(0,o-1))===l}static getStandardUPCEANChecksum(n){let o=n.length,l=0;for(let c=o-1;c>=0;c-=2){let p=n.charAt(c).charCodeAt(0)-48;if(p<0||p>9)throw new P;l+=p}l*=3;for(let c=o-2;c>=0;c-=2){let p=n.charAt(c).charCodeAt(0)-48;if(p<0||p>9)throw new P;l+=p}return(1e3-l)%10}static decodeEnd(n,o){return et.findGuardPattern(n,o,!1,et.START_END_PATTERN,new Int32Array(et.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,o,l,c){return this.findGuardPattern(n,o,l,c,new Int32Array(c.length))}static findGuardPattern(n,o,l,c,p){let g=n.getSize();o=l?n.getNextUnset(o):n.getNextSet(o);let y=0,x=o,_=c.length,O=l;for(let D=o;D<g;D++)if(n.get(D)!==O)p[y]++;else{if(y===_-1){if(Ve.patternMatchVariance(p,c,et.MAX_INDIVIDUAL_VARIANCE)<et.MAX_AVG_VARIANCE)return Int32Array.from([x,D]);x+=p[0]+p[1];let F=p.slice(2,p.length-1);for(let Y=0;Y<y-1;Y++)p[Y]=F[Y];p[y-1]=0,p[y]=0,y--}else y++;p[y]=1,O=!O}throw new z}static decodeDigit(n,o,l,c){this.recordPattern(n,l,o);let p=this.MAX_AVG_VARIANCE,g=-1,y=c.length;for(let x=0;x<y;x++){let _=c[x],O=Ve.patternMatchVariance(o,_,et.MAX_INDIVIDUAL_VARIANCE);O<p&&(p=O,g=x)}if(g>=0)return g;throw new z}}et.MAX_AVG_VARIANCE=.48,et.MAX_INDIVIDUAL_VARIANCE=.7,et.START_END_PATTERN=Int32Array.from([1,1,1]),et.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),et.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),et.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Wr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,o,l){let c=this.decodeRowStringBuffer,p=this.decodeMiddle(o,l,c),g=c.toString(),y=Wr.parseExtensionString(g),x=[new X((l[0]+l[1])/2,n),new X(p,n)],_=new Fe(g,null,0,x,Pe.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&_.putAllMetadata(y),_}decodeMiddle(n,o,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let p=n.getSize(),g=o[1],y=0;for(let _=0;_<5&&g<p;_++){let O=et.decodeDigit(n,c,g,et.L_AND_G_PATTERNS);l+=String.fromCharCode(48+O%10);for(let D of c)g+=D;O>=10&&(y|=1<<4-_),_!==4&&(g=n.getNextSet(g),g=n.getNextUnset(g))}if(l.length!==5)throw new z;let x=this.determineCheckDigit(y);if(Wr.extensionChecksum(l.toString())!==x)throw new z;return g}static extensionChecksum(n){let o=n.length,l=0;for(let c=o-2;c>=0;c-=2)l+=n.charAt(c).charCodeAt(0)-48;l*=3;for(let c=o-1;c>=0;c-=2)l+=n.charAt(c).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(n){for(let o=0;o<10;o++)if(n===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new z}static parseExtensionString(n){if(n.length!==5)return null;let o=Wr.parseExtension5String(n);return o==null?null:new Map([[ee.SUGGESTED_PRICE,o]])}static parseExtension5String(n){let o;switch(n.charAt(0)){case"0":o="";break;case"5":o="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(n.substring(1)),c=(l/100).toString(),p=l%100,g=p<10?"0"+p:p.toString();return o+c+"."+g}}class Ar{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,o,l){let c=this.decodeRowStringBuffer,p=this.decodeMiddle(o,l,c),g=c.toString(),y=Ar.parseExtensionString(g),x=[new X((l[0]+l[1])/2,n),new X(p,n)],_=new Fe(g,null,0,x,Pe.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&_.putAllMetadata(y),_}decodeMiddle(n,o,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let p=n.getSize(),g=o[1],y=0;for(let x=0;x<2&&g<p;x++){let _=et.decodeDigit(n,c,g,et.L_AND_G_PATTERNS);l+=String.fromCharCode(48+_%10);for(let O of c)g+=O;_>=10&&(y|=1<<1-x),x!==1&&(g=n.getNextSet(g),g=n.getNextUnset(g))}if(l.length!==2)throw new z;if(parseInt(l.toString())%4!==y)throw new z;return g}static parseExtensionString(n){return n.length!==2?null:new Map([[ee.ISSUE_NUMBER,parseInt(n)]])}}class Hr{static decodeRow(n,o,l){let c=et.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Wr().decodeRow(n,o,c)}catch{return new Ar().decodeRow(n,o,c)}}}Hr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class at extends et{constructor(){super(),this.decodeRowStringBuffer="",at.L_AND_G_PATTERNS=at.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let o=at.L_PATTERNS[n-10],l=new Int32Array(o.length);for(let c=0;c<o.length;c++)l[c]=o[o.length-c-1];at.L_AND_G_PATTERNS[n]=l}}decodeRow(n,o,l){let c=at.findStartGuardPattern(o),p=l==null?null:l.get(L.NEED_RESULT_POINT_CALLBACK);if(p!=null){const Ge=new X((c[0]+c[1])/2,n);p.foundPossibleResultPoint(Ge)}let g=this.decodeMiddle(o,c,this.decodeRowStringBuffer),y=g.rowOffset,x=g.resultString;if(p!=null){const Ge=new X(y,n);p.foundPossibleResultPoint(Ge)}let _=this.decodeEnd(o,y);if(p!=null){const Ge=new X((_[0]+_[1])/2,n);p.foundPossibleResultPoint(Ge)}let O=_[1],D=O+(O-_[0]);if(D>=o.getSize()||!o.isRange(O,D,!1))throw new z;let F=x.toString();if(F.length<8)throw new P;if(!at.checkChecksum(F))throw new b;let Y=(c[1]+c[0])/2,se=(_[1]+_[0])/2,ae=this.getBarcodeFormat(),we=[new X(Y,n),new X(se,n)],Te=new Fe(F,null,0,we,ae,new Date().getTime()),Qe=0;try{let Ge=Hr.decodeRow(n,o,_[1]);Te.putMetadata(ee.UPC_EAN_EXTENSION,Ge.getText()),Te.putAllMetadata(Ge.getResultMetadata()),Te.addResultPoints(Ge.getResultPoints()),Qe=Ge.getText().length}catch{}let Ke=l==null?null:l.get(L.ALLOWED_EAN_EXTENSIONS);if(Ke!=null){let Ge=!1;for(let vt in Ke)if(Qe.toString()===vt){Ge=!0;break}if(!Ge)throw new z}return Te}decodeEnd(n,o){return at.findGuardPattern(n,o,!1,at.START_END_PATTERN,new Int32Array(at.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return at.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let o=n.length;if(o===0)return!1;let l=parseInt(n.charAt(o-1),10);return at.getStandardUPCEANChecksum(n.substring(0,o-1))===l}static getStandardUPCEANChecksum(n){let o=n.length,l=0;for(let c=o-1;c>=0;c-=2){let p=n.charAt(c).charCodeAt(0)-48;if(p<0||p>9)throw new P;l+=p}l*=3;for(let c=o-2;c>=0;c-=2){let p=n.charAt(c).charCodeAt(0)-48;if(p<0||p>9)throw new P;l+=p}return(1e3-l)%10}}class zt extends at{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,o,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let p=n.getSize(),g=o[1],y=0;for(let _=0;_<6&&g<p;_++){let O=at.decodeDigit(n,c,g,at.L_AND_G_PATTERNS);l+=String.fromCharCode(48+O%10);for(let D of c)g+=D;O>=10&&(y|=1<<5-_)}l=zt.determineFirstDigit(l,y),g=at.findGuardPattern(n,g,!0,at.MIDDLE_PATTERN,new Int32Array(at.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<6&&g<p;_++){let O=at.decodeDigit(n,c,g,at.L_PATTERNS);l+=String.fromCharCode(48+O);for(let D of c)g+=D}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return Pe.EAN_13}static determineFirstDigit(n,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return n=String.fromCharCode(48+l)+n,n;throw new z}}zt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ht extends at{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,o,l){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let p=n.getSize(),g=o[1];for(let x=0;x<4&&g<p;x++){let _=at.decodeDigit(n,c,g,at.L_PATTERNS);l+=String.fromCharCode(48+_);for(let O of c)g+=O}g=at.findGuardPattern(n,g,!0,at.MIDDLE_PATTERN,new Int32Array(at.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&g<p;x++){let _=at.decodeDigit(n,c,g,at.L_PATTERNS);l+=String.fromCharCode(48+_);for(let O of c)g+=O}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return Pe.EAN_8}}class kt extends at{constructor(){super(...arguments),this.ean13Reader=new zt}getBarcodeFormat(){return Pe.UPC_A}decode(n,o){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,o,l))}decodeMiddle(n,o,l){return this.ean13Reader.decodeMiddle(n,o,l)}maybeReturnResult(n){let o=n.getText();if(o.charAt(0)==="0"){let l=new Fe(o.substring(1),null,null,n.getResultPoints(),Pe.UPC_A);return n.getResultMetadata()!=null&&l.putAllMetadata(n.getResultMetadata()),l}else throw new z}reset(){this.ean13Reader.reset()}}class Dt extends at{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,o,l){const c=this.decodeMiddleCounters.map(_=>_);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const p=n.getSize();let g=o[1],y=0;for(let _=0;_<6&&g<p;_++){const O=Dt.decodeDigit(n,c,g,Dt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+O%10);for(let D of c)g+=D;O>=10&&(y|=1<<5-_)}let x=Dt.determineNumSysAndCheckDigit(l,y);return{rowOffset:g,resultString:x}}decodeEnd(n,o){return Dt.findGuardPatternWithoutCounters(n,o,!0,Dt.MIDDLE_END_PATTERN)}checkChecksum(n){return at.checkChecksum(Dt.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,o){for(let l=0;l<=1;l++)for(let c=0;c<10;c++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][c]){let p=String.fromCharCode(48+l),g=String.fromCharCode(48+c);return p+n+g}throw z.getNotFoundInstance()}getBarcodeFormat(){return Pe.UPC_E}static convertUPCEtoUPCA(n){const o=n.slice(1,7).split("").map(p=>p.charCodeAt(0)),l=new ue;l.append(n.charAt(0));let c=o[5];switch(c){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(c),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(c);break}return n.length>=8&&l.append(n.charAt(7)),l.toString()}}Dt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Dt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class tr extends Ve{constructor(n){super();let o=n==null?null:n.get(L.POSSIBLE_FORMATS),l=[];i(o)?(l.push(new zt),l.push(new kt),l.push(new ht),l.push(new Dt)):(o.indexOf(Pe.EAN_13)>-1&&l.push(new zt),o.indexOf(Pe.UPC_A)>-1&&l.push(new kt),o.indexOf(Pe.EAN_8)>-1&&l.push(new ht),o.indexOf(Pe.UPC_E)>-1&&l.push(new Dt)),this.readers=l}decodeRow(n,o,l){for(let c of this.readers)try{const p=c.decodeRow(n,o,l),g=p.getBarcodeFormat()===Pe.EAN_13&&p.getText().charAt(0)==="0",y=l==null?null:l.get(L.POSSIBLE_FORMATS),x=y==null||y.includes(Pe.UPC_A);if(g&&x){const _=p.getRawBytes(),O=new Fe(p.getText().substring(1),_,_?_.length:null,p.getResultPoints(),Pe.UPC_A);return O.putAllMetadata(p.getResultMetadata()),O}return p}catch{}throw new z}reset(){for(let n of this.readers)n.reset()}}class Ct extends Ve{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,o){for(let l=0;l<o.length;l++)if(Ve.patternMatchVariance(n,o[l],Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE)return l;throw new z}static count(n){return ve.sum(new Int32Array(n))}static increment(n,o){let l=0,c=o[0];for(let p=1;p<n.length;p++)o[p]>c&&(c=o[p],l=p);n[l]++}static decrement(n,o){let l=0,c=o[0];for(let p=1;p<n.length;p++)o[p]<c&&(c=o[p],l=p);n[l]--}static isFinderPattern(n){let o=n[0]+n[1],l=o+n[2]+n[3],c=o/l;if(c>=Ct.MIN_FINDER_PATTERN_RATIO&&c<=Ct.MAX_FINDER_PATTERN_RATIO){let p=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let y of n)y>g&&(g=y),y<p&&(p=y);return g<10*p}return!1}}Ct.MAX_AVG_VARIANCE=.2,Ct.MAX_INDIVIDUAL_VARIANCE=.45,Ct.MIN_FINDER_PATTERN_RATIO=9.5/12,Ct.MAX_FINDER_PATTERN_RATIO=12.5/14;class Zr{constructor(n,o){this.value=n,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof Zr))return!1;const o=n;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class V{constructor(n,o,l,c,p){this.value=n,this.startEnd=o,this.value=n,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new X(l,p)),this.resultPoints.push(new X(c,p))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof V))return!1;const o=n;return this.value===o.value}hashCode(){return this.value}}class Q{constructor(){}static getRSSvalue(n,o,l){let c=0;for(let x of n)c+=x;let p=0,g=0,y=n.length;for(let x=0;x<y-1;x++){let _;for(_=1,g|=1<<x;_<n[x];_++,g&=~(1<<x)){let O=Q.combins(c-_-1,y-x-2);if(l&&g===0&&c-_-(y-x-1)>=y-x-1&&(O-=Q.combins(c-_-(y-x),y-x-2)),y-x-1>1){let D=0;for(let F=c-_-(y-x-2);F>o;F--)D+=Q.combins(c-_-F-1,y-x-3);O-=D*(y-1-x)}else c-_>o&&O--;p+=O}c-=_}return p}static combins(n,o){let l,c;n-o>o?(c=o,l=n-o):(c=n-o,l=o);let p=1,g=1;for(let y=n;y>l;y--)p*=y,g<=c&&(p/=g,g++);for(;g<=c;)p/=g,g++;return p}}class Xe{static buildBitArray(n){let o=n.length*2-1;n[n.length-1].getRightChar()==null&&(o-=1);let l=12*o,c=new B(l),p=0,y=n[0].getRightChar().getValue();for(let x=11;x>=0;--x)y&1<<x&&c.set(p),p++;for(let x=1;x<n.length;++x){let _=n[x],O=_.getLeftChar().getValue();for(let D=11;D>=0;--D)O&1<<D&&c.set(p),p++;if(_.getRightChar()!=null){let D=_.getRightChar().getValue();for(let F=11;F>=0;--F)D&1<<F&&c.set(p),p++}}return c}}class Ze{constructor(n,o){o?this.decodedInformation=null:(this.finished=n,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class it{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class Tt extends it{constructor(n,o){super(n),this.value=o}getValue(){return this.value}isFNC1(){return this.value===Tt.FNC1}}Tt.FNC1="$";class yr extends it{constructor(n,o,l){super(n),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class wr extends it{constructor(n,o,l){if(super(n),o<0||o>10||l<0||l>10)throw new P;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===wr.FNC1}isSecondDigitFNC1(){return this.secondDigit===wr.FNC1}isAnyFNC1(){return this.firstDigit===wr.FNC1||this.secondDigit===wr.FNC1}}wr.FNC1=10;class rt{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new z;let o=n.substring(0,2);for(let p of rt.TWO_DIGIT_DATA_LENGTH)if(p[0]===o)return p[1]===rt.VARIABLE_LENGTH?rt.processVariableAI(2,p[2],n):rt.processFixedAI(2,p[1],n);if(n.length<3)throw new z;let l=n.substring(0,3);for(let p of rt.THREE_DIGIT_DATA_LENGTH)if(p[0]===l)return p[1]===rt.VARIABLE_LENGTH?rt.processVariableAI(3,p[2],n):rt.processFixedAI(3,p[1],n);for(let p of rt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(p[0]===l)return p[1]===rt.VARIABLE_LENGTH?rt.processVariableAI(4,p[2],n):rt.processFixedAI(4,p[1],n);if(n.length<4)throw new z;let c=n.substring(0,4);for(let p of rt.FOUR_DIGIT_DATA_LENGTH)if(p[0]===c)return p[1]===rt.VARIABLE_LENGTH?rt.processVariableAI(4,p[2],n):rt.processFixedAI(4,p[1],n);throw new z}static processFixedAI(n,o,l){if(l.length<n)throw new z;let c=l.substring(0,n);if(l.length<n+o)throw new z;let p=l.substring(n,n+o),g=l.substring(n+o),y="("+c+")"+p,x=rt.parseFieldsInGeneralPurpose(g);return x==null?y:y+x}static processVariableAI(n,o,l){let c=l.substring(0,n),p;l.length<n+o?p=l.length:p=n+o;let g=l.substring(n,p),y=l.substring(p),x="("+c+")"+g,_=rt.parseFieldsInGeneralPurpose(y);return _==null?x:x+_}}rt.VARIABLE_LENGTH=[],rt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",rt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",rt.VARIABLE_LENGTH,20],["22",rt.VARIABLE_LENGTH,29],["30",rt.VARIABLE_LENGTH,8],["37",rt.VARIABLE_LENGTH,8],["90",rt.VARIABLE_LENGTH,30],["91",rt.VARIABLE_LENGTH,30],["92",rt.VARIABLE_LENGTH,30],["93",rt.VARIABLE_LENGTH,30],["94",rt.VARIABLE_LENGTH,30],["95",rt.VARIABLE_LENGTH,30],["96",rt.VARIABLE_LENGTH,30],["97",rt.VARIABLE_LENGTH,3],["98",rt.VARIABLE_LENGTH,30],["99",rt.VARIABLE_LENGTH,30]],rt.THREE_DIGIT_DATA_LENGTH=[["240",rt.VARIABLE_LENGTH,30],["241",rt.VARIABLE_LENGTH,30],["242",rt.VARIABLE_LENGTH,6],["250",rt.VARIABLE_LENGTH,30],["251",rt.VARIABLE_LENGTH,30],["253",rt.VARIABLE_LENGTH,17],["254",rt.VARIABLE_LENGTH,20],["400",rt.VARIABLE_LENGTH,30],["401",rt.VARIABLE_LENGTH,30],["402",17],["403",rt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",rt.VARIABLE_LENGTH,20],["421",rt.VARIABLE_LENGTH,15],["422",3],["423",rt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],rt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",rt.VARIABLE_LENGTH,15],["391",rt.VARIABLE_LENGTH,18],["392",rt.VARIABLE_LENGTH,15],["393",rt.VARIABLE_LENGTH,18],["703",rt.VARIABLE_LENGTH,30]],rt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",rt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",rt.VARIABLE_LENGTH,20],["8003",rt.VARIABLE_LENGTH,30],["8004",rt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",rt.VARIABLE_LENGTH,30],["8008",rt.VARIABLE_LENGTH,12],["8018",18],["8020",rt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",rt.VARIABLE_LENGTH,70],["8200",rt.VARIABLE_LENGTH,70]];class Wi{constructor(n){this.buffer=new ue,this.information=n}decodeAllCodes(n,o){let l=o,c=null;do{let p=this.decodeGeneralPurposeField(l,c),g=rt.parseFieldsInGeneralPurpose(p.getNewString());if(g!=null&&n.append(g),p.isRemaining()?c=""+p.getRemainingValue():c=null,l===p.getNewPosition())break;l=p.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let o=n;o<n+3;++o)if(this.information.get(o))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let p=this.extractNumericValueFromBitArray(n,4);return p===0?new wr(this.information.getSize(),wr.FNC1,wr.FNC1):new wr(this.information.getSize(),p-1,wr.FNC1)}let o=this.extractNumericValueFromBitArray(n,7),l=(o-8)/11,c=(o-8)%11;return new wr(n+7,l,c)}extractNumericValueFromBitArray(n,o){return Wi.extractNumericValueFromBitArray(this.information,n,o)}static extractNumericValueFromBitArray(n,o,l){let c=0;for(let p=0;p<l;++p)n.get(o+p)&&(c|=1<<l-p-1);return c}decodeGeneralPurposeField(n,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(n);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new yr(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new yr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),n=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),n=o.isFinished()):(o=this.parseNumericBlock(),n=o.isFinished()),!(l!==this.current.getPosition())&&!n)break}while(!n);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let o;return n.isSecondDigitFNC1()?o=new yr(this.current.getPosition(),this.buffer.toString()):o=new yr(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new Ze(!0,o)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let o=new yr(this.current.getPosition(),this.buffer.toString());return new Ze(!0,o)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ze(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let o=new yr(this.current.getPosition(),this.buffer.toString());return new Ze(!0,o)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ze(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let o=new yr(this.current.getPosition(),this.buffer.toString());return new Ze(!0,o)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ze(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(n,5);if(o>=5&&o<16)return!0;if(n+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(n,7);if(l>=64&&l<116)return!0;if(n+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(n,8);return c>=232&&c<253}decodeIsoIec646(n){let o=this.extractNumericValueFromBitArray(n,5);if(o===15)return new Tt(n+5,Tt.FNC1);if(o>=5&&o<15)return new Tt(n+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(n,7);if(l>=64&&l<90)return new Tt(n+7,""+(l+1));if(l>=90&&l<116)return new Tt(n+7,""+(l+7));let c=this.extractNumericValueFromBitArray(n,8),p;switch(c){case 232:p="!";break;case 233:p='"';break;case 234:p="%";break;case 235:p="&";break;case 236:p="'";break;case 237:p="(";break;case 238:p=")";break;case 239:p="*";break;case 240:p="+";break;case 241:p=",";break;case 242:p="-";break;case 243:p=".";break;case 244:p="/";break;case 245:p=":";break;case 246:p=";";break;case 247:p="<";break;case 248:p="=";break;case 249:p=">";break;case 250:p="?";break;case 251:p="_";break;case 252:p=" ";break;default:throw new P}return new Tt(n+8,p)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(n,5);if(o>=5&&o<16)return!0;if(n+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(n,6);return l>=16&&l<63}decodeAlphanumeric(n){let o=this.extractNumericValueFromBitArray(n,5);if(o===15)return new Tt(n+5,Tt.FNC1);if(o>=5&&o<15)return new Tt(n+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(n,6);if(l>=32&&l<58)return new Tt(n+6,""+(l+33));let c;switch(l){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new J("Decoding invalid alphanumeric value: "+l)}return new Tt(n+6,c)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let o=0;o<5&&o+n<this.information.getSize();++o)if(o===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+o))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let o=n;o<n+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let o=0;o<4&&o+n<this.information.getSize();++o)if(this.information.get(n+o))return!1;return!0}}class _o{constructor(n){this.information=n,this.generalDecoder=new Wi(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Mr extends _o{constructor(n){super(n)}encodeCompressedGtin(n,o){n.append("(01)");let l=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,o,l)}encodeCompressedGtinWithoutAI(n,o,l){for(let c=0;c<4;++c){let p=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*c,10);p/100===0&&n.append("0"),p/10===0&&n.append("0"),n.append(p)}Mr.appendCheckDigit(n,l)}static appendCheckDigit(n,o){let l=0;for(let c=0;c<13;c++){let p=n.charAt(c+o).charCodeAt(0)-48;l+=c&1?p:3*p}l=10-l%10,l===10&&(l=0),n.append(l)}}Mr.GTIN_SIZE=40;class ei extends Mr{constructor(n){super(n)}parseInformation(){let n=new ue;n.append("(01)");let o=n.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(ei.HEADER_SIZE,4);return n.append(l),this.encodeCompressedGtinWithoutAI(n,ei.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(n,ei.HEADER_SIZE+44)}}ei.HEADER_SIZE=4;class Hi extends _o{constructor(n){super(n)}parseInformation(){let n=new ue;return this.getGeneralDecoder().decodeAllCodes(n,Hi.HEADER_SIZE)}}Hi.HEADER_SIZE=5;class Vi extends Mr{constructor(n){super(n)}encodeCompressedWeight(n,o,l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(n,c);let p=this.checkWeight(c),g=1e5;for(let y=0;y<5;++y)p/g===0&&n.append("0"),g/=10;n.append(p)}}class Vr extends Vi{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=Vr.HEADER_SIZE+Vi.GTIN_SIZE+Vr.WEIGHT_SIZE)throw new z;let n=new ue;return this.encodeCompressedGtin(n,Vr.HEADER_SIZE),this.encodeCompressedWeight(n,Vr.HEADER_SIZE+Vi.GTIN_SIZE,Vr.WEIGHT_SIZE),n.toString()}}Vr.HEADER_SIZE=5,Vr.WEIGHT_SIZE=15;class gi extends Vr{constructor(n){super(n)}addWeightCode(n,o){n.append("(3103)")}checkWeight(n){return n}}class zn extends Vr{constructor(n){super(n)}addWeightCode(n,o){o<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class ti extends Mr{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<ti.HEADER_SIZE+Mr.GTIN_SIZE)throw new z;let n=new ue;this.encodeCompressedGtin(n,ti.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(ti.HEADER_SIZE+Mr.GTIN_SIZE,ti.LAST_DIGIT_SIZE);n.append("(392"),n.append(o),n.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(ti.HEADER_SIZE+Mr.GTIN_SIZE+ti.LAST_DIGIT_SIZE,null);return n.append(l.getNewString()),n.toString()}}ti.HEADER_SIZE=8,ti.LAST_DIGIT_SIZE=2;class Jr extends Mr{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<Jr.HEADER_SIZE+Mr.GTIN_SIZE)throw new z;let n=new ue;this.encodeCompressedGtin(n,Jr.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Jr.HEADER_SIZE+Mr.GTIN_SIZE,Jr.LAST_DIGIT_SIZE);n.append("(393"),n.append(o),n.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Jr.HEADER_SIZE+Mr.GTIN_SIZE+Jr.LAST_DIGIT_SIZE,Jr.FIRST_THREE_DIGITS_SIZE);l/100==0&&n.append("0"),l/10==0&&n.append("0"),n.append(l);let c=this.getGeneralDecoder().decodeGeneralPurposeField(Jr.HEADER_SIZE+Mr.GTIN_SIZE+Jr.LAST_DIGIT_SIZE+Jr.FIRST_THREE_DIGITS_SIZE,null);return n.append(c.getNewString()),n.toString()}}Jr.HEADER_SIZE=8,Jr.LAST_DIGIT_SIZE=2,Jr.FIRST_THREE_DIGITS_SIZE=10;class Qt extends Vi{constructor(n,o,l){super(n),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=Qt.HEADER_SIZE+Qt.GTIN_SIZE+Qt.WEIGHT_SIZE+Qt.DATE_SIZE)throw new z;let n=new ue;return this.encodeCompressedGtin(n,Qt.HEADER_SIZE),this.encodeCompressedWeight(n,Qt.HEADER_SIZE+Qt.GTIN_SIZE,Qt.WEIGHT_SIZE),this.encodeCompressedDate(n,Qt.HEADER_SIZE+Qt.GTIN_SIZE+Qt.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,Qt.DATE_SIZE);if(l==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let c=l%32;l/=32;let p=l%12+1;l/=12;let g=l;g/10==0&&n.append("0"),n.append(g),p/10==0&&n.append("0"),n.append(p),c/10==0&&n.append("0"),n.append(c)}addWeightCode(n,o){n.append("("),n.append(this.firstAIdigits),n.append(o/1e5),n.append(")")}checkWeight(n){return n%1e5}}Qt.HEADER_SIZE=8,Qt.WEIGHT_SIZE=20,Qt.DATE_SIZE=16;function Q1(M){try{if(M.get(1))return new ei(M);if(!M.get(2))return new Hi(M);switch(Wi.extractNumericValueFromBitArray(M,1,4)){case 4:return new gi(M);case 5:return new zn(M)}switch(Wi.extractNumericValueFromBitArray(M,1,5)){case 12:return new ti(M);case 13:return new Jr(M)}switch(Wi.extractNumericValueFromBitArray(M,1,7)){case 56:return new Qt(M,"310","11");case 57:return new Qt(M,"320","11");case 58:return new Qt(M,"310","13");case 59:return new Qt(M,"320","13");case 60:return new Qt(M,"310","15");case 61:return new Qt(M,"320","15");case 62:return new Qt(M,"310","17");case 63:return new Qt(M,"320","17")}}catch(n){throw console.log(n),new J("unknown decoder: "+M)}}class $i{constructor(n,o,l,c){this.leftchar=n,this.rightchar=o,this.finderpattern=l,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,o){return n instanceof $i?$i.equalsOrNull(n.leftchar,o.leftchar)&&$i.equalsOrNull(n.rightchar,o.rightchar)&&$i.equalsOrNull(n.finderpattern,o.finderpattern):!1}static equalsOrNull(n,o){return n===null?o===null:$i.equals(n,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class eh{constructor(n,o,l){this.pairs=n,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,o){return n instanceof eh?this.checkEqualitity(n,o)&&n.wasReversed===o.wasReversed:!1}checkEqualitity(n,o){if(!n||!o)return;let l;return n.forEach((c,p)=>{o.forEach(g=>{c.getLeftChar().getValue()===g.getLeftChar().getValue()&&c.getRightChar().getValue()===g.getRightChar().getValue()&&c.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(l=!0)})}),l}}class He extends Ct{constructor(n){super(...arguments),this.pairs=new Array(He.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,o,l){this.pairs.length=0,this.startFromEven=!1;try{return He.constructResult(this.decodeRow2pairs(n,o))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,He.constructResult(this.decodeRow2pairs(n,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,n))}catch(p){if(p instanceof z){if(!this.pairs.length)throw new z;l=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(n,!1),c){let p=this.checkRowsBoolean(!1);if(p!=null||(p=this.checkRowsBoolean(!0),p!=null))return p}throw new z}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return n&&(this.rows=this.rows.reverse()),o}checkRows(n,o){for(let l=o;l<this.rows.length;l++){let c=this.rows[l];this.pairs.length=0;for(let g of n)this.pairs.push(g.getPairs());if(this.pairs.push(c.getPairs()),!He.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let p=new Array(n);p.push(c);try{return this.checkRows(p,l+1)}catch(g){this.verbose&&console.log(g)}}throw new z}static isValidSequence(n){for(let o of He.FINDER_PATTERN_SEQUENCES){if(n.length>o.length)continue;let l=!0;for(let c=0;c<n.length;c++)if(n[c].getFinderPattern().getValue()!=o[c]){l=!1;break}if(l)return!0}return!1}storeRow(n,o){let l=0,c=!1,p=!1;for(;l<this.rows.length;){let g=this.rows[l];if(g.getRowNumber()>n){p=g.isEquivalent(this.pairs);break}c=g.isEquivalent(this.pairs),l++}p||c||He.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new eh(this.pairs,n,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,o){for(let l of o)if(l.getPairs().length!==n.length){for(let c of l.getPairs())for(let p of n)if($i.equals(c,p))break}}static isPartialRow(n,o){for(let l of o){let c=!0;for(let p of n){let g=!1;for(let y of l.getPairs())if(p.equals(y)){g=!0;break}if(!g){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(n){let o=Xe.buildBitArray(n),c=Q1(o).parseInformation(),p=n[0].getFinderPattern().getResultPoints(),g=n[n.length-1].getFinderPattern().getResultPoints(),y=[p[0],p[1],g[0],g[1]];return new Fe(c,null,null,y,Pe.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),o=n.getLeftChar(),l=n.getRightChar();if(l==null)return!1;let c=l.getChecksumPortion(),p=2;for(let y=1;y<this.pairs.size();++y){let x=this.pairs.get(y);c+=x.getLeftChar().getChecksumPortion(),p++;let _=x.getRightChar();_!=null&&(c+=_.getChecksumPortion(),p++)}return c%=211,211*(p-4)+c==o.getValue()}static getNextSecondBar(n,o){let l;return n.get(o)?(l=n.getNextUnset(o),l=n.getNextSet(l)):(l=n.getNextSet(o),l=n.getNextUnset(l)),l}retrieveNextPair(n,o,l){let c=o.length%2==0;this.startFromEven&&(c=!c);let p,g=!0,y=-1;do this.findNextPair(n,o,y),p=this.parseFoundFinderPattern(n,l,c),p==null?y=He.getNextSecondBar(n,this.startEnd[0]):g=!1;while(g);let x=this.decodeDataCharacter(n,p,c,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new z;let _;try{_=this.decodeDataCharacter(n,p,c,!1)}catch(O){_=null,this.verbose&&console.log(O)}return new $i(x,_,p,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,o,l){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let p=n.getSize(),g;l>=0?g=l:this.isEmptyPair(o)?g=0:g=o[o.length-1].getFinderPattern().getStartEnd()[1];let y=o.length%2!=0;this.startFromEven&&(y=!y);let x=!1;for(;g<p&&(x=!n.get(g),!!x);)g++;let _=0,O=g;for(let D=g;D<p;D++)if(n.get(D)!=x)c[_]++;else{if(_==3){if(y&&He.reverseCounters(c),He.isFinderPattern(c)){this.startEnd[0]=O,this.startEnd[1]=D;return}y&&He.reverseCounters(c),O+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,_--}else _++;c[_]=1,x=!x}throw new z}static reverseCounters(n){let o=n.length;for(let l=0;l<o/2;++l){let c=n[l];n[l]=n[o-l-1],n[o-l-1]=c}}parseFoundFinderPattern(n,o,l){let c,p,g;if(l){let _=this.startEnd[0]-1;for(;_>=0&&!n.get(_);)_--;_++,c=this.startEnd[0]-_,p=_,g=this.startEnd[1]}else p=this.startEnd[0],g=n.getNextUnset(this.startEnd[1]+1),c=g-this.startEnd[1];let y=this.getDecodeFinderCounters();N.arraycopy(y,0,y,1,y.length-1),y[0]=c;let x;try{x=this.parseFinderValue(y,He.FINDER_PATTERNS)}catch{return null}return new V(x,[p,g],p,g,o)}decodeDataCharacter(n,o,l,c){let p=this.getDataCharacterCounters();for(let Ut=0;Ut<p.length;Ut++)p[Ut]=0;if(c)He.recordPatternInReverse(n,o.getStartEnd()[0],p);else{He.recordPattern(n,o.getStartEnd()[1],p);for(let Ut=0,Lr=p.length-1;Ut<Lr;Ut++,Lr--){let xn=p[Ut];p[Ut]=p[Lr],p[Lr]=xn}}let g=17,y=ve.sum(new Int32Array(p))/g,x=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(y-x)/x>.3)throw new z;let _=this.getOddCounts(),O=this.getEvenCounts(),D=this.getOddRoundingErrors(),F=this.getEvenRoundingErrors();for(let Ut=0;Ut<p.length;Ut++){let Lr=1*p[Ut]/y,xn=Lr+.5;if(xn<1){if(Lr<.3)throw new z;xn=1}else if(xn>8){if(Lr>8.7)throw new z;xn=8}let Io=Ut/2;Ut&1?(O[Io]=xn,F[Io]=Lr-xn):(_[Io]=xn,D[Io]=Lr-xn)}this.adjustOddEvenCounts(g);let Y=4*o.getValue()+(l?0:2)+(c?0:1)-1,se=0,ae=0;for(let Ut=_.length-1;Ut>=0;Ut--){if(He.isNotA1left(o,l,c)){let Lr=He.WEIGHTS[Y][2*Ut];ae+=_[Ut]*Lr}se+=_[Ut]}let we=0;for(let Ut=O.length-1;Ut>=0;Ut--)if(He.isNotA1left(o,l,c)){let Lr=He.WEIGHTS[Y][2*Ut+1];we+=O[Ut]*Lr}let Te=ae+we;if(se&1||se>13||se<4)throw new z;let Qe=(13-se)/2,Ke=He.SYMBOL_WIDEST[Qe],Ge=9-Ke,vt=Q.getRSSvalue(_,Ke,!0),gt=Q.getRSSvalue(O,Ge,!1),un=He.EVEN_TOTAL_SUBSET[Qe],Wn=He.GSUM[Qe],cn=vt*un+gt+Wn;return new Zr(cn,Te)}static isNotA1left(n,o,l){return!(n.getValue()==0&&o&&l)}adjustOddEvenCounts(n){let o=ve.sum(new Int32Array(this.getOddCounts())),l=ve.sum(new Int32Array(this.getEvenCounts())),c=!1,p=!1;o>13?p=!0:o<4&&(c=!0);let g=!1,y=!1;l>13?y=!0:l<4&&(g=!0);let x=o+l-n,_=(o&1)==1,O=(l&1)==0;if(x==1)if(_){if(O)throw new z;p=!0}else{if(!O)throw new z;y=!0}else if(x==-1)if(_){if(O)throw new z;c=!0}else{if(!O)throw new z;g=!0}else if(x==0){if(_){if(!O)throw new z;o<l?(c=!0,y=!0):(p=!0,g=!0)}else if(O)throw new z}else throw new z;if(c){if(p)throw new z;He.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&He.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(y)throw new z;He.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&He.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}He.SYMBOL_WIDEST=[7,5,4,3,1],He.EVEN_TOTAL_SUBSET=[4,20,52,104,204],He.GSUM=[0,348,1388,2948,3988],He.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],He.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],He.FINDER_PAT_A=0,He.FINDER_PAT_B=1,He.FINDER_PAT_C=2,He.FINDER_PAT_D=3,He.FINDER_PAT_E=4,He.FINDER_PAT_F=5,He.FINDER_PATTERN_SEQUENCES=[[He.FINDER_PAT_A,He.FINDER_PAT_A],[He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B],[He.FINDER_PAT_A,He.FINDER_PAT_C,He.FINDER_PAT_B,He.FINDER_PAT_D],[He.FINDER_PAT_A,He.FINDER_PAT_E,He.FINDER_PAT_B,He.FINDER_PAT_D,He.FINDER_PAT_C],[He.FINDER_PAT_A,He.FINDER_PAT_E,He.FINDER_PAT_B,He.FINDER_PAT_D,He.FINDER_PAT_D,He.FINDER_PAT_F],[He.FINDER_PAT_A,He.FINDER_PAT_E,He.FINDER_PAT_B,He.FINDER_PAT_D,He.FINDER_PAT_E,He.FINDER_PAT_F,He.FINDER_PAT_F],[He.FINDER_PAT_A,He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B,He.FINDER_PAT_C,He.FINDER_PAT_C,He.FINDER_PAT_D,He.FINDER_PAT_D],[He.FINDER_PAT_A,He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B,He.FINDER_PAT_C,He.FINDER_PAT_C,He.FINDER_PAT_D,He.FINDER_PAT_E,He.FINDER_PAT_E],[He.FINDER_PAT_A,He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B,He.FINDER_PAT_C,He.FINDER_PAT_C,He.FINDER_PAT_D,He.FINDER_PAT_E,He.FINDER_PAT_F,He.FINDER_PAT_F],[He.FINDER_PAT_A,He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B,He.FINDER_PAT_C,He.FINDER_PAT_D,He.FINDER_PAT_D,He.FINDER_PAT_E,He.FINDER_PAT_E,He.FINDER_PAT_F,He.FINDER_PAT_F]],He.MAX_PAIRS=11;class Sv extends Zr{constructor(n,o,l){super(n,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class lr extends Ct{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,o,l){const c=this.decodePair(o,!1,n,l);lr.addOrTally(this.possibleLeftPairs,c),o.reverse();let p=this.decodePair(o,!0,n,l);lr.addOrTally(this.possibleRightPairs,p),o.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&lr.checkChecksum(g,y))return lr.constructResult(g,y)}throw new z}static addOrTally(n,o){if(o==null)return;let l=!1;for(let c of n)if(c.getValue()===o.getValue()){c.incrementCount(),l=!0;break}l||n.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,o){let l=4537077*n.getValue()+o.getValue(),c=new String(l).toString(),p=new ue;for(let _=13-c.length;_>0;_--)p.append("0");p.append(c);let g=0;for(let _=0;_<13;_++){let O=p.charAt(_).charCodeAt(0)-48;g+=_&1?O:3*O}g=10-g%10,g===10&&(g=0),p.append(g.toString());let y=n.getFinderPattern().getResultPoints(),x=o.getFinderPattern().getResultPoints();return new Fe(p.toString(),null,0,[y[0],y[1],x[0],x[1]],Pe.RSS_14,new Date().getTime())}static checkChecksum(n,o){let l=(n.getChecksumPortion()+16*o.getChecksumPortion())%79,c=9*n.getFinderPattern().getValue()+o.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,l===c}decodePair(n,o,l,c){try{let p=this.findFinderPattern(n,o),g=this.parseFoundFinderPattern(n,l,o,p),y=c==null?null:c.get(L.NEED_RESULT_POINT_CALLBACK);if(y!=null){let O=(p[0]+p[1])/2;o&&(O=n.getSize()-1-O),y.foundPossibleResultPoint(new X(O,l))}let x=this.decodeDataCharacter(n,g,!0),_=this.decodeDataCharacter(n,g,!1);return new Sv(1597*x.getValue()+_.getValue(),x.getChecksumPortion()+4*_.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(n,o,l){let c=this.getDataCharacterCounters();for(let we=0;we<c.length;we++)c[we]=0;if(l)Ve.recordPatternInReverse(n,o.getStartEnd()[0],c);else{Ve.recordPattern(n,o.getStartEnd()[1]+1,c);for(let we=0,Te=c.length-1;we<Te;we++,Te--){let Qe=c[we];c[we]=c[Te],c[Te]=Qe}}let p=l?16:15,g=ve.sum(new Int32Array(c))/p,y=this.getOddCounts(),x=this.getEvenCounts(),_=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors();for(let we=0;we<c.length;we++){let Te=c[we]/g,Qe=Math.floor(Te+.5);Qe<1?Qe=1:Qe>8&&(Qe=8);let Ke=Math.floor(we/2);we&1?(x[Ke]=Qe,O[Ke]=Te-Qe):(y[Ke]=Qe,_[Ke]=Te-Qe)}this.adjustOddEvenCounts(l,p);let D=0,F=0;for(let we=y.length-1;we>=0;we--)F*=9,F+=y[we],D+=y[we];let Y=0,se=0;for(let we=x.length-1;we>=0;we--)Y*=9,Y+=x[we],se+=x[we];let ae=F+3*Y;if(l){if(D&1||D>12||D<4)throw new z;let we=(12-D)/2,Te=lr.OUTSIDE_ODD_WIDEST[we],Qe=9-Te,Ke=Q.getRSSvalue(y,Te,!1),Ge=Q.getRSSvalue(x,Qe,!0),vt=lr.OUTSIDE_EVEN_TOTAL_SUBSET[we],gt=lr.OUTSIDE_GSUM[we];return new Zr(Ke*vt+Ge+gt,ae)}else{if(se&1||se>10||se<4)throw new z;let we=(10-se)/2,Te=lr.INSIDE_ODD_WIDEST[we],Qe=9-Te,Ke=Q.getRSSvalue(y,Te,!0),Ge=Q.getRSSvalue(x,Qe,!1),vt=lr.INSIDE_ODD_TOTAL_SUBSET[we],gt=lr.INSIDE_GSUM[we];return new Zr(Ge*vt+Ke+gt,ae)}}findFinderPattern(n,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=n.getSize(),p=!1,g=0;for(;g<c&&(p=!n.get(g),o!==p);)g++;let y=0,x=g;for(let _=g;_<c;_++)if(n.get(_)!==p)l[y]++;else{if(y===3){if(Ct.isFinderPattern(l))return[x,_];x+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,p=!p}throw new z}parseFoundFinderPattern(n,o,l,c){let p=n.get(c[0]),g=c[0]-1;for(;g>=0&&p!==n.get(g);)g--;g++;const y=c[0]-g,x=this.getDecodeFinderCounters(),_=new Int32Array(x.length);N.arraycopy(x,0,_,1,x.length-1),_[0]=y;const O=this.parseFinderValue(_,lr.FINDER_PATTERNS);let D=g,F=c[1];return l&&(D=n.getSize()-1-D,F=n.getSize()-1-F),new V(O,[g,c[1]],D,F,o)}adjustOddEvenCounts(n,o){let l=ve.sum(new Int32Array(this.getOddCounts())),c=ve.sum(new Int32Array(this.getEvenCounts())),p=!1,g=!1,y=!1,x=!1;n?(l>12?g=!0:l<4&&(p=!0),c>12?x=!0:c<4&&(y=!0)):(l>11?g=!0:l<5&&(p=!0),c>10?x=!0:c<4&&(y=!0));let _=l+c-o,O=(l&1)===(n?1:0),D=(c&1)===1;if(_===1)if(O){if(D)throw new z;g=!0}else{if(!D)throw new z;x=!0}else if(_===-1)if(O){if(D)throw new z;p=!0}else{if(!D)throw new z;y=!0}else if(_===0){if(O){if(!D)throw new z;l<c?(p=!0,x=!0):(g=!0,y=!0)}else if(D)throw new z}else throw new z;if(p){if(g)throw new z;Ct.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&Ct.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(x)throw new z;Ct.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Ct.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}lr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],lr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],lr.OUTSIDE_GSUM=[0,161,961,2015,2715],lr.INSIDE_GSUM=[0,336,1036,1516],lr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],lr.INSIDE_ODD_WIDEST=[2,4,6,8],lr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Eo extends Ve{constructor(n,o){super(),this.readers=[],this.verbose=o===!0;const l=n?n.get(L.POSSIBLE_FORMATS):null,c=n&&n.get(L.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Pe.EAN_13)||l.includes(Pe.UPC_A)||l.includes(Pe.EAN_8)||l.includes(Pe.UPC_E))&&this.readers.push(new tr(n)),l.includes(Pe.CODE_39)&&this.readers.push(new Je(c)),l.includes(Pe.CODE_128)&&this.readers.push(new ye),l.includes(Pe.ITF)&&this.readers.push(new tt),l.includes(Pe.RSS_14)&&this.readers.push(new lr),l.includes(Pe.RSS_EXPANDED)&&this.readers.push(new He(this.verbose))):(this.readers.push(new tr(n)),this.readers.push(new Je),this.readers.push(new tr(n)),this.readers.push(new ye),this.readers.push(new tt),this.readers.push(new lr),this.readers.push(new He(this.verbose)))}decodeRow(n,o,l){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(n,o,l)}catch{}throw new z}reset(){this.readers.forEach(n=>n.reset())}}class Av extends Oe{constructor(n=500,o){super(new Eo(o),n,o)}}class Ot{constructor(n,o,l){this.ecCodewords=n,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Nt{constructor(n,o){this.count=n,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _t{constructor(n,o,l,c,p,g){this.versionNumber=n,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=p,this.ecBlocks=g;let y=0;const x=g.getECCodewords(),_=g.getECBlocks();for(let O of _)y+=O.getCount()*(O.getDataCodewords()+x);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,o){if(n&1||o&1)throw new P;for(let l of _t.VERSIONS)if(l.symbolSizeRows===n&&l.symbolSizeColumns===o)return l;throw new P}toString(){return""+this.versionNumber}static buildVersions(){return[new _t(1,10,10,8,8,new Ot(5,new Nt(1,3))),new _t(2,12,12,10,10,new Ot(7,new Nt(1,5))),new _t(3,14,14,12,12,new Ot(10,new Nt(1,8))),new _t(4,16,16,14,14,new Ot(12,new Nt(1,12))),new _t(5,18,18,16,16,new Ot(14,new Nt(1,18))),new _t(6,20,20,18,18,new Ot(18,new Nt(1,22))),new _t(7,22,22,20,20,new Ot(20,new Nt(1,30))),new _t(8,24,24,22,22,new Ot(24,new Nt(1,36))),new _t(9,26,26,24,24,new Ot(28,new Nt(1,44))),new _t(10,32,32,14,14,new Ot(36,new Nt(1,62))),new _t(11,36,36,16,16,new Ot(42,new Nt(1,86))),new _t(12,40,40,18,18,new Ot(48,new Nt(1,114))),new _t(13,44,44,20,20,new Ot(56,new Nt(1,144))),new _t(14,48,48,22,22,new Ot(68,new Nt(1,174))),new _t(15,52,52,24,24,new Ot(42,new Nt(2,102))),new _t(16,64,64,14,14,new Ot(56,new Nt(2,140))),new _t(17,72,72,16,16,new Ot(36,new Nt(4,92))),new _t(18,80,80,18,18,new Ot(48,new Nt(4,114))),new _t(19,88,88,20,20,new Ot(56,new Nt(4,144))),new _t(20,96,96,22,22,new Ot(68,new Nt(4,174))),new _t(21,104,104,24,24,new Ot(56,new Nt(6,136))),new _t(22,120,120,18,18,new Ot(68,new Nt(6,175))),new _t(23,132,132,20,20,new Ot(62,new Nt(8,163))),new _t(24,144,144,22,22,new Ot(62,new Nt(8,156),new Nt(2,155))),new _t(25,8,18,6,16,new Ot(7,new Nt(1,5))),new _t(26,8,32,6,14,new Ot(11,new Nt(1,10))),new _t(27,12,26,10,24,new Ot(14,new Nt(1,16))),new _t(28,12,36,10,16,new Ot(18,new Nt(1,22))),new _t(29,16,36,14,16,new Ot(24,new Nt(1,32))),new _t(30,16,48,14,22,new Ot(28,new Nt(1,49)))]}}_t.VERSIONS=_t.buildVersions();class th{constructor(n){const o=n.getHeight();if(o<8||o>144||o&1)throw new P;this.version=th.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new xe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const o=n.getHeight(),l=n.getWidth();return _t.getVersionForDimensions(o,l)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,c=0;const p=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let y=!1,x=!1,_=!1,O=!1;do if(l===p&&c===0&&!y)n[o++]=this.readCorner1(p,g)&255,l-=2,c+=2,y=!0;else if(l===p-2&&c===0&&g&3&&!x)n[o++]=this.readCorner2(p,g)&255,l-=2,c+=2,x=!0;else if(l===p+4&&c===2&&!(g&7)&&!_)n[o++]=this.readCorner3(p,g)&255,l-=2,c+=2,_=!0;else if(l===p-2&&c===0&&(g&7)===4&&!O)n[o++]=this.readCorner4(p,g)&255,l-=2,c+=2,O=!0;else{do l<p&&c>=0&&!this.readMappingMatrix.get(c,l)&&(n[o++]=this.readUtah(l,c,p,g)&255),l-=2,c+=2;while(l>=0&&c<g);l+=1,c+=3;do l>=0&&c<g&&!this.readMappingMatrix.get(c,l)&&(n[o++]=this.readUtah(l,c,p,g)&255),l+=2,c-=2;while(l<p&&c>=0);l+=3,c+=1}while(l<p||c<g);if(o!==this.version.getTotalCodewords())throw new P;return n}readModule(n,o,l,c){return n<0&&(n+=l,o+=4-(l+4&7)),o<0&&(o+=c,n+=4-(c+4&7)),this.readMappingMatrix.set(o,n),this.mappingBitMatrix.get(o,n)}readUtah(n,o,l,c){let p=0;return this.readModule(n-2,o-2,l,c)&&(p|=1),p<<=1,this.readModule(n-2,o-1,l,c)&&(p|=1),p<<=1,this.readModule(n-1,o-2,l,c)&&(p|=1),p<<=1,this.readModule(n-1,o-1,l,c)&&(p|=1),p<<=1,this.readModule(n-1,o,l,c)&&(p|=1),p<<=1,this.readModule(n,o-2,l,c)&&(p|=1),p<<=1,this.readModule(n,o-1,l,c)&&(p|=1),p<<=1,this.readModule(n,o,l,c)&&(p|=1),p}readCorner1(n,o){let l=0;return this.readModule(n-1,0,n,o)&&(l|=1),l<<=1,this.readModule(n-1,1,n,o)&&(l|=1),l<<=1,this.readModule(n-1,2,n,o)&&(l|=1),l<<=1,this.readModule(0,o-2,n,o)&&(l|=1),l<<=1,this.readModule(0,o-1,n,o)&&(l|=1),l<<=1,this.readModule(1,o-1,n,o)&&(l|=1),l<<=1,this.readModule(2,o-1,n,o)&&(l|=1),l<<=1,this.readModule(3,o-1,n,o)&&(l|=1),l}readCorner2(n,o){let l=0;return this.readModule(n-3,0,n,o)&&(l|=1),l<<=1,this.readModule(n-2,0,n,o)&&(l|=1),l<<=1,this.readModule(n-1,0,n,o)&&(l|=1),l<<=1,this.readModule(0,o-4,n,o)&&(l|=1),l<<=1,this.readModule(0,o-3,n,o)&&(l|=1),l<<=1,this.readModule(0,o-2,n,o)&&(l|=1),l<<=1,this.readModule(0,o-1,n,o)&&(l|=1),l<<=1,this.readModule(1,o-1,n,o)&&(l|=1),l}readCorner3(n,o){let l=0;return this.readModule(n-1,0,n,o)&&(l|=1),l<<=1,this.readModule(n-1,o-1,n,o)&&(l|=1),l<<=1,this.readModule(0,o-3,n,o)&&(l|=1),l<<=1,this.readModule(0,o-2,n,o)&&(l|=1),l<<=1,this.readModule(0,o-1,n,o)&&(l|=1),l<<=1,this.readModule(1,o-3,n,o)&&(l|=1),l<<=1,this.readModule(1,o-2,n,o)&&(l|=1),l<<=1,this.readModule(1,o-1,n,o)&&(l|=1),l}readCorner4(n,o){let l=0;return this.readModule(n-3,0,n,o)&&(l|=1),l<<=1,this.readModule(n-2,0,n,o)&&(l|=1),l<<=1,this.readModule(n-1,0,n,o)&&(l|=1),l<<=1,this.readModule(0,o-2,n,o)&&(l|=1),l<<=1,this.readModule(0,o-1,n,o)&&(l|=1),l<<=1,this.readModule(1,o-1,n,o)&&(l|=1),l<<=1,this.readModule(2,o-1,n,o)&&(l|=1),l<<=1,this.readModule(3,o-1,n,o)&&(l|=1),l}extractDataRegion(n){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(n.getHeight()!==o)throw new w("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),p=this.version.getDataRegionSizeColumns(),g=o/c|0,y=l/p|0,x=g*c,_=y*p,O=new xe(_,x);for(let D=0;D<g;++D){const F=D*c;for(let Y=0;Y<y;++Y){const se=Y*p;for(let ae=0;ae<c;++ae){const we=D*(c+2)+1+ae,Te=F+ae;for(let Qe=0;Qe<p;++Qe){const Ke=Y*(p+2)+1+Qe;if(n.get(Ke,we)){const Ge=se+Qe;O.set(Ge,Te)}}}}}return O}}class rh{constructor(n,o){this.numDataCodewords=n,this.codewords=o}static getDataBlocks(n,o){const l=o.getECBlocks();let c=0;const p=l.getECBlocks();for(let ae of p)c+=ae.getCount();const g=new Array(c);let y=0;for(let ae of p)for(let we=0;we<ae.getCount();we++){const Te=ae.getDataCodewords(),Qe=l.getECCodewords()+Te;g[y++]=new rh(Te,new Uint8Array(Qe))}const _=g[0].codewords.length-l.getECCodewords(),O=_-1;let D=0;for(let ae=0;ae<O;ae++)for(let we=0;we<y;we++)g[we].codewords[ae]=n[D++];const F=o.getVersionNumber()===24,Y=F?8:y;for(let ae=0;ae<Y;ae++)g[ae].codewords[_-1]=n[D++];const se=g[0].codewords.length;for(let ae=_;ae<se;ae++)for(let we=0;we<y;we++){const Te=F?(we+8)%y:we,Qe=F&&Te>7?ae-1:ae;g[Te].codewords[Qe]=n[D++]}if(D!==n.length)throw new w;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class nh{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new w(""+n);let o=0,l=this.bitOffset,c=this.byteOffset;const p=this.bytes;if(l>0){const g=8-l,y=n<g?n:g,x=g-y,_=255>>8-y<<x;o=(p[c]&_)>>x,n-=y,l+=y,l===8&&(l=0,c++)}if(n>0){for(;n>=8;)o=o<<8|p[c]&255,c++,n-=8;if(n>0){const g=8-n,y=255>>g<<g;o=o<<n|(p[c]&y)>>g,l+=n}}return this.bitOffset=l,this.byteOffset=c,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var vr;(function(M){M[M.PAD_ENCODE=0]="PAD_ENCODE",M[M.ASCII_ENCODE=1]="ASCII_ENCODE",M[M.C40_ENCODE=2]="C40_ENCODE",M[M.TEXT_ENCODE=3]="TEXT_ENCODE",M[M.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",M[M.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",M[M.BASE256_ENCODE=6]="BASE256_ENCODE"})(vr||(vr={}));class Gi{static decode(n){const o=new nh(n),l=new ue,c=new ue,p=new Array;let g=vr.ASCII_ENCODE;do if(g===vr.ASCII_ENCODE)g=this.decodeAsciiSegment(o,l,c);else{switch(g){case vr.C40_ENCODE:this.decodeC40Segment(o,l);break;case vr.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case vr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case vr.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case vr.BASE256_ENCODE:this.decodeBase256Segment(o,l,p);break;default:throw new P}g=vr.ASCII_ENCODE}while(g!==vr.PAD_ENCODE&&o.available()>0);return c.length()>0&&l.append(c.toString()),new Ne(n,l.toString(),p.length===0?null:p,null)}static decodeAsciiSegment(n,o,l){let c=!1;do{let p=n.readBits(8);if(p===0)throw new P;if(p<=128)return c&&(p+=128),o.append(String.fromCharCode(p-1)),vr.ASCII_ENCODE;if(p===129)return vr.PAD_ENCODE;if(p<=229){const g=p-130;g<10&&o.append("0"),o.append(""+g)}else switch(p){case 230:return vr.C40_ENCODE;case 231:return vr.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return vr.ANSIX12_ENCODE;case 239:return vr.TEXT_ENCODE;case 240:return vr.EDIFACT_ENCODE;case 241:break;default:if(p!==254||n.available()!==0)throw new P;break}}while(n.available()>0);return vr.ASCII_ENCODE}static decodeC40Segment(n,o){let l=!1;const c=[];let p=0;do{if(n.available()===8)return;const g=n.readBits(8);if(g===254)return;this.parseTwoBytes(g,n.readBits(8),c);for(let y=0;y<3;y++){const x=c[y];switch(p){case 0:if(x<3)p=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const _=this.C40_BASIC_SET_CHARS[x];l?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),l=!1):o.append(_)}else throw new P;break;case 1:l?(o.append(String.fromCharCode(x+128)),l=!1):o.append(String.fromCharCode(x)),p=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const _=this.C40_SHIFT2_SET_CHARS[x];l?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),l=!1):o.append(_)}else switch(x){case 27:o.append("");break;case 30:l=!0;break;default:throw new P}p=0;break;case 3:l?(o.append(String.fromCharCode(x+224)),l=!1):o.append(String.fromCharCode(x+96)),p=0;break;default:throw new P}}}while(n.available()>0)}static decodeTextSegment(n,o){let l=!1,c=[],p=0;do{if(n.available()===8)return;const g=n.readBits(8);if(g===254)return;this.parseTwoBytes(g,n.readBits(8),c);for(let y=0;y<3;y++){const x=c[y];switch(p){case 0:if(x<3)p=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const _=this.TEXT_BASIC_SET_CHARS[x];l?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),l=!1):o.append(_)}else throw new P;break;case 1:l?(o.append(String.fromCharCode(x+128)),l=!1):o.append(String.fromCharCode(x)),p=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const _=this.TEXT_SHIFT2_SET_CHARS[x];l?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),l=!1):o.append(_)}else switch(x){case 27:o.append("");break;case 30:l=!0;break;default:throw new P}p=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const _=this.TEXT_SHIFT3_SET_CHARS[x];l?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),l=!1):o.append(_),p=0}else throw new P;break;default:throw new P}}}while(n.available()>0)}static decodeAnsiX12Segment(n,o){const l=[];do{if(n.available()===8)return;const c=n.readBits(8);if(c===254)return;this.parseTwoBytes(c,n.readBits(8),l);for(let p=0;p<3;p++){const g=l[p];switch(g){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(g<14)o.append(String.fromCharCode(g+44));else if(g<40)o.append(String.fromCharCode(g+51));else throw new P;break}}}while(n.available()>0)}static parseTwoBytes(n,o,l){let c=(n<<8)+o-1,p=Math.floor(c/1600);l[0]=p,c-=p*1600,p=Math.floor(c/40),l[1]=p,l[2]=c-p*40}static decodeEdifactSegment(n,o){do{if(n.available()<=16)return;for(let l=0;l<4;l++){let c=n.readBits(6);if(c===31){const p=8-n.getBitOffset();p!==8&&n.readBits(p);return}c&32||(c|=64),o.append(String.fromCharCode(c))}}while(n.available()>0)}static decodeBase256Segment(n,o,l){let c=1+n.getByteOffset();const p=this.unrandomize255State(n.readBits(8),c++);let g;if(p===0?g=n.available()/8|0:p<250?g=p:g=250*(p-249)+this.unrandomize255State(n.readBits(8),c++),g<0)throw new P;const y=new Uint8Array(g);for(let x=0;x<g;x++){if(n.available()<8)throw new P;y[x]=this.unrandomize255State(n.readBits(8),c++)}l.push(y);try{o.append(Ae.decode(y,H.ISO88591))}catch(x){throw new J("Platform does not support required encoding: "+x.message)}}static unrandomize255State(n,o){const l=149*o%255+1,c=n-l;return c>=0?c:c+256}}Gi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Gi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Gi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Gi.TEXT_SHIFT2_SET_CHARS=Gi.C40_SHIFT2_SET_CHARS,Gi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Cv{constructor(){this.rsDecoder=new ie(Se.DATA_MATRIX_FIELD_256)}decode(n){const o=new th(n),l=o.getVersion(),c=o.readCodewords(),p=rh.getDataBlocks(c,l);let g=0;for(let _ of p)g+=_.getNumDataCodewords();const y=new Uint8Array(g),x=p.length;for(let _=0;_<x;_++){const O=p[_],D=O.getCodewords(),F=O.getNumDataCodewords();this.correctErrors(D,F);for(let Y=0;Y<F;Y++)y[Y*x+_]=D[Y]}return Gi.decode(y)}correctErrors(n,o){const l=new Int32Array(n);try{this.rsDecoder.decode(l,n.length-o)}catch{throw new b}for(let c=0;c<o;c++)n[c]=l[c]}}class pr{constructor(n){this.image=n,this.rectangleDetector=new Ce(this.image)}detect(){const n=this.rectangleDetector.detect();let o=this.detectSolid1(n);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new z;o=this.shiftToModuleCenter(o);const l=o[0],c=o[1],p=o[2],g=o[3];let y=this.transitionsBetween(l,g)+1,x=this.transitionsBetween(p,g)+1;(y&1)===1&&(y+=1),(x&1)===1&&(x+=1),4*y<7*x&&4*x<7*y&&(y=x=Math.max(y,x));let _=pr.sampleGrid(this.image,l,c,p,g,y,x);return new Le(_,[l,c,p,g])}static shiftPoint(n,o,l){let c=(o.getX()-n.getX())/(l+1),p=(o.getY()-n.getY())/(l+1);return new X(n.getX()+c,n.getY()+p)}static moveAway(n,o,l){let c=n.getX(),p=n.getY();return c<o?c-=1:c+=1,p<l?p-=1:p+=1,new X(c,p)}detectSolid1(n){let o=n[0],l=n[1],c=n[3],p=n[2],g=this.transitionsBetween(o,l),y=this.transitionsBetween(l,c),x=this.transitionsBetween(c,p),_=this.transitionsBetween(p,o),O=g,D=[p,o,l,c];return O>y&&(O=y,D[0]=o,D[1]=l,D[2]=c,D[3]=p),O>x&&(O=x,D[0]=l,D[1]=c,D[2]=p,D[3]=o),O>_&&(D[0]=c,D[1]=p,D[2]=o,D[3]=l),D}detectSolid2(n){let o=n[0],l=n[1],c=n[2],p=n[3],g=this.transitionsBetween(o,p),y=pr.shiftPoint(l,c,(g+1)*4),x=pr.shiftPoint(c,l,(g+1)*4),_=this.transitionsBetween(y,o),O=this.transitionsBetween(x,p);return _<O?(n[0]=o,n[1]=l,n[2]=c,n[3]=p):(n[0]=l,n[1]=c,n[2]=p,n[3]=o),n}correctTopRight(n){let o=n[0],l=n[1],c=n[2],p=n[3],g=this.transitionsBetween(o,p),y=this.transitionsBetween(l,p),x=pr.shiftPoint(o,l,(y+1)*4),_=pr.shiftPoint(c,l,(g+1)*4);g=this.transitionsBetween(x,p),y=this.transitionsBetween(_,p);let O=new X(p.getX()+(c.getX()-l.getX())/(g+1),p.getY()+(c.getY()-l.getY())/(g+1)),D=new X(p.getX()+(o.getX()-l.getX())/(y+1),p.getY()+(o.getY()-l.getY())/(y+1));if(!this.isValid(O))return this.isValid(D)?D:null;if(!this.isValid(D))return O;let F=this.transitionsBetween(x,O)+this.transitionsBetween(_,O),Y=this.transitionsBetween(x,D)+this.transitionsBetween(_,D);return F>Y?O:D}shiftToModuleCenter(n){let o=n[0],l=n[1],c=n[2],p=n[3],g=this.transitionsBetween(o,p)+1,y=this.transitionsBetween(c,p)+1,x=pr.shiftPoint(o,l,y*4),_=pr.shiftPoint(c,l,g*4);g=this.transitionsBetween(x,p)+1,y=this.transitionsBetween(_,p)+1,(g&1)===1&&(g+=1),(y&1)===1&&(y+=1);let O=(o.getX()+l.getX()+c.getX()+p.getX())/4,D=(o.getY()+l.getY()+c.getY()+p.getY())/4;o=pr.moveAway(o,O,D),l=pr.moveAway(l,O,D),c=pr.moveAway(c,O,D),p=pr.moveAway(p,O,D);let F,Y;return x=pr.shiftPoint(o,l,y*4),x=pr.shiftPoint(x,p,g*4),F=pr.shiftPoint(l,o,y*4),F=pr.shiftPoint(F,c,g*4),_=pr.shiftPoint(c,p,y*4),_=pr.shiftPoint(_,l,g*4),Y=pr.shiftPoint(p,c,y*4),Y=pr.shiftPoint(Y,o,g*4),[x,F,_,Y]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,o,l,c,p,g,y){return T.getInstance().sampleGrid(n,g,y,.5,.5,g-.5,.5,g-.5,y-.5,.5,y-.5,o.getX(),o.getY(),p.getX(),p.getY(),c.getX(),c.getY(),l.getX(),l.getY())}transitionsBetween(n,o){let l=Math.trunc(n.getX()),c=Math.trunc(n.getY()),p=Math.trunc(o.getX()),g=Math.trunc(o.getY()),y=Math.abs(g-c)>Math.abs(p-l);if(y){let ae=l;l=c,c=ae,ae=p,p=g,g=ae}let x=Math.abs(p-l),_=Math.abs(g-c),O=-x/2,D=c<g?1:-1,F=l<p?1:-1,Y=0,se=this.image.get(y?c:l,y?l:c);for(let ae=l,we=c;ae!==p;ae+=F){let Te=this.image.get(y?we:ae,y?ae:we);if(Te!==se&&(Y++,se=Te),O+=_,O>0){if(we===g)break;we+=D,O-=x}}return Y}}class Yi{constructor(){this.decoder=new Cv}decode(n,o=null){let l,c;if(o!=null&&o.has(L.PURE_BARCODE)){const _=Yi.extractPureBits(n.getBlackMatrix());l=this.decoder.decode(_),c=Yi.NO_POINTS}else{const _=new pr(n.getBlackMatrix()).detect();l=this.decoder.decode(_.getBits()),c=_.getPoints()}const p=l.getRawBytes(),g=new Fe(l.getText(),p,8*p.length,c,Pe.DATA_MATRIX,N.currentTimeMillis()),y=l.getByteSegments();y!=null&&g.putMetadata(ee.BYTE_SEGMENTS,y);const x=l.getECLevel();return x!=null&&g.putMetadata(ee.ERROR_CORRECTION_LEVEL,x),g}reset(){}static extractPureBits(n){const o=n.getTopLeftOnBit(),l=n.getBottomRightOnBit();if(o==null||l==null)throw new z;const c=this.moduleSize(o,n);let p=o[1];const g=l[1];let y=o[0];const _=(l[0]-y+1)/c,O=(g-p+1)/c;if(_<=0||O<=0)throw new z;const D=c/2;p+=D,y+=D;const F=new xe(_,O);for(let Y=0;Y<O;Y++){const se=p+Y*c;for(let ae=0;ae<_;ae++)n.get(y+ae*c,se)&&F.set(ae,Y)}return F}static moduleSize(n,o){const l=o.getWidth();let c=n[0];const p=n[1];for(;c<l&&o.get(c,p);)c++;if(c===l)throw new z;const g=c-n[0];if(g===0)throw new z;return g}}Yi.NO_POINTS=[];class Iv extends Oe{constructor(n=500){super(new Yi,n)}}var So;(function(M){M[M.L=0]="L",M[M.M=1]="M",M[M.Q=2]="Q",M[M.H=3]="H"})(So||(So={}));class Wt{constructor(n,o,l){this.value=n,this.stringValue=o,this.bits=l,Wt.FOR_BITS.set(l,this),Wt.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return Wt.L;case"M":return Wt.M;case"Q":return Wt.Q;case"H":return Wt.H;default:throw new m(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof Wt))return!1;const o=n;return this.value===o.value}static forBits(n){if(n<0||n>=Wt.FOR_BITS.size)throw new w;return Wt.FOR_BITS.get(n)}}Wt.FOR_BITS=new Map,Wt.FOR_VALUE=new Map,Wt.L=new Wt(So.L,"L",1),Wt.M=new Wt(So.M,"M",0),Wt.Q=new Wt(So.Q,"Q",3),Wt.H=new Wt(So.H,"H",2);class $r{constructor(n){this.errorCorrectionLevel=Wt.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,o){return I.bitCount(n^o)}static decodeFormatInformation(n,o){const l=$r.doDecodeFormatInformation(n,o);return l!==null?l:$r.doDecodeFormatInformation(n^$r.FORMAT_INFO_MASK_QR,o^$r.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,o){let l=Number.MAX_SAFE_INTEGER,c=0;for(const p of $r.FORMAT_INFO_DECODE_LOOKUP){const g=p[0];if(g===n||g===o)return new $r(p[1]);let y=$r.numBitsDiffering(n,g);y<l&&(c=p[1],l=y),n!==o&&(y=$r.numBitsDiffering(o,g),y<l&&(c=p[1],l=y))}return l<=3?new $r(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof $r))return!1;const o=n;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}$r.FORMAT_INFO_MASK_QR=21522,$r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class be{constructor(n,...o){this.ecCodewordsPerBlock=n,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const o=this.ecBlocks;for(const l of o)n+=l.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ${constructor(n,o){this.count=n,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class lt{constructor(n,o,...l){this.versionNumber=n,this.alignmentPatternCenters=o,this.ecBlocks=l;let c=0;const p=l[0].getECCodewordsPerBlock(),g=l[0].getECBlocks();for(const y of g)c+=y.getCount()*(y.getDataCodewords()+p);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new P;try{return this.getVersionForNumber((n-17)/4)}catch{throw new P}}static getVersionForNumber(n){if(n<1||n>40)throw new w;return lt.VERSIONS[n-1]}static decodeVersionInformation(n){let o=Number.MAX_SAFE_INTEGER,l=0;for(let c=0;c<lt.VERSION_DECODE_INFO.length;c++){const p=lt.VERSION_DECODE_INFO[c];if(p===n)return lt.getVersionForNumber(c+7);const g=$r.numBitsDiffering(n,p);g<o&&(l=c+7,o=g)}return o<=3?lt.getVersionForNumber(l):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),o=new xe(n);o.setRegion(0,0,9,9),o.setRegion(n-8,0,8,9),o.setRegion(0,n-8,9,8);const l=this.alignmentPatternCenters.length;for(let c=0;c<l;c++){const p=this.alignmentPatternCenters[c]-2;for(let g=0;g<l;g++)c===0&&(g===0||g===l-1)||c===l-1&&g===0||o.setRegion(this.alignmentPatternCenters[g]-2,p,5,5)}return o.setRegion(6,9,1,n-17),o.setRegion(9,6,n-17,1),this.versionNumber>6&&(o.setRegion(n-11,0,3,6),o.setRegion(0,n-11,6,3)),o}toString(){return""+this.versionNumber}}lt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),lt.VERSIONS=[new lt(1,new Int32Array(0),new be(7,new $(1,19)),new be(10,new $(1,16)),new be(13,new $(1,13)),new be(17,new $(1,9))),new lt(2,Int32Array.from([6,18]),new be(10,new $(1,34)),new be(16,new $(1,28)),new be(22,new $(1,22)),new be(28,new $(1,16))),new lt(3,Int32Array.from([6,22]),new be(15,new $(1,55)),new be(26,new $(1,44)),new be(18,new $(2,17)),new be(22,new $(2,13))),new lt(4,Int32Array.from([6,26]),new be(20,new $(1,80)),new be(18,new $(2,32)),new be(26,new $(2,24)),new be(16,new $(4,9))),new lt(5,Int32Array.from([6,30]),new be(26,new $(1,108)),new be(24,new $(2,43)),new be(18,new $(2,15),new $(2,16)),new be(22,new $(2,11),new $(2,12))),new lt(6,Int32Array.from([6,34]),new be(18,new $(2,68)),new be(16,new $(4,27)),new be(24,new $(4,19)),new be(28,new $(4,15))),new lt(7,Int32Array.from([6,22,38]),new be(20,new $(2,78)),new be(18,new $(4,31)),new be(18,new $(2,14),new $(4,15)),new be(26,new $(4,13),new $(1,14))),new lt(8,Int32Array.from([6,24,42]),new be(24,new $(2,97)),new be(22,new $(2,38),new $(2,39)),new be(22,new $(4,18),new $(2,19)),new be(26,new $(4,14),new $(2,15))),new lt(9,Int32Array.from([6,26,46]),new be(30,new $(2,116)),new be(22,new $(3,36),new $(2,37)),new be(20,new $(4,16),new $(4,17)),new be(24,new $(4,12),new $(4,13))),new lt(10,Int32Array.from([6,28,50]),new be(18,new $(2,68),new $(2,69)),new be(26,new $(4,43),new $(1,44)),new be(24,new $(6,19),new $(2,20)),new be(28,new $(6,15),new $(2,16))),new lt(11,Int32Array.from([6,30,54]),new be(20,new $(4,81)),new be(30,new $(1,50),new $(4,51)),new be(28,new $(4,22),new $(4,23)),new be(24,new $(3,12),new $(8,13))),new lt(12,Int32Array.from([6,32,58]),new be(24,new $(2,92),new $(2,93)),new be(22,new $(6,36),new $(2,37)),new be(26,new $(4,20),new $(6,21)),new be(28,new $(7,14),new $(4,15))),new lt(13,Int32Array.from([6,34,62]),new be(26,new $(4,107)),new be(22,new $(8,37),new $(1,38)),new be(24,new $(8,20),new $(4,21)),new be(22,new $(12,11),new $(4,12))),new lt(14,Int32Array.from([6,26,46,66]),new be(30,new $(3,115),new $(1,116)),new be(24,new $(4,40),new $(5,41)),new be(20,new $(11,16),new $(5,17)),new be(24,new $(11,12),new $(5,13))),new lt(15,Int32Array.from([6,26,48,70]),new be(22,new $(5,87),new $(1,88)),new be(24,new $(5,41),new $(5,42)),new be(30,new $(5,24),new $(7,25)),new be(24,new $(11,12),new $(7,13))),new lt(16,Int32Array.from([6,26,50,74]),new be(24,new $(5,98),new $(1,99)),new be(28,new $(7,45),new $(3,46)),new be(24,new $(15,19),new $(2,20)),new be(30,new $(3,15),new $(13,16))),new lt(17,Int32Array.from([6,30,54,78]),new be(28,new $(1,107),new $(5,108)),new be(28,new $(10,46),new $(1,47)),new be(28,new $(1,22),new $(15,23)),new be(28,new $(2,14),new $(17,15))),new lt(18,Int32Array.from([6,30,56,82]),new be(30,new $(5,120),new $(1,121)),new be(26,new $(9,43),new $(4,44)),new be(28,new $(17,22),new $(1,23)),new be(28,new $(2,14),new $(19,15))),new lt(19,Int32Array.from([6,30,58,86]),new be(28,new $(3,113),new $(4,114)),new be(26,new $(3,44),new $(11,45)),new be(26,new $(17,21),new $(4,22)),new be(26,new $(9,13),new $(16,14))),new lt(20,Int32Array.from([6,34,62,90]),new be(28,new $(3,107),new $(5,108)),new be(26,new $(3,41),new $(13,42)),new be(30,new $(15,24),new $(5,25)),new be(28,new $(15,15),new $(10,16))),new lt(21,Int32Array.from([6,28,50,72,94]),new be(28,new $(4,116),new $(4,117)),new be(26,new $(17,42)),new be(28,new $(17,22),new $(6,23)),new be(30,new $(19,16),new $(6,17))),new lt(22,Int32Array.from([6,26,50,74,98]),new be(28,new $(2,111),new $(7,112)),new be(28,new $(17,46)),new be(30,new $(7,24),new $(16,25)),new be(24,new $(34,13))),new lt(23,Int32Array.from([6,30,54,78,102]),new be(30,new $(4,121),new $(5,122)),new be(28,new $(4,47),new $(14,48)),new be(30,new $(11,24),new $(14,25)),new be(30,new $(16,15),new $(14,16))),new lt(24,Int32Array.from([6,28,54,80,106]),new be(30,new $(6,117),new $(4,118)),new be(28,new $(6,45),new $(14,46)),new be(30,new $(11,24),new $(16,25)),new be(30,new $(30,16),new $(2,17))),new lt(25,Int32Array.from([6,32,58,84,110]),new be(26,new $(8,106),new $(4,107)),new be(28,new $(8,47),new $(13,48)),new be(30,new $(7,24),new $(22,25)),new be(30,new $(22,15),new $(13,16))),new lt(26,Int32Array.from([6,30,58,86,114]),new be(28,new $(10,114),new $(2,115)),new be(28,new $(19,46),new $(4,47)),new be(28,new $(28,22),new $(6,23)),new be(30,new $(33,16),new $(4,17))),new lt(27,Int32Array.from([6,34,62,90,118]),new be(30,new $(8,122),new $(4,123)),new be(28,new $(22,45),new $(3,46)),new be(30,new $(8,23),new $(26,24)),new be(30,new $(12,15),new $(28,16))),new lt(28,Int32Array.from([6,26,50,74,98,122]),new be(30,new $(3,117),new $(10,118)),new be(28,new $(3,45),new $(23,46)),new be(30,new $(4,24),new $(31,25)),new be(30,new $(11,15),new $(31,16))),new lt(29,Int32Array.from([6,30,54,78,102,126]),new be(30,new $(7,116),new $(7,117)),new be(28,new $(21,45),new $(7,46)),new be(30,new $(1,23),new $(37,24)),new be(30,new $(19,15),new $(26,16))),new lt(30,Int32Array.from([6,26,52,78,104,130]),new be(30,new $(5,115),new $(10,116)),new be(28,new $(19,47),new $(10,48)),new be(30,new $(15,24),new $(25,25)),new be(30,new $(23,15),new $(25,16))),new lt(31,Int32Array.from([6,30,56,82,108,134]),new be(30,new $(13,115),new $(3,116)),new be(28,new $(2,46),new $(29,47)),new be(30,new $(42,24),new $(1,25)),new be(30,new $(23,15),new $(28,16))),new lt(32,Int32Array.from([6,34,60,86,112,138]),new be(30,new $(17,115)),new be(28,new $(10,46),new $(23,47)),new be(30,new $(10,24),new $(35,25)),new be(30,new $(19,15),new $(35,16))),new lt(33,Int32Array.from([6,30,58,86,114,142]),new be(30,new $(17,115),new $(1,116)),new be(28,new $(14,46),new $(21,47)),new be(30,new $(29,24),new $(19,25)),new be(30,new $(11,15),new $(46,16))),new lt(34,Int32Array.from([6,34,62,90,118,146]),new be(30,new $(13,115),new $(6,116)),new be(28,new $(14,46),new $(23,47)),new be(30,new $(44,24),new $(7,25)),new be(30,new $(59,16),new $(1,17))),new lt(35,Int32Array.from([6,30,54,78,102,126,150]),new be(30,new $(12,121),new $(7,122)),new be(28,new $(12,47),new $(26,48)),new be(30,new $(39,24),new $(14,25)),new be(30,new $(22,15),new $(41,16))),new lt(36,Int32Array.from([6,24,50,76,102,128,154]),new be(30,new $(6,121),new $(14,122)),new be(28,new $(6,47),new $(34,48)),new be(30,new $(46,24),new $(10,25)),new be(30,new $(2,15),new $(64,16))),new lt(37,Int32Array.from([6,28,54,80,106,132,158]),new be(30,new $(17,122),new $(4,123)),new be(28,new $(29,46),new $(14,47)),new be(30,new $(49,24),new $(10,25)),new be(30,new $(24,15),new $(46,16))),new lt(38,Int32Array.from([6,32,58,84,110,136,162]),new be(30,new $(4,122),new $(18,123)),new be(28,new $(13,46),new $(32,47)),new be(30,new $(48,24),new $(14,25)),new be(30,new $(42,15),new $(32,16))),new lt(39,Int32Array.from([6,26,54,82,110,138,166]),new be(30,new $(20,117),new $(4,118)),new be(28,new $(40,47),new $(7,48)),new be(30,new $(43,24),new $(22,25)),new be(30,new $(10,15),new $(67,16))),new lt(40,Int32Array.from([6,30,58,86,114,142,170]),new be(30,new $(19,118),new $(6,119)),new be(28,new $(18,47),new $(31,48)),new be(30,new $(34,24),new $(34,25)),new be(30,new $(20,15),new $(61,16)))];var Cr;(function(M){M[M.DATA_MASK_000=0]="DATA_MASK_000",M[M.DATA_MASK_001=1]="DATA_MASK_001",M[M.DATA_MASK_010=2]="DATA_MASK_010",M[M.DATA_MASK_011=3]="DATA_MASK_011",M[M.DATA_MASK_100=4]="DATA_MASK_100",M[M.DATA_MASK_101=5]="DATA_MASK_101",M[M.DATA_MASK_110=6]="DATA_MASK_110",M[M.DATA_MASK_111=7]="DATA_MASK_111"})(Cr||(Cr={}));class kn{constructor(n,o){this.value=n,this.isMasked=o}unmaskBitMatrix(n,o){for(let l=0;l<o;l++)for(let c=0;c<o;c++)this.isMasked(l,c)&&n.flip(c,l)}}kn.values=new Map([[Cr.DATA_MASK_000,new kn(Cr.DATA_MASK_000,(M,n)=>(M+n&1)===0)],[Cr.DATA_MASK_001,new kn(Cr.DATA_MASK_001,(M,n)=>(M&1)===0)],[Cr.DATA_MASK_010,new kn(Cr.DATA_MASK_010,(M,n)=>n%3===0)],[Cr.DATA_MASK_011,new kn(Cr.DATA_MASK_011,(M,n)=>(M+n)%3===0)],[Cr.DATA_MASK_100,new kn(Cr.DATA_MASK_100,(M,n)=>(Math.floor(M/2)+Math.floor(n/3)&1)===0)],[Cr.DATA_MASK_101,new kn(Cr.DATA_MASK_101,(M,n)=>M*n%6===0)],[Cr.DATA_MASK_110,new kn(Cr.DATA_MASK_110,(M,n)=>M*n%6<3)],[Cr.DATA_MASK_111,new kn(Cr.DATA_MASK_111,(M,n)=>(M+n+M*n%3&1)===0)]]);class Tv{constructor(n){const o=n.getHeight();if(o<21||(o&3)!==1)throw new P;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let p=0;p<6;p++)n=this.copyBit(p,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let p=5;p>=0;p--)n=this.copyBit(8,p,n);const o=this.bitMatrix.getHeight();let l=0;const c=o-7;for(let p=o-1;p>=c;p--)l=this.copyBit(8,p,l);for(let p=o-8;p<o;p++)l=this.copyBit(p,8,l);if(this.parsedFormatInfo=$r.decodeFormatInformation(n,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new P}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),o=Math.floor((n-17)/4);if(o<=6)return lt.getVersionForNumber(o);let l=0;const c=n-11;for(let g=5;g>=0;g--)for(let y=n-9;y>=c;y--)l=this.copyBit(y,g,l);let p=lt.decodeVersionInformation(l);if(p!==null&&p.getDimensionForVersion()===n)return this.parsedVersion=p,p;l=0;for(let g=5;g>=0;g--)for(let y=n-9;y>=c;y--)l=this.copyBit(g,y,l);if(p=lt.decodeVersionInformation(l),p!==null&&p.getDimensionForVersion()===n)return this.parsedVersion=p,p;throw new P}copyBit(n,o,l){return(this.isMirror?this.bitMatrix.get(o,n):this.bitMatrix.get(n,o))?l<<1|1:l<<1}readCodewords(){const n=this.readFormatInformation(),o=this.readVersion(),l=kn.values.get(n.getDataMask()),c=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,c);const p=o.buildFunctionPattern();let g=!0;const y=new Uint8Array(o.getTotalCodewords());let x=0,_=0,O=0;for(let D=c-1;D>0;D-=2){D===6&&D--;for(let F=0;F<c;F++){const Y=g?c-1-F:F;for(let se=0;se<2;se++)p.get(D-se,Y)||(O++,_<<=1,this.bitMatrix.get(D-se,Y)&&(_|=1),O===8&&(y[x++]=_,O=0,_=0))}g=!g}if(x!==o.getTotalCodewords())throw new P;return y}remask(){if(this.parsedFormatInfo===null)return;const n=kn.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,o)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let o=0,l=n.getWidth();o<l;o++)for(let c=o+1,p=n.getHeight();c<p;c++)n.get(o,c)!==n.get(c,o)&&(n.flip(c,o),n.flip(o,c))}}class ih{constructor(n,o){this.numDataCodewords=n,this.codewords=o}static getDataBlocks(n,o,l){if(n.length!==o.getTotalCodewords())throw new w;const c=o.getECBlocksForLevel(l);let p=0;const g=c.getECBlocks();for(const se of g)p+=se.getCount();const y=new Array(p);let x=0;for(const se of g)for(let ae=0;ae<se.getCount();ae++){const we=se.getDataCodewords(),Te=c.getECCodewordsPerBlock()+we;y[x++]=new ih(we,new Uint8Array(Te))}const _=y[0].codewords.length;let O=y.length-1;for(;O>=0&&y[O].codewords.length!==_;)O--;O++;const D=_-c.getECCodewordsPerBlock();let F=0;for(let se=0;se<D;se++)for(let ae=0;ae<x;ae++)y[ae].codewords[se]=n[F++];for(let se=O;se<x;se++)y[se].codewords[D]=n[F++];const Y=y[0].codewords.length;for(let se=D;se<Y;se++)for(let ae=0;ae<x;ae++){const we=ae<O?se:se+1;y[ae].codewords[we]=n[F++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Rn;(function(M){M[M.TERMINATOR=0]="TERMINATOR",M[M.NUMERIC=1]="NUMERIC",M[M.ALPHANUMERIC=2]="ALPHANUMERIC",M[M.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",M[M.BYTE=4]="BYTE",M[M.ECI=5]="ECI",M[M.KANJI=6]="KANJI",M[M.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",M[M.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",M[M.HANZI=9]="HANZI"})(Rn||(Rn={}));class ut{constructor(n,o,l,c){this.value=n,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=c,ut.FOR_BITS.set(c,this),ut.FOR_VALUE.set(n,this)}static forBits(n){const o=ut.FOR_BITS.get(n);if(o===void 0)throw new w;return o}getCharacterCountBits(n){const o=n.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof ut))return!1;const o=n;return this.value===o.value}toString(){return this.stringValue}}ut.FOR_BITS=new Map,ut.FOR_VALUE=new Map,ut.TERMINATOR=new ut(Rn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ut.NUMERIC=new ut(Rn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ut.ALPHANUMERIC=new ut(Rn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ut.STRUCTURED_APPEND=new ut(Rn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ut.BYTE=new ut(Rn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ut.ECI=new ut(Rn.ECI,"ECI",Int32Array.from([0,0,0]),7),ut.KANJI=new ut(Rn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ut.FNC1_FIRST_POSITION=new ut(Rn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ut.FNC1_SECOND_POSITION=new ut(Rn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ut.HANZI=new ut(Rn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class rr{static decode(n,o,l,c){const p=new nh(n);let g=new ue;const y=new Array;let x=-1,_=-1;try{let O=null,D=!1,F;do{if(p.available()<4)F=ut.TERMINATOR;else{const Y=p.readBits(4);F=ut.forBits(Y)}switch(F){case ut.TERMINATOR:break;case ut.FNC1_FIRST_POSITION:case ut.FNC1_SECOND_POSITION:D=!0;break;case ut.STRUCTURED_APPEND:if(p.available()<16)throw new P;x=p.readBits(8),_=p.readBits(8);break;case ut.ECI:const Y=rr.parseECIValue(p);if(O=q.getCharacterSetECIByValue(Y),O===null)throw new P;break;case ut.HANZI:const se=p.readBits(4),ae=p.readBits(F.getCharacterCountBits(o));se===rr.GB2312_SUBSET&&rr.decodeHanziSegment(p,g,ae);break;default:const we=p.readBits(F.getCharacterCountBits(o));switch(F){case ut.NUMERIC:rr.decodeNumericSegment(p,g,we);break;case ut.ALPHANUMERIC:rr.decodeAlphanumericSegment(p,g,we,D);break;case ut.BYTE:rr.decodeByteSegment(p,g,we,O,y,c);break;case ut.KANJI:rr.decodeKanjiSegment(p,g,we);break;default:throw new P}break}}while(F!==ut.TERMINATOR)}catch{throw new P}return new Ne(n,g.toString(),y.length===0?null:y,l===null?null:l.toString(),x,_)}static decodeHanziSegment(n,o,l){if(l*13>n.available())throw new P;const c=new Uint8Array(2*l);let p=0;for(;l>0;){const g=n.readBits(13);let y=g/96<<8&4294967295|g%96;y<959?y+=41377:y+=42657,c[p]=y>>8&255,c[p+1]=y&255,p+=2,l--}try{o.append(Ae.decode(c,H.GB2312))}catch(g){throw new P(g)}}static decodeKanjiSegment(n,o,l){if(l*13>n.available())throw new P;const c=new Uint8Array(2*l);let p=0;for(;l>0;){const g=n.readBits(13);let y=g/192<<8&4294967295|g%192;y<7936?y+=33088:y+=49472,c[p]=y>>8,c[p+1]=y,p+=2,l--}try{o.append(Ae.decode(c,H.SHIFT_JIS))}catch(g){throw new P(g)}}static decodeByteSegment(n,o,l,c,p,g){if(8*l>n.available())throw new P;const y=new Uint8Array(l);for(let _=0;_<l;_++)y[_]=n.readBits(8);let x;c===null?x=H.guessEncoding(y,g):x=c.getName();try{o.append(Ae.decode(y,x))}catch(_){throw new P(_)}p.push(y)}static toAlphaNumericChar(n){if(n>=rr.ALPHANUMERIC_CHARS.length)throw new P;return rr.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,o,l,c){const p=o.length();for(;l>1;){if(n.available()<11)throw new P;const g=n.readBits(11);o.append(rr.toAlphaNumericChar(Math.floor(g/45))),o.append(rr.toAlphaNumericChar(g%45)),l-=2}if(l===1){if(n.available()<6)throw new P;o.append(rr.toAlphaNumericChar(n.readBits(6)))}if(c)for(let g=p;g<o.length();g++)o.charAt(g)==="%"&&(g<o.length()-1&&o.charAt(g+1)==="%"?o.deleteCharAt(g+1):o.setCharAt(g,""))}static decodeNumericSegment(n,o,l){for(;l>=3;){if(n.available()<10)throw new P;const c=n.readBits(10);if(c>=1e3)throw new P;o.append(rr.toAlphaNumericChar(Math.floor(c/100))),o.append(rr.toAlphaNumericChar(Math.floor(c/10)%10)),o.append(rr.toAlphaNumericChar(c%10)),l-=3}if(l===2){if(n.available()<7)throw new P;const c=n.readBits(7);if(c>=100)throw new P;o.append(rr.toAlphaNumericChar(Math.floor(c/10))),o.append(rr.toAlphaNumericChar(c%10))}else if(l===1){if(n.available()<4)throw new P;const c=n.readBits(4);if(c>=10)throw new P;o.append(rr.toAlphaNumericChar(c))}}static parseECIValue(n){const o=n.readBits(8);if(!(o&128))return o&127;if((o&192)===128){const l=n.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=n.readBits(16);return(o&31)<<16&4294967295|l}throw new P}}rr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",rr.GB2312_SUBSET=1;class K1{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const o=n[0];n[0]=n[2],n[2]=o}}class Nv{constructor(){this.rsDecoder=new ie(Se.QR_CODE_FIELD_256)}decodeBooleanArray(n,o){return this.decodeBitMatrix(xe.parseFromBooleanArray(n),o)}decodeBitMatrix(n,o){const l=new Tv(n);let c=null;try{return this.decodeBitMatrixParser(l,o)}catch(p){c=p}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const p=this.decodeBitMatrixParser(l,o);return p.setOther(new K1(!0)),p}catch(p){throw c!==null?c:p}}decodeBitMatrixParser(n,o){const l=n.readVersion(),c=n.readFormatInformation().getErrorCorrectionLevel(),p=n.readCodewords(),g=ih.getDataBlocks(p,l,c);let y=0;for(const O of g)y+=O.getNumDataCodewords();const x=new Uint8Array(y);let _=0;for(const O of g){const D=O.getCodewords(),F=O.getNumDataCodewords();this.correctErrors(D,F);for(let Y=0;Y<F;Y++)x[_++]=D[Y]}return rr.decode(x,l,c,o)}correctErrors(n,o){const l=new Int32Array(n);try{this.rsDecoder.decode(l,n.length-o)}catch{throw new b}for(let c=0;c<o;c++)n[c]=l[c]}}class sh extends X{constructor(n,o,l){super(n,o),this.estimatedModuleSize=l}aboutEquals(n,o,l){if(Math.abs(o-this.getY())<=n&&Math.abs(l-this.getX())<=n){const c=Math.abs(n-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(n,o,l){const c=(this.getX()+o)/2,p=(this.getY()+n)/2,g=(this.estimatedModuleSize+l)/2;return new sh(c,p,g)}}class Wl{constructor(n,o,l,c,p,g,y){this.image=n,this.startX=o,this.startY=l,this.width=c,this.height=p,this.moduleSize=g,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,o=this.height,l=this.width,c=n+l,p=this.startY+o/2,g=new Int32Array(3),y=this.image;for(let x=0;x<o;x++){const _=p+(x&1?-Math.floor((x+1)/2):Math.floor((x+1)/2));g[0]=0,g[1]=0,g[2]=0;let O=n;for(;O<c&&!y.get(O,_);)O++;let D=0;for(;O<c;){if(y.get(O,_))if(D===1)g[1]++;else if(D===2){if(this.foundPatternCross(g)){const F=this.handlePossibleCenter(g,_,O);if(F!==null)return F}g[0]=g[2],g[1]=1,g[2]=0,D=1}else g[++D]++;else D===1&&D++,g[D]++;O++}if(this.foundPatternCross(g)){const F=this.handlePossibleCenter(g,_,c);if(F!==null)return F}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new z}static centerFromEnd(n,o){return o-n[2]-n[1]/2}foundPatternCross(n){const o=this.moduleSize,l=o/2;for(let c=0;c<3;c++)if(Math.abs(o-n[c])>=l)return!1;return!0}crossCheckVertical(n,o,l,c){const p=this.image,g=p.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let x=n;for(;x>=0&&p.get(o,x)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&!p.get(o,x)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=n+1;x<g&&p.get(o,x)&&y[1]<=l;)y[1]++,x++;if(x===g||y[1]>l)return NaN;for(;x<g&&!p.get(o,x)&&y[2]<=l;)y[2]++,x++;if(y[2]>l)return NaN;const _=y[0]+y[1]+y[2];return 5*Math.abs(_-c)>=2*c?NaN:this.foundPatternCross(y)?Wl.centerFromEnd(y,x):NaN}handlePossibleCenter(n,o,l){const c=n[0]+n[1]+n[2],p=Wl.centerFromEnd(n,l),g=this.crossCheckVertical(o,p,2*n[1],c);if(!isNaN(g)){const y=(n[0]+n[1]+n[2])/3;for(const _ of this.possibleCenters)if(_.aboutEquals(y,g,p))return _.combineEstimate(g,p,y);const x=new sh(p,g,y);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class oh extends X{constructor(n,o,l,c){super(n,o),this.estimatedModuleSize=l,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,o,l){if(Math.abs(o-this.getY())<=n&&Math.abs(l-this.getX())<=n){const c=Math.abs(n-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(n,o,l){const c=this.count+1,p=(this.count*this.getX()+o)/c,g=(this.count*this.getY()+n)/c,y=(this.count*this.estimatedModuleSize+l)/c;return new oh(p,g,y,c)}}class Ov{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ir{constructor(n,o){this.image=n,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const o=n!=null&&n.get(L.TRY_HARDER)!==void 0,l=n!=null&&n.get(L.PURE_BARCODE)!==void 0,c=this.image,p=c.getHeight(),g=c.getWidth();let y=Math.floor(3*p/(4*Ir.MAX_MODULES));(y<Ir.MIN_SKIP||o)&&(y=Ir.MIN_SKIP);let x=!1;const _=new Int32Array(5);for(let D=y-1;D<p&&!x;D+=y){_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0;let F=0;for(let Y=0;Y<g;Y++)if(c.get(Y,D))(F&1)===1&&F++,_[F]++;else if(F&1)_[F]++;else if(F===4)if(Ir.foundPatternCross(_)){if(this.handlePossibleCenter(_,D,Y,l)===!0)if(y=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const ae=this.findRowSkip();ae>_[2]&&(D+=ae-_[2]-y,Y=g-1)}else{_[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,F=3;continue}F=0,_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0}else _[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,F=3;else _[++F]++;Ir.foundPatternCross(_)&&this.handlePossibleCenter(_,D,g,l)===!0&&(y=_[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const O=this.selectBestPatterns();return X.orderBestPatterns(O),new Ov(O)}static centerFromEnd(n,o){return o-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let o=0;for(let p=0;p<5;p++){const g=n[p];if(g===0)return!1;o+=g}if(o<7)return!1;const l=o/7,c=l/2;return Math.abs(l-n[0])<c&&Math.abs(l-n[1])<c&&Math.abs(3*l-n[2])<3*c&&Math.abs(l-n[3])<c&&Math.abs(l-n[4])<c}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,o,l,c){const p=this.getCrossCheckStateCount();let g=0;const y=this.image;for(;n>=g&&o>=g&&y.get(o-g,n-g);)p[2]++,g++;if(n<g||o<g)return!1;for(;n>=g&&o>=g&&!y.get(o-g,n-g)&&p[1]<=l;)p[1]++,g++;if(n<g||o<g||p[1]>l)return!1;for(;n>=g&&o>=g&&y.get(o-g,n-g)&&p[0]<=l;)p[0]++,g++;if(p[0]>l)return!1;const x=y.getHeight(),_=y.getWidth();for(g=1;n+g<x&&o+g<_&&y.get(o+g,n+g);)p[2]++,g++;if(n+g>=x||o+g>=_)return!1;for(;n+g<x&&o+g<_&&!y.get(o+g,n+g)&&p[3]<l;)p[3]++,g++;if(n+g>=x||o+g>=_||p[3]>=l)return!1;for(;n+g<x&&o+g<_&&y.get(o+g,n+g)&&p[4]<l;)p[4]++,g++;if(p[4]>=l)return!1;const O=p[0]+p[1]+p[2]+p[3]+p[4];return Math.abs(O-c)<2*c&&Ir.foundPatternCross(p)}crossCheckVertical(n,o,l,c){const p=this.image,g=p.getHeight(),y=this.getCrossCheckStateCount();let x=n;for(;x>=0&&p.get(o,x);)y[2]++,x--;if(x<0)return NaN;for(;x>=0&&!p.get(o,x)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&p.get(o,x)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=n+1;x<g&&p.get(o,x);)y[2]++,x++;if(x===g)return NaN;for(;x<g&&!p.get(o,x)&&y[3]<l;)y[3]++,x++;if(x===g||y[3]>=l)return NaN;for(;x<g&&p.get(o,x)&&y[4]<l;)y[4]++,x++;if(y[4]>=l)return NaN;const _=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(_-c)>=2*c?NaN:Ir.foundPatternCross(y)?Ir.centerFromEnd(y,x):NaN}crossCheckHorizontal(n,o,l,c){const p=this.image,g=p.getWidth(),y=this.getCrossCheckStateCount();let x=n;for(;x>=0&&p.get(x,o);)y[2]++,x--;if(x<0)return NaN;for(;x>=0&&!p.get(x,o)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&p.get(x,o)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=n+1;x<g&&p.get(x,o);)y[2]++,x++;if(x===g)return NaN;for(;x<g&&!p.get(x,o)&&y[3]<l;)y[3]++,x++;if(x===g||y[3]>=l)return NaN;for(;x<g&&p.get(x,o)&&y[4]<l;)y[4]++,x++;if(y[4]>=l)return NaN;const _=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(_-c)>=c?NaN:Ir.foundPatternCross(y)?Ir.centerFromEnd(y,x):NaN}handlePossibleCenter(n,o,l,c){const p=n[0]+n[1]+n[2]+n[3]+n[4];let g=Ir.centerFromEnd(n,l),y=this.crossCheckVertical(o,Math.floor(g),n[2],p);if(!isNaN(y)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(y),n[2],p),!isNaN(g)&&(!c||this.crossCheckDiagonal(Math.floor(y),Math.floor(g),n[2],p)))){const x=p/7;let _=!1;const O=this.possibleCenters;for(let D=0,F=O.length;D<F;D++){const Y=O[D];if(Y.aboutEquals(x,y,g)){O[D]=Y.combineEstimate(y,g,x),_=!0;break}}if(!_){const D=new oh(g,y,x);O.push(D),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(D)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=Ir.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,o=0;const l=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=Ir.CENTER_QUORUM&&(n++,o+=g.getEstimatedModuleSize());if(n<3)return!1;const c=o/l;let p=0;for(const g of this.possibleCenters)p+=Math.abs(g.getEstimatedModuleSize()-c);return p<=.05*o}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new z;const o=this.possibleCenters;let l;if(n>3){let c=0,p=0;for(const x of this.possibleCenters){const _=x.getEstimatedModuleSize();c+=_,p+=_*_}l=c/n;let g=Math.sqrt(p/n-l*l);o.sort((x,_)=>{const O=Math.abs(_.getEstimatedModuleSize()-l),D=Math.abs(x.getEstimatedModuleSize()-l);return O<D?-1:O>D?1:0});const y=Math.max(.2*l,g);for(let x=0;x<o.length&&o.length>3;x++){const _=o[x];Math.abs(_.getEstimatedModuleSize()-l)>y&&(o.splice(x,1),x--)}}if(o.length>3){let c=0;for(const p of o)c+=p.getEstimatedModuleSize();l=c/o.length,o.sort((p,g)=>{if(g.getCount()===p.getCount()){const y=Math.abs(g.getEstimatedModuleSize()-l),x=Math.abs(p.getEstimatedModuleSize()-l);return y<x?1:y>x?-1:0}else return g.getCount()-p.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}Ir.CENTER_QUORUM=2,Ir.MIN_SKIP=3,Ir.MAX_MODULES=57;class _a{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(L.NEED_RESULT_POINT_CALLBACK);const l=new Ir(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(l)}processFinderPatternInfo(n){const o=n.getTopLeft(),l=n.getTopRight(),c=n.getBottomLeft(),p=this.calculateModuleSize(o,l,c);if(p<1)throw new z("No pattern found in proccess finder.");const g=_a.computeDimension(o,l,c,p),y=lt.getProvisionalVersionForDimension(g),x=y.getDimensionForVersion()-7;let _=null;if(y.getAlignmentPatternCenters().length>0){const Y=l.getX()-o.getX()+c.getX(),se=l.getY()-o.getY()+c.getY(),ae=1-3/x,we=Math.floor(o.getX()+ae*(Y-o.getX())),Te=Math.floor(o.getY()+ae*(se-o.getY()));for(let Qe=4;Qe<=16;Qe<<=1)try{_=this.findAlignmentInRegion(p,we,Te,Qe);break}catch(Ke){if(!(Ke instanceof z))throw Ke}}const O=_a.createTransform(o,l,c,_,g),D=_a.sampleGrid(this.image,O,g);let F;return _===null?F=[c,o,l]:F=[c,o,l,_],new Le(D,F)}static createTransform(n,o,l,c,p){const g=p-3.5;let y,x,_,O;return c!==null?(y=c.getX(),x=c.getY(),_=g-3,O=_):(y=o.getX()-n.getX()+l.getX(),x=o.getY()-n.getY()+l.getY(),_=g,O=g),E.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,_,O,3.5,g,n.getX(),n.getY(),o.getX(),o.getY(),y,x,l.getX(),l.getY())}static sampleGrid(n,o,l){return T.getInstance().sampleGridWithTransform(n,l,l,o)}static computeDimension(n,o,l,c){const p=ve.round(X.distance(n,o)/c),g=ve.round(X.distance(n,l)/c);let y=Math.floor((p+g)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new z("Dimensions could be not found.")}return y}calculateModuleSize(n,o,l){return(this.calculateModuleSizeOneWay(n,o)+this.calculateModuleSizeOneWay(n,l))/2}calculateModuleSizeOneWay(n,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(o.getX()),Math.floor(o.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(l)?c/7:isNaN(c)?l/7:(l+c)/14}sizeOfBlackWhiteBlackRunBothWays(n,o,l,c){let p=this.sizeOfBlackWhiteBlackRun(n,o,l,c),g=1,y=n-(l-n);y<0?(g=n/(n-y),y=0):y>=this.image.getWidth()&&(g=(this.image.getWidth()-1-n)/(y-n),y=this.image.getWidth()-1);let x=Math.floor(o-(c-o)*g);return g=1,x<0?(g=o/(o-x),x=0):x>=this.image.getHeight()&&(g=(this.image.getHeight()-1-o)/(x-o),x=this.image.getHeight()-1),y=Math.floor(n+(y-n)*g),p+=this.sizeOfBlackWhiteBlackRun(n,o,y,x),p-1}sizeOfBlackWhiteBlackRun(n,o,l,c){const p=Math.abs(c-o)>Math.abs(l-n);if(p){let Y=n;n=o,o=Y,Y=l,l=c,c=Y}const g=Math.abs(l-n),y=Math.abs(c-o);let x=-g/2;const _=n<l?1:-1,O=o<c?1:-1;let D=0;const F=l+_;for(let Y=n,se=o;Y!==F;Y+=_){const ae=p?se:Y,we=p?Y:se;if(D===1===this.image.get(ae,we)){if(D===2)return ve.distance(Y,se,n,o);D++}if(x+=y,x>0){if(se===c)break;se+=O,x-=g}}return D===2?ve.distance(l+_,c,n,o):NaN}findAlignmentInRegion(n,o,l,c){const p=Math.floor(c*n),g=Math.max(0,o-p),y=Math.min(this.image.getWidth()-1,o+p);if(y-g<n*3)throw new z("Alignment top exceeds estimated module size.");const x=Math.max(0,l-p),_=Math.min(this.image.getHeight()-1,l+p);if(_-x<n*3)throw new z("Alignment bottom exceeds estimated module size.");return new Wl(this.image,g,x,y-g,_-x,n,this.resultPointCallback).find()}}class Xi{constructor(){this.decoder=new Nv}getDecoder(){return this.decoder}decode(n,o){let l,c;if(o!=null&&o.get(L.PURE_BARCODE)!==void 0){const x=Xi.extractPureBits(n.getBlackMatrix());l=this.decoder.decodeBitMatrix(x,o),c=Xi.NO_POINTS}else{const x=new _a(n.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(x.getBits(),o),c=x.getPoints()}l.getOther()instanceof K1&&l.getOther().applyMirroredCorrection(c);const p=new Fe(l.getText(),l.getRawBytes(),void 0,c,Pe.QR_CODE,void 0),g=l.getByteSegments();g!==null&&p.putMetadata(ee.BYTE_SEGMENTS,g);const y=l.getECLevel();return y!==null&&p.putMetadata(ee.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(p.putMetadata(ee.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),p.putMetadata(ee.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),p}reset(){}static extractPureBits(n){const o=n.getTopLeftOnBit(),l=n.getBottomRightOnBit();if(o===null||l===null)throw new z;const c=this.moduleSize(o,n);let p=o[1],g=l[1],y=o[0],x=l[0];if(y>=x||p>=g)throw new z;if(g-p!==x-y&&(x=y+(g-p),x>=n.getWidth()))throw new z;const _=Math.round((x-y+1)/c),O=Math.round((g-p+1)/c);if(_<=0||O<=0)throw new z;if(O!==_)throw new z;const D=Math.floor(c/2);p+=D,y+=D;const F=y+Math.floor((_-1)*c)-x;if(F>0){if(F>D)throw new z;y-=F}const Y=p+Math.floor((O-1)*c)-g;if(Y>0){if(Y>D)throw new z;p-=Y}const se=new xe(_,O);for(let ae=0;ae<O;ae++){const we=p+Math.floor(ae*c);for(let Te=0;Te<_;Te++)n.get(y+Math.floor(Te*c),we)&&se.set(Te,ae)}return se}static moduleSize(n,o){const l=o.getHeight(),c=o.getWidth();let p=n[0],g=n[1],y=!0,x=0;for(;p<c&&g<l;){if(y!==o.get(p,g)){if(++x===5)break;y=!y}p++,g++}if(p===c||g===l)throw new z;return(p-n[0])/7}}Xi.NO_POINTS=new Array;class pt{PDF417Common(){}static getBitCountSum(n){return ve.sum(n)}static toIntArray(n){if(n==null||!n.length)return pt.EMPTY_INT_ARRAY;const o=new Int32Array(n.length);let l=0;for(const c of n)o[l++]=c;return o}static getCodeword(n){const o=S.binarySearch(pt.SYMBOL_TABLE,n&262143);return o<0?-1:(pt.CODEWORD_TABLE[o]-1)%pt.NUMBER_OF_CODEWORDS}}pt.NUMBER_OF_CODEWORDS=929,pt.MAX_CODEWORDS_IN_BARCODE=pt.NUMBER_OF_CODEWORDS-1,pt.MIN_ROWS_IN_BARCODE=3,pt.MAX_ROWS_IN_BARCODE=90,pt.MODULES_IN_CODEWORD=17,pt.MODULES_IN_STOP_PATTERN=18,pt.BARS_IN_MODULE=8,pt.EMPTY_INT_ARRAY=new Int32Array([]),pt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),pt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class kv{constructor(n,o){this.bits=n,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class yt{static detectMultiple(n,o,l){let c=n.getBlackMatrix(),p=yt.detect(l,c);return p.length||(c=c.clone(),c.rotate180(),p=yt.detect(l,c)),new kv(c,p)}static detect(n,o){const l=new Array;let c=0,p=0,g=!1;for(;c<o.getHeight();){const y=yt.findVertices(o,c,p);if(y[0]==null&&y[3]==null){if(!g)break;g=!1,p=0;for(const x of l)x[1]!=null&&(c=Math.trunc(Math.max(c,x[1].getY()))),x[3]!=null&&(c=Math.max(c,Math.trunc(x[3].getY())));c+=yt.ROW_STEP;continue}if(g=!0,l.push(y),!n)break;y[2]!=null?(p=Math.trunc(y[2].getX()),c=Math.trunc(y[2].getY())):(p=Math.trunc(y[4].getX()),c=Math.trunc(y[4].getY()))}return l}static findVertices(n,o,l){const c=n.getHeight(),p=n.getWidth(),g=new Array(8);return yt.copyToResult(g,yt.findRowsWithPattern(n,c,p,o,l,yt.START_PATTERN),yt.INDEXES_START_PATTERN),g[4]!=null&&(l=Math.trunc(g[4].getX()),o=Math.trunc(g[4].getY())),yt.copyToResult(g,yt.findRowsWithPattern(n,c,p,o,l,yt.STOP_PATTERN),yt.INDEXES_STOP_PATTERN),g}static copyToResult(n,o,l){for(let c=0;c<l.length;c++)n[l[c]]=o[c]}static findRowsWithPattern(n,o,l,c,p,g){const y=new Array(4);let x=!1;const _=new Int32Array(g.length);for(;c<o;c+=yt.ROW_STEP){let D=yt.findGuardPattern(n,p,c,l,!1,g,_);if(D!=null){for(;c>0;){const F=yt.findGuardPattern(n,p,--c,l,!1,g,_);if(F!=null)D=F;else{c++;break}}y[0]=new X(D[0],c),y[1]=new X(D[1],c),x=!0;break}}let O=c+1;if(x){let D=0,F=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;O<o;O++){const Y=yt.findGuardPattern(n,F[0],O,l,!1,g,_);if(Y!=null&&Math.abs(F[0]-Y[0])<yt.MAX_PATTERN_DRIFT&&Math.abs(F[1]-Y[1])<yt.MAX_PATTERN_DRIFT)F=Y,D=0;else{if(D>yt.SKIPPED_ROW_COUNT_MAX)break;D++}}O-=D+1,y[2]=new X(F[0],O),y[3]=new X(F[1],O)}return O-c<yt.BARCODE_MIN_HEIGHT&&S.fill(y,null),y}static findGuardPattern(n,o,l,c,p,g,y){S.fillWithin(y,0,y.length,0);let x=o,_=0;for(;n.get(x,l)&&x>0&&_++<yt.MAX_PIXEL_DRIFT;)x--;let O=x,D=0,F=g.length;for(let Y=p;O<c;O++)if(n.get(O,l)!==Y)y[D]++;else{if(D===F-1){if(yt.patternMatchVariance(y,g,yt.MAX_INDIVIDUAL_VARIANCE)<yt.MAX_AVG_VARIANCE)return new Int32Array([x,O]);x+=y[0]+y[1],N.arraycopy(y,2,y,0,D-1),y[D-1]=0,y[D]=0,D--}else D++;y[D]=1,Y=!Y}return D===F-1&&yt.patternMatchVariance(y,g,yt.MAX_INDIVIDUAL_VARIANCE)<yt.MAX_AVG_VARIANCE?new Int32Array([x,O-1]):null}static patternMatchVariance(n,o,l){let c=n.length,p=0,g=0;for(let _=0;_<c;_++)p+=n[_],g+=o[_];if(p<g)return 1/0;let y=p/g;l*=y;let x=0;for(let _=0;_<c;_++){let O=n[_],D=o[_]*y,F=O>D?O-D:D-O;if(F>l)return 1/0;x+=F}return x/p}}yt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),yt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),yt.MAX_AVG_VARIANCE=.42,yt.MAX_INDIVIDUAL_VARIANCE=.8,yt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),yt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),yt.MAX_PIXEL_DRIFT=3,yt.MAX_PATTERN_DRIFT=5,yt.SKIPPED_ROW_COUNT_MAX=25,yt.ROW_STEP=5,yt.BARCODE_MIN_HEIGHT=10;class Dr{constructor(n,o){if(o.length===0)throw new w;this.field=n;let l=o.length;if(l>1&&o[0]===0){let c=1;for(;c<l&&o[c]===0;)c++;c===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-c),N.arraycopy(o,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let c=0;for(let p of this.coefficients)c=this.field.add(c,p);return c}let o=this.coefficients[0],l=this.coefficients.length;for(let c=1;c<l;c++)o=this.field.add(this.field.multiply(n,o),this.coefficients[c]);return o}add(n){if(!this.field.equals(n.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let o=this.coefficients,l=n.coefficients;if(o.length>l.length){let g=o;o=l,l=g}let c=new Int32Array(l.length),p=l.length-o.length;N.arraycopy(l,0,c,0,p);for(let g=p;g<l.length;g++)c[g]=this.field.add(o[g-p],l[g]);return new Dr(this.field,c)}subtract(n){if(!this.field.equals(n.field))throw new w("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof Dr?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new Dr(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,c=n.coefficients,p=c.length,g=new Int32Array(l+p-1);for(let y=0;y<l;y++){let x=o[y];for(let _=0;_<p;_++)g[y+_]=this.field.add(g[y+_],this.field.multiply(x,c[_]))}return new Dr(this.field,g)}negative(){let n=this.coefficients.length,o=new Int32Array(n);for(let l=0;l<n;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new Dr(this.field,o)}multiplyScalar(n){if(n===0)return new Dr(this.field,new Int32Array([0]));if(n===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let c=0;c<o;c++)l[c]=this.field.multiply(this.coefficients[c],n);return new Dr(this.field,l)}multiplyByMonomial(n,o){if(n<0)throw new w;if(o===0)return new Dr(this.field,new Int32Array([0]));let l=this.coefficients.length,c=new Int32Array(l+n);for(let p=0;p<l;p++)c[p]=this.field.multiply(this.coefficients[p],o);return new Dr(this.field,c)}toString(){let n=new ue;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(n.append(" - "),l=-l):n.length()>0&&n.append(" + "),(o===0||l!==1)&&n.append(l),o!==0&&(o===1?n.append("x"):(n.append("x^"),n.append(o))))}return n.toString()}}class Rv{add(n,o){return(n+o)%this.modulus}subtract(n,o){return(this.modulus+n-o)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new w;return this.logTable[n]}inverse(n){if(n===0)throw new fe;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,o){return n===0||o===0?0:this.expTable[(this.logTable[n]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class ah extends Rv{constructor(n,o){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let l=1;for(let c=0;c<n;c++)this.expTable[c]=l,l=l*o%n;for(let c=0;c<n-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Dr(this,new Int32Array([0])),this.one=new Dr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,o){if(n<0)throw new w;if(o===0)return this.zero;let l=new Int32Array(n+1);return l[0]=o,new Dr(this,l)}}ah.PDF417_GF=new ah(pt.NUMBER_OF_CODEWORDS,3);class Z1{constructor(){this.field=ah.PDF417_GF}decode(n,o,l){let c=new Dr(this.field,n),p=new Int32Array(o),g=!1;for(let se=o;se>0;se--){let ae=c.evaluateAt(this.field.exp(se));p[o-se]=ae,ae!==0&&(g=!0)}if(!g)return 0;let y=this.field.getOne();if(l!=null)for(const se of l){let ae=this.field.exp(n.length-1-se),we=new Dr(this.field,new Int32Array([this.field.subtract(0,ae),1]));y=y.multiply(we)}let x=new Dr(this.field,p),_=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),x,o),O=_[0],D=_[1],F=this.findErrorLocations(O),Y=this.findErrorMagnitudes(D,O,F);for(let se=0;se<F.length;se++){let ae=n.length-1-this.field.log(F[se]);if(ae<0)throw b.getChecksumInstance();n[ae]=this.field.subtract(n[ae],Y[se])}return F.length}runEuclideanAlgorithm(n,o,l){if(n.getDegree()<o.getDegree()){let F=n;n=o,o=F}let c=n,p=o,g=this.field.getZero(),y=this.field.getOne();for(;p.getDegree()>=Math.round(l/2);){let F=c,Y=g;if(c=p,g=y,c.isZero())throw b.getChecksumInstance();p=F;let se=this.field.getZero(),ae=c.getCoefficient(c.getDegree()),we=this.field.inverse(ae);for(;p.getDegree()>=c.getDegree()&&!p.isZero();){let Te=p.getDegree()-c.getDegree(),Qe=this.field.multiply(p.getCoefficient(p.getDegree()),we);se=se.add(this.field.buildMonomial(Te,Qe)),p=p.subtract(c.multiplyByMonomial(Te,Qe))}y=se.multiply(g).subtract(Y).negative()}let x=y.getCoefficient(0);if(x===0)throw b.getChecksumInstance();let _=this.field.inverse(x),O=y.multiply(_),D=p.multiply(_);return[O,D]}findErrorLocations(n){let o=n.getDegree(),l=new Int32Array(o),c=0;for(let p=1;p<this.field.getSize()&&c<o;p++)n.evaluateAt(p)===0&&(l[c]=this.field.inverse(p),c++);if(c!==o)throw b.getChecksumInstance();return l}findErrorMagnitudes(n,o,l){let c=o.getDegree(),p=new Int32Array(c);for(let _=1;_<=c;_++)p[c-_]=this.field.multiply(_,o.getCoefficient(_));let g=new Dr(this.field,p),y=l.length,x=new Int32Array(y);for(let _=0;_<y;_++){let O=this.field.inverse(l[_]),D=this.field.subtract(0,n.evaluateAt(O)),F=this.field.inverse(g.evaluateAt(O));x[_]=this.field.multiply(D,F)}return x}}class Ls{constructor(n,o,l,c,p){n instanceof Ls?this.constructor_2(n):this.constructor_1(n,o,l,c,p)}constructor_1(n,o,l,c,p){const g=o==null||l==null,y=c==null||p==null;if(g&&y)throw new z;g?(o=new X(0,c.getY()),l=new X(0,p.getY())):y&&(c=new X(n.getWidth()-1,o.getY()),p=new X(n.getWidth()-1,l.getY())),this.image=n,this.topLeft=o,this.bottomLeft=l,this.topRight=c,this.bottomRight=p,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(c.getX(),p.getX())),this.minY=Math.trunc(Math.min(o.getY(),c.getY())),this.maxY=Math.trunc(Math.max(l.getY(),p.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,o){return n==null?o:o==null?n:new Ls(n.image,n.topLeft,n.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(n,o,l){let c=this.topLeft,p=this.bottomLeft,g=this.topRight,y=this.bottomRight;if(n>0){let x=l?this.topLeft:this.topRight,_=Math.trunc(x.getY()-n);_<0&&(_=0);let O=new X(x.getX(),_);l?c=O:g=O}if(o>0){let x=l?this.bottomLeft:this.bottomRight,_=Math.trunc(x.getY()+o);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);let O=new X(x.getX(),_);l?p=O:y=O}return new Ls(this.image,c,p,g,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Mv{constructor(n,o,l,c){this.columnCount=n,this.errorCorrectionLevel=c,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ea{constructor(){this.buffer=""}static form(n,o){let l=-1;function c(g,y,x,_,O,D){if(g==="%%")return"%";if(o[++l]===void 0)return;g=_?parseInt(_.substr(1)):void 0;let F=O?parseInt(O.substr(1)):void 0,Y;switch(D){case"s":Y=o[l];break;case"c":Y=o[l][0];break;case"f":Y=parseFloat(o[l]).toFixed(g);break;case"p":Y=parseFloat(o[l]).toPrecision(g);break;case"e":Y=parseFloat(o[l]).toExponential(g);break;case"x":Y=parseInt(o[l]).toString(F||16);break;case"d":Y=parseFloat(parseInt(o[l],F||10).toPrecision(g)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(F);let se=parseInt(x),ae=x&&x[0]+""=="0"?"0":" ";for(;Y.length<se;)Y=y!==void 0?Y+ae:ae+Y;return Y}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(p,c)}format(n,...o){this.buffer+=Ea.form(n,o)}toString(){return this.buffer}}class Sa{constructor(n){this.boundingBox=new Ls(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let o=this.getCodeword(n);if(o!=null)return o;for(let l=1;l<Sa.MAX_NEARBY_DISTANCE;l++){let c=this.imageRowToCodewordIndex(n)-l;if(c>=0&&(o=this.codewords[c],o!=null)||(c=this.imageRowToCodewordIndex(n)+l,c<this.codewords.length&&(o=this.codewords[c],o!=null)))return o}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,o){this.codewords[this.imageRowToCodewordIndex(n)]=o}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new Ea;let o=0;for(const l of this.codewords){if(l==null){n.format("%3d:    |   %n",o++);continue}n.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return n.toString()}}Sa.MAX_NEARBY_DISTANCE=5;class Aa{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let o=this.values.get(n);o==null&&(o=0),o++,this.values.set(n,o)}getValue(){let n=-1,o=new Array;for(const[l,c]of this.values.entries()){const p={getKey:()=>l,getValue:()=>c};p.getValue()>n?(n=p.getValue(),o=[],o.push(p.getKey())):p.getValue()===n&&o.push(p.getKey())}return pt.toIntArray(o)}getConfidence(n){return this.values.get(n)}}class J1 extends Sa{constructor(n,o){super(n),this._isLeft=o}setRowNumbers(){for(let n of this.getCodewords())n!=null&&n.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,n);let l=this.getBoundingBox(),c=this._isLeft?l.getTopLeft():l.getTopRight(),p=this._isLeft?l.getBottomLeft():l.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(c.getY())),y=this.imageRowToCodewordIndex(Math.trunc(p.getY())),x=-1,_=1,O=0;for(let D=g;D<y;D++){if(o[D]==null)continue;let F=o[D],Y=F.getRowNumber()-x;if(Y===0)O++;else if(Y===1)_=Math.max(_,O),O=1,x=F.getRowNumber();else if(Y<0||F.getRowNumber()>=n.getRowCount()||Y>D)o[D]=null;else{let se;_>2?se=(_-2)*Y:se=Y;let ae=se>=D;for(let we=1;we<=se&&!ae;we++)ae=o[D-we]!=null;ae?o[D]=null:(x=F.getRowNumber(),O=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let o=new Int32Array(n.getRowCount());for(let l of this.getCodewords())if(l!=null){let c=l.getRowNumber();if(c>=o.length)continue;o[c]++}return o}adjustIncompleteIndicatorColumnRowNumbers(n){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),c=this._isLeft?o.getBottomLeft():o.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(l.getY())),g=this.imageRowToCodewordIndex(Math.trunc(c.getY())),y=this.getCodewords(),x=-1;for(let _=p;_<g;_++){if(y[_]==null)continue;let O=y[_];O.setRowNumberAsRowIndicatorColumn();let D=O.getRowNumber()-x;D===0||(D===1?x=O.getRowNumber():O.getRowNumber()>=n.getRowCount()?y[_]=null:x=O.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),o=new Aa,l=new Aa,c=new Aa,p=new Aa;for(let y of n){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let x=y.getValue()%30,_=y.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:l.setValue(x*3+1);break;case 1:p.setValue(x/3),c.setValue(x%3);break;case 2:o.setValue(x+1);break}}if(o.getValue().length===0||l.getValue().length===0||c.getValue().length===0||p.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+c.getValue()[0]<pt.MIN_ROWS_IN_BARCODE||l.getValue()[0]+c.getValue()[0]>pt.MAX_ROWS_IN_BARCODE)return null;let g=new Mv(o.getValue()[0],l.getValue()[0],c.getValue()[0],p.getValue()[0]);return this.removeIncorrectCodewords(n,g),g}removeIncorrectCodewords(n,o){for(let l=0;l<n.length;l++){let c=n[l];if(n[l]==null)continue;let p=c.getValue()%30,g=c.getRowNumber();if(g>o.getRowCount()){n[l]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:p*3+1!==o.getRowCountUpperPart()&&(n[l]=null);break;case 1:(Math.trunc(p/3)!==o.getErrorCorrectionLevel()||p%3!==o.getRowCountLowerPart())&&(n[l]=null);break;case 2:p+1!==o.getColumnCount()&&(n[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ca{constructor(n,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=pt.MAX_CODEWORDS_IN_BARCODE,o;do o=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n!=null&&n.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let c=0;c<l.length;c++)l[c]!=null&&(l[c].hasValidRowNumber()||this.adjustRowNumbers(o,c,l))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<n.length;l++)if(n[l]!=null&&o[l]!=null&&n[l].getRowNumber()===o[l].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let p=this.detectionResultColumns[c].getCodewords()[l];p!=null&&(p.setRowNumber(n[l].getRowNumber()),p.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let c=o[l].getRowNumber(),p=0;for(let g=this.barcodeColumnCount+1;g>0&&p<this.ADJUST_ROW_NUMBER_SKIP;g--){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(p=Ca.adjustRowNumberIfValid(c,p,y),y.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let c=o[l].getRowNumber(),p=0;for(let g=1;g<this.barcodeColumnCount+1&&p<this.ADJUST_ROW_NUMBER_SKIP;g++){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(p=Ca.adjustRowNumberIfValid(c,p,y),y.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(n)?(l.setRowNumber(n),o=0):++o),o}adjustRowNumbers(n,o,l){if(!this.detectionResultColumns[n-1])return;let c=l[o],p=this.detectionResultColumns[n-1].getCodewords(),g=p;this.detectionResultColumns[n+1]!=null&&(g=this.detectionResultColumns[n+1].getCodewords());let y=new Array(14);y[2]=p[o],y[3]=g[o],o>0&&(y[0]=l[o-1],y[4]=p[o-1],y[5]=g[o-1]),o>1&&(y[8]=l[o-2],y[10]=p[o-2],y[11]=g[o-2]),o<l.length-1&&(y[1]=l[o+1],y[6]=p[o+1],y[7]=g[o+1]),o<l.length-2&&(y[9]=l[o+2],y[12]=p[o+2],y[13]=g[o+2]);for(let x of y)if(Ca.adjustRowNumber(c,x))return}static adjustRowNumber(n,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===n.getBucket()?(n.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,o){this.detectionResultColumns[n]=o}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new Ea;for(let l=0;l<n.getCodewords().length;l++){o.format("CW %3d:",l);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){o.format("    |   ");continue}let p=this.detectionResultColumns[c].getCodewords()[l];if(p==null){o.format("    |   ");continue}o.format(" %3d|%3d",p.getRowNumber(),p.getValue())}o.format("%n")}return o.toString()}}class Ia{constructor(n,o,l,c){this.rowNumber=Ia.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==Ia.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}Ia.BARCODE_ROW_UNKNOWN=-1;class ln{static initialize(){for(let n=0;n<pt.SYMBOL_TABLE.length;n++){let o=pt.SYMBOL_TABLE[n],l=o&1;for(let c=0;c<pt.BARS_IN_MODULE;c++){let p=0;for(;(o&1)===l;)p+=1,o>>=1;l=o&1,ln.RATIOS_TABLE[n]||(ln.RATIOS_TABLE[n]=new Array(pt.BARS_IN_MODULE)),ln.RATIOS_TABLE[n][pt.BARS_IN_MODULE-c-1]=Math.fround(p/pt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let o=ln.getDecodedCodewordValue(ln.sampleBitCounts(n));return o!==-1?o:ln.getClosestDecodedValue(n)}static sampleBitCounts(n){let o=ve.sum(n),l=new Int32Array(pt.BARS_IN_MODULE),c=0,p=0;for(let g=0;g<pt.MODULES_IN_CODEWORD;g++){let y=o/(2*pt.MODULES_IN_CODEWORD)+g*o/pt.MODULES_IN_CODEWORD;p+n[c]<=y&&(p+=n[c],c++),l[c]++}return l}static getDecodedCodewordValue(n){let o=ln.getBitValue(n);return pt.getCodeword(o)===-1?-1:o}static getBitValue(n){let o=0;for(let l=0;l<n.length;l++)for(let c=0;c<n[l];c++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(n){let o=ve.sum(n),l=new Array(pt.BARS_IN_MODULE);if(o>1)for(let g=0;g<l.length;g++)l[g]=Math.fround(n[g]/o);let c=je.MAX_VALUE,p=-1;this.bSymbolTableReady||ln.initialize();for(let g=0;g<ln.RATIOS_TABLE.length;g++){let y=0,x=ln.RATIOS_TABLE[g];for(let _=0;_<pt.BARS_IN_MODULE;_++){let O=Math.fround(x[_]-l[_]);if(y+=Math.fround(O*O),y>=c)break}y<c&&(c=y,p=pt.SYMBOL_TABLE[g])}return p}}ln.bSymbolTableReady=!1,ln.RATIOS_TABLE=new Array(pt.SYMBOL_TABLE.length).map(M=>new Array(pt.BARS_IN_MODULE));class ep{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class tp{static parseLong(n,o=void 0){return parseInt(n,o)}}class rp extends d{}rp.kind="NullPointerException";class Dv{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,o,l){if(n==null)throw new rp;if(o<0||o>n.length||l<0||o+l>n.length||o+l<0)throw new R;if(l===0)return;for(let c=0;c<l;c++)this.write(n[o+c])}flush(){}close(){}}class Pv extends d{}class Lv extends Dv{constructor(n=32){if(super(),this.count=0,n<0)throw new w("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let l=this.buf.length<<1;if(l-n<0&&(l=n),l<0){if(n<0)throw new Pv;l=I.MAX_VALUE}this.buf=S.copyOfUint8Array(this.buf,l)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,o,l){if(o<0||o>n.length||l<0||o+l-n.length>0)throw new R;this.ensureCapacity(this.count+l),N.arraycopy(n,o,this.buf,this.count,l),this.count+=l}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return S.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var Pt;(function(M){M[M.ALPHA=0]="ALPHA",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.PUNCT=3]="PUNCT",M[M.ALPHA_SHIFT=4]="ALPHA_SHIFT",M[M.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Pt||(Pt={}));function np(){if(typeof window<"u")return window.BigInt||null;if(typeof Fr<"u")return Fr.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Hl;function qi(M){if(typeof Hl>"u"&&(Hl=np()),Hl===null)throw new Error("BigInt is not supported!");return Hl(M)}function Bv(){let M=[];M[0]=qi(1);let n=qi(900);M[1]=n;for(let o=2;o<16;o++)M[o]=M[o-1]*n;return M}class Ie{static decode(n,o){let l=new ue(""),c=q.ISO8859_1;l.enableDecoding(c);let p=1,g=n[p++],y=new ep;for(;p<n[0];){switch(g){case Ie.TEXT_COMPACTION_MODE_LATCH:p=Ie.textCompaction(n,p,l);break;case Ie.BYTE_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH_6:p=Ie.byteCompaction(g,n,c,p,l);break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[p++]);break;case Ie.NUMERIC_COMPACTION_MODE_LATCH:p=Ie.numericCompaction(n,p,l);break;case Ie.ECI_CHARSET:q.getCharacterSetECIByValue(n[p++]);break;case Ie.ECI_GENERAL_PURPOSE:p+=2;break;case Ie.ECI_USER_DEFINED:p++;break;case Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:p=Ie.decodeMacroBlock(n,p,y);break;case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ie.MACRO_PDF417_TERMINATOR:throw new P;default:p--,p=Ie.textCompaction(n,p,l);break}if(p<n.length)g=n[p++];else throw P.getFormatInstance()}if(l.length()===0)throw P.getFormatInstance();let x=new Ne(null,l.toString(),null,o);return x.setOther(y),x}static decodeMacroBlock(n,o,l){if(o+Ie.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw P.getFormatInstance();let c=new Int32Array(Ie.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<Ie.NUMBER_OF_SEQUENCE_CODEWORDS;y++,o++)c[y]=n[o];l.setSegmentIndex(I.parseInt(Ie.decodeBase900toBase10(c,Ie.NUMBER_OF_SEQUENCE_CODEWORDS)));let p=new ue;o=Ie.textCompaction(n,o,p),l.setFileId(p.toString());let g=-1;for(n[o]===Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=o+1);o<n[0];)switch(n[o]){case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,n[o]){case Ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new ue;o=Ie.textCompaction(n,o+1,y),l.setFileName(y.toString());break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new ue;o=Ie.textCompaction(n,o+1,x),l.setSender(x.toString());break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let _=new ue;o=Ie.textCompaction(n,o+1,_),l.setAddressee(_.toString());break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let O=new ue;o=Ie.numericCompaction(n,o+1,O),l.setSegmentCount(I.parseInt(O.toString()));break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let D=new ue;o=Ie.numericCompaction(n,o+1,D),l.setTimestamp(tp.parseLong(D.toString()));break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let F=new ue;o=Ie.numericCompaction(n,o+1,F),l.setChecksum(I.parseInt(F.toString()));break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Y=new ue;o=Ie.numericCompaction(n,o+1,Y),l.setFileSize(tp.parseLong(Y.toString()));break;default:throw P.getFormatInstance()}break;case Ie.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw P.getFormatInstance()}if(g!==-1){let y=o-g;l.isLastSegment()&&y--,l.setOptionalData(S.copyOfRange(n,g,g+y))}return o}static textCompaction(n,o,l){let c=new Int32Array((n[0]-o)*2),p=new Int32Array((n[0]-o)*2),g=0,y=!1;for(;o<n[0]&&!y;){let x=n[o++];if(x<Ie.TEXT_COMPACTION_MODE_LATCH)c[g]=x/30,c[g+1]=x%30,g+=2;else switch(x){case Ie.TEXT_COMPACTION_MODE_LATCH:c[g++]=Ie.TEXT_COMPACTION_MODE_LATCH;break;case Ie.BYTE_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH_6:case Ie.NUMERIC_COMPACTION_MODE_LATCH:case Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ie.MACRO_PDF417_TERMINATOR:o--,y=!0;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[g]=Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=n[o++],p[g]=x,g++;break}}return Ie.decodeTextCompaction(c,p,g,l),o}static decodeTextCompaction(n,o,l,c){let p=Pt.ALPHA,g=Pt.ALPHA,y=0;for(;y<l;){let x=n[y],_="";switch(p){case Pt.ALPHA:if(x<26)_=String.fromCharCode(65+x);else switch(x){case 26:_=" ";break;case Ie.LL:p=Pt.LOWER;break;case Ie.ML:p=Pt.MIXED;break;case Ie.PS:g=p,p=Pt.PUNCT_SHIFT;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[y]);break;case Ie.TEXT_COMPACTION_MODE_LATCH:p=Pt.ALPHA;break}break;case Pt.LOWER:if(x<26)_=String.fromCharCode(97+x);else switch(x){case 26:_=" ";break;case Ie.AS:g=p,p=Pt.ALPHA_SHIFT;break;case Ie.ML:p=Pt.MIXED;break;case Ie.PS:g=p,p=Pt.PUNCT_SHIFT;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[y]);break;case Ie.TEXT_COMPACTION_MODE_LATCH:p=Pt.ALPHA;break}break;case Pt.MIXED:if(x<Ie.PL)_=Ie.MIXED_CHARS[x];else switch(x){case Ie.PL:p=Pt.PUNCT;break;case 26:_=" ";break;case Ie.LL:p=Pt.LOWER;break;case Ie.AL:p=Pt.ALPHA;break;case Ie.PS:g=p,p=Pt.PUNCT_SHIFT;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[y]);break;case Ie.TEXT_COMPACTION_MODE_LATCH:p=Pt.ALPHA;break}break;case Pt.PUNCT:if(x<Ie.PAL)_=Ie.PUNCT_CHARS[x];else switch(x){case Ie.PAL:p=Pt.ALPHA;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[y]);break;case Ie.TEXT_COMPACTION_MODE_LATCH:p=Pt.ALPHA;break}break;case Pt.ALPHA_SHIFT:if(p=g,x<26)_=String.fromCharCode(65+x);else switch(x){case 26:_=" ";break;case Ie.TEXT_COMPACTION_MODE_LATCH:p=Pt.ALPHA;break}break;case Pt.PUNCT_SHIFT:if(p=g,x<Ie.PAL)_=Ie.PUNCT_CHARS[x];else switch(x){case Ie.PAL:p=Pt.ALPHA;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[y]);break;case Ie.TEXT_COMPACTION_MODE_LATCH:p=Pt.ALPHA;break}break}_!==""&&c.append(_),y++}}static byteCompaction(n,o,l,c,p){let g=new Lv,y=0,x=0,_=!1;switch(n){case Ie.BYTE_COMPACTION_MODE_LATCH:let O=new Int32Array(6),D=o[c++];for(;c<o[0]&&!_;)switch(O[y++]=D,x=900*x+D,D=o[c++],D){case Ie.TEXT_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH:case Ie.NUMERIC_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH_6:case Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ie.MACRO_PDF417_TERMINATOR:c--,_=!0;break;default:if(y%5===0&&y>0){for(let F=0;F<6;++F)g.write(Number(qi(x)>>qi(8*(5-F))));x=0,y=0}break}c===o[0]&&D<Ie.TEXT_COMPACTION_MODE_LATCH&&(O[y++]=D);for(let F=0;F<y;F++)g.write(O[F]);break;case Ie.BYTE_COMPACTION_MODE_LATCH_6:for(;c<o[0]&&!_;){let F=o[c++];if(F<Ie.TEXT_COMPACTION_MODE_LATCH)y++,x=900*x+F;else switch(F){case Ie.TEXT_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH:case Ie.NUMERIC_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH_6:case Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ie.MACRO_PDF417_TERMINATOR:c--,_=!0;break}if(y%5===0&&y>0){for(let Y=0;Y<6;++Y)g.write(Number(qi(x)>>qi(8*(5-Y))));x=0,y=0}}break}return p.append(Ae.decode(g.toByteArray(),l)),c}static numericCompaction(n,o,l){let c=0,p=!1,g=new Int32Array(Ie.MAX_NUMERIC_CODEWORDS);for(;o<n[0]&&!p;){let y=n[o++];if(o===n[0]&&(p=!0),y<Ie.TEXT_COMPACTION_MODE_LATCH)g[c]=y,c++;else switch(y){case Ie.TEXT_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH_6:case Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ie.MACRO_PDF417_TERMINATOR:o--,p=!0;break}(c%Ie.MAX_NUMERIC_CODEWORDS===0||y===Ie.NUMERIC_COMPACTION_MODE_LATCH||p)&&c>0&&(l.append(Ie.decodeBase900toBase10(g,c)),c=0)}return o}static decodeBase900toBase10(n,o){let l=qi(0);for(let p=0;p<o;p++)l+=Ie.EXP900[o-p-1]*qi(n[p]);let c=l.toString();if(c.charAt(0)!=="1")throw new P;return c.substring(1)}}Ie.TEXT_COMPACTION_MODE_LATCH=900,Ie.BYTE_COMPACTION_MODE_LATCH=901,Ie.NUMERIC_COMPACTION_MODE_LATCH=902,Ie.BYTE_COMPACTION_MODE_LATCH_6=924,Ie.ECI_USER_DEFINED=925,Ie.ECI_GENERAL_PURPOSE=926,Ie.ECI_CHARSET=927,Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Ie.MACRO_PDF417_TERMINATOR=922,Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Ie.MAX_NUMERIC_CODEWORDS=15,Ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Ie.PL=25,Ie.LL=27,Ie.AS=27,Ie.ML=28,Ie.AL=28,Ie.PS=29,Ie.PAL=29,Ie.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Ie.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Ie.EXP900=np()?Bv():[],Ie.NUMBER_OF_SEQUENCE_CODEWORDS=2;class wt{constructor(){}static decode(n,o,l,c,p,g,y){let x=new Ls(n,o,l,c,p),_=null,O=null,D;for(let se=!0;;se=!1){if(o!=null&&(_=wt.getRowIndicatorColumn(n,x,o,!0,g,y)),c!=null&&(O=wt.getRowIndicatorColumn(n,x,c,!1,g,y)),D=wt.merge(_,O),D==null)throw z.getNotFoundInstance();let ae=D.getBoundingBox();if(se&&ae!=null&&(ae.getMinY()<x.getMinY()||ae.getMaxY()>x.getMaxY()))x=ae;else break}D.setBoundingBox(x);let F=D.getBarcodeColumnCount()+1;D.setDetectionResultColumn(0,_),D.setDetectionResultColumn(F,O);let Y=_!=null;for(let se=1;se<=F;se++){let ae=Y?se:F-se;if(D.getDetectionResultColumn(ae)!==void 0)continue;let we;ae===0||ae===F?we=new J1(x,ae===0):we=new Sa(x),D.setDetectionResultColumn(ae,we);let Te=-1,Qe=Te;for(let Ke=x.getMinY();Ke<=x.getMaxY();Ke++){if(Te=wt.getStartColumn(D,ae,Ke,Y),Te<0||Te>x.getMaxX()){if(Qe===-1)continue;Te=Qe}let Ge=wt.detectCodeword(n,x.getMinX(),x.getMaxX(),Y,Te,Ke,g,y);Ge!=null&&(we.setCodeword(Ke,Ge),Qe=Te,g=Math.min(g,Ge.getWidth()),y=Math.max(y,Ge.getWidth()))}}return wt.createDecoderResult(D)}static merge(n,o){if(n==null&&o==null)return null;let l=wt.getBarcodeMetadata(n,o);if(l==null)return null;let c=Ls.merge(wt.adjustBoundingBox(n),wt.adjustBoundingBox(o));return new Ca(l,c)}static adjustBoundingBox(n){if(n==null)return null;let o=n.getRowHeights();if(o==null)return null;let l=wt.getMax(o),c=0;for(let y of o)if(c+=l-y,y>0)break;let p=n.getCodewords();for(let y=0;c>0&&p[y]==null;y++)c--;let g=0;for(let y=o.length-1;y>=0&&(g+=l-o[y],!(o[y]>0));y--);for(let y=p.length-1;g>0&&p[y]==null;y--)g--;return n.getBoundingBox().addMissingRows(c,g,n.isLeft())}static getMax(n){let o=-1;for(let l of n)o=Math.max(o,l);return o}static getBarcodeMetadata(n,o){let l;if(n==null||(l=n.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let c;return o==null||(c=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==c.getColumnCount()&&l.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&l.getRowCount()!==c.getRowCount()?null:l}static getRowIndicatorColumn(n,o,l,c,p,g){let y=new J1(o,c);for(let x=0;x<2;x++){let _=x===0?1:-1,O=Math.trunc(Math.trunc(l.getX()));for(let D=Math.trunc(Math.trunc(l.getY()));D<=o.getMaxY()&&D>=o.getMinY();D+=_){let F=wt.detectCodeword(n,0,n.getWidth(),c,O,D,p,g);F!=null&&(y.setCodeword(D,F),c?O=F.getStartX():O=F.getEndX())}}return y}static adjustCodewordCount(n,o){let l=o[0][1],c=l.getValue(),p=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-wt.getNumberOfECCodeWords(n.getBarcodeECLevel());if(c.length===0){if(p<1||p>pt.MAX_CODEWORDS_IN_BARCODE)throw z.getNotFoundInstance();l.setValue(p)}else c[0]!==p&&l.setValue(p)}static createDecoderResult(n){let o=wt.createBarcodeMatrix(n);wt.adjustCodewordCount(n,o);let l=new Array,c=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),p=[],g=new Array;for(let x=0;x<n.getBarcodeRowCount();x++)for(let _=0;_<n.getBarcodeColumnCount();_++){let O=o[x][_+1].getValue(),D=x*n.getBarcodeColumnCount()+_;O.length===0?l.push(D):O.length===1?c[D]=O[0]:(g.push(D),p.push(O))}let y=new Array(p.length);for(let x=0;x<y.length;x++)y[x]=p[x];return wt.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),c,pt.toIntArray(l),pt.toIntArray(g),y)}static createDecoderResultFromAmbiguousValues(n,o,l,c,p){let g=new Int32Array(c.length),y=100;for(;y-- >0;){for(let x=0;x<g.length;x++)o[c[x]]=p[x][g[x]];try{return wt.decodeCodewords(o,n,l)}catch(x){if(!(x instanceof b))throw x}if(g.length===0)throw b.getChecksumInstance();for(let x=0;x<g.length;x++)if(g[x]<p[x].length-1){g[x]++;break}else if(g[x]=0,x===g.length-1)throw b.getChecksumInstance()}throw b.getChecksumInstance()}static createBarcodeMatrix(n){let o=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let c=0;c<o.length;c++)for(let p=0;p<o[c].length;p++)o[c][p]=new Aa;let l=0;for(let c of n.getDetectionResultColumns()){if(c!=null){for(let p of c.getCodewords())if(p!=null){let g=p.getRowNumber();if(g>=0){if(g>=o.length)continue;o[g][l].setValue(p.getValue())}}}l++}return o}static isValidBarcodeColumn(n,o){return o>=0&&o<=n.getBarcodeColumnCount()+1}static getStartColumn(n,o,l,c){let p=c?1:-1,g=null;if(wt.isValidBarcodeColumn(n,o-p)&&(g=n.getDetectionResultColumn(o-p).getCodeword(l)),g!=null)return c?g.getEndX():g.getStartX();if(g=n.getDetectionResultColumn(o).getCodewordNearby(l),g!=null)return c?g.getStartX():g.getEndX();if(wt.isValidBarcodeColumn(n,o-p)&&(g=n.getDetectionResultColumn(o-p).getCodewordNearby(l)),g!=null)return c?g.getEndX():g.getStartX();let y=0;for(;wt.isValidBarcodeColumn(n,o-p);){o-=p;for(let x of n.getDetectionResultColumn(o).getCodewords())if(x!=null)return(c?x.getEndX():x.getStartX())+p*y*(x.getEndX()-x.getStartX());y++}return c?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,o,l,c,p,g,y,x){p=wt.adjustCodewordStartColumn(n,o,l,c,p,g);let _=wt.getModuleBitCount(n,o,l,c,p,g);if(_==null)return null;let O,D=ve.sum(_);if(c)O=p+D;else{for(let se=0;se<_.length/2;se++){let ae=_[se];_[se]=_[_.length-1-se],_[_.length-1-se]=ae}O=p,p=O-D}if(!wt.checkCodewordSkew(D,y,x))return null;let F=ln.getDecodedValue(_),Y=pt.getCodeword(F);return Y===-1?null:new Ia(p,O,wt.getCodewordBucketNumber(F),Y)}static getModuleBitCount(n,o,l,c,p,g){let y=p,x=new Int32Array(8),_=0,O=c?1:-1,D=c;for(;(c?y<l:y>=o)&&_<x.length;)n.get(y,g)===D?(x[_]++,y+=O):(_++,D=!D);return _===x.length||y===(c?l:o)&&_===x.length-1?x:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,o,l,c,p,g){let y=p,x=c?-1:1;for(let _=0;_<2;_++){for(;(c?y>=o:y<l)&&c===n.get(y,g);){if(Math.abs(p-y)>wt.CODEWORD_SKEW_SIZE)return p;y+=x}x=-x,c=!c}return y}static checkCodewordSkew(n,o,l){return o-wt.CODEWORD_SKEW_SIZE<=n&&n<=l+wt.CODEWORD_SKEW_SIZE}static decodeCodewords(n,o,l){if(n.length===0)throw P.getFormatInstance();let c=1<<o+1,p=wt.correctErrors(n,l,c);wt.verifyCodewordCount(n,c);let g=Ie.decode(n,""+o);return g.setErrorsCorrected(p),g.setErasures(l.length),g}static correctErrors(n,o,l){if(o!=null&&o.length>l/2+wt.MAX_ERRORS||l<0||l>wt.MAX_EC_CODEWORDS)throw b.getChecksumInstance();return wt.errorCorrection.decode(n,l,o)}static verifyCodewordCount(n,o){if(n.length<4)throw P.getFormatInstance();let l=n[0];if(l>n.length)throw P.getFormatInstance();if(l===0)if(o<n.length)n[0]=n.length-o;else throw P.getFormatInstance()}static getBitCountForCodeword(n){let o=new Int32Array(8),l=0,c=o.length-1;for(;!((n&1)!==l&&(l=n&1,c--,c<0));)o[c]++,n>>=1;return o}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return wt.getCodewordBucketNumber(wt.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let o=new Ea;for(let l=0;l<n.length;l++){o.format("Row %2d: ",l);for(let c=0;c<n[l].length;c++){let p=n[l][c];p.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",p.getValue()[0],p.getConfidence(p.getValue()[0]))}o.format("%n")}return o.toString()}}wt.CODEWORD_SKEW_SIZE=2,wt.MAX_ERRORS=3,wt.MAX_EC_CODEWORDS=512,wt.errorCorrection=new Z1;class Pr{decode(n,o=null){let l=Pr.decode(n,o,!1);if(l==null||l.length===0||l[0]==null)throw z.getNotFoundInstance();return l[0]}decodeMultiple(n,o=null){try{return Pr.decode(n,o,!0)}catch(l){throw l instanceof P||l instanceof b?z.getNotFoundInstance():l}}static decode(n,o,l){const c=new Array,p=yt.detectMultiple(n,o,l);for(const g of p.getPoints()){const y=wt.decode(p.getBits(),g[4],g[5],g[6],g[7],Pr.getMinCodewordWidth(g),Pr.getMaxCodewordWidth(g)),x=new Fe(y.getText(),y.getRawBytes(),void 0,g,Pe.PDF_417);x.putMetadata(ee.ERROR_CORRECTION_LEVEL,y.getECLevel());const _=y.getOther();_!=null&&x.putMetadata(ee.PDF417_EXTRA_METADATA,_),c.push(x)}return c.map(g=>g)}static getMaxWidth(n,o){return n==null||o==null?0:Math.trunc(Math.abs(n.getX()-o.getX()))}static getMinWidth(n,o){return n==null||o==null?I.MAX_VALUE:Math.trunc(Math.abs(n.getX()-o.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(Pr.getMaxWidth(n[0],n[4]),Pr.getMaxWidth(n[6],n[2])*pt.MODULES_IN_CODEWORD/pt.MODULES_IN_STOP_PATTERN),Math.max(Pr.getMaxWidth(n[1],n[5]),Pr.getMaxWidth(n[7],n[3])*pt.MODULES_IN_CODEWORD/pt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(Pr.getMinWidth(n[0],n[4]),Pr.getMinWidth(n[6],n[2])*pt.MODULES_IN_CODEWORD/pt.MODULES_IN_STOP_PATTERN),Math.min(Pr.getMinWidth(n[1],n[5]),Pr.getMinWidth(n[7],n[3])*pt.MODULES_IN_CODEWORD/pt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Vl extends d{}Vl.kind="ReaderException";class ip{constructor(n,o){this.verbose=n===!0,o&&this.setHints(o)}decode(n,o){return o&&this.setHints(o),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const o=!i(n)&&n.get(L.TRY_HARDER)===!0,l=i(n)?null:n.get(L.POSSIBLE_FORMATS),c=new Array;if(!i(l)){const p=l.some(g=>g===Pe.UPC_A||g===Pe.UPC_E||g===Pe.EAN_13||g===Pe.EAN_8||g===Pe.CODABAR||g===Pe.CODE_39||g===Pe.CODE_93||g===Pe.CODE_128||g===Pe.ITF||g===Pe.RSS_14||g===Pe.RSS_EXPANDED);p&&!o&&c.push(new Eo(n,this.verbose)),l.includes(Pe.QR_CODE)&&c.push(new Xi),l.includes(Pe.DATA_MATRIX)&&c.push(new Yi),l.includes(Pe.AZTEC)&&c.push(new re),l.includes(Pe.PDF_417)&&c.push(new Pr),p&&o&&c.push(new Eo(n,this.verbose))}c.length===0&&(o||c.push(new Eo(n,this.verbose)),c.push(new Xi),c.push(new Yi),c.push(new re),c.push(new Pr),o&&c.push(new Eo(n,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new Vl("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(n,this.hints)}catch(l){if(l instanceof Vl)continue}throw new z("No MultiFormat Readers were able to detect the code.")}}class jv extends Oe{constructor(n=null,o=500){const l=new ip;l.setHints(n),super(l,o)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class Fv extends Oe{constructor(n=500){super(new Pr,n)}}class Uv extends Oe{constructor(n=500){super(new Xi,n)}}var lh;(function(M){M[M.ERROR_CORRECTION=0]="ERROR_CORRECTION",M[M.CHARACTER_SET=1]="CHARACTER_SET",M[M.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",M[M.MIN_SIZE=3]="MIN_SIZE",M[M.MAX_SIZE=4]="MAX_SIZE",M[M.MARGIN=5]="MARGIN",M[M.PDF417_COMPACT=6]="PDF417_COMPACT",M[M.PDF417_COMPACTION=7]="PDF417_COMPACTION",M[M.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",M[M.AZTEC_LAYERS=9]="AZTEC_LAYERS",M[M.QR_VERSION=10]="QR_VERSION"})(lh||(lh={}));var br=lh;class uh{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new le(n,Int32Array.from([1])))}buildGenerator(n){const o=this.cachedGenerators;if(n>=o.length){let l=o[o.length-1];const c=this.field;for(let p=o.length;p<=n;p++){const g=l.multiply(new le(c,Int32Array.from([1,c.exp(p-1+c.getGeneratorBase())])));o.push(g),l=g}}return o[n]}encode(n,o){if(o===0)throw new w("No error correction bytes");const l=n.length-o;if(l<=0)throw new w("No data bytes provided");const c=this.buildGenerator(o),p=new Int32Array(l);N.arraycopy(n,0,p,0,l);let g=new le(this.field,p);g=g.multiplyByMonomial(o,1);const x=g.divide(c)[1].getCoefficients(),_=o-x.length;for(let O=0;O<_;O++)n[l+O]=0;N.arraycopy(x,0,n,l+_,x.length)}}class ur{constructor(){}static applyMaskPenaltyRule1(n){return ur.applyMaskPenaltyRule1Internal(n,!0)+ur.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let o=0;const l=n.getArray(),c=n.getWidth(),p=n.getHeight();for(let g=0;g<p-1;g++){const y=l[g];for(let x=0;x<c-1;x++){const _=y[x];_===y[x+1]&&_===l[g+1][x]&&_===l[g+1][x+1]&&o++}}return ur.N2*o}static applyMaskPenaltyRule3(n){let o=0;const l=n.getArray(),c=n.getWidth(),p=n.getHeight();for(let g=0;g<p;g++)for(let y=0;y<c;y++){const x=l[g];y+6<c&&x[y]===1&&x[y+1]===0&&x[y+2]===1&&x[y+3]===1&&x[y+4]===1&&x[y+5]===0&&x[y+6]===1&&(ur.isWhiteHorizontal(x,y-4,y)||ur.isWhiteHorizontal(x,y+7,y+11))&&o++,g+6<p&&l[g][y]===1&&l[g+1][y]===0&&l[g+2][y]===1&&l[g+3][y]===1&&l[g+4][y]===1&&l[g+5][y]===0&&l[g+6][y]===1&&(ur.isWhiteVertical(l,y,g-4,g)||ur.isWhiteVertical(l,y,g+7,g+11))&&o++}return o*ur.N3}static isWhiteHorizontal(n,o,l){o=Math.max(o,0),l=Math.min(l,n.length);for(let c=o;c<l;c++)if(n[c]===1)return!1;return!0}static isWhiteVertical(n,o,l,c){l=Math.max(l,0),c=Math.min(c,n.length);for(let p=l;p<c;p++)if(n[p][o]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let o=0;const l=n.getArray(),c=n.getWidth(),p=n.getHeight();for(let x=0;x<p;x++){const _=l[x];for(let O=0;O<c;O++)_[O]===1&&o++}const g=n.getHeight()*n.getWidth();return Math.floor(Math.abs(o*2-g)*10/g)*ur.N4}static getDataMaskBit(n,o,l){let c,p;switch(n){case 0:c=l+o&1;break;case 1:c=l&1;break;case 2:c=o%3;break;case 3:c=(l+o)%3;break;case 4:c=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:p=l*o,c=(p&1)+p%3;break;case 6:p=l*o,c=(p&1)+p%3&1;break;case 7:p=l*o,c=p%3+(l+o&1)&1;break;default:throw new w("Invalid mask pattern: "+n)}return c===0}static applyMaskPenaltyRule1Internal(n,o){let l=0;const c=o?n.getHeight():n.getWidth(),p=o?n.getWidth():n.getHeight(),g=n.getArray();for(let y=0;y<c;y++){let x=0,_=-1;for(let O=0;O<p;O++){const D=o?g[y][O]:g[O][y];D===_?x++:(x>=5&&(l+=ur.N1+(x-5)),x=1,_=D)}x>=5&&(l+=ur.N1+(x-5))}return l}}ur.N1=3,ur.N2=3,ur.N3=40,ur.N4=10;class $l{constructor(n,o){this.width=n,this.height=o;const l=new Array(o);for(let c=0;c!==o;c++)l[c]=new Uint8Array(n);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(n,o){return this.bytes[o][n]}getArray(){return this.bytes}setNumber(n,o,l){this.bytes[o][n]=l}setBoolean(n,o,l){this.bytes[o][n]=l?1:0}clear(n){for(const o of this.bytes)S.fill(o,n)}equals(n){if(!(n instanceof $l))return!1;const o=n;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,c=this.height;l<c;++l){const p=this.bytes[l],g=o.bytes[l];for(let y=0,x=this.width;y<x;++y)if(p[y]!==g[y])return!1}return!0}toString(){const n=new ue;for(let o=0,l=this.height;o<l;++o){const c=this.bytes[o];for(let p=0,g=this.width;p<g;++p)switch(c[p]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class Bs{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new ue;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<Bs.NUM_MASK_PATTERNS}}Bs.NUM_MASK_PATTERNS=8;class Ft extends d{}Ft.kind="WriterException";class ft{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,o,l,c,p){ft.clearMatrix(p),ft.embedBasicPatterns(l,p),ft.embedTypeInfo(o,c,p),ft.maybeEmbedVersionInfo(l,p),ft.embedDataBits(n,c,p)}static embedBasicPatterns(n,o){ft.embedPositionDetectionPatternsAndSeparators(o),ft.embedDarkDotAtLeftBottomCorner(o),ft.maybeEmbedPositionAdjustmentPatterns(n,o),ft.embedTimingPatterns(o)}static embedTypeInfo(n,o,l){const c=new B;ft.makeTypeInfoBits(n,o,c);for(let p=0,g=c.getSize();p<g;++p){const y=c.get(c.getSize()-1-p),x=ft.TYPE_INFO_COORDINATES[p],_=x[0],O=x[1];if(l.setBoolean(_,O,y),p<8){const D=l.getWidth()-p-1;l.setBoolean(D,8,y)}else{const F=l.getHeight()-7+(p-8);l.setBoolean(8,F,y)}}}static maybeEmbedVersionInfo(n,o){if(n.getVersionNumber()<7)return;const l=new B;ft.makeVersionInfoBits(n,l);let c=6*3-1;for(let p=0;p<6;++p)for(let g=0;g<3;++g){const y=l.get(c);c--,o.setBoolean(p,o.getHeight()-11+g,y),o.setBoolean(o.getHeight()-11+g,p,y)}}static embedDataBits(n,o,l){let c=0,p=-1,g=l.getWidth()-1,y=l.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);y>=0&&y<l.getHeight();){for(let x=0;x<2;++x){const _=g-x;if(!ft.isEmpty(l.get(_,y)))continue;let O;c<n.getSize()?(O=n.get(c),++c):O=!1,o!==255&&ur.getDataMaskBit(o,_,y)&&(O=!O),l.setBoolean(_,y,O)}y+=p}p=-p,y+=p,g-=2}if(c!==n.getSize())throw new Ft("Not all bits consumed: "+c+"/"+n.getSize())}static findMSBSet(n){return 32-I.numberOfLeadingZeros(n)}static calculateBCHCode(n,o){if(o===0)throw new w("0 polynomial");const l=ft.findMSBSet(o);for(n<<=l-1;ft.findMSBSet(n)>=l;)n^=o<<ft.findMSBSet(n)-l;return n}static makeTypeInfoBits(n,o,l){if(!Bs.isValidMaskPattern(o))throw new Ft("Invalid mask pattern");const c=n.getBits()<<3|o;l.appendBits(c,5);const p=ft.calculateBCHCode(c,ft.TYPE_INFO_POLY);l.appendBits(p,10);const g=new B;if(g.appendBits(ft.TYPE_INFO_MASK_PATTERN,15),l.xor(g),l.getSize()!==15)throw new Ft("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(n,o){o.appendBits(n.getVersionNumber(),6);const l=ft.calculateBCHCode(n.getVersionNumber(),ft.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new Ft("should not happen but we got: "+o.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let o=8;o<n.getWidth()-8;++o){const l=(o+1)%2;ft.isEmpty(n.get(o,6))&&n.setNumber(o,6,l),ft.isEmpty(n.get(6,o))&&n.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new Ft;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,o,l){for(let c=0;c<8;++c){if(!ft.isEmpty(l.get(n+c,o)))throw new Ft;l.setNumber(n+c,o,0)}}static embedVerticalSeparationPattern(n,o,l){for(let c=0;c<7;++c){if(!ft.isEmpty(l.get(n,o+c)))throw new Ft;l.setNumber(n,o+c,0)}}static embedPositionAdjustmentPattern(n,o,l){for(let c=0;c<5;++c){const p=ft.POSITION_ADJUSTMENT_PATTERN[c];for(let g=0;g<5;++g)l.setNumber(n+g,o+c,p[g])}}static embedPositionDetectionPattern(n,o,l){for(let c=0;c<7;++c){const p=ft.POSITION_DETECTION_PATTERN[c];for(let g=0;g<7;++g)l.setNumber(n+g,o+c,p[g])}}static embedPositionDetectionPatternsAndSeparators(n){const o=ft.POSITION_DETECTION_PATTERN[0].length;ft.embedPositionDetectionPattern(0,0,n),ft.embedPositionDetectionPattern(n.getWidth()-o,0,n),ft.embedPositionDetectionPattern(0,n.getWidth()-o,n);const l=8;ft.embedHorizontalSeparationPattern(0,l-1,n),ft.embedHorizontalSeparationPattern(n.getWidth()-l,l-1,n),ft.embedHorizontalSeparationPattern(0,n.getWidth()-l,n);const c=7;ft.embedVerticalSeparationPattern(c,0,n),ft.embedVerticalSeparationPattern(n.getHeight()-c-1,0,n),ft.embedVerticalSeparationPattern(c,n.getHeight()-c,n)}static maybeEmbedPositionAdjustmentPatterns(n,o){if(n.getVersionNumber()<2)return;const l=n.getVersionNumber()-1,c=ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let p=0,g=c.length;p!==g;p++){const y=c[p];if(y>=0)for(let x=0;x!==g;x++){const _=c[x];_>=0&&ft.isEmpty(o.get(_,y))&&ft.embedPositionAdjustmentPattern(_-2,y-2,o)}}}}ft.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ft.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ft.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ft.VERSION_INFO_POLY=7973,ft.TYPE_INFO_POLY=1335,ft.TYPE_INFO_MASK_PATTERN=21522;class zv{constructor(n,o){this.dataBytes=n,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class $t{constructor(){}static calculateMaskPenalty(n){return ur.applyMaskPenaltyRule1(n)+ur.applyMaskPenaltyRule2(n)+ur.applyMaskPenaltyRule3(n)+ur.applyMaskPenaltyRule4(n)}static encode(n,o,l=null){let c=$t.DEFAULT_BYTE_MODE_ENCODING;const p=l!==null&&l.get(br.CHARACTER_SET)!==void 0;p&&(c=l.get(br.CHARACTER_SET).toString());const g=this.chooseMode(n,c),y=new B;if(g===ut.BYTE&&(p||$t.DEFAULT_BYTE_MODE_ENCODING!==c)){const Ke=q.getCharacterSetECIByName(c);Ke!==void 0&&this.appendECI(Ke,y)}this.appendModeInfo(g,y);const x=new B;this.appendBytes(n,g,x,c);let _;if(l!==null&&l.get(br.QR_VERSION)!==void 0){const Ke=Number.parseInt(l.get(br.QR_VERSION).toString(),10);_=lt.getVersionForNumber(Ke);const Ge=this.calculateBitsNeeded(g,y,x,_);if(!this.willFit(Ge,_,o))throw new Ft("Data too big for requested version")}else _=this.recommendVersion(o,g,y,x);const O=new B;O.appendBitArray(y);const D=g===ut.BYTE?x.getSizeInBytes():n.length;this.appendLengthInfo(D,_,g,O),O.appendBitArray(x);const F=_.getECBlocksForLevel(o),Y=_.getTotalCodewords()-F.getTotalECCodewords();this.terminateBits(Y,O);const se=this.interleaveWithECBytes(O,_.getTotalCodewords(),Y,F.getNumBlocks()),ae=new Bs;ae.setECLevel(o),ae.setMode(g),ae.setVersion(_);const we=_.getDimensionForVersion(),Te=new $l(we,we),Qe=this.chooseMaskPattern(se,o,_,Te);return ae.setMaskPattern(Qe),ft.buildMatrix(se,o,_,Qe,Te),ae.setMatrix(Te),ae}static recommendVersion(n,o,l,c){const p=this.calculateBitsNeeded(o,l,c,lt.getVersionForNumber(1)),g=this.chooseVersion(p,n),y=this.calculateBitsNeeded(o,l,c,g);return this.chooseVersion(y,n)}static calculateBitsNeeded(n,o,l,c){return o.getSize()+n.getCharacterCountBits(c)+l.getSize()}static getAlphanumericCode(n){return n<$t.ALPHANUMERIC_TABLE.length?$t.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,o=null){if(q.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(n))return ut.KANJI;let l=!1,c=!1;for(let p=0,g=n.length;p<g;++p){const y=n.charAt(p);if($t.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)c=!0;else return ut.BYTE}return c?ut.ALPHANUMERIC:l?ut.NUMERIC:ut.BYTE}static isOnlyDoubleByteKanji(n){let o;try{o=Ae.encode(n,q.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let c=0;c<l;c+=2){const p=o[c]&255;if((p<129||p>159)&&(p<224||p>235))return!1}return!0}static chooseMaskPattern(n,o,l,c){let p=Number.MAX_SAFE_INTEGER,g=-1;for(let y=0;y<Bs.NUM_MASK_PATTERNS;y++){ft.buildMatrix(n,o,l,y,c);let x=this.calculateMaskPenalty(c);x<p&&(p=x,g=y)}return g}static chooseVersion(n,o){for(let l=1;l<=40;l++){const c=lt.getVersionForNumber(l);if($t.willFit(n,c,o))return c}throw new Ft("Data too big")}static willFit(n,o,l){const c=o.getTotalCodewords(),g=o.getECBlocksForLevel(l).getTotalECCodewords(),y=c-g,x=(n+7)/8;return y>=x}static terminateBits(n,o){const l=n*8;if(o.getSize()>l)throw new Ft("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let g=0;g<4&&o.getSize()<l;++g)o.appendBit(!1);const c=o.getSize()&7;if(c>0)for(let g=c;g<8;g++)o.appendBit(!1);const p=n-o.getSizeInBytes();for(let g=0;g<p;++g)o.appendBits(g&1?17:236,8);if(o.getSize()!==l)throw new Ft("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,o,l,c,p,g){if(c>=l)throw new Ft("Block ID too large");const y=n%l,x=l-y,_=Math.floor(n/l),O=_+1,D=Math.floor(o/l),F=D+1,Y=_-D,se=O-F;if(Y!==se)throw new Ft("EC bytes mismatch");if(l!==x+y)throw new Ft("RS blocks mismatch");if(n!==(D+Y)*x+(F+se)*y)throw new Ft("Total bytes mismatch");c<x?(p[0]=D,g[0]=Y):(p[0]=F,g[0]=se)}static interleaveWithECBytes(n,o,l,c){if(n.getSizeInBytes()!==l)throw new Ft("Number of bits and data bytes does not match");let p=0,g=0,y=0;const x=new Array;for(let O=0;O<c;++O){const D=new Int32Array(1),F=new Int32Array(1);$t.getNumDataBytesAndNumECBytesForBlockID(o,l,c,O,D,F);const Y=D[0],se=new Uint8Array(Y);n.toBytes(8*p,se,0,Y);const ae=$t.generateECBytes(se,F[0]);x.push(new zv(se,ae)),g=Math.max(g,Y),y=Math.max(y,ae.length),p+=D[0]}if(l!==p)throw new Ft("Data bytes does not match offset");const _=new B;for(let O=0;O<g;++O)for(const D of x){const F=D.getDataBytes();O<F.length&&_.appendBits(F[O],8)}for(let O=0;O<y;++O)for(const D of x){const F=D.getErrorCorrectionBytes();O<F.length&&_.appendBits(F[O],8)}if(o!==_.getSizeInBytes())throw new Ft("Interleaving error: "+o+" and "+_.getSizeInBytes()+" differ.");return _}static generateECBytes(n,o){const l=n.length,c=new Int32Array(l+o);for(let g=0;g<l;g++)c[g]=n[g]&255;new uh(Se.QR_CODE_FIELD_256).encode(c,o);const p=new Uint8Array(o);for(let g=0;g<o;g++)p[g]=c[l+g];return p}static appendModeInfo(n,o){o.appendBits(n.getBits(),4)}static appendLengthInfo(n,o,l,c){const p=l.getCharacterCountBits(o);if(n>=1<<p)throw new Ft(n+" is bigger than "+((1<<p)-1));c.appendBits(n,p)}static appendBytes(n,o,l,c){switch(o){case ut.NUMERIC:$t.appendNumericBytes(n,l);break;case ut.ALPHANUMERIC:$t.appendAlphanumericBytes(n,l);break;case ut.BYTE:$t.append8BitBytes(n,l,c);break;case ut.KANJI:$t.appendKanjiBytes(n,l);break;default:throw new Ft("Invalid mode: "+o)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const o=$t.getDigit(n);return o>=0&&o<=9}static appendNumericBytes(n,o){const l=n.length;let c=0;for(;c<l;){const p=$t.getDigit(n.charAt(c));if(c+2<l){const g=$t.getDigit(n.charAt(c+1)),y=$t.getDigit(n.charAt(c+2));o.appendBits(p*100+g*10+y,10),c+=3}else if(c+1<l){const g=$t.getDigit(n.charAt(c+1));o.appendBits(p*10+g,7),c+=2}else o.appendBits(p,4),c++}}static appendAlphanumericBytes(n,o){const l=n.length;let c=0;for(;c<l;){const p=$t.getAlphanumericCode(n.charCodeAt(c));if(p===-1)throw new Ft;if(c+1<l){const g=$t.getAlphanumericCode(n.charCodeAt(c+1));if(g===-1)throw new Ft;o.appendBits(p*45+g,11),c+=2}else o.appendBits(p,6),c++}}static append8BitBytes(n,o,l){let c;try{c=Ae.encode(n,l)}catch(p){throw new Ft(p)}for(let p=0,g=c.length;p!==g;p++){const y=c[p];o.appendBits(y,8)}}static appendKanjiBytes(n,o){let l;try{l=Ae.encode(n,q.SJIS)}catch(p){throw new Ft(p)}const c=l.length;for(let p=0;p<c;p+=2){const g=l[p]&255,y=l[p+1]&255,x=g<<8&4294967295|y;let _=-1;if(x>=33088&&x<=40956?_=x-33088:x>=57408&&x<=60351&&(_=x-49472),_===-1)throw new Ft("Invalid byte sequence");const O=(_>>8)*192+(_&255);o.appendBits(O,13)}}static appendECI(n,o){o.appendBits(ut.ECI.getBits(),4),o.appendBits(n.getValue(),8)}}$t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),$t.DEFAULT_BYTE_MODE_ENCODING=q.UTF8.getName();class js{write(n,o,l,c=null){if(n.length===0)throw new w("Found empty contents");if(o<0||l<0)throw new w("Requested dimensions are too small: "+o+"x"+l);let p=Wt.L,g=js.QUIET_ZONE_SIZE;c!==null&&(c.get(br.ERROR_CORRECTION)!==void 0&&(p=Wt.fromString(c.get(br.ERROR_CORRECTION).toString())),c.get(br.MARGIN)!==void 0&&(g=Number.parseInt(c.get(br.MARGIN).toString(),10)));const y=$t.encode(n,p,c);return this.renderResult(y,o,l,g)}writeToDom(n,o,l,c,p=null){typeof n=="string"&&(n=document.querySelector(n));const g=this.write(o,l,c,p);n&&n.appendChild(g)}renderResult(n,o,l,c){const p=n.getMatrix();if(p===null)throw new J;const g=p.getWidth(),y=p.getHeight(),x=g+c*2,_=y+c*2,O=Math.max(o,x),D=Math.max(l,_),F=Math.min(Math.floor(O/x),Math.floor(D/_)),Y=Math.floor((O-g*F)/2),se=Math.floor((D-y*F)/2),ae=this.createSVGElement(O,D);for(let we=0,Te=se;we<y;we++,Te+=F)for(let Qe=0,Ke=Y;Qe<g;Qe++,Ke+=F)if(p.get(Qe,we)===1){const Ge=this.createSvgRectElement(Ke,Te,F,F);ae.appendChild(Ge)}return ae}createSVGElement(n,o){const l=document.createElementNS(js.SVG_NS,"svg");return l.setAttributeNS(null,"height",n.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(n,o,l,c){const p=document.createElementNS(js.SVG_NS,"rect");return p.setAttributeNS(null,"x",n.toString()),p.setAttributeNS(null,"y",o.toString()),p.setAttributeNS(null,"height",l.toString()),p.setAttributeNS(null,"width",c.toString()),p.setAttributeNS(null,"fill","#000000"),p}}js.QUIET_ZONE_SIZE=4,js.SVG_NS="http://www.w3.org/2000/svg";class Ao{encode(n,o,l,c,p){if(n.length===0)throw new w("Found empty contents");if(o!==Pe.QR_CODE)throw new w("Can only encode QR_CODE, but got "+o);if(l<0||c<0)throw new w(`Requested dimensions are too small: ${l}x${c}`);let g=Wt.L,y=Ao.QUIET_ZONE_SIZE;p!==null&&(p.get(br.ERROR_CORRECTION)!==void 0&&(g=Wt.fromString(p.get(br.ERROR_CORRECTION).toString())),p.get(br.MARGIN)!==void 0&&(y=Number.parseInt(p.get(br.MARGIN).toString(),10)));const x=$t.encode(n,g,p);return Ao.renderResult(x,l,c,y)}static renderResult(n,o,l,c){const p=n.getMatrix();if(p===null)throw new J;const g=p.getWidth(),y=p.getHeight(),x=g+c*2,_=y+c*2,O=Math.max(o,x),D=Math.max(l,_),F=Math.min(Math.floor(O/x),Math.floor(D/_)),Y=Math.floor((O-g*F)/2),se=Math.floor((D-y*F)/2),ae=new xe(O,D);for(let we=0,Te=se;we<y;we++,Te+=F)for(let Qe=0,Ke=Y;Qe<g;Qe++,Ke+=F)p.get(Qe,we)===1&&ae.setRegion(Ke,Te,F,F);return ae}}Ao.QUIET_ZONE_SIZE=4;class Wv{encode(n,o,l,c,p){let g;switch(o){case Pe.QR_CODE:g=new Ao;break;default:throw new w("No encoder available for format "+o)}return g.encode(n,o,l,c,p)}}class ri extends he{constructor(n,o,l,c,p,g,y,x){if(super(g,y),this.yuvData=n,this.dataWidth=o,this.dataHeight=l,this.left=c,this.top=p,c+g>o||p+y>l)throw new w("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(g,y)}getRow(n,o){if(n<0||n>=this.getHeight())throw new w("Requested row is outside the image: "+n);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const c=(n+this.top)*this.dataWidth+this.left;return N.arraycopy(this.yuvData,c,o,0,l),o}getMatrix(){const n=this.getWidth(),o=this.getHeight();if(n===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=n*o,c=new Uint8ClampedArray(l);let p=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return N.arraycopy(this.yuvData,p,c,0,l),c;for(let g=0;g<o;g++){const y=g*n;N.arraycopy(this.yuvData,p,c,y,n),p+=this.dataWidth}return c}isCropSupported(){return!0}crop(n,o,l,c){return new ri(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+o,l,c,!1)}renderThumbnail(){const n=this.getWidth()/ri.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/ri.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(n*o),c=this.yuvData;let p=this.top*this.dataWidth+this.left;for(let g=0;g<o;g++){const y=g*n;for(let x=0;x<n;x++){const _=c[p+x*ri.THUMBNAIL_SCALE_FACTOR]&255;l[y+x]=4278190080|_*65793}p+=this.dataWidth*ri.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/ri.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ri.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,o){const l=this.yuvData;for(let c=0,p=this.top*this.dataWidth+this.left;c<o;c++,p+=this.dataWidth){const g=p+n/2;for(let y=p,x=p+n-1;y<g;y++,x--){const _=l[y];l[y]=l[x],l[x]=_}}}invert(){return new Me(this)}}ri.THUMBNAIL_SCALE_FACTOR=2;class ch extends he{constructor(n,o,l,c,p,g,y){if(super(o,l),this.dataWidth=c,this.dataHeight=p,this.left=g,this.top=y,n.BYTES_PER_ELEMENT===4){const x=o*l,_=new Uint8ClampedArray(x);for(let O=0;O<x;O++){const D=n[O],F=D>>16&255,Y=D>>7&510,se=D&255;_[O]=(F+Y+se)/4&255}this.luminances=_}else this.luminances=n;if(c===void 0&&(this.dataWidth=o),p===void 0&&(this.dataHeight=l),g===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new w("Crop rectangle does not fit within image data.")}getRow(n,o){if(n<0||n>=this.getHeight())throw new w("Requested row is outside the image: "+n);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const c=(n+this.top)*this.dataWidth+this.left;return N.arraycopy(this.luminances,c,o,0,l),o}getMatrix(){const n=this.getWidth(),o=this.getHeight();if(n===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=n*o,c=new Uint8ClampedArray(l);let p=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return N.arraycopy(this.luminances,p,c,0,l),c;for(let g=0;g<o;g++){const y=g*n;N.arraycopy(this.luminances,p,c,y,n),p+=this.dataWidth}return c}isCropSupported(){return!0}crop(n,o,l,c){return new ch(this.luminances,l,c,this.dataWidth,this.dataHeight,this.left+n,this.top+o)}invert(){return new Me(this)}}class sp extends q{static forName(n){return this.getCharacterSetECIByName(n)}}class hh{}hh.ISO_8859_1=q.ISO8859_1;class op{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class ap{static singletonList(n){return[n]}static min(n,o){return n.sort(o)[0]}}class Hv{constructor(n){this.previous=n}getPrevious(){return this.previous}}class Co extends Hv{constructor(n,o,l){super(n),this.value=o,this.bitCount=l}appendTo(n,o){n.appendBits(this.value,this.bitCount)}add(n,o){return new Co(this,n,o)}addBinaryShift(n,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Co(this,n,o)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+I.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class fh extends Co{constructor(n,o,l){super(n,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(n,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):l===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(n,o){return new fh(this,n,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Vv(M,n,o){return new fh(M,n,o)}function Ta(M,n,o){return new Co(M,n,o)}const $v=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Qi=0,Gl=1,Mn=2,lp=3,ni=4,Gv=new Co(null,0,0),dh=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Yv(M){for(let n of M)S.fill(n,-1);return M[Qi][ni]=0,M[Gl][ni]=0,M[Gl][Qi]=28,M[lp][ni]=0,M[Mn][ni]=0,M[Mn][Qi]=15,M}const up=Yv(S.createInt32Array(6,6));class ii{constructor(n,o,l,c){this.token=n,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,o){let l=this.bitCount,c=this.token;if(n!==this.mode){let g=dh[this.mode][n];c=Ta(c,g&65535,g>>16),l+=g>>16}let p=n===Mn?4:5;return c=Ta(c,o,p),new ii(c,n,0,l+p)}shiftAndAppend(n,o){let l=this.token,c=this.mode===Mn?4:5;return l=Ta(l,up[this.mode][n],c),l=Ta(l,o,5),new ii(l,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(n){let o=this.token,l=this.mode,c=this.bitCount;if(this.mode===ni||this.mode===Mn){let y=dh[l][Qi];o=Ta(o,y&65535,y>>16),c+=y>>16,l=Qi}let p=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new ii(o,l,this.binaryShiftByteCount+1,c+p);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(n+1)),g}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=Vv(o,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new ii(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let o=this.bitCount+(dh[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?o+=ii.calculateBinaryShiftCost(n)-ii.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(o+=10),o<=n.bitCount}toBitArray(n){let o=[];for(let c=this.endBinaryShift(n.length).token;c!==null;c=c.getPrevious())o.unshift(c);let l=new B;for(const c of o)c.appendTo(l,n);return l}toString(){return H.format("%s bits=%d bytes=%d",$v[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}ii.INITIAL_STATE=new ii(Gv,Qi,0,0);function Xv(M){const n=H.getCharCode(" "),o=H.getCharCode("."),l=H.getCharCode(",");M[Qi][n]=1;const c=H.getCharCode("Z"),p=H.getCharCode("A");for(let F=p;F<=c;F++)M[Qi][F]=F-p+2;M[Gl][n]=1;const g=H.getCharCode("z"),y=H.getCharCode("a");for(let F=y;F<=g;F++)M[Gl][F]=F-y+2;M[Mn][n]=1;const x=H.getCharCode("9"),_=H.getCharCode("0");for(let F=_;F<=x;F++)M[Mn][F]=F-_+2;M[Mn][l]=12,M[Mn][o]=13;const O=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let F=0;F<O.length;F++)M[lp][H.getCharCode(O[F])]=F;const D=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let F=0;F<D.length;F++)H.getCharCode(D[F])>0&&(M[ni][H.getCharCode(D[F])]=F);return M}const ph=Xv(S.createInt32Array(5,256));class Na{constructor(n){this.text=n}encode(){const n=H.getCharCode(" "),o=H.getCharCode(`
`);let l=ap.singletonList(ii.INITIAL_STATE);for(let p=0;p<this.text.length;p++){let g,y=p+1<this.text.length?this.text[p+1]:0;switch(this.text[p]){case H.getCharCode("\r"):g=y===o?2:0;break;case H.getCharCode("."):g=y===n?3:0;break;case H.getCharCode(","):g=y===n?4:0;break;case H.getCharCode(":"):g=y===n?5:0;break;default:g=0}g>0?(l=Na.updateStateListForPair(l,p,g),p++):l=this.updateStateListForChar(l,p)}return ap.min(l,(p,g)=>p.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,o){const l=[];for(let c of n)this.updateStateForChar(c,o,l);return Na.simplifyStates(l)}updateStateForChar(n,o,l){let c=this.text[o]&255,p=ph[n.getMode()][c]>0,g=null;for(let y=0;y<=ni;y++){let x=ph[y][c];if(x>0){if(g==null&&(g=n.endBinaryShift(o)),!p||y===n.getMode()||y===Mn){const _=g.latchAndAppend(y,x);l.push(_)}if(!p&&up[n.getMode()][y]>=0){const _=g.shiftAndAppend(y,x);l.push(_)}}}if(n.getBinaryShiftByteCount()>0||ph[n.getMode()][c]===0){let y=n.addBinaryShiftChar(o);l.push(y)}}static updateStateListForPair(n,o,l){const c=[];for(let p of n)this.updateStateForPair(p,o,l,c);return this.simplifyStates(c)}static updateStateForPair(n,o,l,c){let p=n.endBinaryShift(o);if(c.push(p.latchAndAppend(ni,l)),n.getMode()!==ni&&c.push(p.shiftAndAppend(ni,l)),l===3||l===4){let g=p.latchAndAppend(Mn,16-l).latchAndAppend(Mn,1);c.push(g)}if(n.getBinaryShiftByteCount()>0){let g=n.addBinaryShiftChar(o).addBinaryShiftChar(o+1);c.push(g)}}static simplifyStates(n){let o=[];for(const l of n){let c=!0;for(const p of o){if(p.isBetterThanOrEqualTo(l)){c=!1;break}l.isBetterThanOrEqualTo(p)&&(o=o.filter(g=>g!==p))}c&&o.push(l)}return o}}class Et{constructor(){}static encodeBytes(n){return Et.encode(n,Et.DEFAULT_EC_PERCENT,Et.DEFAULT_AZTEC_LAYERS)}static encode(n,o,l){let c=new Na(n).encode(),p=I.truncDivision(c.getSize()*o,100)+11,g=c.getSize()+p,y,x,_,O,D;if(l!==Et.DEFAULT_AZTEC_LAYERS){if(y=l<0,x=Math.abs(l),x>(y?Et.MAX_NB_BITS_COMPACT:Et.MAX_NB_BITS))throw new w(H.format("Illegal value %s for layers",l));_=Et.totalBitsInLayer(x,y),O=Et.WORD_SIZE[x];let Ge=_-_%O;if(D=Et.stuffBits(c,O),D.getSize()+p>Ge)throw new w("Data to large for user specified layer");if(y&&D.getSize()>O*64)throw new w("Data to large for user specified layer")}else{O=0,D=null;for(let Ge=0;;Ge++){if(Ge>Et.MAX_NB_BITS)throw new w("Data too large for an Aztec code");if(y=Ge<=3,x=y?Ge+1:Ge,_=Et.totalBitsInLayer(x,y),g>_)continue;(D==null||O!==Et.WORD_SIZE[x])&&(O=Et.WORD_SIZE[x],D=Et.stuffBits(c,O));let vt=_-_%O;if(!(y&&D.getSize()>O*64)&&D.getSize()+p<=vt)break}}let F=Et.generateCheckWords(D,_,O),Y=D.getSize()/O,se=Et.generateModeMessage(y,x,Y),ae=(y?11:14)+x*4,we=new Int32Array(ae),Te;if(y){Te=ae;for(let Ge=0;Ge<we.length;Ge++)we[Ge]=Ge}else{Te=ae+1+2*I.truncDivision(I.truncDivision(ae,2)-1,15);let Ge=I.truncDivision(ae,2),vt=I.truncDivision(Te,2);for(let gt=0;gt<Ge;gt++){let un=gt+I.truncDivision(gt,15);we[Ge-gt-1]=vt-un-1,we[Ge+gt]=vt+un+1}}let Qe=new xe(Te);for(let Ge=0,vt=0;Ge<x;Ge++){let gt=(x-Ge)*4+(y?9:12);for(let un=0;un<gt;un++){let Wn=un*2;for(let cn=0;cn<2;cn++)F.get(vt+Wn+cn)&&Qe.set(we[Ge*2+cn],we[Ge*2+un]),F.get(vt+gt*2+Wn+cn)&&Qe.set(we[Ge*2+un],we[ae-1-Ge*2-cn]),F.get(vt+gt*4+Wn+cn)&&Qe.set(we[ae-1-Ge*2-cn],we[ae-1-Ge*2-un]),F.get(vt+gt*6+Wn+cn)&&Qe.set(we[ae-1-Ge*2-un],we[Ge*2+cn])}vt+=gt*8}if(Et.drawModeMessage(Qe,y,Te,se),y)Et.drawBullsEye(Qe,I.truncDivision(Te,2),5);else{Et.drawBullsEye(Qe,I.truncDivision(Te,2),7);for(let Ge=0,vt=0;Ge<I.truncDivision(ae,2)-1;Ge+=15,vt+=16)for(let gt=I.truncDivision(Te,2)&1;gt<Te;gt+=2)Qe.set(I.truncDivision(Te,2)-vt,gt),Qe.set(I.truncDivision(Te,2)+vt,gt),Qe.set(gt,I.truncDivision(Te,2)-vt),Qe.set(gt,I.truncDivision(Te,2)+vt)}let Ke=new op;return Ke.setCompact(y),Ke.setSize(Te),Ke.setLayers(x),Ke.setCodeWords(Y),Ke.setMatrix(Qe),Ke}static drawBullsEye(n,o,l){for(let c=0;c<l;c+=2)for(let p=o-c;p<=o+c;p++)n.set(p,o-c),n.set(p,o+c),n.set(o-c,p),n.set(o+c,p);n.set(o-l,o-l),n.set(o-l+1,o-l),n.set(o-l,o-l+1),n.set(o+l,o-l),n.set(o+l,o-l+1),n.set(o+l,o+l-1)}static generateModeMessage(n,o,l){let c=new B;return n?(c.appendBits(o-1,2),c.appendBits(l-1,6),c=Et.generateCheckWords(c,28,4)):(c.appendBits(o-1,5),c.appendBits(l-1,11),c=Et.generateCheckWords(c,40,4)),c}static drawModeMessage(n,o,l,c){let p=I.truncDivision(l,2);if(o)for(let g=0;g<7;g++){let y=p-3+g;c.get(g)&&n.set(y,p-5),c.get(g+7)&&n.set(p+5,y),c.get(20-g)&&n.set(y,p+5),c.get(27-g)&&n.set(p-5,y)}else for(let g=0;g<10;g++){let y=p-5+g+I.truncDivision(g,5);c.get(g)&&n.set(y,p-7),c.get(g+10)&&n.set(p+7,y),c.get(29-g)&&n.set(y,p+7),c.get(39-g)&&n.set(p-7,y)}}static generateCheckWords(n,o,l){let c=n.getSize()/l,p=new uh(Et.getGF(l)),g=I.truncDivision(o,l),y=Et.bitsToWords(n,l,g);p.encode(y,g-c);let x=o%l,_=new B;_.appendBits(0,x);for(const O of Array.from(y))_.appendBits(O,l);return _}static bitsToWords(n,o,l){let c=new Int32Array(l),p,g;for(p=0,g=n.getSize()/o;p<g;p++){let y=0;for(let x=0;x<o;x++)y|=n.get(p*o+x)?1<<o-x-1:0;c[p]=y}return c}static getGF(n){switch(n){case 4:return Se.AZTEC_PARAM;case 6:return Se.AZTEC_DATA_6;case 8:return Se.AZTEC_DATA_8;case 10:return Se.AZTEC_DATA_10;case 12:return Se.AZTEC_DATA_12;default:throw new w("Unsupported word size "+n)}}static stuffBits(n,o){let l=new B,c=n.getSize(),p=(1<<o)-2;for(let g=0;g<c;g+=o){let y=0;for(let x=0;x<o;x++)(g+x>=c||n.get(g+x))&&(y|=1<<o-1-x);(y&p)===p?(l.appendBits(y&p,o),g--):y&p?l.appendBits(y,o):(l.appendBits(y|1,o),g--)}return l}static totalBitsInLayer(n,o){return((o?88:112)+16*n)*n}}Et.DEFAULT_EC_PERCENT=33,Et.DEFAULT_AZTEC_LAYERS=0,Et.MAX_NB_BITS=32,Et.MAX_NB_BITS_COMPACT=4,Et.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Yl{encode(n,o,l,c){return this.encodeWithHints(n,o,l,c,null)}encodeWithHints(n,o,l,c,p){let g=hh.ISO_8859_1,y=Et.DEFAULT_EC_PERCENT,x=Et.DEFAULT_AZTEC_LAYERS;return p!=null&&(p.has(br.CHARACTER_SET)&&(g=sp.forName(p.get(br.CHARACTER_SET).toString())),p.has(br.ERROR_CORRECTION)&&(y=I.parseInt(p.get(br.ERROR_CORRECTION).toString())),p.has(br.AZTEC_LAYERS)&&(x=I.parseInt(p.get(br.AZTEC_LAYERS).toString()))),Yl.encodeLayers(n,o,l,c,g,y,x)}static encodeLayers(n,o,l,c,p,g,y){if(o!==Pe.AZTEC)throw new w("Can only encode AZTEC, but got "+o);let x=Et.encode(H.getBytes(n,p),g,y);return Yl.renderResult(x,l,c)}static renderResult(n,o,l){let c=n.getMatrix();if(c==null)throw new J;let p=c.getWidth(),g=c.getHeight(),y=Math.max(o,p),x=Math.max(l,g),_=Math.min(y/p,x/g),O=(y-p*_)/2,D=(x-g*_)/2,F=new xe(y,x);for(let Y=0,se=D;Y<g;Y++,se+=_)for(let ae=0,we=O;ae<p;ae++,we+=_)c.get(ae,Y)&&F.setRegion(we,se,_,_);return F}}r.AbstractExpandedDecoder=_o,r.ArgumentException=m,r.ArithmeticException=fe,r.AztecCode=op,r.AztecCodeReader=re,r.AztecCodeWriter=Yl,r.AztecDecoder=Ee,r.AztecDetector=K,r.AztecDetectorResult=Ye,r.AztecEncoder=Et,r.AztecHighLevelEncoder=Na,r.AztecPoint=j,r.BarcodeFormat=Pe,r.Binarizer=C,r.BinaryBitmap=v,r.BitArray=B,r.BitMatrix=xe,r.BitSource=nh,r.BrowserAztecCodeReader=me,r.BrowserBarcodeReader=Av,r.BrowserCodeReader=Oe,r.BrowserDatamatrixCodeReader=Iv,r.BrowserMultiFormatReader=jv,r.BrowserPDF417Reader=Fv,r.BrowserQRCodeReader=Uv,r.BrowserQRCodeSvgWriter=js,r.CharacterSetECI=q,r.ChecksumException=b,r.Code128Reader=ye,r.Code39Reader=Je,r.DataMatrixDecodedBitStreamParser=Gi,r.DataMatrixReader=Yi,r.DecodeHintType=L,r.DecoderResult=Ne,r.DefaultGridSampler=A,r.DetectorResult=Le,r.EAN13Reader=zt,r.EncodeHintType=br,r.Exception=d,r.FormatException=P,r.GenericGF=Se,r.GenericGFPoly=le,r.GlobalHistogramBinarizer=Be,r.GridSampler=ct,r.GridSamplerInstance=T,r.HTMLCanvasElementLuminanceSource=ne,r.HybridBinarizer=_e,r.ITFReader=tt,r.IllegalArgumentException=w,r.IllegalStateException=J,r.InvertedLuminanceSource=Me,r.LuminanceSource=he,r.MathUtils=ve,r.MultiFormatOneDReader=Eo,r.MultiFormatReader=ip,r.MultiFormatWriter=Wv,r.NotFoundException=z,r.OneDReader=Ve,r.PDF417DecodedBitStreamParser=Ie,r.PDF417DecoderErrorCorrection=Z1,r.PDF417Reader=Pr,r.PDF417ResultMetadata=ep,r.PerspectiveTransform=E,r.PlanarYUVLuminanceSource=ri,r.QRCodeByteMatrix=$l,r.QRCodeDataMask=kn,r.QRCodeDecodedBitStreamParser=rr,r.QRCodeDecoderErrorCorrectionLevel=Wt,r.QRCodeDecoderFormatInformation=$r,r.QRCodeEncoder=$t,r.QRCodeEncoderQRCode=Bs,r.QRCodeMaskUtil=ur,r.QRCodeMatrixUtil=ft,r.QRCodeMode=ut,r.QRCodeReader=Xi,r.QRCodeVersion=lt,r.QRCodeWriter=Ao,r.RGBLuminanceSource=ch,r.RSS14Reader=lr,r.RSSExpandedReader=He,r.ReaderException=Vl,r.ReedSolomonDecoder=ie,r.ReedSolomonEncoder=uh,r.ReedSolomonException=ke,r.Result=Fe,r.ResultMetadataType=ee,r.ResultPoint=X,r.StringUtils=H,r.UnsupportedOperationException=pe,r.VideoInputDevice=Re,r.WhiteRectangleDetector=Ce,r.WriterException=Ft,r.ZXingArrays=S,r.ZXingCharset=sp,r.ZXingInteger=I,r.ZXingStandardCharsets=hh,r.ZXingStringBuilder=ue,r.ZXingStringEncoding=Ae,r.ZXingSystem=N,r.createAbstractExpandedDecoder=Q1,Object.defineProperty(r,"__esModule",{value:!0})})})(pd,pd.exports);var Xt=pd.exports;const eI=jm(Xt),tI=Bm({__proto__:null,default:eI},[Xt]);var Xg=function(){function e(t,r,i){if(this.formatMap=new Map([[nt.QR_CODE,Xt.BarcodeFormat.QR_CODE],[nt.AZTEC,Xt.BarcodeFormat.AZTEC],[nt.CODABAR,Xt.BarcodeFormat.CODABAR],[nt.CODE_39,Xt.BarcodeFormat.CODE_39],[nt.CODE_93,Xt.BarcodeFormat.CODE_93],[nt.CODE_128,Xt.BarcodeFormat.CODE_128],[nt.DATA_MATRIX,Xt.BarcodeFormat.DATA_MATRIX],[nt.MAXICODE,Xt.BarcodeFormat.MAXICODE],[nt.ITF,Xt.BarcodeFormat.ITF],[nt.EAN_13,Xt.BarcodeFormat.EAN_13],[nt.EAN_8,Xt.BarcodeFormat.EAN_8],[nt.PDF_417,Xt.BarcodeFormat.PDF_417],[nt.RSS_14,Xt.BarcodeFormat.RSS_14],[nt.RSS_EXPANDED,Xt.BarcodeFormat.RSS_EXPANDED],[nt.UPC_A,Xt.BarcodeFormat.UPC_A],[nt.UPC_E,Xt.BarcodeFormat.UPC_E],[nt.UPC_EAN_EXTENSION,Xt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!tI)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=i;var a=this.createZXingFormats(t),s=new Map;s.set(Xt.DecodeHintType.POSSIBLE_FORMATS,a),s.set(Xt.DecodeHintType.TRY_HARDER,!1),this.hints=s}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(i,a){try{i(r.decode(t))}catch(s){a(s)}})},e.prototype.decode=function(t){var r=new Xt.MultiFormatReader(this.verbose,this.hints),i=new Xt.HTMLCanvasElementLuminanceSource(t),a=new Xt.BinaryBitmap(new Xt.HybridBinarizer(i)),s=r.decode(a);return{text:s.text,format:B2.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,i,a){t.set(r,i)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],i=0,a=t;i<a.length;i++){var s=a[i];this.formatMap.has(s)?r.push(this.formatMap.get(s)):this.logger.logError("".concat(s," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),rI=function(e,t,r,i){function a(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function h(m){try{d(i.next(m))}catch(w){u(w)}}function f(m){try{d(i.throw(m))}catch(w){u(w)}}function d(m){m.done?s(m.value):a(m.value).then(h,f)}d((i=i.apply(e,t||[])).next())})},nI=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(d){return function(m){return f([d,m])}}function f(d){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(i=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],a=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},qg=function(){function e(t,r,i){if(this.formatMap=new Map([[nt.QR_CODE,"qr_code"],[nt.AZTEC,"aztec"],[nt.CODABAR,"codabar"],[nt.CODE_39,"code_39"],[nt.CODE_93,"code_93"],[nt.CODE_128,"code_128"],[nt.DATA_MATRIX,"data_matrix"],[nt.ITF,"itf"],[nt.EAN_13,"ean_13"],[nt.EAN_8,"ean_8"],[nt.PDF_417,"pdf417"],[nt.UPC_A,"upc_a"],[nt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=i;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return rI(this,void 0,void 0,function(){var r,i;return nI(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=a.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(r),[2,{text:i.rawValue,format:B2.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,i=0,a=0,s=t;a<s.length;a++){var u=s[a],h=u.boundingBox.width*u.boundingBox.height;h>i&&(i=h,r=u)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],i=0,a=t;i<a.length;i++){var s=a[i];this.formatMap.has(s)?r.push(this.formatMap.get(s)):this.logger.warn("".concat(s," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,i,a){t.set(r,i)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Qg=function(e,t,r,i){function a(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function h(m){try{d(i.next(m))}catch(w){u(w)}}function f(m){try{d(i.throw(m))}catch(w){u(w)}}function d(m){m.done?s(m.value):a(m.value).then(h,f)}d((i=i.apply(e,t||[])).next())})},Kg=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(d){return function(m){return f([d,m])}}function f(d){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(i=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],a=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},iI=function(){function e(t,r,i,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,r&&qg.isSupported()?(this.primaryDecoder=new qg(t,i,a),this.secondaryDecoder=new Xg(t,i,a)):this.primaryDecoder=new Xg(t,i,a)}return e.prototype.decodeAsync=function(t){return Qg(this,void 0,void 0,function(){var r;return Kg(this,function(i){switch(i.label){case 0:r=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return Qg(this,void 0,void 0,function(){var r,i;return Kg(this,function(a){switch(a.label){case 0:r=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(i=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw i;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,i=this.executionResults;r<i.length;r++){var a=i[r];t+=a}var s=t/this.executionResults.length;console.log("".concat(s," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),F1=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function i(){this.constructor=t}t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),wc=function(e,t,r,i){function a(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function h(m){try{d(i.next(m))}catch(w){u(w)}}function f(m){try{d(i.throw(m))}catch(w){u(w)}}function d(m){m.done?s(m.value):a(m.value).then(h,f)}d((i=i.apply(e,t||[])).next())})},xc=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(d){return function(m){return f([d,m])}}function f(d){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(i=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],a=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},z2=function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var i={advanced:[r]};return this.track.applyConstraints(i)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e}(),sI=function(e){F1(t,e);function t(r,i){return e.call(this,r,i)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var i={};i[this.name]=r;var a={advanced:[i]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),i=r[this.name];return{min:i.min,max:i.max,step:i.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(z2),oI=function(e){F1(t,e);function t(r){return e.call(this,"zoom",r)||this}return t}(sI),aI=function(e){F1(t,e);function t(r){return e.call(this,"torch",r)||this}return t}(z2),lI=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new oI(this.track)},e.prototype.torchFeature=function(){return new aI(this.track)},e}(),uI=function(){function e(t,r,i){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var i=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(i,a),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,i,a){return wc(this,void 0,void 0,function(){var s,u;return xc(this,function(h){switch(h.label){case 0:return s=new e(t,r,a),i.aspectRatio?(u={aspectRatio:i.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(u)]):[3,2];case 1:h.sent(),h.label=2;case 2:return s.setupSurface(),[2,s]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,i=function(){setTimeout(t,200),r.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return wc(this,void 0,void 0,function(){return xc(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,i){var a=t.mediaStream.getVideoTracks(),s=a.length,u=0;t.mediaStream.getVideoTracks().forEach(function(h){t.mediaStream.removeTrack(h),h.stop(),++u,u>=s&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new lI(this.getFirstTrackOrFail())},e}(),cI=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,i){return wc(this,void 0,void 0,function(){return xc(this,function(a){return[2,uI.create(t,this.mediaStream,r,i)]})})},e.create=function(t){return wc(this,void 0,void 0,function(){var r,i;return xc(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return i=a.sent(),[2,new e(i)]}})})},e}(),Zg=function(e,t,r,i){function a(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function h(m){try{d(i.next(m))}catch(w){u(w)}}function f(m){try{d(i.throw(m))}catch(w){u(w)}}function d(m){m.done?s(m.value):a(m.value).then(h,f)}d((i=i.apply(e,t||[])).next())})},Jg=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(d){return function(m){return f([d,m])}}function f(d){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(i=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],a=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},hI=function(){function e(){}return e.failIfNotSupported=function(){return Zg(this,void 0,void 0,function(){return Jg(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return Zg(this,void 0,void 0,function(){return Jg(this,function(r){return[2,cI.create(t)]})})},e}(),fI=function(e,t,r,i){function a(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function h(m){try{d(i.next(m))}catch(w){u(w)}}function f(m){try{d(i.throw(m))}catch(w){u(w)}}function d(m){m.done?s(m.value):a(m.value).then(h,f)}d((i=i.apply(e,t||[])).next())})},dI=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(d){return function(m){return f([d,m])}}function f(d){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(i=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],a=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},pI=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=qo.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=qo.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return fI(this,void 0,void 0,function(){var t,r,i,a,s,u,h;return dI(this,function(f){switch(f.label){case 0:return t=function(d){for(var m=d.getVideoTracks(),w=0,v=m;w<v.length;w++){var b=v[w];b.enabled=!1,b.stop(),d.removeTrack(b)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=f.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=f.sent(),a=[],s=0,u=i;s<u.length;s++)h=u[s],h.kind==="videoinput"&&a.push({id:h.deviceId,label:h.label});return t(r),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var i=function(s){for(var u=[],h=0,f=s;h<f.length;h++){var d=f[h];d.kind==="video"&&u.push({id:d.id,label:d.label})}t(u)},a=MediaStreamTrack;a.getSources(i)})},e}(),hr;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(hr||(hr={}));var gI=function(){function e(){this.state=hr.NOT_STARTED,this.onGoingTransactionNewState=hr.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===hr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=hr.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===hr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=hr.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==hr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case hr.UNKNOWN:throw"Transition from unknown is not allowed";case hr.NOT_STARTED:this.failIfNewStateIs(t,[hr.PAUSED]);break;case hr.SCANNING:break;case hr.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var i=0,a=r;i<a.length;i++){var s=a[i];if(t===s)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),mI=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===hr.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==hr.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===hr.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===hr.PAUSED},e}(),yI=function(){function e(){}return e.create=function(){return new mI(new gI)},e}(),wI=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function i(){this.constructor=t}t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),bn=function(e){wI(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(qn),xI=function(){function e(t,r){this.logger=r,this.fps=bn.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=bn.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?U2.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!ui(this.qrbox)},e.create=function(t,r){return new e(t,r)},e}(),em=function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var i;typeof r=="boolean"?this.verbose=r===!0:r&&(i=r,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new F2(this.verbose),this.qrcode=new iI(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=yI.create()}return e.prototype.start=function(t,r,i,a){var s=this;if(!t)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var u;a?u=a:u=this.verbose?this.logger.log:function(){};var h=xI.create(r,this.logger);this.clearElement();var f=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?f=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var d=f,m=document.getElementById(this.elementId);m.clientWidth?m.clientWidth:bn.DEFAULT_WIDTH,m.style.position="relative",this.shouldScan=!0,this.element=m;var w=this,v=this.stateManagerProxy.startTransition(hr.SCANNING);return new Promise(function(b,C){var N=d?h.videoConstraints:w.createVideoConstraints(t);if(!N){v.cancel(),C("videoConstraints should be defined");return}var R={};(!d||h.aspectRatio)&&(R.aspectRatio=h.aspectRatio);var k={onRenderSurfaceReady:function(S,I){w.setupUi(S,I,h),w.isScanning=!0,w.foreverScan(h,i,u)}};hI.failIfNotSupported().then(function(S){S.create(N).then(function(I){return I.render(s.element,R,k).then(function(B){w.renderedCamera=B,v.execute(),b(null)}).catch(function(B){v.cancel(),C(B)})}).catch(function(I){v.cancel(),C(qo.errorGettingUserMedia(I))})}).catch(function(S){v.cancel(),C(qo.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(hr.PAUSED),this.showPausedState(),(ui(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(hr.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(hr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(t.element){var s=document.getElementById(bn.SHADED_REGION_ELEMENT_ID);s&&t.element.removeChild(s)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),i(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),r.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(i){return i.decodedText})},e.prototype.scanFileV2=function(t,r){var i=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ui(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,s){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(t);var u=new Image;u.onload=function(){var h=u.width,f=u.height,d=document.getElementById(i.elementId),m=d.clientWidth?d.clientWidth:bn.DEFAULT_WIDTH,w=Math.max(d.clientHeight?d.clientHeight:f,bn.FILE_SCAN_MIN_HEIGHT),v=i.computeCanvasDrawConfig(h,f,m,w);if(r){var b=i.createCanvasElement(m,w,"qr-canvas-visible");b.style.display="inline-block",d.appendChild(b);var C=b.getContext("2d");if(!C)throw"Unable to get 2d context from canvas";C.canvas.width=m,C.canvas.height=w,C.drawImage(u,0,0,h,f,v.x,v.y,v.width,v.height)}var N=bn.FILE_SCAN_HIDDEN_CANVAS_PADDING,R=Math.max(u.width,v.width),k=Math.max(u.height,v.height),S=R+2*N,I=k+2*N,B=i.createCanvasElement(S,I);d.appendChild(B);var U=B.getContext("2d");if(!U)throw"Unable to get 2d context from canvas";U.canvas.width=S,U.canvas.height=I,U.drawImage(u,0,0,h,f,N,N,R,k);try{i.qrcode.decodeRobustlyAsync(B).then(function(L){a(Gg.createFromQrcodeResult(L))}).catch(s)}catch(L){s("QR code parse error, error = ".concat(L))}},u.onerror=s,u.onabort=s,u.onstalled=s,u.onsuspend=s,u.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return pI.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!U2.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[nt.QR_CODE,nt.AZTEC,nt.CODABAR,nt.CODE_39,nt.CODE_93,nt.CODE_128,nt.DATA_MATRIX,nt.MAXICODE,nt.ITF,nt.EAN_13,nt.EAN_8,nt.PDF_417,nt.RSS_14,nt.RSS_EXPANDED,nt.UPC_A,nt.UPC_E,nt.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],a=0,s=t.formatsToSupport;a<s.length;a++){var u=s[a];Z3(u)?i.push(u):this.logger.warn("Invalid format: ".concat(u," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(ui(t))return!0;if(!ui(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(ui(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return ui(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,i){var a=this,s=i.qrbox;this.validateQrboxConfig(s);var u=this.toQrdimensions(t,r,s),h=function(d){if(d<bn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(bn.MIN_QR_BOX_SIZE,"px.")},f=function(d){return d>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=t),d};h(u.width),h(u.height),u.width=f(u.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(t,r)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return i},e.prototype.setupUi=function(t,r,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,i);var a=ui(i.qrbox)?{width:t,height:r}:i.qrbox;this.validateQrboxConfig(a);var s=this.toQrdimensions(t,r,a);s.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var u=i.isShadedBoxEnabled()&&s.height<=r,h={x:0,y:0,width:t,height:r},f=u?this.getShadedRegionBounds(t,r,s):h,d=this.createCanvasElement(f.width,f.height),m={willReadFrequently:!0},w=d.getContext("2d",m);w.canvas.width=f.width,w.canvas.height=f.height,this.element.append(d),u&&this.possiblyInsertShadingElement(this.element,t,r,s),this.createScannerPausedUiElement(this.element),this.qrRegion=f,this.context=w,this.canvasElement=d},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=qo.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,Gg.createFromQrcodeResult(a)),i.possiblyUpdateShaders(!0),!0}).catch(function(a){i.possiblyUpdateShaders(!1);var s=qo.codeParseError(a);return r(s,j2.createFrom(s)),!1})},e.prototype.foreverScan=function(t,r,i){var a=this;if(this.shouldScan&&this.renderedCamera){var s=this.renderedCamera.getSurface(),u=s.videoWidth/s.clientWidth,h=s.videoHeight/s.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var f=this.qrRegion.width*u,d=this.qrRegion.height*h,m=this.qrRegion.x*u,w=this.qrRegion.y*h;this.context.drawImage(s,m,w,f,d,0,0,this.qrRegion.width,this.qrRegion.height);var v=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,r,i)},a.getTimeoutFps(t.fps))};this.scanContext(r,i).then(function(b){!b&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(r,i).finally(function(){v()})):v()}).catch(function(b){a.logger.logError("Error happend while scanning context",b),v()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",i="deviceId",a={user:!0,environment:!0},s="exact",u=function(C){if(C in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(C,"'")},h=Object.keys(t);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var f=Object.keys(t)[0];if(f!==r&&f!==i)throw"Only '".concat(r,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(f===r){var d=t.facingMode;if(typeof d=="string"){if(u(d))return{facingMode:d}}else if(typeof d=="object")if(s in d){if(u(d["".concat(s)]))return{facingMode:{exact:d["".concat(s)]}}}else throw"'facingMode' should be string or object with"+" ".concat(s," as key.");else{var m=typeof d;throw"Invalid type of 'facingMode' = ".concat(m)}}else{var w=t.deviceId;if(typeof w=="string")return{deviceId:w};if(typeof w=="object"){if(s in w)return{deviceId:{exact:w["".concat(s)]}};throw"'deviceId' should be string or object with"+" ".concat(s," as key.")}else{var v=typeof w;throw"Invalid type of 'deviceId' = ".concat(v)}}}var b=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(b)},e.prototype.computeCanvasDrawConfig=function(t,r,i,a){if(t<=i&&r<=a){var s=(i-t)/2,u=(a-r)/2;return{x:s,y:u,width:t,height:r}}else{var h=t,f=r;return t>i&&(r=i/t*r,t=i),r>a&&(t=a/r*t,r=a),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(f)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,i,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?bn.BORDER_SHADER_MATCH_COLOR:bn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,i){var a=t,s=r,u=document.createElement("canvas");return u.style.width="".concat(a,"px"),u.style.height="".concat(s,"px"),u.style.display="none",u.id=ui(i)?"qr-canvas":i,u},e.prototype.getShadedRegionBounds=function(t,r,i){if(i.width>t||i.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-i.width)/2,y:(r-i.height)/2,width:i.width,height:i.height}},e.prototype.possiblyInsertShadingElement=function(t,r,i,a){if(!(r-a.width<1||i-a.height<1)){var s=document.createElement("div");s.style.position="absolute";var u=(r-a.width)/2,h=(i-a.height)/2;if(s.style.borderLeft="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderRight="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),s.style.boxSizing="border-box",s.style.top="0px",s.style.bottom="0px",s.style.left="0px",s.style.right="0px",s.id="".concat(bn.SHADED_REGION_ELEMENT_ID),r-a.width<11||i-a.height<11)this.hasBorderShaders=!1;else{var f=5,d=40;this.insertShaderBorders(s,d,f,-f,null,0,!0),this.insertShaderBorders(s,d,f,-f,null,0,!1),this.insertShaderBorders(s,d,f,null,-f,0,!0),this.insertShaderBorders(s,d,f,null,-f,0,!1),this.insertShaderBorders(s,f,d+f,-f,null,-f,!0),this.insertShaderBorders(s,f,d+f,null,-f,-f,!0),this.insertShaderBorders(s,f,d+f,-f,null,-f,!1),this.insertShaderBorders(s,f,d+f,null,-f,-f,!1),this.hasBorderShaders=!0}t.append(s)}},e.prototype.insertShaderBorders=function(t,r,i,a,s,u,h){var f=document.createElement("div");f.style.position="absolute",f.style.backgroundColor=bn.BORDER_SHADER_DEFAULT_COLOR,f.style.width="".concat(r,"px"),f.style.height="".concat(i,"px"),a!==null&&(f.style.top="".concat(a,"px")),s!==null&&(f.style.bottom="".concat(s,"px")),h?f.style.left="".concat(u,"px"):f.style.right="".concat(u,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(f),t.appendChild(f)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),U1="data:image/svg+xml;base64,",vI=U1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",bI=U1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",tm=U1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",_I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",rm=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),EI=function(){function e(){this.data=rm.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=rm.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),SI=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Yg.poweredBy();var r=document.createElement("a");r.innerText="ScanApp",r.href="https://scanapp.org",r.target="new",r.style.color="white",this.infoDiv.appendChild(r);var i=document.createElement("br"),a=document.createElement("br");this.infoDiv.appendChild(i),this.infoDiv.appendChild(a);var s=document.createElement("a");s.innerText=Yg.reportIssues(),s.href="https://github.com/mebjas/html5-qrcode/issues",s.target="new",s.style.color="white",this.infoDiv.appendChild(s),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),AI=function(){function e(t,r){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=r,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var r=this;this.infoIcon.alt="Info icon",this.infoIcon.src=tm,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(i){return r.onHoverIn()},this.infoIcon.onmouseout=function(i){return r.onHoverOut()},this.infoIcon.onclick=function(i){return r.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=_I,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=tm,this.infoIcon.style.opacity="0.6")},e}(),CI=function(){function e(){var t=this;this.infoDiv=new SI,this.infoIcon=new AI(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),II=function(e,t,r,i){function a(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function h(m){try{d(i.next(m))}catch(w){u(w)}}function f(m){try{d(i.throw(m))}catch(w){u(w)}}function d(m){m.done?s(m.value):a(m.value).then(h,f)}d((i=i.apply(e,t||[])).next())})},TI=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(d){return function(m){return f([d,m])}}function f(d){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(i=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],a=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},nm=function(){function e(){}return e.hasPermissions=function(){return II(this,void 0,void 0,function(){var t,r,i,a;return TI(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=s.sent(),r=0,i=t;r<i.length;r++)if(a=i[r],a.kind==="videoinput"&&a.label)return[2,!0];return[2,!1]}})})},e}(),Zi=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,r=this.supportedScanTypes;t<r.length;t++){var i=r[t];if(e.isCameraScanType(i))return!0}return!1},e.isCameraScanType=function(t){return t===Is.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===Is.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return qn.DEFAULT_SUPPORTED_SCAN_TYPE;var r=qn.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>r)throw"Max ".concat(r," values expected for ")+"supportedScanTypes";for(var i=0,a=t;i<a.length;i++){var s=a[i];if(!qn.DEFAULT_SUPPORTED_SCAN_TYPE.includes(s))throw"Unsupported scan type ".concat(s)}return t},e}(),An=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),Ti=function(){function e(){}return e.createElement=function(t,r){var i=document.createElement(t);return i.id=r,i.classList.add(An.ALL_ELEMENT_CLASS),t==="button"&&i.setAttribute("type","button"),i},e}(),W2=function(e,t,r,i){function a(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function h(m){try{d(i.next(m))}catch(w){u(w)}}function f(m){try{d(i.throw(m))}catch(w){u(w)}}function d(m){m.done?s(m.value):a(m.value).then(h,f)}d((i=i.apply(e,t||[])).next())})},H2=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(d){return function(m){return f([d,m])}}function f(d){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(i=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],a=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},im=function(){function e(t,r,i){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=r,this.onTorchActionFailureCallback=i}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return W2(this,void 0,void 0,function(){var t,r;return H2(this,function(i){switch(i.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return i.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return r=i.sent(),this.propagateFailure(t,r),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,r){t===r?(this.buttonController.setText(r?Rt.torchOffButton():Rt.torchOnButton()),this.isTorchOn=r):this.propagateFailure(r),this.buttonController.enable()},e.prototype.propagateFailure=function(t,r){var i=t?Rt.torchOnFailedMessage():Rt.torchOffFailedMessage();r&&(i+="; Error = "+r),this.onTorchActionFailureCallback(i)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),NI=function(){function e(t,r){this.onTorchActionFailureCallback=r,this.torchButton=Ti.createElement("button",An.TORCH_BUTTON_ID),this.torchController=new im(t,this,r)}return e.prototype.render=function(t,r){var i=this;this.torchButton.innerText=Rt.torchOnButton(),this.torchButton.style.display=r.display,this.torchButton.style.marginLeft=r.marginLeft;var a=this;this.torchButton.addEventListener("click",function(s){return W2(i,void 0,void 0,function(){return H2(this,function(u){switch(u.label){case 0:return[4,a.torchController.flipState()];case 1:return u.sent(),a.torchController.isTorchEnabled()?(a.torchButton.classList.remove(An.TORCH_BUTTON_CLASS_TORCH_OFF),a.torchButton.classList.add(An.TORCH_BUTTON_CLASS_TORCH_ON)):(a.torchButton.classList.remove(An.TORCH_BUTTON_CLASS_TORCH_ON),a.torchButton.classList.add(An.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new im(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=Rt.torchOnButton(),this.torchController.reset()},e.create=function(t,r,i,a){var s=new e(r,a);return s.render(t,i),s},e}(),OI=function(){function e(t,r,i){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=r?"block":"none",t.appendChild(this.fileBasedScanRegion);var a=document.createElement("label");a.setAttribute("for",this.getFileScanInputId()),a.style.display="inline-block",this.fileBasedScanRegion.appendChild(a),this.fileSelectionButton=Ti.createElement("button",An.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(h){a.click()}),a.append(this.fileSelectionButton),this.fileScanInput=Ti.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",a.appendChild(this.fileScanInput);var s=this;this.fileScanInput.addEventListener("change",function(h){if(!(h==null||h.target==null)){var f=h.target;if(!(f.files&&f.files.length===0)){var d=f.files,m=d[0],w=m.name;s.setImageNameToButton(w),i(m)}}});var u=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(u),this.fileBasedScanRegion.addEventListener("dragenter",function(h){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(h){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionDefaultBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(h){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(h){h.stopPropagation(),h.preventDefault(),s.fileBasedScanRegion.style.border=s.fileBasedScanRegionDefaultBorder();var f=h.dataTransfer;if(f){var d=f.files;if(!d||d.length===0)return;for(var m=!1,w=0;w<d.length;++w){var v=d.item(w);if(v){var b=/image.*/;if(v.type.match(b)){m=!0;var C=v.name;s.setImageNameToButton(C),i(v),u.innerText=Rt.dragAndDropMessage();break}}}m||(u.innerText=Rt.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=Rt.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var r=20;if(t.length>r){var i=t.substring(0,8),a=t.length,s=t.substring(a-8,a);t="".concat(i,"....").concat(s)}var u=Rt.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=u},e.prototype.setInitialValueToButton=function(){var t=Rt.fileSelectionChooseImage()+" - "+Rt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,r,i){var a=new e(t,r,i);return a},e}(),kI=function(){function e(t){this.selectElement=Ti.createElement("select",An.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var r=document.createElement("span");r.style.marginRight="10px";var i=this.cameras.length;if(i===0)throw new Error("No cameras found");if(i===1)r.style.display="none";else{var a=Rt.selectCamera();r.innerText="".concat(a," (").concat(this.cameras.length,")  ")}for(var s=1,u=0,h=this.cameras;u<h.length;u++){var f=h[u],d=f.id,m=f.label==null?d:f.label;(!m||m==="")&&(m=[Rt.anonymousCameraPrefix(),s++].join(" "));var w=document.createElement("option");w.value=d,w.innerText=m,this.options.push(w),this.selectElement.appendChild(w)}r.appendChild(this.selectElement),t.appendChild(r)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var r=0,i=this.options;r<i.length;r++){var a=i[r];if(a.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,r){var i=new e(r);return i.render(t),i},e}(),RI=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Ti.createElement("input",An.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,r){this.zoomElementContainer.style.display=r?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var i=Rt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.rangeText.style.marginRight="10px";var a=this;this.rangeInput.addEventListener("input",function(){return a.onValueChange()}),this.rangeInput.addEventListener("change",function(){return a.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=Rt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,r,i,a){this.rangeInput.min=t.toString(),this.rangeInput.max=r.toString(),this.rangeInput.step=a.toString(),this.rangeInput.value=i.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,r){var i=new e;return i.render(t,r),i},e}(),_n;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(_n||(_n={}));function MI(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function DI(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var PI=function(){function e(t,r,i){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(r),this.verbose=i===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new Zi(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new F2(this.verbose),this.persistedDataManager=new EI,r.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,r){var i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(s,u){if(t)t(s,u);else{if(i.lastMatchFound===s)return;i.lastMatchFound=s,i.setHeaderMessage(Rt.lastMatch(s),_n.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(s,u){r&&r(s,u)};var a=document.getElementById(this.elementId);if(!a)throw"HTML Element with id=".concat(this.elementId," not found");a.innerHTML="",this.createBasicLayout(a),this.html5Qrcode=new em(this.getScanRegionId(),DI(this.config,this.verbose))},e.prototype.pause=function(t){(ui(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,r=function(){var i=document.getElementById(t.elementId);i&&(i.innerHTML="",t.resetBasicLayout(i))};return this.html5Qrcode?new Promise(function(i,a){if(!t.html5Qrcode){i();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(s){if(!t.html5Qrcode){i();return}t.html5Qrcode.clear(),r(),i()}).catch(function(s){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",s),a(s)}):(t.html5Qrcode.clear(),r(),i())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=qn.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!qn.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=qn.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=qn.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:qn.SCAN_DEFAULT_FPS,rememberLastUsedCamera:qn.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:qn.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var r=document.createElement("div"),i=this.getScanRegionId();r.id=i,r.style.width="100%",r.style.minHeight="100px",r.style.textAlign="center",t.appendChild(r),Zi.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var a=document.createElement("div"),s=this.getDashboardId();a.id=s,a.style.width="100%",t.appendChild(a),this.setupInitialDashboard(a)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var r=document.createElement("div");r.style.textAlign="left",r.style.margin="0px",t.appendChild(r);var i=new CI;i.renderInto(r);var a=document.createElement("div");a.id=this.getHeaderMessageContainerId(),a.style.display="none",a.style.textAlign="center",a.style.fontSize="14px",a.style.padding="2px 10px",a.style.margin="4px",a.style.borderTop="1px solid #f6f6f6",r.appendChild(a)},e.prototype.createSection=function(t){var r=document.createElement("div");r.id=this.getDashboardSectionId(),r.style.width="100%",r.style.padding="10px 0px 10px 0px",r.style.textAlign="left",t.appendChild(r)},e.prototype.createCameraListUi=function(t,r,i){var a=this;a.showHideScanTypeSwapLink(!1),a.setHeaderMessage(Rt.cameraPermissionRequesting());var s=function(){i||a.createPermissionButton(t,r)};em.getCameras().then(function(u){a.persistedDataManager.setHasPermission(!0),a.showHideScanTypeSwapLink(!0),a.resetHeaderMessage(),u&&u.length>0?(t.removeChild(r),a.renderCameraSelection(u)):(a.setHeaderMessage(Rt.noCameraFound(),_n.STATUS_WARNING),s())}).catch(function(u){a.persistedDataManager.setHasPermission(!1),i?i.disabled=!1:s(),a.setHeaderMessage(u,_n.STATUS_WARNING),a.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,r){var i=this,a=Ti.createElement("button",this.getCameraPermissionButtonId());a.innerText=Rt.cameraPermissionTitle(),a.addEventListener("click",function(){a.disabled=!0,i.createCameraListUi(t,r,a)}),r.appendChild(a)},e.prototype.createPermissionsUi=function(t,r){var i=this;if(Zi.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){nm.hasPermissions().then(function(a){a?i.createCameraListUi(t,r):(i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,r))}).catch(function(a){i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,r)});return}this.createPermissionButton(t,r)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");t.appendChild(r);var i=document.createElement("div");i.id=this.getDashboardSectionCameraScanRegionId(),i.style.display=Zi.isCameraScanType(this.currentScanType)?"block":"none",r.appendChild(i);var a=document.createElement("div");a.style.textAlign="center",i.appendChild(a),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(i,a),this.renderFileScanUi(r)},e.prototype.renderFileScanUi=function(t){var r=Zi.isFileScanType(this.currentScanType),i=this,a=function(s){if(!i.html5Qrcode)throw"html5Qrcode not defined";Zi.isFileScanType(i.currentScanType)&&(i.setHeaderMessage(Rt.loadingImage()),i.html5Qrcode.scanFileV2(s,!0).then(function(u){i.resetHeaderMessage(),i.qrCodeSuccessCallback(u.decodedText,u)}).catch(function(u){i.setHeaderMessage(u,_n.STATUS_WARNING),i.qrCodeErrorCallback(u,j2.createFrom(u))}))};this.fileSelectionUi=OI.create(t,r,a)},e.prototype.renderCameraSelection=function(t){var r=this,i=this,a=document.getElementById(this.getDashboardSectionCameraScanRegionId());a.style.textAlign="center";var s=RI.create(a,!1),u=function(N){var R=N.zoomFeature();if(R.isSupported()){s.setOnCameraZoomValueChangeCallback(function(S){R.apply(S)});var k=1;r.config.defaultZoomValueIfSupported&&(k=r.config.defaultZoomValueIfSupported),k=J3(k,R.min(),R.max()),s.setValues(R.min(),R.max(),k,R.step()),s.show()}},h=kI.create(a,t),f=document.createElement("span"),d=Ti.createElement("button",An.CAMERA_START_BUTTON_ID);d.innerText=Rt.scanButtonStartScanningText(),f.appendChild(d);var m=Ti.createElement("button",An.CAMERA_STOP_BUTTON_ID);m.innerText=Rt.scanButtonStopScanningText(),m.style.display="none",m.disabled=!0,f.appendChild(m);var w,v=function(N){if(!N.torchFeature().isSupported()){w&&w.hide();return}w?w.updateTorchCapability(N.torchFeature()):w=NI.create(f,N.torchFeature(),{display:"none",marginLeft:"5px"},function(R){i.setHeaderMessage(R,_n.STATUS_WARNING)}),w.show()};a.appendChild(f);var b=function(N){N||(d.style.display="none"),d.innerText=Rt.scanButtonStartScanningText(),d.style.opacity="1",d.disabled=!1,N&&(d.style.display="inline-block")};if(d.addEventListener("click",function(N){d.innerText=Rt.scanButtonScanningStarting(),h.disable(),d.disabled=!0,d.style.opacity="0.5",r.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!1),i.resetHeaderMessage();var R=h.getValue();i.persistedDataManager.setLastUsedCameraId(R),i.html5Qrcode.start(R,MI(i.config),i.qrCodeSuccessCallback,i.qrCodeErrorCallback).then(function(k){m.disabled=!1,m.style.display="inline-block",b(!1);var S=i.html5Qrcode.getRunningTrackCameraCapabilities();r.config.showTorchButtonIfSupported===!0&&v(S),r.config.showZoomSliderIfSupported===!0&&u(S)}).catch(function(k){i.showHideScanTypeSwapLink(!0),h.enable(),b(!0),i.setHeaderMessage(k,_n.STATUS_WARNING)})}),h.hasSingleItem()&&d.click(),m.addEventListener("click",function(N){if(!i.html5Qrcode)throw"html5Qrcode not defined";m.disabled=!0,i.html5Qrcode.stop().then(function(R){r.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!0),h.enable(),d.disabled=!1,m.style.display="none",d.style.display="inline-block",w&&(w.reset(),w.hide()),s.removeOnCameraZoomValueChangeCallback(),s.hide(),i.insertCameraScanImageToScanRegion()}).catch(function(R){m.disabled=!1,i.setHeaderMessage(R,_n.STATUS_WARNING)})}),i.persistedDataManager.getLastUsedCameraId()){var C=i.persistedDataManager.getLastUsedCameraId();h.hasValue(C)?(h.setValue(C),d.click()):i.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,r=Rt.textIfCameraScanSelected(),i=Rt.textIfFileScanSelected(),a=document.getElementById(this.getDashboardSectionId()),s=document.createElement("div");s.style.textAlign="center";var u=Ti.createElement("span",this.getDashboardSectionSwapLinkId());u.style.textDecoration="underline",u.style.cursor="pointer",u.innerText=Zi.isCameraScanType(this.currentScanType)?r:i,u.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,Zi.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),u.innerText=i,t.currentScanType=Is.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),u.innerText=r,t.currentScanType=Is.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),s.appendChild(u),a.appendChild(s)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,r=this;if(this.persistedDataManager.hasCameraPermissions()){nm.hasPermissions().then(function(i){if(i){var a=document.getElementById(r.getCameraPermissionButtonId());if(!a)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";a.click()}else r.persistedDataManager.setHasPermission(!1)}).catch(function(i){r.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,r){r||(r=_n.STATUS_DEFAULT);var i=this.getHeaderMessageDiv();switch(i.innerText=t,i.style.display="block",r){case _n.STATUS_SUCCESS:i.style.background="rgba(106, 175, 80, 0.26)",i.style.color="#477735";break;case _n.STATUS_WARNING:i.style.background="rgba(203, 36, 49, 0.14)",i.style.color="#cb2431";break;case _n.STATUS_DEFAULT:default:i.style.background="rgba(0, 0, 0, 0)",i.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,r=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){r.innerHTML="<br>",r.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(i){r.innerHTML="<br>",r.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=vI,this.cameraScanImage.alt=Rt.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,r=document.getElementById(this.getScanRegionId());if(this.fileScanImage){r.innerHTML="<br>",r.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(i){r.innerHTML="<br>",r.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=bI,this.fileScanImage.alt=Rt.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return An.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return An.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();function LI(){const e=mo(),[t,r]=De.useState(""),[i,a]=De.useState(""),[s,u]=De.useState(!1),[h,f]=De.useState(!1),d=De.useRef(null),m=De.useRef(null);De.useEffect(()=>()=>{d.current&&d.current.clear()},[]),De.useEffect(()=>{const R=k=>{m.current&&!m.current.contains(k.target)&&v()};return h&&document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[h]);const w=()=>{f(!0),setTimeout(()=>{d.current=new PI("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1,rememberLastUsedCamera:!0},!1),d.current.render(b,C)},100)},v=()=>{d.current&&(d.current.clear(),f(!1))},b=R=>{try{const k=JSON.parse(R);r(k.serialNumber),a(k.activationKey),v(),dr.success("QR code scanned successfully!")}catch{dr.error("Invalid QR code format")}},C=R=>{console.error(R)},N=async R=>{R.preventDefault(),u(!0);try{const{data:{user:k}}=await Er.auth.getUser();if(!k)throw new Error("Not authenticated");const{data:S,error:I}=await Er.from("mqtt_auth").select("serial_number").eq("serial_number",t).eq("is_active",!0).single();if(I||!S)throw new Error("Invalid serial number or toy is not activated");if(i.length<6)throw new Error("Invalid activation key");const{data:B}=await Er.from("toys").select("id").eq("serial_number",t).single();if(B){const{error:U}=await Er.from("toys").update({user_id:k.id}).eq("serial_number",t);if(U)throw U;dr.success("Toy transferred to your account successfully!")}else{const{error:U}=await Er.from("toys").insert([{user_id:k.id,serial_number:t,name:`Toy ${Math.floor(Math.random()*1e3)}`,activation_key:i,role_type:"Puzzle Solver",language:"English",voice:"Sparkles for Kids"}]);if(U)throw U;dr.success("Toy added successfully!")}e("/")}catch(k){dr.error(k instanceof Error?k.message:"Failed to add toy"),console.error(k)}finally{u(!1)}};return te.jsxs("div",{className:"min-h-screen bg-primary-50",children:[te.jsx(co,{}),te.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[te.jsx(Xc,{}),te.jsx("div",{className:"max-w-md mx-auto",children:te.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-primary-200 p-8",children:[te.jsx("h2",{className:"text-2xl font-bold text-primary-900 text-center mb-8",children:"Add New Toy"}),te.jsxs("div",{className:"mb-8 text-center",children:[te.jsx("button",{onClick:w,className:"inline-flex items-center justify-center w-32 h-32 bg-primary-100 rounded-full mb-4 hover:bg-primary-200 transition-colors cursor-pointer",children:te.jsx(AA,{className:"h-12 w-12 text-primary-500"})}),te.jsx("p",{className:"text-sm text-primary-600",children:"Click to scan QR code"}),te.jsxs("div",{className:"relative my-4",children:[te.jsx("div",{className:"absolute inset-0 flex items-center",children:te.jsx("div",{className:"w-full border-t border-primary-200"})}),te.jsx("div",{className:"relative flex justify-center",children:te.jsx("span",{className:"px-4 bg-white text-sm text-primary-500",children:"OR"})})]})]}),te.jsxs("form",{onSubmit:N,className:"space-y-6",children:[te.jsxs("div",{children:[te.jsx("label",{htmlFor:"sn",className:"block text-sm font-medium text-primary-700 mb-1",children:"Serial Number"}),te.jsx("input",{id:"sn",type:"text",value:t,onChange:R=>r(R.target.value),className:"block w-full px-4 py-3 rounded-lg border border-primary-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter serial number",required:!0})]}),te.jsxs("div",{children:[te.jsx("label",{htmlFor:"key",className:"block text-sm font-medium text-primary-700 mb-1",children:"Activation Key"}),te.jsx("input",{id:"key",type:"text",value:i,onChange:R=>a(R.target.value),className:"block w-full px-4 py-3 rounded-lg border border-primary-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter activation key",required:!0})]}),te.jsx("button",{type:"submit",disabled:s,className:"w-full inline-flex items-center justify-center px-4 py-3 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-500 hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:s?te.jsxs(te.Fragment,{children:[te.jsx(Ol,{className:"animate-spin h-4 w-4 mr-2"}),"Adding..."]}):"Add Toy"})]})]})})]}),h&&te.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:te.jsxs("div",{ref:m,className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[te.jsxs("div",{className:"flex justify-between items-center mb-4",children:[te.jsx("h3",{className:"text-lg font-medium text-primary-900",children:"Scan QR Code"}),te.jsx("button",{onClick:v,className:"p-2 hover:bg-primary-50 rounded-full",children:te.jsx(h2,{className:"h-5 w-5 text-primary-500"})})]}),te.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden"}),te.jsx("p",{className:"text-sm text-primary-600 text-center mt-4",children:"Position the QR code within the frame to scan"})]})})]})}var z1=Object.defineProperty,BI=Object.getOwnPropertyDescriptor,jI=Object.getOwnPropertyNames,FI=Object.prototype.hasOwnProperty,on=(e,t)=>()=>(e&&(t=e(e=0)),t),$e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),xa=(e,t)=>{for(var r in t)z1(e,r,{get:t[r],enumerable:!0})},UI=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of jI(t))!FI.call(e,a)&&a!==r&&z1(e,a,{get:()=>t[a],enumerable:!(i=BI(t,a))||i.enumerable});return e},jt=e=>UI(z1({},"__esModule",{value:!0}),e),Ue=on(()=>{}),It={};xa(It,{_debugEnd:()=>Yd,_debugProcess:()=>Gd,_events:()=>l0,_eventsCount:()=>u0,_exiting:()=>Rd,_fatalExceptions:()=>Hd,_getActiveHandles:()=>Q2,_getActiveRequests:()=>q2,_kill:()=>Pd,_linkedBinding:()=>Y2,_maxListeners:()=>a0,_preload_modules:()=>s0,_rawDebug:()=>Nd,_startProfilerIdleNotifier:()=>Xd,_stopProfilerIdleNotifier:()=>qd,_tickCallback:()=>$d,abort:()=>Jd,addListener:()=>c0,allowedNodeEnvironmentFlags:()=>zd,arch:()=>md,argv:()=>xd,argv0:()=>i0,assert:()=>K2,binding:()=>Sd,chdir:()=>Id,config:()=>Md,cpuUsage:()=>Ga,cwd:()=>Cd,debugPort:()=>n0,default:()=>H1,dlopen:()=>X2,domain:()=>kd,emit:()=>g0,emitWarning:()=>Ed,env:()=>wd,execArgv:()=>vd,execPath:()=>r0,exit:()=>Fd,features:()=>Wd,hasUncaughtExceptionCaptureCallback:()=>Z2,hrtime:()=>Lu,kill:()=>jd,listeners:()=>ex,memoryUsage:()=>Bd,moduleLoadList:()=>Od,nextTick:()=>$2,off:()=>f0,on:()=>wi,once:()=>h0,openStdin:()=>Ud,pid:()=>e0,platform:()=>yd,ppid:()=>t0,prependListener:()=>m0,prependOnceListener:()=>y0,reallyExit:()=>Dd,release:()=>Td,removeAllListeners:()=>p0,removeListener:()=>d0,resourceUsage:()=>Ld,setSourceMapsEnabled:()=>o0,setUncaughtExceptionCaptureCallback:()=>Vd,stderr:()=>Kd,stdin:()=>Zd,stdout:()=>Qd,title:()=>gd,umask:()=>Ad,uptime:()=>J2,version:()=>bd,versions:()=>_d});function W1(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function zI(){!ro||!Zs||(ro=!1,Zs.length?hi=Zs.concat(hi):ul=-1,hi.length&&V2())}function V2(){if(!ro){var e=setTimeout(zI,0);ro=!0;for(var t=hi.length;t;){for(Zs=hi,hi=[];++ul<t;)Zs&&Zs[ul].run();ul=-1,t=hi.length}Zs=null,ro=!1,clearTimeout(e)}}function $2(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];hi.push(new G2(e,t)),hi.length===1&&!ro&&setTimeout(V2,0)}function G2(e,t){this.fun=e,this.array=t}function Xr(){}function Y2(e){W1("_linkedBinding")}function X2(e){W1("dlopen")}function q2(){return[]}function Q2(){return[]}function K2(e,t){if(!e)throw new Error(t||"assertion error")}function Z2(){return!1}function J2(){return Ai.now()/1e3}function Lu(e){var t=Math.floor((Date.now()-Ai.now())*.001),r=Ai.now()*.001,i=Math.floor(r)+t,a=Math.floor(r%1*1e9);return e&&(i=i-e[0],a=a-e[1],a<0&&(i--,a+=Bu)),[i,a]}function wi(){return H1}function ex(e){return[]}var hi,ro,Zs,ul,gd,md,yd,wd,xd,vd,bd,_d,Ed,Sd,Ad,Cd,Id,Td,Nd,Od,kd,Rd,Md,Dd,Pd,Ga,Ld,Bd,jd,Fd,Ud,zd,Wd,Hd,Vd,$d,Gd,Yd,Xd,qd,Qd,Kd,Zd,Jd,e0,t0,r0,n0,i0,s0,o0,Ai,qh,Bu,a0,l0,u0,c0,h0,f0,d0,p0,g0,m0,y0,H1,WI=on(()=>{Ue(),We(),ze(),hi=[],ro=!1,ul=-1,G2.prototype.run=function(){this.fun.apply(null,this.array)},gd="browser",md="x64",yd="browser",wd={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},xd=["/usr/bin/node"],vd=[],bd="v16.8.0",_d={},Ed=function(e,t){console.warn((t?t+": ":"")+e)},Sd=function(e){W1("binding")},Ad=function(e){return 0},Cd=function(){return"/"},Id=function(e){},Td={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Nd=Xr,Od=[],kd={},Rd=!1,Md={},Dd=Xr,Pd=Xr,Ga=function(){return{}},Ld=Ga,Bd=Ga,jd=Xr,Fd=Xr,Ud=Xr,zd={},Wd={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Hd=Xr,Vd=Xr,$d=Xr,Gd=Xr,Yd=Xr,Xd=Xr,qd=Xr,Qd=void 0,Kd=void 0,Zd=void 0,Jd=Xr,e0=2,t0=1,r0="/bin/usr/node",n0=9229,i0="node",s0=[],o0=Xr,Ai={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Ai.now===void 0&&(qh=Date.now(),Ai.timing&&Ai.timing.navigationStart&&(qh=Ai.timing.navigationStart),Ai.now=()=>Date.now()-qh),Bu=1e9,Lu.bigint=function(e){var t=Lu(e);return typeof BigInt>"u"?t[0]*Bu+t[1]:BigInt(t[0]*Bu)+BigInt(t[1])},a0=10,l0={},u0=0,c0=wi,h0=wi,f0=wi,d0=wi,p0=wi,g0=Xr,m0=wi,y0=wi,H1={version:bd,versions:_d,arch:md,platform:yd,release:Td,_rawDebug:Nd,moduleLoadList:Od,binding:Sd,_linkedBinding:Y2,_events:l0,_eventsCount:u0,_maxListeners:a0,on:wi,addListener:c0,once:h0,off:f0,removeListener:d0,removeAllListeners:p0,emit:g0,prependListener:m0,prependOnceListener:y0,listeners:ex,domain:kd,_exiting:Rd,config:Md,dlopen:X2,uptime:J2,_getActiveRequests:q2,_getActiveHandles:Q2,reallyExit:Dd,_kill:Pd,cpuUsage:Ga,resourceUsage:Ld,memoryUsage:Bd,kill:jd,exit:Fd,openStdin:Ud,allowedNodeEnvironmentFlags:zd,assert:K2,features:Wd,_fatalExceptions:Hd,setUncaughtExceptionCaptureCallback:Vd,hasUncaughtExceptionCaptureCallback:Z2,emitWarning:Ed,nextTick:$2,_tickCallback:$d,_debugProcess:Gd,_debugEnd:Yd,_startProfilerIdleNotifier:Xd,_stopProfilerIdleNotifier:qd,stdout:Qd,stdin:Zd,stderr:Kd,abort:Jd,umask:Ad,chdir:Id,cwd:Cd,env:wd,title:gd,argv:xd,execArgv:vd,pid:e0,ppid:t0,execPath:r0,debugPort:n0,hrtime:Lu,argv0:i0,_preload_modules:s0,setSourceMapsEnabled:o0}}),ze=on(()=>{WI()}),kr={};xa(kr,{Buffer:()=>vc,INSPECT_MAX_BYTES:()=>tx,default:()=>xi,kMaxLength:()=>rx});function HI(){if(w0)return Lo;w0=!0,Lo.byteLength=h,Lo.toByteArray=d,Lo.fromByteArray=v;for(var e=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=i.length;a<s;++a)e[a]=i[a],t[i.charCodeAt(a)]=a;t[45]=62,t[95]=63;function u(b){var C=b.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var N=b.indexOf("=");N===-1&&(N=C);var R=N===C?0:4-N%4;return[N,R]}function h(b){var C=u(b),N=C[0],R=C[1];return(N+R)*3/4-R}function f(b,C,N){return(C+N)*3/4-N}function d(b){var C,N=u(b),R=N[0],k=N[1],S=new r(f(b,R,k)),I=0,B=k>0?R-4:R,U;for(U=0;U<B;U+=4)C=t[b.charCodeAt(U)]<<18|t[b.charCodeAt(U+1)]<<12|t[b.charCodeAt(U+2)]<<6|t[b.charCodeAt(U+3)],S[I++]=C>>16&255,S[I++]=C>>8&255,S[I++]=C&255;return k===2&&(C=t[b.charCodeAt(U)]<<2|t[b.charCodeAt(U+1)]>>4,S[I++]=C&255),k===1&&(C=t[b.charCodeAt(U)]<<10|t[b.charCodeAt(U+1)]<<4|t[b.charCodeAt(U+2)]>>2,S[I++]=C>>8&255,S[I++]=C&255),S}function m(b){return e[b>>18&63]+e[b>>12&63]+e[b>>6&63]+e[b&63]}function w(b,C,N){for(var R,k=[],S=C;S<N;S+=3)R=(b[S]<<16&16711680)+(b[S+1]<<8&65280)+(b[S+2]&255),k.push(m(R));return k.join("")}function v(b){for(var C,N=b.length,R=N%3,k=[],S=16383,I=0,B=N-R;I<B;I+=S)k.push(w(b,I,I+S>B?B:I+S));return R===1?(C=b[N-1],k.push(e[C>>2]+e[C<<4&63]+"==")):R===2&&(C=(b[N-2]<<8)+b[N-1],k.push(e[C>>10]+e[C>>4&63]+e[C<<2&63]+"=")),k.join("")}return Lo}function VI(){return x0?Ya:(x0=!0,Ya.read=function(e,t,r,i,a){var s,u,h=a*8-i-1,f=(1<<h)-1,d=f>>1,m=-7,w=r?a-1:0,v=r?-1:1,b=e[t+w];for(w+=v,s=b&(1<<-m)-1,b>>=-m,m+=h;m>0;s=s*256+e[t+w],w+=v,m-=8);for(u=s&(1<<-m)-1,s>>=-m,m+=i;m>0;u=u*256+e[t+w],w+=v,m-=8);if(s===0)s=1-d;else{if(s===f)return u?NaN:(b?-1:1)*(1/0);u=u+Math.pow(2,i),s=s-d}return(b?-1:1)*u*Math.pow(2,s-i)},Ya.write=function(e,t,r,i,a,s){var u,h,f,d=s*8-a-1,m=(1<<d)-1,w=m>>1,v=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=i?0:s-1,C=i?1:-1,N=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(h=isNaN(t)?1:0,u=m):(u=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-u))<1&&(u--,f*=2),u+w>=1?t+=v/f:t+=v*Math.pow(2,1-w),t*f>=2&&(u++,f/=2),u+w>=m?(h=0,u=m):u+w>=1?(h=(t*f-1)*Math.pow(2,a),u=u+w):(h=t*Math.pow(2,w-1)*Math.pow(2,a),u=0));a>=8;e[r+b]=h&255,b+=C,h/=256,a-=8);for(u=u<<a|h,d+=a;d>0;e[r+b]=u&255,b+=C,u/=256,d-=8);e[r+b-C]|=N*128},Ya)}function $I(){if(v0)return ts;v0=!0;let e=HI(),t=VI(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ts.Buffer=u,ts.SlowBuffer=k,ts.INSPECT_MAX_BYTES=50;let i=2147483647;ts.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=a(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{let E=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(E,A),E.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function s(E){if(E>i)throw new RangeError('The value "'+E+'" is invalid for option "size"');let A=new Uint8Array(E);return Object.setPrototypeOf(A,u.prototype),A}function u(E,A,T){if(typeof E=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(E)}return h(E,A,T)}u.poolSize=8192;function h(E,A,T){if(typeof E=="string")return w(E,A);if(ArrayBuffer.isView(E))return b(E);if(E==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E);if(X(E,ArrayBuffer)||E&&X(E.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(X(E,SharedArrayBuffer)||E&&X(E.buffer,SharedArrayBuffer)))return C(E,A,T);if(typeof E=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let j=E.valueOf&&E.valueOf();if(j!=null&&j!==E)return u.from(j,A,T);let K=N(E);if(K)return K;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof E[Symbol.toPrimitive]=="function")return u.from(E[Symbol.toPrimitive]("string"),A,T);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E)}u.from=function(E,A,T){return h(E,A,T)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function f(E){if(typeof E!="number")throw new TypeError('"size" argument must be of type number');if(E<0)throw new RangeError('The value "'+E+'" is invalid for option "size"')}function d(E,A,T){return f(E),E<=0?s(E):A!==void 0?typeof T=="string"?s(E).fill(A,T):s(E).fill(A):s(E)}u.alloc=function(E,A,T){return d(E,A,T)};function m(E){return f(E),s(E<0?0:R(E)|0)}u.allocUnsafe=function(E){return m(E)},u.allocUnsafeSlow=function(E){return m(E)};function w(E,A){if((typeof A!="string"||A==="")&&(A="utf8"),!u.isEncoding(A))throw new TypeError("Unknown encoding: "+A);let T=S(E,A)|0,j=s(T),K=j.write(E,A);return K!==T&&(j=j.slice(0,K)),j}function v(E){let A=E.length<0?0:R(E.length)|0,T=s(A);for(let j=0;j<A;j+=1)T[j]=E[j]&255;return T}function b(E){if(X(E,Uint8Array)){let A=new Uint8Array(E);return C(A.buffer,A.byteOffset,A.byteLength)}return v(E)}function C(E,A,T){if(A<0||E.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(E.byteLength<A+(T||0))throw new RangeError('"length" is outside of buffer bounds');let j;return A===void 0&&T===void 0?j=new Uint8Array(E):T===void 0?j=new Uint8Array(E,A):j=new Uint8Array(E,A,T),Object.setPrototypeOf(j,u.prototype),j}function N(E){if(u.isBuffer(E)){let A=R(E.length)|0,T=s(A);return T.length===0||E.copy(T,0,0,A),T}if(E.length!==void 0)return typeof E.length!="number"||Le(E.length)?s(0):v(E);if(E.type==="Buffer"&&Array.isArray(E.data))return v(E.data)}function R(E){if(E>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return E|0}function k(E){return+E!=E&&(E=0),u.alloc(+E)}u.isBuffer=function(E){return E!=null&&E._isBuffer===!0&&E!==u.prototype},u.compare=function(E,A){if(X(E,Uint8Array)&&(E=u.from(E,E.offset,E.byteLength)),X(A,Uint8Array)&&(A=u.from(A,A.offset,A.byteLength)),!u.isBuffer(E)||!u.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(E===A)return 0;let T=E.length,j=A.length;for(let K=0,re=Math.min(T,j);K<re;++K)if(E[K]!==A[K]){T=E[K],j=A[K];break}return T<j?-1:j<T?1:0},u.isEncoding=function(E){switch(String(E).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(E,A){if(!Array.isArray(E))throw new TypeError('"list" argument must be an Array of Buffers');if(E.length===0)return u.alloc(0);let T;if(A===void 0)for(A=0,T=0;T<E.length;++T)A+=E[T].length;let j=u.allocUnsafe(A),K=0;for(T=0;T<E.length;++T){let re=E[T];if(X(re,Uint8Array))K+re.length>j.length?(u.isBuffer(re)||(re=u.from(re)),re.copy(j,K)):Uint8Array.prototype.set.call(j,re,K);else if(u.isBuffer(re))re.copy(j,K);else throw new TypeError('"list" argument must be an Array of Buffers');K+=re.length}return j};function S(E,A){if(u.isBuffer(E))return E.length;if(ArrayBuffer.isView(E)||X(E,ArrayBuffer))return E.byteLength;if(typeof E!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof E);let T=E.length,j=arguments.length>2&&arguments[2]===!0;if(!j&&T===0)return 0;let K=!1;for(;;)switch(A){case"ascii":case"latin1":case"binary":return T;case"utf8":case"utf-8":return ie(E).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T*2;case"hex":return T>>>1;case"base64":return ve(E).length;default:if(K)return j?-1:ie(E).length;A=(""+A).toLowerCase(),K=!0}}u.byteLength=S;function I(E,A,T){let j=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((T===void 0||T>this.length)&&(T=this.length),T<=0)||(T>>>=0,A>>>=0,T<=A))return"";for(E||(E="utf8");;)switch(E){case"hex":return he(this,A,T);case"utf8":case"utf-8":return ue(this,A,T);case"ascii":return Be(this,A,T);case"latin1":case"binary":return _e(this,A,T);case"base64":return H(this,A,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Me(this,A,T);default:if(j)throw new TypeError("Unknown encoding: "+E);E=(E+"").toLowerCase(),j=!0}}u.prototype._isBuffer=!0;function B(E,A,T){let j=E[A];E[A]=E[T],E[T]=j}u.prototype.swap16=function(){let E=this.length;if(E%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let A=0;A<E;A+=2)B(this,A,A+1);return this},u.prototype.swap32=function(){let E=this.length;if(E%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<E;A+=4)B(this,A,A+3),B(this,A+1,A+2);return this},u.prototype.swap64=function(){let E=this.length;if(E%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let A=0;A<E;A+=8)B(this,A,A+7),B(this,A+1,A+6),B(this,A+2,A+5),B(this,A+3,A+4);return this},u.prototype.toString=function(){let E=this.length;return E===0?"":arguments.length===0?ue(this,0,E):I.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(E){if(!u.isBuffer(E))throw new TypeError("Argument must be a Buffer");return this===E?!0:u.compare(this,E)===0},u.prototype.inspect=function(){let E="",A=ts.INSPECT_MAX_BYTES;return E=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(E+=" ... "),"<Buffer "+E+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(E,A,T,j,K){if(X(E,Uint8Array)&&(E=u.from(E,E.offset,E.byteLength)),!u.isBuffer(E))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof E);if(A===void 0&&(A=0),T===void 0&&(T=E?E.length:0),j===void 0&&(j=0),K===void 0&&(K=this.length),A<0||T>E.length||j<0||K>this.length)throw new RangeError("out of range index");if(j>=K&&A>=T)return 0;if(j>=K)return-1;if(A>=T)return 1;if(A>>>=0,T>>>=0,j>>>=0,K>>>=0,this===E)return 0;let re=K-j,me=T-A,Ve=Math.min(re,me),ye=this.slice(j,K),Je=E.slice(A,T);for(let tt=0;tt<Ve;++tt)if(ye[tt]!==Je[tt]){re=ye[tt],me=Je[tt];break}return re<me?-1:me<re?1:0};function U(E,A,T,j,K){if(E.length===0)return-1;if(typeof T=="string"?(j=T,T=0):T>2147483647?T=2147483647:T<-2147483648&&(T=-2147483648),T=+T,Le(T)&&(T=K?0:E.length-1),T<0&&(T=E.length+T),T>=E.length){if(K)return-1;T=E.length-1}else if(T<0)if(K)T=0;else return-1;if(typeof A=="string"&&(A=u.from(A,j)),u.isBuffer(A))return A.length===0?-1:L(E,A,T,j,K);if(typeof A=="number")return A=A&255,typeof Uint8Array.prototype.indexOf=="function"?K?Uint8Array.prototype.indexOf.call(E,A,T):Uint8Array.prototype.lastIndexOf.call(E,A,T):L(E,[A],T,j,K);throw new TypeError("val must be string, number or Buffer")}function L(E,A,T,j,K){let re=1,me=E.length,Ve=A.length;if(j!==void 0&&(j=String(j).toLowerCase(),j==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(E.length<2||A.length<2)return-1;re=2,me/=2,Ve/=2,T/=2}function ye(tt,et){return re===1?tt[et]:tt.readUInt16BE(et*re)}let Je;if(K){let tt=-1;for(Je=T;Je<me;Je++)if(ye(E,Je)===ye(A,tt===-1?0:Je-tt)){if(tt===-1&&(tt=Je),Je-tt+1===Ve)return tt*re}else tt!==-1&&(Je-=Je-tt),tt=-1}else for(T+Ve>me&&(T=me-Ve),Je=T;Je>=0;Je--){let tt=!0;for(let et=0;et<Ve;et++)if(ye(E,Je+et)!==ye(A,et)){tt=!1;break}if(tt)return Je}return-1}u.prototype.includes=function(E,A,T){return this.indexOf(E,A,T)!==-1},u.prototype.indexOf=function(E,A,T){return U(this,E,A,T,!0)},u.prototype.lastIndexOf=function(E,A,T){return U(this,E,A,T,!1)};function P(E,A,T,j){T=Number(T)||0;let K=E.length-T;j?(j=Number(j),j>K&&(j=K)):j=K;let re=A.length;j>re/2&&(j=re/2);let me;for(me=0;me<j;++me){let Ve=parseInt(A.substr(me*2,2),16);if(Le(Ve))return me;E[T+me]=Ve}return me}function W(E,A,T,j){return je(ie(A,E.length-T),E,T,j)}function q(E,A,T,j){return je(ge(A),E,T,j)}function pe(E,A,T,j){return je(ve(A),E,T,j)}function Ae(E,A,T,j){return je(Ee(A,E.length-T),E,T,j)}u.prototype.write=function(E,A,T,j){if(A===void 0)j="utf8",T=this.length,A=0;else if(T===void 0&&typeof A=="string")j=A,T=this.length,A=0;else if(isFinite(A))A=A>>>0,isFinite(T)?(T=T>>>0,j===void 0&&(j="utf8")):(j=T,T=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let K=this.length-A;if((T===void 0||T>K)&&(T=K),E.length>0&&(T<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");let re=!1;for(;;)switch(j){case"hex":return P(this,E,A,T);case"utf8":case"utf-8":return W(this,E,A,T);case"ascii":case"latin1":case"binary":return q(this,E,A,T);case"base64":return pe(this,E,A,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ae(this,E,A,T);default:if(re)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),re=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(E,A,T){return A===0&&T===E.length?e.fromByteArray(E):e.fromByteArray(E.slice(A,T))}function ue(E,A,T){T=Math.min(E.length,T);let j=[],K=A;for(;K<T;){let re=E[K],me=null,Ve=re>239?4:re>223?3:re>191?2:1;if(K+Ve<=T){let ye,Je,tt,et;switch(Ve){case 1:re<128&&(me=re);break;case 2:ye=E[K+1],(ye&192)===128&&(et=(re&31)<<6|ye&63,et>127&&(me=et));break;case 3:ye=E[K+1],Je=E[K+2],(ye&192)===128&&(Je&192)===128&&(et=(re&15)<<12|(ye&63)<<6|Je&63,et>2047&&(et<55296||et>57343)&&(me=et));break;case 4:ye=E[K+1],Je=E[K+2],tt=E[K+3],(ye&192)===128&&(Je&192)===128&&(tt&192)===128&&(et=(re&15)<<18|(ye&63)<<12|(Je&63)<<6|tt&63,et>65535&&et<1114112&&(me=et))}}me===null?(me=65533,Ve=1):me>65535&&(me-=65536,j.push(me>>>10&1023|55296),me=56320|me&1023),j.push(me),K+=Ve}return z(j)}let xe=4096;function z(E){let A=E.length;if(A<=xe)return String.fromCharCode.apply(String,E);let T="",j=0;for(;j<A;)T+=String.fromCharCode.apply(String,E.slice(j,j+=xe));return T}function Be(E,A,T){let j="";T=Math.min(E.length,T);for(let K=A;K<T;++K)j+=String.fromCharCode(E[K]&127);return j}function _e(E,A,T){let j="";T=Math.min(E.length,T);for(let K=A;K<T;++K)j+=String.fromCharCode(E[K]);return j}function he(E,A,T){let j=E.length;(!A||A<0)&&(A=0),(!T||T<0||T>j)&&(T=j);let K="";for(let re=A;re<T;++re)K+=Ye[E[re]];return K}function Me(E,A,T){let j=E.slice(A,T),K="";for(let re=0;re<j.length-1;re+=2)K+=String.fromCharCode(j[re]+j[re+1]*256);return K}u.prototype.slice=function(E,A){let T=this.length;E=~~E,A=A===void 0?T:~~A,E<0?(E+=T,E<0&&(E=0)):E>T&&(E=T),A<0?(A+=T,A<0&&(A=0)):A>T&&(A=T),A<E&&(A=E);let j=this.subarray(E,A);return Object.setPrototypeOf(j,u.prototype),j};function ne(E,A,T){if(E%1!==0||E<0)throw new RangeError("offset is not uint");if(E+A>T)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(E,A,T){E=E>>>0,A=A>>>0,T||ne(E,A,this.length);let j=this[E],K=1,re=0;for(;++re<A&&(K*=256);)j+=this[E+re]*K;return j},u.prototype.readUintBE=u.prototype.readUIntBE=function(E,A,T){E=E>>>0,A=A>>>0,T||ne(E,A,this.length);let j=this[E+--A],K=1;for(;A>0&&(K*=256);)j+=this[E+--A]*K;return j},u.prototype.readUint8=u.prototype.readUInt8=function(E,A){return E=E>>>0,A||ne(E,1,this.length),this[E]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(E,A){return E=E>>>0,A||ne(E,2,this.length),this[E]|this[E+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(E,A){return E=E>>>0,A||ne(E,2,this.length),this[E]<<8|this[E+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(E,A){return E=E>>>0,A||ne(E,4,this.length),(this[E]|this[E+1]<<8|this[E+2]<<16)+this[E+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(E,A){return E=E>>>0,A||ne(E,4,this.length),this[E]*16777216+(this[E+1]<<16|this[E+2]<<8|this[E+3])},u.prototype.readBigUInt64LE=Ce(function(E){E=E>>>0,fe(E,"offset");let A=this[E],T=this[E+7];(A===void 0||T===void 0)&&Se(E,this.length-8);let j=A+this[++E]*2**8+this[++E]*2**16+this[++E]*2**24,K=this[++E]+this[++E]*2**8+this[++E]*2**16+T*2**24;return BigInt(j)+(BigInt(K)<<BigInt(32))}),u.prototype.readBigUInt64BE=Ce(function(E){E=E>>>0,fe(E,"offset");let A=this[E],T=this[E+7];(A===void 0||T===void 0)&&Se(E,this.length-8);let j=A*2**24+this[++E]*2**16+this[++E]*2**8+this[++E],K=this[++E]*2**24+this[++E]*2**16+this[++E]*2**8+T;return(BigInt(j)<<BigInt(32))+BigInt(K)}),u.prototype.readIntLE=function(E,A,T){E=E>>>0,A=A>>>0,T||ne(E,A,this.length);let j=this[E],K=1,re=0;for(;++re<A&&(K*=256);)j+=this[E+re]*K;return K*=128,j>=K&&(j-=Math.pow(2,8*A)),j},u.prototype.readIntBE=function(E,A,T){E=E>>>0,A=A>>>0,T||ne(E,A,this.length);let j=A,K=1,re=this[E+--j];for(;j>0&&(K*=256);)re+=this[E+--j]*K;return K*=128,re>=K&&(re-=Math.pow(2,8*A)),re},u.prototype.readInt8=function(E,A){return E=E>>>0,A||ne(E,1,this.length),this[E]&128?(255-this[E]+1)*-1:this[E]},u.prototype.readInt16LE=function(E,A){E=E>>>0,A||ne(E,2,this.length);let T=this[E]|this[E+1]<<8;return T&32768?T|4294901760:T},u.prototype.readInt16BE=function(E,A){E=E>>>0,A||ne(E,2,this.length);let T=this[E+1]|this[E]<<8;return T&32768?T|4294901760:T},u.prototype.readInt32LE=function(E,A){return E=E>>>0,A||ne(E,4,this.length),this[E]|this[E+1]<<8|this[E+2]<<16|this[E+3]<<24},u.prototype.readInt32BE=function(E,A){return E=E>>>0,A||ne(E,4,this.length),this[E]<<24|this[E+1]<<16|this[E+2]<<8|this[E+3]},u.prototype.readBigInt64LE=Ce(function(E){E=E>>>0,fe(E,"offset");let A=this[E],T=this[E+7];(A===void 0||T===void 0)&&Se(E,this.length-8);let j=this[E+4]+this[E+5]*2**8+this[E+6]*2**16+(T<<24);return(BigInt(j)<<BigInt(32))+BigInt(A+this[++E]*2**8+this[++E]*2**16+this[++E]*2**24)}),u.prototype.readBigInt64BE=Ce(function(E){E=E>>>0,fe(E,"offset");let A=this[E],T=this[E+7];(A===void 0||T===void 0)&&Se(E,this.length-8);let j=(A<<24)+this[++E]*2**16+this[++E]*2**8+this[++E];return(BigInt(j)<<BigInt(32))+BigInt(this[++E]*2**24+this[++E]*2**16+this[++E]*2**8+T)}),u.prototype.readFloatLE=function(E,A){return E=E>>>0,A||ne(E,4,this.length),t.read(this,E,!0,23,4)},u.prototype.readFloatBE=function(E,A){return E=E>>>0,A||ne(E,4,this.length),t.read(this,E,!1,23,4)},u.prototype.readDoubleLE=function(E,A){return E=E>>>0,A||ne(E,8,this.length),t.read(this,E,!0,52,8)},u.prototype.readDoubleBE=function(E,A){return E=E>>>0,A||ne(E,8,this.length),t.read(this,E,!1,52,8)};function Re(E,A,T,j,K,re){if(!u.isBuffer(E))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>K||A<re)throw new RangeError('"value" argument is out of bounds');if(T+j>E.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(E,A,T,j){if(E=+E,A=A>>>0,T=T>>>0,!j){let me=Math.pow(2,8*T)-1;Re(this,E,A,T,me,0)}let K=1,re=0;for(this[A]=E&255;++re<T&&(K*=256);)this[A+re]=E/K&255;return A+T},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(E,A,T,j){if(E=+E,A=A>>>0,T=T>>>0,!j){let me=Math.pow(2,8*T)-1;Re(this,E,A,T,me,0)}let K=T-1,re=1;for(this[A+K]=E&255;--K>=0&&(re*=256);)this[A+K]=E/re&255;return A+T},u.prototype.writeUint8=u.prototype.writeUInt8=function(E,A,T){return E=+E,A=A>>>0,T||Re(this,E,A,1,255,0),this[A]=E&255,A+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(E,A,T){return E=+E,A=A>>>0,T||Re(this,E,A,2,65535,0),this[A]=E&255,this[A+1]=E>>>8,A+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(E,A,T){return E=+E,A=A>>>0,T||Re(this,E,A,2,65535,0),this[A]=E>>>8,this[A+1]=E&255,A+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(E,A,T){return E=+E,A=A>>>0,T||Re(this,E,A,4,4294967295,0),this[A+3]=E>>>24,this[A+2]=E>>>16,this[A+1]=E>>>8,this[A]=E&255,A+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(E,A,T){return E=+E,A=A>>>0,T||Re(this,E,A,4,4294967295,0),this[A]=E>>>24,this[A+1]=E>>>16,this[A+2]=E>>>8,this[A+3]=E&255,A+4};function G(E,A,T,j,K){le(A,j,K,E,T,7);let re=Number(A&BigInt(4294967295));E[T++]=re,re=re>>8,E[T++]=re,re=re>>8,E[T++]=re,re=re>>8,E[T++]=re;let me=Number(A>>BigInt(32)&BigInt(4294967295));return E[T++]=me,me=me>>8,E[T++]=me,me=me>>8,E[T++]=me,me=me>>8,E[T++]=me,T}function Oe(E,A,T,j,K){le(A,j,K,E,T,7);let re=Number(A&BigInt(4294967295));E[T+7]=re,re=re>>8,E[T+6]=re,re=re>>8,E[T+5]=re,re=re>>8,E[T+4]=re;let me=Number(A>>BigInt(32)&BigInt(4294967295));return E[T+3]=me,me=me>>8,E[T+2]=me,me=me>>8,E[T+1]=me,me=me>>8,E[T]=me,T+8}u.prototype.writeBigUInt64LE=Ce(function(E,A=0){return G(this,E,A,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Ce(function(E,A=0){return Oe(this,E,A,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(E,A,T,j){if(E=+E,A=A>>>0,!j){let Ve=Math.pow(2,8*T-1);Re(this,E,A,T,Ve-1,-Ve)}let K=0,re=1,me=0;for(this[A]=E&255;++K<T&&(re*=256);)E<0&&me===0&&this[A+K-1]!==0&&(me=1),this[A+K]=(E/re>>0)-me&255;return A+T},u.prototype.writeIntBE=function(E,A,T,j){if(E=+E,A=A>>>0,!j){let Ve=Math.pow(2,8*T-1);Re(this,E,A,T,Ve-1,-Ve)}let K=T-1,re=1,me=0;for(this[A+K]=E&255;--K>=0&&(re*=256);)E<0&&me===0&&this[A+K+1]!==0&&(me=1),this[A+K]=(E/re>>0)-me&255;return A+T},u.prototype.writeInt8=function(E,A,T){return E=+E,A=A>>>0,T||Re(this,E,A,1,127,-128),E<0&&(E=255+E+1),this[A]=E&255,A+1},u.prototype.writeInt16LE=function(E,A,T){return E=+E,A=A>>>0,T||Re(this,E,A,2,32767,-32768),this[A]=E&255,this[A+1]=E>>>8,A+2},u.prototype.writeInt16BE=function(E,A,T){return E=+E,A=A>>>0,T||Re(this,E,A,2,32767,-32768),this[A]=E>>>8,this[A+1]=E&255,A+2},u.prototype.writeInt32LE=function(E,A,T){return E=+E,A=A>>>0,T||Re(this,E,A,4,2147483647,-2147483648),this[A]=E&255,this[A+1]=E>>>8,this[A+2]=E>>>16,this[A+3]=E>>>24,A+4},u.prototype.writeInt32BE=function(E,A,T){return E=+E,A=A>>>0,T||Re(this,E,A,4,2147483647,-2147483648),E<0&&(E=4294967295+E+1),this[A]=E>>>24,this[A+1]=E>>>16,this[A+2]=E>>>8,this[A+3]=E&255,A+4},u.prototype.writeBigInt64LE=Ce(function(E,A=0){return G(this,E,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Ce(function(E,A=0){return Oe(this,E,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Fe(E,A,T,j,K,re){if(T+j>E.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("Index out of range")}function oe(E,A,T,j,K){return A=+A,T=T>>>0,K||Fe(E,A,T,4),t.write(E,A,T,j,23,4),T+4}u.prototype.writeFloatLE=function(E,A,T){return oe(this,E,A,!0,T)},u.prototype.writeFloatBE=function(E,A,T){return oe(this,E,A,!1,T)};function Pe(E,A,T,j,K){return A=+A,T=T>>>0,K||Fe(E,A,T,8),t.write(E,A,T,j,52,8),T+8}u.prototype.writeDoubleLE=function(E,A,T){return Pe(this,E,A,!0,T)},u.prototype.writeDoubleBE=function(E,A,T){return Pe(this,E,A,!1,T)},u.prototype.copy=function(E,A,T,j){if(!u.isBuffer(E))throw new TypeError("argument should be a Buffer");if(T||(T=0),!j&&j!==0&&(j=this.length),A>=E.length&&(A=E.length),A||(A=0),j>0&&j<T&&(j=T),j===T||E.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(T<0||T>=this.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),E.length-A<j-T&&(j=E.length-A+T);let K=j-T;return this===E&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(A,T,j):Uint8Array.prototype.set.call(E,this.subarray(T,j),A),K},u.prototype.fill=function(E,A,T,j){if(typeof E=="string"){if(typeof A=="string"?(j=A,A=0,T=this.length):typeof T=="string"&&(j=T,T=this.length),j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!u.isEncoding(j))throw new TypeError("Unknown encoding: "+j);if(E.length===1){let re=E.charCodeAt(0);(j==="utf8"&&re<128||j==="latin1")&&(E=re)}}else typeof E=="number"?E=E&255:typeof E=="boolean"&&(E=Number(E));if(A<0||this.length<A||this.length<T)throw new RangeError("Out of range index");if(T<=A)return this;A=A>>>0,T=T===void 0?this.length:T>>>0,E||(E=0);let K;if(typeof E=="number")for(K=A;K<T;++K)this[K]=E;else{let re=u.isBuffer(E)?E:u.from(E,j),me=re.length;if(me===0)throw new TypeError('The value "'+E+'" is invalid for argument "value"');for(K=0;K<T-A;++K)this[K+A]=re[K%me]}return this};let de={};function ee(E,A,T){de[E]=class extends T{constructor(){super(),Object.defineProperty(this,"message",{value:A.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${E}]`,this.stack,delete this.name}get code(){return E}set code(j){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:j,writable:!0})}toString(){return`${this.name} [${E}]: ${this.message}`}}}ee("ERR_BUFFER_OUT_OF_BOUNDS",function(E){return E?`${E} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ee("ERR_INVALID_ARG_TYPE",function(E,A){return`The "${E}" argument must be of type number. Received type ${typeof A}`},TypeError),ee("ERR_OUT_OF_RANGE",function(E,A,T){let j=`The value of "${E}" is out of range.`,K=T;return Number.isInteger(T)&&Math.abs(T)>2**32?K=Ne(String(T)):typeof T=="bigint"&&(K=String(T),(T>BigInt(2)**BigInt(32)||T<-(BigInt(2)**BigInt(32)))&&(K=Ne(K)),K+="n"),j+=` It must be ${A}. Received ${K}`,j},RangeError);function Ne(E){let A="",T=E.length,j=E[0]==="-"?1:0;for(;T>=j+4;T-=3)A=`_${E.slice(T-3,T)}${A}`;return`${E.slice(0,T)}${A}`}function ce(E,A,T){fe(A,"offset"),(E[A]===void 0||E[A+T]===void 0)&&Se(A,E.length-(T+1))}function le(E,A,T,j,K,re){if(E>T||E<A){let me=typeof A=="bigint"?"n":"",Ve;throw A===0||A===BigInt(0)?Ve=`>= 0${me} and < 2${me} ** ${(re+1)*8}${me}`:Ve=`>= -(2${me} ** ${(re+1)*8-1}${me}) and < 2 ** ${(re+1)*8-1}${me}`,new de.ERR_OUT_OF_RANGE("value",Ve,E)}ce(j,K,re)}function fe(E,A){if(typeof E!="number")throw new de.ERR_INVALID_ARG_TYPE(A,"number",E)}function Se(E,A,T){throw Math.floor(E)!==E?(fe(E,T),new de.ERR_OUT_OF_RANGE("offset","an integer",E)):A<0?new de.ERR_BUFFER_OUT_OF_BOUNDS:new de.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${A}`,E)}let ke=/[^+/0-9A-Za-z-_]/g;function J(E){if(E=E.split("=")[0],E=E.trim().replace(ke,""),E.length<2)return"";for(;E.length%4!==0;)E=E+"=";return E}function ie(E,A){A=A||1/0;let T,j=E.length,K=null,re=[];for(let me=0;me<j;++me){if(T=E.charCodeAt(me),T>55295&&T<57344){if(!K){if(T>56319){(A-=3)>-1&&re.push(239,191,189);continue}else if(me+1===j){(A-=3)>-1&&re.push(239,191,189);continue}K=T;continue}if(T<56320){(A-=3)>-1&&re.push(239,191,189),K=T;continue}T=(K-55296<<10|T-56320)+65536}else K&&(A-=3)>-1&&re.push(239,191,189);if(K=null,T<128){if((A-=1)<0)break;re.push(T)}else if(T<2048){if((A-=2)<0)break;re.push(T>>6|192,T&63|128)}else if(T<65536){if((A-=3)<0)break;re.push(T>>12|224,T>>6&63|128,T&63|128)}else if(T<1114112){if((A-=4)<0)break;re.push(T>>18|240,T>>12&63|128,T>>6&63|128,T&63|128)}else throw new Error("Invalid code point")}return re}function ge(E){let A=[];for(let T=0;T<E.length;++T)A.push(E.charCodeAt(T)&255);return A}function Ee(E,A){let T,j,K,re=[];for(let me=0;me<E.length&&!((A-=2)<0);++me)T=E.charCodeAt(me),j=T>>8,K=T%256,re.push(K),re.push(j);return re}function ve(E){return e.toByteArray(J(E))}function je(E,A,T,j){let K;for(K=0;K<j&&!(K+T>=A.length||K>=E.length);++K)A[K+T]=E[K];return K}function X(E,A){return E instanceof A||E!=null&&E.constructor!=null&&E.constructor.name!=null&&E.constructor.name===A.name}function Le(E){return E!==E}let Ye=function(){let E="0123456789abcdef",A=new Array(256);for(let T=0;T<16;++T){let j=T*16;for(let K=0;K<16;++K)A[j+K]=E[T]+E[K]}return A}();function Ce(E){return typeof BigInt>"u"?ct:E}function ct(){throw new Error("BigInt not supported")}return ts}var Lo,w0,Ya,x0,ts,v0,xi,vc,tx,rx,Rr=on(()=>{Ue(),We(),ze(),Lo={},w0=!1,Ya={},x0=!1,ts={},v0=!1,xi=$I(),xi.Buffer,xi.SlowBuffer,xi.INSPECT_MAX_BYTES,xi.kMaxLength,vc=xi.Buffer,tx=xi.INSPECT_MAX_BYTES,rx=xi.kMaxLength}),We=on(()=>{Rr()}),GI=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"__esModule",{value:!0});var t=class{constructor(r){this.aliasToTopic={},this.max=r}put(r,i){return i===0||i>this.max?!1:(this.aliasToTopic[i]=r,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(r){return this.aliasToTopic[r]}clear(){this.aliasToTopic={}}};e.default=t}),or=$e((e,t)=>{Ue(),We(),ze();var r=class extends Error{constructor(i){if(!Array.isArray(i))throw new TypeError(`Expected input to be an Array, got ${typeof i}`);let a="";for(let s=0;s<i.length;s++)a+=`    ${i[s].stack}
`;super(a),this.name="AggregateError",this.errors=i}};t.exports={AggregateError:r,ArrayIsArray(i){return Array.isArray(i)},ArrayPrototypeIncludes(i,a){return i.includes(a)},ArrayPrototypeIndexOf(i,a){return i.indexOf(a)},ArrayPrototypeJoin(i,a){return i.join(a)},ArrayPrototypeMap(i,a){return i.map(a)},ArrayPrototypePop(i,a){return i.pop(a)},ArrayPrototypePush(i,a){return i.push(a)},ArrayPrototypeSlice(i,a,s){return i.slice(a,s)},Error,FunctionPrototypeCall(i,a,...s){return i.call(a,...s)},FunctionPrototypeSymbolHasInstance(i,a){return Function.prototype[Symbol.hasInstance].call(i,a)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(i,a){return Object.defineProperties(i,a)},ObjectDefineProperty(i,a,s){return Object.defineProperty(i,a,s)},ObjectGetOwnPropertyDescriptor(i,a){return Object.getOwnPropertyDescriptor(i,a)},ObjectKeys(i){return Object.keys(i)},ObjectSetPrototypeOf(i,a){return Object.setPrototypeOf(i,a)},Promise,PromisePrototypeCatch(i,a){return i.catch(a)},PromisePrototypeThen(i,a,s){return i.then(a,s)},PromiseReject(i){return Promise.reject(i)},PromiseResolve(i){return Promise.resolve(i)},ReflectApply:Reflect.apply,RegExpPrototypeTest(i,a){return i.test(a)},SafeSet:Set,String,StringPrototypeSlice(i,a,s){return i.slice(a,s)},StringPrototypeToLowerCase(i){return i.toLowerCase()},StringPrototypeToUpperCase(i){return i.toUpperCase()},StringPrototypeTrim(i){return i.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(i,a,s){return i.set(a,s)},Boolean,Uint8Array}}),nx=$e((e,t)=>{Ue(),We(),ze(),t.exports={format(r,...i){return r.replace(/%([sdifj])/g,function(...[a,s]){let u=i.shift();return s==="f"?u.toFixed(6):s==="j"?JSON.stringify(u):s==="s"&&typeof u=="object"?`${u.constructor!==Object?u.constructor.name:""} {}`.trim():u.toString()})},inspect(r){switch(typeof r){case"string":if(r.includes("'"))if(r.includes('"')){if(!r.includes("`")&&!r.includes("${"))return`\`${r}\``}else return`"${r}"`;return`'${r}'`;case"number":return isNaN(r)?"NaN":Object.is(r,-0)?String(r):r;case"bigint":return`${String(r)}n`;case"boolean":case"undefined":return String(r);case"object":return"{}"}}}}),an=$e((e,t)=>{Ue(),We(),ze();var{format:r,inspect:i}=nx(),{AggregateError:a}=or(),s=globalThis.AggregateError||a,u=Symbol("kIsNodeError"),h=["string","function","number","object","Function","Object","boolean","bigint","symbol"],f=/^([A-Z][a-z0-9]*)+$/,d="__node_internal_",m={};function w(S,I){if(!S)throw new m.ERR_INTERNAL_ASSERTION(I)}function v(S){let I="",B=S.length,U=S[0]==="-"?1:0;for(;B>=U+4;B-=3)I=`_${S.slice(B-3,B)}${I}`;return`${S.slice(0,B)}${I}`}function b(S,I,B){if(typeof I=="function")return w(I.length<=B.length,`Code: ${S}; The provided arguments length (${B.length}) does not match the required ones (${I.length}).`),I(...B);let U=(I.match(/%[dfijoOs]/g)||[]).length;return w(U===B.length,`Code: ${S}; The provided arguments length (${B.length}) does not match the required ones (${U}).`),B.length===0?I:r(I,...B)}function C(S,I,B){B||(B=Error);class U extends B{constructor(...P){super(b(S,I,P))}toString(){return`${this.name} [${S}]: ${this.message}`}}Object.defineProperties(U.prototype,{name:{value:B.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${S}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),U.prototype.code=S,U.prototype[u]=!0,m[S]=U}function N(S){let I=d+S.name;return Object.defineProperty(S,"name",{value:I}),S}function R(S,I){if(S&&I&&S!==I){if(Array.isArray(I.errors))return I.errors.push(S),I;let B=new s([I,S],I.message);return B.code=I.code,B}return S||I}var k=class extends Error{constructor(S="The operation was aborted",I=void 0){if(I!==void 0&&typeof I!="object")throw new m.ERR_INVALID_ARG_TYPE("options","Object",I);super(S,I),this.code="ABORT_ERR",this.name="AbortError"}};C("ERR_ASSERTION","%s",Error),C("ERR_INVALID_ARG_TYPE",(S,I,B)=>{w(typeof S=="string","'name' must be a string"),Array.isArray(I)||(I=[I]);let U="The ";S.endsWith(" argument")?U+=`${S} `:U+=`"${S}" ${S.includes(".")?"property":"argument"} `,U+="must be ";let L=[],P=[],W=[];for(let pe of I)w(typeof pe=="string","All expected entries have to be of type string"),h.includes(pe)?L.push(pe.toLowerCase()):f.test(pe)?P.push(pe):(w(pe!=="object",'The value "object" should be written as "Object"'),W.push(pe));if(P.length>0){let pe=L.indexOf("object");pe!==-1&&(L.splice(L,pe,1),P.push("Object"))}if(L.length>0){switch(L.length){case 1:U+=`of type ${L[0]}`;break;case 2:U+=`one of type ${L[0]} or ${L[1]}`;break;default:{let pe=L.pop();U+=`one of type ${L.join(", ")}, or ${pe}`}}(P.length>0||W.length>0)&&(U+=" or ")}if(P.length>0){switch(P.length){case 1:U+=`an instance of ${P[0]}`;break;case 2:U+=`an instance of ${P[0]} or ${P[1]}`;break;default:{let pe=P.pop();U+=`an instance of ${P.join(", ")}, or ${pe}`}}W.length>0&&(U+=" or ")}switch(W.length){case 0:break;case 1:W[0].toLowerCase()!==W[0]&&(U+="an "),U+=`${W[0]}`;break;case 2:U+=`one of ${W[0]} or ${W[1]}`;break;default:{let pe=W.pop();U+=`one of ${W.join(", ")}, or ${pe}`}}if(B==null)U+=`. Received ${B}`;else if(typeof B=="function"&&B.name)U+=`. Received function ${B.name}`;else if(typeof B=="object"){var q;if((q=B.constructor)!==null&&q!==void 0&&q.name)U+=`. Received an instance of ${B.constructor.name}`;else{let pe=i(B,{depth:-1});U+=`. Received ${pe}`}}else{let pe=i(B,{colors:!1});pe.length>25&&(pe=`${pe.slice(0,25)}...`),U+=`. Received type ${typeof B} (${pe})`}return U},TypeError),C("ERR_INVALID_ARG_VALUE",(S,I,B="is invalid")=>{let U=i(I);return U.length>128&&(U=U.slice(0,128)+"..."),`The ${S.includes(".")?"property":"argument"} '${S}' ${B}. Received ${U}`},TypeError),C("ERR_INVALID_RETURN_VALUE",(S,I,B)=>{var U;let L=B!=null&&(U=B.constructor)!==null&&U!==void 0&&U.name?`instance of ${B.constructor.name}`:`type ${typeof B}`;return`Expected ${S} to be returned from the "${I}" function but got ${L}.`},TypeError),C("ERR_MISSING_ARGS",(...S)=>{w(S.length>0,"At least one arg needs to be specified");let I,B=S.length;switch(S=(Array.isArray(S)?S:[S]).map(U=>`"${U}"`).join(" or "),B){case 1:I+=`The ${S[0]} argument`;break;case 2:I+=`The ${S[0]} and ${S[1]} arguments`;break;default:{let U=S.pop();I+=`The ${S.join(", ")}, and ${U} arguments`}break}return`${I} must be specified`},TypeError),C("ERR_OUT_OF_RANGE",(S,I,B)=>{w(I,'Missing "range" argument');let U;if(Number.isInteger(B)&&Math.abs(B)>2**32)U=v(String(B));else if(typeof B=="bigint"){U=String(B);let L=BigInt(2)**BigInt(32);(B>L||B<-L)&&(U=v(U)),U+="n"}else U=i(B);return`The value of "${S}" is out of range. It must be ${I}. Received ${U}`},RangeError),C("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),C("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),C("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),C("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),C("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),C("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),C("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),C("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),C("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),C("ERR_STREAM_WRITE_AFTER_END","write after end",Error),C("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),t.exports={AbortError:k,aggregateTwoErrors:N(R),hideStackFrames:N,codes:m}}),Rl=$e((e,t)=>{Ue(),We(),ze();var{AbortController:r,AbortSignal:i}=typeof self<"u"?self:typeof window<"u"?window:void 0;t.exports=r,t.exports.AbortSignal=i,t.exports.default=r});function Bt(){Bt.init.call(this)}function ju(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function ix(e){return e._maxListeners===void 0?Bt.defaultMaxListeners:e._maxListeners}function sm(e,t,r,i){var a,s,u,h;if(ju(r),(s=e._events)===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),u=s[t]),u===void 0)u=s[t]=r,++e._eventsCount;else if(typeof u=="function"?u=s[t]=i?[r,u]:[u,r]:i?u.unshift(r):u.push(r),(a=ix(e))>0&&u.length>a&&!u.warned){u.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=e,f.type=t,f.count=u.length,h=f,console&&console.warn&&console.warn(h)}return e}function YI(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function om(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=YI.bind(i);return a.listener=r,i.wrapFn=a,a}function am(e,t,r){var i=e._events;if(i===void 0)return[];var a=i[t];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?function(s){for(var u=new Array(s.length),h=0;h<u.length;++h)u[h]=s[h].listener||s[h];return u}(a):sx(a,a.length)}function lm(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}function sx(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}var um,cm,Us,Qh,Kh,Zh,En,hm=on(()=>{Ue(),We(),ze(),Us=typeof Reflect=="object"?Reflect:null,Qh=Us&&typeof Us.apply=="function"?Us.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},cm=Us&&typeof Us.ownKeys=="function"?Us.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},Kh=Number.isNaN||function(e){return e!=e},um=Bt,Bt.EventEmitter=Bt,Bt.prototype._events=void 0,Bt.prototype._eventsCount=0,Bt.prototype._maxListeners=void 0,Zh=10,Object.defineProperty(Bt,"defaultMaxListeners",{enumerable:!0,get:function(){return Zh},set:function(e){if(typeof e!="number"||e<0||Kh(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Zh=e}}),Bt.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Bt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Kh(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Bt.prototype.getMaxListeners=function(){return ix(this)},Bt.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i=e==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var h=a[e];if(h===void 0)return!1;if(typeof h=="function")Qh(h,this,t);else{var f=h.length,d=sx(h,f);for(r=0;r<f;++r)Qh(d[r],this,t)}return!0},Bt.prototype.addListener=function(e,t){return sm(this,e,t,!1)},Bt.prototype.on=Bt.prototype.addListener,Bt.prototype.prependListener=function(e,t){return sm(this,e,t,!0)},Bt.prototype.once=function(e,t){return ju(t),this.on(e,om(this,e,t)),this},Bt.prototype.prependOnceListener=function(e,t){return ju(t),this.prependListener(e,om(this,e,t)),this},Bt.prototype.removeListener=function(e,t){var r,i,a,s,u;if(ju(t),(i=this._events)===void 0)return this;if((r=i[e])===void 0)return this;if(r===t||r.listener===t)--this._eventsCount==0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(a=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){u=r[s].listener,a=s;break}if(a<0)return this;a===0?r.shift():function(h,f){for(;f+1<h.length;f++)h[f]=h[f+1];h.pop()}(r,a),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,u||t)}return this},Bt.prototype.off=Bt.prototype.removeListener,Bt.prototype.removeAllListeners=function(e){var t,r,i;if((r=this._events)===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var a,s=Object.keys(r);for(i=0;i<s.length;++i)(a=s[i])!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(t=r[e])=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},Bt.prototype.listeners=function(e){return am(this,e,!0)},Bt.prototype.rawListeners=function(e){return am(this,e,!1)},Bt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):lm.call(e,t)},Bt.prototype.listenerCount=lm,Bt.prototype.eventNames=function(){return this._eventsCount>0?cm(this._events):[]},En=um,En.EventEmitter,En.defaultMaxListeners,En.init,En.listenerCount,En.EventEmitter,En.defaultMaxListeners,En.init,En.listenerCount}),Ds={};xa(Ds,{EventEmitter:()=>ox,default:()=>En,defaultMaxListeners:()=>ax,init:()=>lx,listenerCount:()=>ux,on:()=>cx,once:()=>hx});var ox,ax,lx,ux,cx,hx,xo=on(()=>{Ue(),We(),ze(),hm(),hm(),En.once=function(e,t){return new Promise((r,i)=>{function a(...u){s!==void 0&&e.removeListener("error",s),r(u)}let s;t!=="error"&&(s=u=>{e.removeListener(name,a),i(u)},e.once("error",s)),e.once(t,a)})},En.on=function(e,t){let r=[],i=[],a=null,s=!1,u={async next(){let d=r.shift();if(d)return createIterResult(d,!1);if(a){let m=Promise.reject(a);return a=null,m}return s?createIterResult(void 0,!0):new Promise((m,w)=>i.push({resolve:m,reject:w}))},async return(){e.removeListener(t,h),e.removeListener("error",f),s=!0;for(let d of i)d.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(d){a=d,e.removeListener(t,h),e.removeListener("error",f)},[Symbol.asyncIterator](){return this}};return e.on(t,h),e.on("error",f),u;function h(...d){let m=i.shift();m?m.resolve(createIterResult(d,!1)):r.push(d)}function f(d){s=!0;let m=i.shift();m?m.reject(d):a=d,u.return()}},{EventEmitter:ox,defaultMaxListeners:ax,init:lx,listenerCount:ux,on:cx,once:hx}=En}),wn=$e((e,t)=>{Ue(),We(),ze();var r=(Rr(),jt(kr)),{format:i,inspect:a}=nx(),{codes:{ERR_INVALID_ARG_TYPE:s}}=an(),{kResistStopPropagation:u,AggregateError:h,SymbolDispose:f}=or(),d=globalThis.AbortSignal||Rl().AbortSignal,m=globalThis.AbortController||Rl().AbortController,w=Object.getPrototypeOf(async function(){}).constructor,v=globalThis.Blob||r.Blob,b=typeof v<"u"?function(R){return R instanceof v}:function(R){return!1},C=(R,k)=>{if(R!==void 0&&(R===null||typeof R!="object"||!("aborted"in R)))throw new s(k,"AbortSignal",R)},N=(R,k)=>{if(typeof R!="function")throw new s(k,"Function",R)};t.exports={AggregateError:h,kEmptyObject:Object.freeze({}),once(R){let k=!1;return function(...S){k||(k=!0,R.apply(this,S))}},createDeferredPromise:function(){let R,k;return{promise:new Promise((S,I)=>{R=S,k=I}),resolve:R,reject:k}},promisify(R){return new Promise((k,S)=>{R((I,...B)=>I?S(I):k(...B))})},debuglog(){return function(){}},format:i,inspect:a,types:{isAsyncFunction(R){return R instanceof w},isArrayBufferView(R){return ArrayBuffer.isView(R)}},isBlob:b,deprecate(R,k){return R},addAbortListener:(xo(),jt(Ds)).addAbortListener||function(R,k){if(R===void 0)throw new s("signal","AbortSignal",R);C(R,"signal"),N(k,"listener");let S;return R.aborted?queueMicrotask(()=>k()):(R.addEventListener("abort",k,{__proto__:null,once:!0,[u]:!0}),S=()=>{R.removeEventListener("abort",k)}),{__proto__:null,[f](){var I;(I=S)===null||I===void 0||I()}}},AbortSignalAny:d.any||function(R){if(R.length===1)return R[0];let k=new m,S=()=>k.abort();return R.forEach(I=>{C(I,"signals"),I.addEventListener("abort",S,{once:!0})}),k.signal.addEventListener("abort",()=>{R.forEach(I=>I.removeEventListener("abort",S))},{once:!0}),k.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),zl=$e((e,t)=>{Ue(),We(),ze();var{ArrayIsArray:r,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:a,ArrayPrototypeMap:s,NumberIsInteger:u,NumberIsNaN:h,NumberMAX_SAFE_INTEGER:f,NumberMIN_SAFE_INTEGER:d,NumberParseInt:m,ObjectPrototypeHasOwnProperty:w,RegExpPrototypeExec:v,String:b,StringPrototypeToUpperCase:C,StringPrototypeTrim:N}=or(),{hideStackFrames:R,codes:{ERR_SOCKET_BAD_PORT:k,ERR_INVALID_ARG_TYPE:S,ERR_INVALID_ARG_VALUE:I,ERR_OUT_OF_RANGE:B,ERR_UNKNOWN_SIGNAL:U}}=an(),{normalizeEncoding:L}=wn(),{isAsyncFunction:P,isArrayBufferView:W}=wn().types,q={};function pe(X){return X===(X|0)}function Ae(X){return X===X>>>0}var H=/^[0-7]+$/,ue="must be a 32-bit unsigned integer or an octal string";function xe(X,Le,Ye){if(typeof X>"u"&&(X=Ye),typeof X=="string"){if(v(H,X)===null)throw new I(Le,X,ue);X=m(X,8)}return _e(X,Le),X}var z=R((X,Le,Ye=d,Ce=f)=>{if(typeof X!="number")throw new S(Le,"number",X);if(!u(X))throw new B(Le,"an integer",X);if(X<Ye||X>Ce)throw new B(Le,`>= ${Ye} && <= ${Ce}`,X)}),Be=R((X,Le,Ye=-2147483648,Ce=2147483647)=>{if(typeof X!="number")throw new S(Le,"number",X);if(!u(X))throw new B(Le,"an integer",X);if(X<Ye||X>Ce)throw new B(Le,`>= ${Ye} && <= ${Ce}`,X)}),_e=R((X,Le,Ye=!1)=>{if(typeof X!="number")throw new S(Le,"number",X);if(!u(X))throw new B(Le,"an integer",X);let Ce=Ye?1:0,ct=4294967295;if(X<Ce||X>ct)throw new B(Le,`>= ${Ce} && <= ${ct}`,X)});function he(X,Le){if(typeof X!="string")throw new S(Le,"string",X)}function Me(X,Le,Ye=void 0,Ce){if(typeof X!="number")throw new S(Le,"number",X);if(Ye!=null&&X<Ye||Ce!=null&&X>Ce||(Ye!=null||Ce!=null)&&h(X))throw new B(Le,`${Ye!=null?`>= ${Ye}`:""}${Ye!=null&&Ce!=null?" && ":""}${Ce!=null?`<= ${Ce}`:""}`,X)}var ne=R((X,Le,Ye)=>{if(!i(Ye,X)){let Ce="must be one of: "+a(s(Ye,ct=>typeof ct=="string"?`'${ct}'`:b(ct)),", ");throw new I(Le,X,Ce)}});function Re(X,Le){if(typeof X!="boolean")throw new S(Le,"boolean",X)}function G(X,Le,Ye){return X==null||!w(X,Le)?Ye:X[Le]}var Oe=R((X,Le,Ye=null)=>{let Ce=G(Ye,"allowArray",!1),ct=G(Ye,"allowFunction",!1);if(!G(Ye,"nullable",!1)&&X===null||!Ce&&r(X)||typeof X!="object"&&(!ct||typeof X!="function"))throw new S(Le,"Object",X)}),Fe=R((X,Le)=>{if(X!=null&&typeof X!="object"&&typeof X!="function")throw new S(Le,"a dictionary",X)}),oe=R((X,Le,Ye=0)=>{if(!r(X))throw new S(Le,"Array",X);if(X.length<Ye){let Ce=`must be longer than ${Ye}`;throw new I(Le,X,Ce)}});function Pe(X,Le){oe(X,Le);for(let Ye=0;Ye<X.length;Ye++)he(X[Ye],`${Le}[${Ye}]`)}function de(X,Le){oe(X,Le);for(let Ye=0;Ye<X.length;Ye++)Re(X[Ye],`${Le}[${Ye}]`)}function ee(X,Le){oe(X,Le);for(let Ye=0;Ye<X.length;Ye++){let Ce=X[Ye],ct=`${Le}[${Ye}]`;if(Ce==null)throw new S(ct,"AbortSignal",Ce);Se(Ce,ct)}}function Ne(X,Le="signal"){if(he(X,Le),q[X]===void 0)throw q[C(X)]!==void 0?new U(X+" (signals must use all capital letters)"):new U(X)}var ce=R((X,Le="buffer")=>{if(!W(X))throw new S(Le,["Buffer","TypedArray","DataView"],X)});function le(X,Le){let Ye=L(Le),Ce=X.length;if(Ye==="hex"&&Ce%2!==0)throw new I("encoding",Le,`is invalid for data of length ${Ce}`)}function fe(X,Le="Port",Ye=!0){if(typeof X!="number"&&typeof X!="string"||typeof X=="string"&&N(X).length===0||+X!==+X>>>0||X>65535||X===0&&!Ye)throw new k(Le,X,Ye);return X|0}var Se=R((X,Le)=>{if(X!==void 0&&(X===null||typeof X!="object"||!("aborted"in X)))throw new S(Le,"AbortSignal",X)}),ke=R((X,Le)=>{if(typeof X!="function")throw new S(Le,"Function",X)}),J=R((X,Le)=>{if(typeof X!="function"||P(X))throw new S(Le,"Function",X)}),ie=R((X,Le)=>{if(X!==void 0)throw new S(Le,"undefined",X)});function ge(X,Le,Ye){if(!i(Ye,X))throw new S(Le,`('${a(Ye,"|")}')`,X)}var Ee=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ve(X,Le){if(typeof X>"u"||!v(Ee,X))throw new I(Le,X,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function je(X){if(typeof X=="string")return ve(X,"hints"),X;if(r(X)){let Le=X.length,Ye="";if(Le===0)return Ye;for(let Ce=0;Ce<Le;Ce++){let ct=X[Ce];ve(ct,"hints"),Ye+=ct,Ce!==Le-1&&(Ye+=", ")}return Ye}throw new I("hints",X,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}t.exports={isInt32:pe,isUint32:Ae,parseFileMode:xe,validateArray:oe,validateStringArray:Pe,validateBooleanArray:de,validateAbortSignalArray:ee,validateBoolean:Re,validateBuffer:ce,validateDictionary:Fe,validateEncoding:le,validateFunction:ke,validateInt32:Be,validateInteger:z,validateNumber:Me,validateObject:Oe,validateOneOf:ne,validatePlainFunction:J,validatePort:fe,validateSignalName:Ne,validateString:he,validateUint32:_e,validateUndefined:ie,validateUnion:ge,validateAbortSignal:Se,validateLinkHeaderValue:je}}),vo=$e((e,t)=>{Ue(),We(),ze();var r=t.exports={},i,a;function s(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?i=setTimeout:i=s}catch{i=s}try{typeof clearTimeout=="function"?a=clearTimeout:a=u}catch{a=u}})();function h(k){if(i===setTimeout)return setTimeout(k,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(k,0);try{return i(k,0)}catch{try{return i.call(null,k,0)}catch{return i.call(this,k,0)}}}function f(k){if(a===clearTimeout)return clearTimeout(k);if((a===u||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(k);try{return a(k)}catch{try{return a.call(null,k)}catch{return a.call(this,k)}}}var d=[],m=!1,w,v=-1;function b(){!m||!w||(m=!1,w.length?d=w.concat(d):v=-1,d.length&&C())}function C(){if(!m){var k=h(b);m=!0;for(var S=d.length;S;){for(w=d,d=[];++v<S;)w&&w[v].run();v=-1,S=d.length}w=null,m=!1,f(k)}}r.nextTick=function(k){var S=new Array(arguments.length-1);if(arguments.length>1)for(var I=1;I<arguments.length;I++)S[I-1]=arguments[I];d.push(new N(k,S)),d.length===1&&!m&&h(C)};function N(k,S){this.fun=k,this.array=S}N.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function R(){}r.on=R,r.addListener=R,r.once=R,r.off=R,r.removeListener=R,r.removeAllListeners=R,r.emit=R,r.prependListener=R,r.prependOnceListener=R,r.listeners=function(k){return[]},r.binding=function(k){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(k){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}),Fi=$e((e,t)=>{Ue(),We(),ze();var{SymbolAsyncIterator:r,SymbolIterator:i,SymbolFor:a}=or(),s=a("nodejs.stream.destroyed"),u=a("nodejs.stream.errored"),h=a("nodejs.stream.readable"),f=a("nodejs.stream.writable"),d=a("nodejs.stream.disturbed"),m=a("nodejs.webstream.isClosedPromise"),w=a("nodejs.webstream.controllerErrorFunction");function v(G,Oe=!1){var Fe;return!!(G&&typeof G.pipe=="function"&&typeof G.on=="function"&&(!Oe||typeof G.pause=="function"&&typeof G.resume=="function")&&(!G._writableState||((Fe=G._readableState)===null||Fe===void 0?void 0:Fe.readable)!==!1)&&(!G._writableState||G._readableState))}function b(G){var Oe;return!!(G&&typeof G.write=="function"&&typeof G.on=="function"&&(!G._readableState||((Oe=G._writableState)===null||Oe===void 0?void 0:Oe.writable)!==!1))}function C(G){return!!(G&&typeof G.pipe=="function"&&G._readableState&&typeof G.on=="function"&&typeof G.write=="function")}function N(G){return G&&(G._readableState||G._writableState||typeof G.write=="function"&&typeof G.on=="function"||typeof G.pipe=="function"&&typeof G.on=="function")}function R(G){return!!(G&&!N(G)&&typeof G.pipeThrough=="function"&&typeof G.getReader=="function"&&typeof G.cancel=="function")}function k(G){return!!(G&&!N(G)&&typeof G.getWriter=="function"&&typeof G.abort=="function")}function S(G){return!!(G&&!N(G)&&typeof G.readable=="object"&&typeof G.writable=="object")}function I(G){return R(G)||k(G)||S(G)}function B(G,Oe){return G==null?!1:Oe===!0?typeof G[r]=="function":Oe===!1?typeof G[i]=="function":typeof G[r]=="function"||typeof G[i]=="function"}function U(G){if(!N(G))return null;let Oe=G._writableState,Fe=G._readableState,oe=Oe||Fe;return!!(G.destroyed||G[s]||oe!=null&&oe.destroyed)}function L(G){if(!b(G))return null;if(G.writableEnded===!0)return!0;let Oe=G._writableState;return Oe!=null&&Oe.errored?!1:typeof(Oe==null?void 0:Oe.ended)!="boolean"?null:Oe.ended}function P(G,Oe){if(!b(G))return null;if(G.writableFinished===!0)return!0;let Fe=G._writableState;return Fe!=null&&Fe.errored?!1:typeof(Fe==null?void 0:Fe.finished)!="boolean"?null:!!(Fe.finished||Oe===!1&&Fe.ended===!0&&Fe.length===0)}function W(G){if(!v(G))return null;if(G.readableEnded===!0)return!0;let Oe=G._readableState;return!Oe||Oe.errored?!1:typeof(Oe==null?void 0:Oe.ended)!="boolean"?null:Oe.ended}function q(G,Oe){if(!v(G))return null;let Fe=G._readableState;return Fe!=null&&Fe.errored?!1:typeof(Fe==null?void 0:Fe.endEmitted)!="boolean"?null:!!(Fe.endEmitted||Oe===!1&&Fe.ended===!0&&Fe.length===0)}function pe(G){return G&&G[h]!=null?G[h]:typeof(G==null?void 0:G.readable)!="boolean"?null:U(G)?!1:v(G)&&G.readable&&!q(G)}function Ae(G){return G&&G[f]!=null?G[f]:typeof(G==null?void 0:G.writable)!="boolean"?null:U(G)?!1:b(G)&&G.writable&&!L(G)}function H(G,Oe){return N(G)?U(G)?!0:!((Oe==null?void 0:Oe.readable)!==!1&&pe(G)||(Oe==null?void 0:Oe.writable)!==!1&&Ae(G)):null}function ue(G){var Oe,Fe;return N(G)?G.writableErrored?G.writableErrored:(Oe=(Fe=G._writableState)===null||Fe===void 0?void 0:Fe.errored)!==null&&Oe!==void 0?Oe:null:null}function xe(G){var Oe,Fe;return N(G)?G.readableErrored?G.readableErrored:(Oe=(Fe=G._readableState)===null||Fe===void 0?void 0:Fe.errored)!==null&&Oe!==void 0?Oe:null:null}function z(G){if(!N(G))return null;if(typeof G.closed=="boolean")return G.closed;let Oe=G._writableState,Fe=G._readableState;return typeof(Oe==null?void 0:Oe.closed)=="boolean"||typeof(Fe==null?void 0:Fe.closed)=="boolean"?(Oe==null?void 0:Oe.closed)||(Fe==null?void 0:Fe.closed):typeof G._closed=="boolean"&&Be(G)?G._closed:null}function Be(G){return typeof G._closed=="boolean"&&typeof G._defaultKeepAlive=="boolean"&&typeof G._removedConnection=="boolean"&&typeof G._removedContLen=="boolean"}function _e(G){return typeof G._sent100=="boolean"&&Be(G)}function he(G){var Oe;return typeof G._consuming=="boolean"&&typeof G._dumped=="boolean"&&((Oe=G.req)===null||Oe===void 0?void 0:Oe.upgradeOrConnect)===void 0}function Me(G){if(!N(G))return null;let Oe=G._writableState,Fe=G._readableState,oe=Oe||Fe;return!oe&&_e(G)||!!(oe&&oe.autoDestroy&&oe.emitClose&&oe.closed===!1)}function ne(G){var Oe;return!!(G&&((Oe=G[d])!==null&&Oe!==void 0?Oe:G.readableDidRead||G.readableAborted))}function Re(G){var Oe,Fe,oe,Pe,de,ee,Ne,ce,le,fe;return!!(G&&((Oe=(Fe=(oe=(Pe=(de=(ee=G[u])!==null&&ee!==void 0?ee:G.readableErrored)!==null&&de!==void 0?de:G.writableErrored)!==null&&Pe!==void 0?Pe:(Ne=G._readableState)===null||Ne===void 0?void 0:Ne.errorEmitted)!==null&&oe!==void 0?oe:(ce=G._writableState)===null||ce===void 0?void 0:ce.errorEmitted)!==null&&Fe!==void 0?Fe:(le=G._readableState)===null||le===void 0?void 0:le.errored)!==null&&Oe!==void 0?Oe:!((fe=G._writableState)===null||fe===void 0)&&fe.errored))}t.exports={isDestroyed:U,kIsDestroyed:s,isDisturbed:ne,kIsDisturbed:d,isErrored:Re,kIsErrored:u,isReadable:pe,kIsReadable:h,kIsClosedPromise:m,kControllerErrorFunction:w,kIsWritable:f,isClosed:z,isDuplexNodeStream:C,isFinished:H,isIterable:B,isReadableNodeStream:v,isReadableStream:R,isReadableEnded:W,isReadableFinished:q,isReadableErrored:xe,isNodeStream:N,isWebStream:I,isWritable:Ae,isWritableNodeStream:b,isWritableStream:k,isWritableEnded:L,isWritableFinished:P,isWritableErrored:ue,isServerRequest:he,isServerResponse:_e,willEmitClose:Me,isTransformStream:S}}),Ps=$e((e,t)=>{Ue(),We(),ze();var r=vo(),{AbortError:i,codes:a}=an(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_PREMATURE_CLOSE:u}=a,{kEmptyObject:h,once:f}=wn(),{validateAbortSignal:d,validateFunction:m,validateObject:w,validateBoolean:v}=zl(),{Promise:b,PromisePrototypeThen:C,SymbolDispose:N}=or(),{isClosed:R,isReadable:k,isReadableNodeStream:S,isReadableStream:I,isReadableFinished:B,isReadableErrored:U,isWritable:L,isWritableNodeStream:P,isWritableStream:W,isWritableFinished:q,isWritableErrored:pe,isNodeStream:Ae,willEmitClose:H,kIsClosedPromise:ue}=Fi(),xe;function z(ne){return ne.setHeader&&typeof ne.abort=="function"}var Be=()=>{};function _e(ne,Re,G){var Oe,Fe;if(arguments.length===2?(G=Re,Re=h):Re==null?Re=h:w(Re,"options"),m(G,"callback"),d(Re.signal,"options.signal"),G=f(G),I(ne)||W(ne))return he(ne,Re,G);if(!Ae(ne))throw new s("stream",["ReadableStream","WritableStream","Stream"],ne);let oe=(Oe=Re.readable)!==null&&Oe!==void 0?Oe:S(ne),Pe=(Fe=Re.writable)!==null&&Fe!==void 0?Fe:P(ne),de=ne._writableState,ee=ne._readableState,Ne=()=>{ne.writable||fe()},ce=H(ne)&&S(ne)===oe&&P(ne)===Pe,le=q(ne,!1),fe=()=>{le=!0,ne.destroyed&&(ce=!1),!(ce&&(!ne.readable||oe))&&(!oe||Se)&&G.call(ne)},Se=B(ne,!1),ke=()=>{Se=!0,ne.destroyed&&(ce=!1),!(ce&&(!ne.writable||Pe))&&(!Pe||le)&&G.call(ne)},J=X=>{G.call(ne,X)},ie=R(ne),ge=()=>{ie=!0;let X=pe(ne)||U(ne);if(X&&typeof X!="boolean")return G.call(ne,X);if(oe&&!Se&&S(ne,!0)&&!B(ne,!1))return G.call(ne,new u);if(Pe&&!le&&!q(ne,!1))return G.call(ne,new u);G.call(ne)},Ee=()=>{ie=!0;let X=pe(ne)||U(ne);if(X&&typeof X!="boolean")return G.call(ne,X);G.call(ne)},ve=()=>{ne.req.on("finish",fe)};z(ne)?(ne.on("complete",fe),ce||ne.on("abort",ge),ne.req?ve():ne.on("request",ve)):Pe&&!de&&(ne.on("end",Ne),ne.on("close",Ne)),!ce&&typeof ne.aborted=="boolean"&&ne.on("aborted",ge),ne.on("end",ke),ne.on("finish",fe),Re.error!==!1&&ne.on("error",J),ne.on("close",ge),ie?r.nextTick(ge):de!=null&&de.errorEmitted||ee!=null&&ee.errorEmitted?ce||r.nextTick(Ee):(!oe&&(!ce||k(ne))&&(le||L(ne)===!1)||!Pe&&(!ce||L(ne))&&(Se||k(ne)===!1)||ee&&ne.req&&ne.aborted)&&r.nextTick(Ee);let je=()=>{G=Be,ne.removeListener("aborted",ge),ne.removeListener("complete",fe),ne.removeListener("abort",ge),ne.removeListener("request",ve),ne.req&&ne.req.removeListener("finish",fe),ne.removeListener("end",Ne),ne.removeListener("close",Ne),ne.removeListener("finish",fe),ne.removeListener("end",ke),ne.removeListener("error",J),ne.removeListener("close",ge)};if(Re.signal&&!ie){let X=()=>{let Le=G;je(),Le.call(ne,new i(void 0,{cause:Re.signal.reason}))};if(Re.signal.aborted)r.nextTick(X);else{xe=xe||wn().addAbortListener;let Le=xe(Re.signal,X),Ye=G;G=f((...Ce)=>{Le[N](),Ye.apply(ne,Ce)})}}return je}function he(ne,Re,G){let Oe=!1,Fe=Be;if(Re.signal)if(Fe=()=>{Oe=!0,G.call(ne,new i(void 0,{cause:Re.signal.reason}))},Re.signal.aborted)r.nextTick(Fe);else{xe=xe||wn().addAbortListener;let Pe=xe(Re.signal,Fe),de=G;G=f((...ee)=>{Pe[N](),de.apply(ne,ee)})}let oe=(...Pe)=>{Oe||r.nextTick(()=>G.apply(ne,Pe))};return C(ne[ue].promise,oe,oe),Be}function Me(ne,Re){var G;let Oe=!1;return Re===null&&(Re=h),(G=Re)!==null&&G!==void 0&&G.cleanup&&(v(Re.cleanup,"cleanup"),Oe=Re.cleanup),new b((Fe,oe)=>{let Pe=_e(ne,Re,de=>{Oe&&Pe(),de?oe(de):Fe()})})}t.exports=_e,t.exports.finished=Me}),va=$e((e,t)=>{Ue(),We(),ze();var r=vo(),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:a},AbortError:s}=an(),{Symbol:u}=or(),{kIsDestroyed:h,isDestroyed:f,isFinished:d,isServerRequest:m}=Fi(),w=u("kDestroy"),v=u("kConstruct");function b(H,ue,xe){H&&(H.stack,ue&&!ue.errored&&(ue.errored=H),xe&&!xe.errored&&(xe.errored=H))}function C(H,ue){let xe=this._readableState,z=this._writableState,Be=z||xe;return z!=null&&z.destroyed||xe!=null&&xe.destroyed?(typeof ue=="function"&&ue(),this):(b(H,z,xe),z&&(z.destroyed=!0),xe&&(xe.destroyed=!0),Be.constructed?N(this,H,ue):this.once(w,function(_e){N(this,i(_e,H),ue)}),this)}function N(H,ue,xe){let z=!1;function Be(_e){if(z)return;z=!0;let he=H._readableState,Me=H._writableState;b(_e,Me,he),Me&&(Me.closed=!0),he&&(he.closed=!0),typeof xe=="function"&&xe(_e),_e?r.nextTick(R,H,_e):r.nextTick(k,H)}try{H._destroy(ue||null,Be)}catch(_e){Be(_e)}}function R(H,ue){S(H,ue),k(H)}function k(H){let ue=H._readableState,xe=H._writableState;xe&&(xe.closeEmitted=!0),ue&&(ue.closeEmitted=!0),(xe!=null&&xe.emitClose||ue!=null&&ue.emitClose)&&H.emit("close")}function S(H,ue){let xe=H._readableState,z=H._writableState;z!=null&&z.errorEmitted||xe!=null&&xe.errorEmitted||(z&&(z.errorEmitted=!0),xe&&(xe.errorEmitted=!0),H.emit("error",ue))}function I(){let H=this._readableState,ue=this._writableState;H&&(H.constructed=!0,H.closed=!1,H.closeEmitted=!1,H.destroyed=!1,H.errored=null,H.errorEmitted=!1,H.reading=!1,H.ended=H.readable===!1,H.endEmitted=H.readable===!1),ue&&(ue.constructed=!0,ue.destroyed=!1,ue.closed=!1,ue.closeEmitted=!1,ue.errored=null,ue.errorEmitted=!1,ue.finalCalled=!1,ue.prefinished=!1,ue.ended=ue.writable===!1,ue.ending=ue.writable===!1,ue.finished=ue.writable===!1)}function B(H,ue,xe){let z=H._readableState,Be=H._writableState;if(Be!=null&&Be.destroyed||z!=null&&z.destroyed)return this;z!=null&&z.autoDestroy||Be!=null&&Be.autoDestroy?H.destroy(ue):ue&&(ue.stack,Be&&!Be.errored&&(Be.errored=ue),z&&!z.errored&&(z.errored=ue),xe?r.nextTick(S,H,ue):S(H,ue))}function U(H,ue){if(typeof H._construct!="function")return;let xe=H._readableState,z=H._writableState;xe&&(xe.constructed=!1),z&&(z.constructed=!1),H.once(v,ue),!(H.listenerCount(v)>1)&&r.nextTick(L,H)}function L(H){let ue=!1;function xe(z){if(ue){B(H,z??new a);return}ue=!0;let Be=H._readableState,_e=H._writableState,he=_e||Be;Be&&(Be.constructed=!0),_e&&(_e.constructed=!0),he.destroyed?H.emit(w,z):z?B(H,z,!0):r.nextTick(P,H)}try{H._construct(z=>{r.nextTick(xe,z)})}catch(z){r.nextTick(xe,z)}}function P(H){H.emit(v)}function W(H){return(H==null?void 0:H.setHeader)&&typeof H.abort=="function"}function q(H){H.emit("close")}function pe(H,ue){H.emit("error",ue),r.nextTick(q,H)}function Ae(H,ue){!H||f(H)||(!ue&&!d(H)&&(ue=new s),m(H)?(H.socket=null,H.destroy(ue)):W(H)?H.abort():W(H.req)?H.req.abort():typeof H.destroy=="function"?H.destroy(ue):typeof H.close=="function"?H.close():ue?r.nextTick(pe,H,ue):r.nextTick(q,H),H.destroyed||(H[h]=!0))}t.exports={construct:U,destroyer:Ae,destroy:C,undestroy:I,errorOrDestroy:B}}),V1=$e((e,t)=>{Ue(),We(),ze();var{ArrayIsArray:r,ObjectSetPrototypeOf:i}=or(),{EventEmitter:a}=(xo(),jt(Ds));function s(h){a.call(this,h)}i(s.prototype,a.prototype),i(s,a),s.prototype.pipe=function(h,f){let d=this;function m(k){h.writable&&h.write(k)===!1&&d.pause&&d.pause()}d.on("data",m);function w(){d.readable&&d.resume&&d.resume()}h.on("drain",w),!h._isStdio&&(!f||f.end!==!1)&&(d.on("end",b),d.on("close",C));let v=!1;function b(){v||(v=!0,h.end())}function C(){v||(v=!0,typeof h.destroy=="function"&&h.destroy())}function N(k){R(),a.listenerCount(this,"error")===0&&this.emit("error",k)}u(d,"error",N),u(h,"error",N);function R(){d.removeListener("data",m),h.removeListener("drain",w),d.removeListener("end",b),d.removeListener("close",C),d.removeListener("error",N),h.removeListener("error",N),d.removeListener("end",R),d.removeListener("close",R),h.removeListener("close",R)}return d.on("end",R),d.on("close",R),h.on("close",R),h.emit("pipe",d),h};function u(h,f,d){if(typeof h.prependListener=="function")return h.prependListener(f,d);!h._events||!h._events[f]?h.on(f,d):r(h._events[f])?h._events[f].unshift(d):h._events[f]=[d,h._events[f]]}t.exports={Stream:s,prependListener:u}}),qc=$e((e,t)=>{Ue(),We(),ze();var{SymbolDispose:r}=or(),{AbortError:i,codes:a}=an(),{isNodeStream:s,isWebStream:u,kControllerErrorFunction:h}=Fi(),f=Ps(),{ERR_INVALID_ARG_TYPE:d}=a,m,w=(v,b)=>{if(typeof v!="object"||!("aborted"in v))throw new d(b,"AbortSignal",v)};t.exports.addAbortSignal=function(v,b){if(w(v,"signal"),!s(b)&&!u(b))throw new d("stream",["ReadableStream","WritableStream","Stream"],b);return t.exports.addAbortSignalNoValidate(v,b)},t.exports.addAbortSignalNoValidate=function(v,b){if(typeof v!="object"||!("aborted"in v))return b;let C=s(b)?()=>{b.destroy(new i(void 0,{cause:v.reason}))}:()=>{b[h](new i(void 0,{cause:v.reason}))};if(v.aborted)C();else{m=m||wn().addAbortListener;let N=m(v,C);f(b,N[r])}return b}}),XI=$e((e,t)=>{Ue(),We(),ze();var{StringPrototypeSlice:r,SymbolIterator:i,TypedArrayPrototypeSet:a,Uint8Array:s}=or(),{Buffer:u}=(Rr(),jt(kr)),{inspect:h}=wn();t.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(f){let d={data:f,next:null};this.length>0?this.tail.next=d:this.head=d,this.tail=d,++this.length}unshift(f){let d={data:f,next:this.head};this.length===0&&(this.tail=d),this.head=d,++this.length}shift(){if(this.length===0)return;let f=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,f}clear(){this.head=this.tail=null,this.length=0}join(f){if(this.length===0)return"";let d=this.head,m=""+d.data;for(;(d=d.next)!==null;)m+=f+d.data;return m}concat(f){if(this.length===0)return u.alloc(0);let d=u.allocUnsafe(f>>>0),m=this.head,w=0;for(;m;)a(d,m.data,w),w+=m.data.length,m=m.next;return d}consume(f,d){let m=this.head.data;if(f<m.length){let w=m.slice(0,f);return this.head.data=m.slice(f),w}return f===m.length?this.shift():d?this._getString(f):this._getBuffer(f)}first(){return this.head.data}*[i](){for(let f=this.head;f;f=f.next)yield f.data}_getString(f){let d="",m=this.head,w=0;do{let v=m.data;if(f>v.length)d+=v,f-=v.length;else{f===v.length?(d+=v,++w,m.next?this.head=m.next:this.head=this.tail=null):(d+=r(v,0,f),this.head=m,m.data=r(v,f));break}++w}while((m=m.next)!==null);return this.length-=w,d}_getBuffer(f){let d=u.allocUnsafe(f),m=f,w=this.head,v=0;do{let b=w.data;if(f>b.length)a(d,b,m-f),f-=b.length;else{f===b.length?(a(d,b,m-f),++v,w.next?this.head=w.next:this.head=this.tail=null):(a(d,new s(b.buffer,b.byteOffset,f),m-f),this.head=w,w.data=b.slice(f));break}++v}while((w=w.next)!==null);return this.length-=v,d}[Symbol.for("nodejs.util.inspect.custom")](f,d){return h(this,{...d,depth:0,customInspect:!1})}}}),Qc=$e((e,t)=>{Ue(),We(),ze();var{MathFloor:r,NumberIsInteger:i}=or(),{validateInteger:a}=zl(),{ERR_INVALID_ARG_VALUE:s}=an().codes,u=16*1024,h=16;function f(v,b,C){return v.highWaterMark!=null?v.highWaterMark:b?v[C]:null}function d(v){return v?h:u}function m(v,b){a(b,"value",0),v?h=b:u=b}function w(v,b,C,N){let R=f(b,N,C);if(R!=null){if(!i(R)||R<0){let k=N?`options.${C}`:"options.highWaterMark";throw new s(k,R)}return r(R)}return d(v.objectMode)}t.exports={getHighWaterMark:w,getDefaultHighWaterMark:d,setDefaultHighWaterMark:m}}),qI=$e((e,t)=>{Ue(),We(),ze();var r=(Rr(),jt(kr)),i=r.Buffer;function a(u,h){for(var f in u)h[f]=u[f]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(a(r,e),e.Buffer=s);function s(u,h,f){return i(u,h,f)}s.prototype=Object.create(i.prototype),a(i,s),s.from=function(u,h,f){if(typeof u=="number")throw new TypeError("Argument must not be a number");return i(u,h,f)},s.alloc=function(u,h,f){if(typeof u!="number")throw new TypeError("Argument must be a number");var d=i(u);return h!==void 0?typeof f=="string"?d.fill(h,f):d.fill(h):d.fill(0),d},s.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return i(u)},s.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(u)}}),QI=$e(e=>{Ue(),We(),ze();var t=qI().Buffer,r=t.isEncoding||function(S){switch(S=""+S,S&&S.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(S){if(!S)return"utf8";for(var I;;)switch(S){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return S;default:if(I)return;S=(""+S).toLowerCase(),I=!0}}function a(S){var I=i(S);if(typeof I!="string"&&(t.isEncoding===r||!r(S)))throw new Error("Unknown encoding: "+S);return I||S}e.StringDecoder=s;function s(S){this.encoding=a(S);var I;switch(this.encoding){case"utf16le":this.text=v,this.end=b,I=4;break;case"utf8":this.fillLast=d,I=4;break;case"base64":this.text=C,this.end=N,I=3;break;default:this.write=R,this.end=k;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(I)}s.prototype.write=function(S){if(S.length===0)return"";var I,B;if(this.lastNeed){if(I=this.fillLast(S),I===void 0)return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<S.length?I?I+this.text(S,B):this.text(S,B):I||""},s.prototype.end=w,s.prototype.text=m,s.prototype.fillLast=function(S){if(this.lastNeed<=S.length)return S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,S.length),this.lastNeed-=S.length};function u(S){return S<=127?0:S>>5===6?2:S>>4===14?3:S>>3===30?4:S>>6===2?-1:-2}function h(S,I,B){var U=I.length-1;if(U<B)return 0;var L=u(I[U]);return L>=0?(L>0&&(S.lastNeed=L-1),L):--U<B||L===-2?0:(L=u(I[U]),L>=0?(L>0&&(S.lastNeed=L-2),L):--U<B||L===-2?0:(L=u(I[U]),L>=0?(L>0&&(L===2?L=0:S.lastNeed=L-3),L):0))}function f(S,I,B){if((I[0]&192)!==128)return S.lastNeed=0,"";if(S.lastNeed>1&&I.length>1){if((I[1]&192)!==128)return S.lastNeed=1,"";if(S.lastNeed>2&&I.length>2&&(I[2]&192)!==128)return S.lastNeed=2,""}}function d(S){var I=this.lastTotal-this.lastNeed,B=f(this,S);if(B!==void 0)return B;if(this.lastNeed<=S.length)return S.copy(this.lastChar,I,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,I,0,S.length),this.lastNeed-=S.length}function m(S,I){var B=h(this,S,I);if(!this.lastNeed)return S.toString("utf8",I);this.lastTotal=B;var U=S.length-(B-this.lastNeed);return S.copy(this.lastChar,0,U),S.toString("utf8",I,U)}function w(S){var I=S&&S.length?this.write(S):"";return this.lastNeed?I+"":I}function v(S,I){if((S.length-I)%2===0){var B=S.toString("utf16le",I);if(B){var U=B.charCodeAt(B.length-1);if(U>=55296&&U<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=S[S.length-1],S.toString("utf16le",I,S.length-1)}function b(S){var I=S&&S.length?this.write(S):"";if(this.lastNeed){var B=this.lastTotal-this.lastNeed;return I+this.lastChar.toString("utf16le",0,B)}return I}function C(S,I){var B=(S.length-I)%3;return B===0?S.toString("base64",I):(this.lastNeed=3-B,this.lastTotal=3,B===1?this.lastChar[0]=S[S.length-1]:(this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1]),S.toString("base64",I,S.length-B))}function N(S){var I=S&&S.length?this.write(S):"";return this.lastNeed?I+this.lastChar.toString("base64",0,3-this.lastNeed):I}function R(S){return S.toString(this.encoding)}function k(S){return S&&S.length?this.write(S):""}}),fx=$e((e,t)=>{Ue(),We(),ze();var r=vo(),{PromisePrototypeThen:i,SymbolAsyncIterator:a,SymbolIterator:s}=or(),{Buffer:u}=(Rr(),jt(kr)),{ERR_INVALID_ARG_TYPE:h,ERR_STREAM_NULL_VALUES:f}=an().codes;function d(m,w,v){let b;if(typeof w=="string"||w instanceof u)return new m({objectMode:!0,...v,read(){this.push(w),this.push(null)}});let C;if(w&&w[a])C=!0,b=w[a]();else if(w&&w[s])C=!1,b=w[s]();else throw new h("iterable",["Iterable"],w);let N=new m({objectMode:!0,highWaterMark:1,...v}),R=!1;N._read=function(){R||(R=!0,S())},N._destroy=function(I,B){i(k(I),()=>r.nextTick(B,I),U=>r.nextTick(B,U||I))};async function k(I){let B=I!=null,U=typeof b.throw=="function";if(B&&U){let{value:L,done:P}=await b.throw(I);if(await L,P)return}if(typeof b.return=="function"){let{value:L}=await b.return();await L}}async function S(){for(;;){try{let{value:I,done:B}=C?await b.next():b.next();if(B)N.push(null);else{let U=I&&typeof I.then=="function"?await I:I;if(U===null)throw R=!1,new f;if(N.push(U))continue;R=!1}}catch(I){N.destroy(I)}break}}return N}t.exports=d}),Kc=$e((e,t)=>{Ue(),We(),ze();var r=vo(),{ArrayPrototypeIndexOf:i,NumberIsInteger:a,NumberIsNaN:s,NumberParseInt:u,ObjectDefineProperties:h,ObjectKeys:f,ObjectSetPrototypeOf:d,Promise:m,SafeSet:w,SymbolAsyncDispose:v,SymbolAsyncIterator:b,Symbol:C}=or();t.exports=Ce,Ce.ReadableState=Ye;var{EventEmitter:N}=(xo(),jt(Ds)),{Stream:R,prependListener:k}=V1(),{Buffer:S}=(Rr(),jt(kr)),{addAbortSignal:I}=qc(),B=Ps(),U=wn().debuglog("stream",V=>{U=V}),L=XI(),P=va(),{getHighWaterMark:W,getDefaultHighWaterMark:q}=Qc(),{aggregateTwoErrors:pe,codes:{ERR_INVALID_ARG_TYPE:Ae,ERR_METHOD_NOT_IMPLEMENTED:H,ERR_OUT_OF_RANGE:ue,ERR_STREAM_PUSH_AFTER_EOF:xe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:z},AbortError:Be}=an(),{validateObject:_e}=zl(),he=C("kPaused"),{StringDecoder:Me}=QI(),ne=fx();d(Ce.prototype,R.prototype),d(Ce,R);var Re=()=>{},{errorOrDestroy:G}=P,Oe=1,Fe=2,oe=4,Pe=8,de=16,ee=32,Ne=64,ce=128,le=256,fe=512,Se=1024,ke=2048,J=4096,ie=8192,ge=16384,Ee=32768,ve=65536,je=1<<17,X=1<<18;function Le(V){return{enumerable:!1,get(){return(this.state&V)!==0},set(Q){Q?this.state|=V:this.state&=~V}}}h(Ye.prototype,{objectMode:Le(Oe),ended:Le(Fe),endEmitted:Le(oe),reading:Le(Pe),constructed:Le(de),sync:Le(ee),needReadable:Le(Ne),emittedReadable:Le(ce),readableListening:Le(le),resumeScheduled:Le(fe),errorEmitted:Le(Se),emitClose:Le(ke),autoDestroy:Le(J),destroyed:Le(ie),closed:Le(ge),closeEmitted:Le(Ee),multiAwaitDrain:Le(ve),readingMore:Le(je),dataEmitted:Le(X)});function Ye(V,Q,Xe){typeof Xe!="boolean"&&(Xe=Q instanceof Pi()),this.state=ke|J|de|ee,V&&V.objectMode&&(this.state|=Oe),Xe&&V&&V.readableObjectMode&&(this.state|=Oe),this.highWaterMark=V?W(this,V,"readableHighWaterMark",Xe):q(!1),this.buffer=new L,this.length=0,this.pipes=[],this.flowing=null,this[he]=null,V&&V.emitClose===!1&&(this.state&=~ke),V&&V.autoDestroy===!1&&(this.state&=~J),this.errored=null,this.defaultEncoding=V&&V.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,V&&V.encoding&&(this.decoder=new Me(V.encoding),this.encoding=V.encoding)}function Ce(V){if(!(this instanceof Ce))return new Ce(V);let Q=this instanceof Pi();this._readableState=new Ye(V,this,Q),V&&(typeof V.read=="function"&&(this._read=V.read),typeof V.destroy=="function"&&(this._destroy=V.destroy),typeof V.construct=="function"&&(this._construct=V.construct),V.signal&&!Q&&I(V.signal,this)),R.call(this,V),P.construct(this,()=>{this._readableState.needReadable&&Ve(this,this._readableState)})}Ce.prototype.destroy=P.destroy,Ce.prototype._undestroy=P.undestroy,Ce.prototype._destroy=function(V,Q){Q(V)},Ce.prototype[N.captureRejectionSymbol]=function(V){this.destroy(V)},Ce.prototype[v]=function(){let V;return this.destroyed||(V=this.readableEnded?null:new Be,this.destroy(V)),new m((Q,Xe)=>B(this,Ze=>Ze&&Ze!==V?Xe(Ze):Q(null)))},Ce.prototype.push=function(V,Q){return ct(this,V,Q,!1)},Ce.prototype.unshift=function(V,Q){return ct(this,V,Q,!0)};function ct(V,Q,Xe,Ze){U("readableAddChunk",Q);let it=V._readableState,Tt;if(!(it.state&Oe)&&(typeof Q=="string"?(Xe=Xe||it.defaultEncoding,it.encoding!==Xe&&(Ze&&it.encoding?Q=S.from(Q,Xe).toString(it.encoding):(Q=S.from(Q,Xe),Xe=""))):Q instanceof S?Xe="":R._isUint8Array(Q)?(Q=R._uint8ArrayToBuffer(Q),Xe=""):Q!=null&&(Tt=new Ae("chunk",["string","Buffer","Uint8Array"],Q))),Tt)G(V,Tt);else if(Q===null)it.state&=~Pe,K(V,it);else if(it.state&Oe||Q&&Q.length>0)if(Ze)if(it.state&oe)G(V,new z);else{if(it.destroyed||it.errored)return!1;E(V,it,Q,!0)}else if(it.ended)G(V,new xe);else{if(it.destroyed||it.errored)return!1;it.state&=~Pe,it.decoder&&!Xe?(Q=it.decoder.write(Q),it.objectMode||Q.length!==0?E(V,it,Q,!1):Ve(V,it)):E(V,it,Q,!1)}else Ze||(it.state&=~Pe,Ve(V,it));return!it.ended&&(it.length<it.highWaterMark||it.length===0)}function E(V,Q,Xe,Ze){Q.flowing&&Q.length===0&&!Q.sync&&V.listenerCount("data")>0?(Q.state&ve?Q.awaitDrainWriters.clear():Q.awaitDrainWriters=null,Q.dataEmitted=!0,V.emit("data",Xe)):(Q.length+=Q.objectMode?1:Xe.length,Ze?Q.buffer.unshift(Xe):Q.buffer.push(Xe),Q.state&Ne&&re(V)),Ve(V,Q)}Ce.prototype.isPaused=function(){let V=this._readableState;return V[he]===!0||V.flowing===!1},Ce.prototype.setEncoding=function(V){let Q=new Me(V);this._readableState.decoder=Q,this._readableState.encoding=this._readableState.decoder.encoding;let Xe=this._readableState.buffer,Ze="";for(let it of Xe)Ze+=Q.write(it);return Xe.clear(),Ze!==""&&Xe.push(Ze),this._readableState.length=Ze.length,this};var A=1073741824;function T(V){if(V>A)throw new ue("size","<= 1GiB",V);return V--,V|=V>>>1,V|=V>>>2,V|=V>>>4,V|=V>>>8,V|=V>>>16,V++,V}function j(V,Q){return V<=0||Q.length===0&&Q.ended?0:Q.state&Oe?1:s(V)?Q.flowing&&Q.length?Q.buffer.first().length:Q.length:V<=Q.length?V:Q.ended?Q.length:0}Ce.prototype.read=function(V){U("read",V),V===void 0?V=NaN:a(V)||(V=u(V,10));let Q=this._readableState,Xe=V;if(V>Q.highWaterMark&&(Q.highWaterMark=T(V)),V!==0&&(Q.state&=~ce),V===0&&Q.needReadable&&((Q.highWaterMark!==0?Q.length>=Q.highWaterMark:Q.length>0)||Q.ended))return U("read: emitReadable",Q.length,Q.ended),Q.length===0&&Q.ended?kt(this):re(this),null;if(V=j(V,Q),V===0&&Q.ended)return Q.length===0&&kt(this),null;let Ze=(Q.state&Ne)!==0;if(U("need readable",Ze),(Q.length===0||Q.length-V<Q.highWaterMark)&&(Ze=!0,U("length less than watermark",Ze)),Q.ended||Q.reading||Q.destroyed||Q.errored||!Q.constructed)Ze=!1,U("reading, ended or constructing",Ze);else if(Ze){U("do read"),Q.state|=Pe|ee,Q.length===0&&(Q.state|=Ne);try{this._read(Q.highWaterMark)}catch(Tt){G(this,Tt)}Q.state&=~ee,Q.reading||(V=j(Xe,Q))}let it;return V>0?it=ht(V,Q):it=null,it===null?(Q.needReadable=Q.length<=Q.highWaterMark,V=0):(Q.length-=V,Q.multiAwaitDrain?Q.awaitDrainWriters.clear():Q.awaitDrainWriters=null),Q.length===0&&(Q.ended||(Q.needReadable=!0),Xe!==V&&Q.ended&&kt(this)),it!==null&&!Q.errorEmitted&&!Q.closeEmitted&&(Q.dataEmitted=!0,this.emit("data",it)),it};function K(V,Q){if(U("onEofChunk"),!Q.ended){if(Q.decoder){let Xe=Q.decoder.end();Xe&&Xe.length&&(Q.buffer.push(Xe),Q.length+=Q.objectMode?1:Xe.length)}Q.ended=!0,Q.sync?re(V):(Q.needReadable=!1,Q.emittedReadable=!0,me(V))}}function re(V){let Q=V._readableState;U("emitReadable",Q.needReadable,Q.emittedReadable),Q.needReadable=!1,Q.emittedReadable||(U("emitReadable",Q.flowing),Q.emittedReadable=!0,r.nextTick(me,V))}function me(V){let Q=V._readableState;U("emitReadable_",Q.destroyed,Q.length,Q.ended),!Q.destroyed&&!Q.errored&&(Q.length||Q.ended)&&(V.emit("readable"),Q.emittedReadable=!1),Q.needReadable=!Q.flowing&&!Q.ended&&Q.length<=Q.highWaterMark,Hr(V)}function Ve(V,Q){!Q.readingMore&&Q.constructed&&(Q.readingMore=!0,r.nextTick(ye,V,Q))}function ye(V,Q){for(;!Q.reading&&!Q.ended&&(Q.length<Q.highWaterMark||Q.flowing&&Q.length===0);){let Xe=Q.length;if(U("maybeReadMore read 0"),V.read(0),Xe===Q.length)break}Q.readingMore=!1}Ce.prototype._read=function(V){throw new H("_read()")},Ce.prototype.pipe=function(V,Q){let Xe=this,Ze=this._readableState;Ze.pipes.length===1&&(Ze.multiAwaitDrain||(Ze.multiAwaitDrain=!0,Ze.awaitDrainWriters=new w(Ze.awaitDrainWriters?[Ze.awaitDrainWriters]:[]))),Ze.pipes.push(V),U("pipe count=%d opts=%j",Ze.pipes.length,Q);let it=(!Q||Q.end!==!1)&&V!==r.stdout&&V!==r.stderr?yr:Vr;Ze.endEmitted?r.nextTick(it):Xe.once("end",it),V.on("unpipe",Tt);function Tt(gi,zn){U("onunpipe"),gi===Xe&&zn&&zn.hasUnpiped===!1&&(zn.hasUnpiped=!0,Wi())}function yr(){U("onend"),V.end()}let wr,rt=!1;function Wi(){U("cleanup"),V.removeListener("close",Hi),V.removeListener("finish",Vi),wr&&V.removeListener("drain",wr),V.removeListener("error",ei),V.removeListener("unpipe",Tt),Xe.removeListener("end",yr),Xe.removeListener("end",Vr),Xe.removeListener("data",Mr),rt=!0,wr&&Ze.awaitDrainWriters&&(!V._writableState||V._writableState.needDrain)&&wr()}function _o(){rt||(Ze.pipes.length===1&&Ze.pipes[0]===V?(U("false write response, pause",0),Ze.awaitDrainWriters=V,Ze.multiAwaitDrain=!1):Ze.pipes.length>1&&Ze.pipes.includes(V)&&(U("false write response, pause",Ze.awaitDrainWriters.size),Ze.awaitDrainWriters.add(V)),Xe.pause()),wr||(wr=Je(Xe,V),V.on("drain",wr))}Xe.on("data",Mr);function Mr(gi){U("ondata");let zn=V.write(gi);U("dest.write",zn),zn===!1&&_o()}function ei(gi){if(U("onerror",gi),Vr(),V.removeListener("error",ei),V.listenerCount("error")===0){let zn=V._writableState||V._readableState;zn&&!zn.errorEmitted?G(V,gi):V.emit("error",gi)}}k(V,"error",ei);function Hi(){V.removeListener("finish",Vi),Vr()}V.once("close",Hi);function Vi(){U("onfinish"),V.removeListener("close",Hi),Vr()}V.once("finish",Vi);function Vr(){U("unpipe"),Xe.unpipe(V)}return V.emit("pipe",Xe),V.writableNeedDrain===!0?_o():Ze.flowing||(U("pipe resume"),Xe.resume()),V};function Je(V,Q){return function(){let Xe=V._readableState;Xe.awaitDrainWriters===Q?(U("pipeOnDrain",1),Xe.awaitDrainWriters=null):Xe.multiAwaitDrain&&(U("pipeOnDrain",Xe.awaitDrainWriters.size),Xe.awaitDrainWriters.delete(Q)),(!Xe.awaitDrainWriters||Xe.awaitDrainWriters.size===0)&&V.listenerCount("data")&&V.resume()}}Ce.prototype.unpipe=function(V){let Q=this._readableState,Xe={hasUnpiped:!1};if(Q.pipes.length===0)return this;if(!V){let it=Q.pipes;Q.pipes=[],this.pause();for(let Tt=0;Tt<it.length;Tt++)it[Tt].emit("unpipe",this,{hasUnpiped:!1});return this}let Ze=i(Q.pipes,V);return Ze===-1?this:(Q.pipes.splice(Ze,1),Q.pipes.length===0&&this.pause(),V.emit("unpipe",this,Xe),this)},Ce.prototype.on=function(V,Q){let Xe=R.prototype.on.call(this,V,Q),Ze=this._readableState;return V==="data"?(Ze.readableListening=this.listenerCount("readable")>0,Ze.flowing!==!1&&this.resume()):V==="readable"&&!Ze.endEmitted&&!Ze.readableListening&&(Ze.readableListening=Ze.needReadable=!0,Ze.flowing=!1,Ze.emittedReadable=!1,U("on readable",Ze.length,Ze.reading),Ze.length?re(this):Ze.reading||r.nextTick(et,this)),Xe},Ce.prototype.addListener=Ce.prototype.on,Ce.prototype.removeListener=function(V,Q){let Xe=R.prototype.removeListener.call(this,V,Q);return V==="readable"&&r.nextTick(tt,this),Xe},Ce.prototype.off=Ce.prototype.removeListener,Ce.prototype.removeAllListeners=function(V){let Q=R.prototype.removeAllListeners.apply(this,arguments);return(V==="readable"||V===void 0)&&r.nextTick(tt,this),Q};function tt(V){let Q=V._readableState;Q.readableListening=V.listenerCount("readable")>0,Q.resumeScheduled&&Q[he]===!1?Q.flowing=!0:V.listenerCount("data")>0?V.resume():Q.readableListening||(Q.flowing=null)}function et(V){U("readable nexttick read 0"),V.read(0)}Ce.prototype.resume=function(){let V=this._readableState;return V.flowing||(U("resume"),V.flowing=!V.readableListening,Wr(this,V)),V[he]=!1,this};function Wr(V,Q){Q.resumeScheduled||(Q.resumeScheduled=!0,r.nextTick(Ar,V,Q))}function Ar(V,Q){U("resume",Q.reading),Q.reading||V.read(0),Q.resumeScheduled=!1,V.emit("resume"),Hr(V),Q.flowing&&!Q.reading&&V.read(0)}Ce.prototype.pause=function(){return U("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(U("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[he]=!0,this};function Hr(V){let Q=V._readableState;for(U("flow",Q.flowing);Q.flowing&&V.read()!==null;);}Ce.prototype.wrap=function(V){let Q=!1;V.on("data",Ze=>{!this.push(Ze)&&V.pause&&(Q=!0,V.pause())}),V.on("end",()=>{this.push(null)}),V.on("error",Ze=>{G(this,Ze)}),V.on("close",()=>{this.destroy()}),V.on("destroy",()=>{this.destroy()}),this._read=()=>{Q&&V.resume&&(Q=!1,V.resume())};let Xe=f(V);for(let Ze=1;Ze<Xe.length;Ze++){let it=Xe[Ze];this[it]===void 0&&typeof V[it]=="function"&&(this[it]=V[it].bind(V))}return this},Ce.prototype[b]=function(){return at(this)},Ce.prototype.iterator=function(V){return V!==void 0&&_e(V,"options"),at(this,V)};function at(V,Q){typeof V.read!="function"&&(V=Ce.wrap(V,{objectMode:!0}));let Xe=zt(V,Q);return Xe.stream=V,Xe}async function*zt(V,Q){let Xe=Re;function Ze(yr){this===V?(Xe(),Xe=Re):Xe=yr}V.on("readable",Ze);let it,Tt=B(V,{writable:!1},yr=>{it=yr?pe(it,yr):null,Xe(),Xe=Re});try{for(;;){let yr=V.destroyed?null:V.read();if(yr!==null)yield yr;else{if(it)throw it;if(it===null)return;await new m(Ze)}}}catch(yr){throw it=pe(it,yr),it}finally{(it||(Q==null?void 0:Q.destroyOnReturn)!==!1)&&(it===void 0||V._readableState.autoDestroy)?P.destroyer(V,null):(V.off("readable",Ze),Tt())}}h(Ce.prototype,{readable:{__proto__:null,get(){let V=this._readableState;return!!V&&V.readable!==!1&&!V.destroyed&&!V.errorEmitted&&!V.endEmitted},set(V){this._readableState&&(this._readableState.readable=!!V)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(V){this._readableState&&(this._readableState.flowing=V)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(V){this._readableState&&(this._readableState.destroyed=V)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),h(Ye.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[he]!==!1},set(V){this[he]=!!V}}}),Ce._fromList=ht;function ht(V,Q){if(Q.length===0)return null;let Xe;return Q.objectMode?Xe=Q.buffer.shift():!V||V>=Q.length?(Q.decoder?Xe=Q.buffer.join(""):Q.buffer.length===1?Xe=Q.buffer.first():Xe=Q.buffer.concat(Q.length),Q.buffer.clear()):Xe=Q.buffer.consume(V,Q.decoder),Xe}function kt(V){let Q=V._readableState;U("endReadable",Q.endEmitted),Q.endEmitted||(Q.ended=!0,r.nextTick(Dt,Q,V))}function Dt(V,Q){if(U("endReadableNT",V.endEmitted,V.length),!V.errored&&!V.closeEmitted&&!V.endEmitted&&V.length===0){if(V.endEmitted=!0,Q.emit("end"),Q.writable&&Q.allowHalfOpen===!1)r.nextTick(tr,Q);else if(V.autoDestroy){let Xe=Q._writableState;(!Xe||Xe.autoDestroy&&(Xe.finished||Xe.writable===!1))&&Q.destroy()}}}function tr(V){V.writable&&!V.writableEnded&&!V.destroyed&&V.end()}Ce.from=function(V,Q){return ne(Ce,V,Q)};var Ct;function Zr(){return Ct===void 0&&(Ct={}),Ct}Ce.fromWeb=function(V,Q){return Zr().newStreamReadableFromReadableStream(V,Q)},Ce.toWeb=function(V,Q){return Zr().newReadableStreamFromStreamReadable(V,Q)},Ce.wrap=function(V,Q){var Xe,Ze;return new Ce({objectMode:(Xe=(Ze=V.readableObjectMode)!==null&&Ze!==void 0?Ze:V.objectMode)!==null&&Xe!==void 0?Xe:!0,...Q,destroy(it,Tt){P.destroyer(V,it),Tt(it)}}).wrap(V)}}),$1=$e((e,t)=>{Ue(),We(),ze();var r=vo(),{ArrayPrototypeSlice:i,Error:a,FunctionPrototypeSymbolHasInstance:s,ObjectDefineProperty:u,ObjectDefineProperties:h,ObjectSetPrototypeOf:f,StringPrototypeToLowerCase:d,Symbol:m,SymbolHasInstance:w}=or();t.exports=_e,_e.WritableState=z;var{EventEmitter:v}=(xo(),jt(Ds)),b=V1().Stream,{Buffer:C}=(Rr(),jt(kr)),N=va(),{addAbortSignal:R}=qc(),{getHighWaterMark:k,getDefaultHighWaterMark:S}=Qc(),{ERR_INVALID_ARG_TYPE:I,ERR_METHOD_NOT_IMPLEMENTED:B,ERR_MULTIPLE_CALLBACK:U,ERR_STREAM_CANNOT_PIPE:L,ERR_STREAM_DESTROYED:P,ERR_STREAM_ALREADY_FINISHED:W,ERR_STREAM_NULL_VALUES:q,ERR_STREAM_WRITE_AFTER_END:pe,ERR_UNKNOWN_ENCODING:Ae}=an().codes,{errorOrDestroy:H}=N;f(_e.prototype,b.prototype),f(_e,b);function ue(){}var xe=m("kOnFinished");function z(J,ie,ge){typeof ge!="boolean"&&(ge=ie instanceof Pi()),this.objectMode=!!(J&&J.objectMode),ge&&(this.objectMode=this.objectMode||!!(J&&J.writableObjectMode)),this.highWaterMark=J?k(this,J,"writableHighWaterMark",ge):S(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let Ee=!!(J&&J.decodeStrings===!1);this.decodeStrings=!Ee,this.defaultEncoding=J&&J.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=G.bind(void 0,ie),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Be(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!J||J.emitClose!==!1,this.autoDestroy=!J||J.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[xe]=[]}function Be(J){J.buffered=[],J.bufferedIndex=0,J.allBuffers=!0,J.allNoop=!0}z.prototype.getBuffer=function(){return i(this.buffered,this.bufferedIndex)},u(z.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function _e(J){let ie=this instanceof Pi();if(!ie&&!s(_e,this))return new _e(J);this._writableState=new z(J,this,ie),J&&(typeof J.write=="function"&&(this._write=J.write),typeof J.writev=="function"&&(this._writev=J.writev),typeof J.destroy=="function"&&(this._destroy=J.destroy),typeof J.final=="function"&&(this._final=J.final),typeof J.construct=="function"&&(this._construct=J.construct),J.signal&&R(J.signal,this)),b.call(this,J),N.construct(this,()=>{let ge=this._writableState;ge.writing||Pe(this,ge),ce(this,ge)})}u(_e,w,{__proto__:null,value:function(J){return s(this,J)?!0:this!==_e?!1:J&&J._writableState instanceof z}}),_e.prototype.pipe=function(){H(this,new L)};function he(J,ie,ge,Ee){let ve=J._writableState;if(typeof ge=="function")Ee=ge,ge=ve.defaultEncoding;else{if(!ge)ge=ve.defaultEncoding;else if(ge!=="buffer"&&!C.isEncoding(ge))throw new Ae(ge);typeof Ee!="function"&&(Ee=ue)}if(ie===null)throw new q;if(!ve.objectMode)if(typeof ie=="string")ve.decodeStrings!==!1&&(ie=C.from(ie,ge),ge="buffer");else if(ie instanceof C)ge="buffer";else if(b._isUint8Array(ie))ie=b._uint8ArrayToBuffer(ie),ge="buffer";else throw new I("chunk",["string","Buffer","Uint8Array"],ie);let je;return ve.ending?je=new pe:ve.destroyed&&(je=new P("write")),je?(r.nextTick(Ee,je),H(J,je,!0),je):(ve.pendingcb++,Me(J,ve,ie,ge,Ee))}_e.prototype.write=function(J,ie,ge){return he(this,J,ie,ge)===!0},_e.prototype.cork=function(){this._writableState.corked++},_e.prototype.uncork=function(){let J=this._writableState;J.corked&&(J.corked--,J.writing||Pe(this,J))},_e.prototype.setDefaultEncoding=function(J){if(typeof J=="string"&&(J=d(J)),!C.isEncoding(J))throw new Ae(J);return this._writableState.defaultEncoding=J,this};function Me(J,ie,ge,Ee,ve){let je=ie.objectMode?1:ge.length;ie.length+=je;let X=ie.length<ie.highWaterMark;return X||(ie.needDrain=!0),ie.writing||ie.corked||ie.errored||!ie.constructed?(ie.buffered.push({chunk:ge,encoding:Ee,callback:ve}),ie.allBuffers&&Ee!=="buffer"&&(ie.allBuffers=!1),ie.allNoop&&ve!==ue&&(ie.allNoop=!1)):(ie.writelen=je,ie.writecb=ve,ie.writing=!0,ie.sync=!0,J._write(ge,Ee,ie.onwrite),ie.sync=!1),X&&!ie.errored&&!ie.destroyed}function ne(J,ie,ge,Ee,ve,je,X){ie.writelen=Ee,ie.writecb=X,ie.writing=!0,ie.sync=!0,ie.destroyed?ie.onwrite(new P("write")):ge?J._writev(ve,ie.onwrite):J._write(ve,je,ie.onwrite),ie.sync=!1}function Re(J,ie,ge,Ee){--ie.pendingcb,Ee(ge),oe(ie),H(J,ge)}function G(J,ie){let ge=J._writableState,Ee=ge.sync,ve=ge.writecb;if(typeof ve!="function"){H(J,new U);return}ge.writing=!1,ge.writecb=null,ge.length-=ge.writelen,ge.writelen=0,ie?(ie.stack,ge.errored||(ge.errored=ie),J._readableState&&!J._readableState.errored&&(J._readableState.errored=ie),Ee?r.nextTick(Re,J,ge,ie,ve):Re(J,ge,ie,ve)):(ge.buffered.length>ge.bufferedIndex&&Pe(J,ge),Ee?ge.afterWriteTickInfo!==null&&ge.afterWriteTickInfo.cb===ve?ge.afterWriteTickInfo.count++:(ge.afterWriteTickInfo={count:1,cb:ve,stream:J,state:ge},r.nextTick(Oe,ge.afterWriteTickInfo)):Fe(J,ge,1,ve))}function Oe({stream:J,state:ie,count:ge,cb:Ee}){return ie.afterWriteTickInfo=null,Fe(J,ie,ge,Ee)}function Fe(J,ie,ge,Ee){for(!ie.ending&&!J.destroyed&&ie.length===0&&ie.needDrain&&(ie.needDrain=!1,J.emit("drain"));ge-- >0;)ie.pendingcb--,Ee();ie.destroyed&&oe(ie),ce(J,ie)}function oe(J){if(J.writing)return;for(let ve=J.bufferedIndex;ve<J.buffered.length;++ve){var ie;let{chunk:je,callback:X}=J.buffered[ve],Le=J.objectMode?1:je.length;J.length-=Le,X((ie=J.errored)!==null&&ie!==void 0?ie:new P("write"))}let ge=J[xe].splice(0);for(let ve=0;ve<ge.length;ve++){var Ee;ge[ve]((Ee=J.errored)!==null&&Ee!==void 0?Ee:new P("end"))}Be(J)}function Pe(J,ie){if(ie.corked||ie.bufferProcessing||ie.destroyed||!ie.constructed)return;let{buffered:ge,bufferedIndex:Ee,objectMode:ve}=ie,je=ge.length-Ee;if(!je)return;let X=Ee;if(ie.bufferProcessing=!0,je>1&&J._writev){ie.pendingcb-=je-1;let Le=ie.allNoop?ue:Ce=>{for(let ct=X;ct<ge.length;++ct)ge[ct].callback(Ce)},Ye=ie.allNoop&&X===0?ge:i(ge,X);Ye.allBuffers=ie.allBuffers,ne(J,ie,!0,ie.length,Ye,"",Le),Be(ie)}else{do{let{chunk:Le,encoding:Ye,callback:Ce}=ge[X];ge[X++]=null;let ct=ve?1:Le.length;ne(J,ie,!1,ct,Le,Ye,Ce)}while(X<ge.length&&!ie.writing);X===ge.length?Be(ie):X>256?(ge.splice(0,X),ie.bufferedIndex=0):ie.bufferedIndex=X}ie.bufferProcessing=!1}_e.prototype._write=function(J,ie,ge){if(this._writev)this._writev([{chunk:J,encoding:ie}],ge);else throw new B("_write()")},_e.prototype._writev=null,_e.prototype.end=function(J,ie,ge){let Ee=this._writableState;typeof J=="function"?(ge=J,J=null,ie=null):typeof ie=="function"&&(ge=ie,ie=null);let ve;if(J!=null){let je=he(this,J,ie);je instanceof a&&(ve=je)}return Ee.corked&&(Ee.corked=1,this.uncork()),ve||(!Ee.errored&&!Ee.ending?(Ee.ending=!0,ce(this,Ee,!0),Ee.ended=!0):Ee.finished?ve=new W("end"):Ee.destroyed&&(ve=new P("end"))),typeof ge=="function"&&(ve||Ee.finished?r.nextTick(ge,ve):Ee[xe].push(ge)),this};function de(J){return J.ending&&!J.destroyed&&J.constructed&&J.length===0&&!J.errored&&J.buffered.length===0&&!J.finished&&!J.writing&&!J.errorEmitted&&!J.closeEmitted}function ee(J,ie){let ge=!1;function Ee(ve){if(ge){H(J,ve??U());return}if(ge=!0,ie.pendingcb--,ve){let je=ie[xe].splice(0);for(let X=0;X<je.length;X++)je[X](ve);H(J,ve,ie.sync)}else de(ie)&&(ie.prefinished=!0,J.emit("prefinish"),ie.pendingcb++,r.nextTick(le,J,ie))}ie.sync=!0,ie.pendingcb++;try{J._final(Ee)}catch(ve){Ee(ve)}ie.sync=!1}function Ne(J,ie){!ie.prefinished&&!ie.finalCalled&&(typeof J._final=="function"&&!ie.destroyed?(ie.finalCalled=!0,ee(J,ie)):(ie.prefinished=!0,J.emit("prefinish")))}function ce(J,ie,ge){de(ie)&&(Ne(J,ie),ie.pendingcb===0&&(ge?(ie.pendingcb++,r.nextTick((Ee,ve)=>{de(ve)?le(Ee,ve):ve.pendingcb--},J,ie)):de(ie)&&(ie.pendingcb++,le(J,ie))))}function le(J,ie){ie.pendingcb--,ie.finished=!0;let ge=ie[xe].splice(0);for(let Ee=0;Ee<ge.length;Ee++)ge[Ee]();if(J.emit("finish"),ie.autoDestroy){let Ee=J._readableState;(!Ee||Ee.autoDestroy&&(Ee.endEmitted||Ee.readable===!1))&&J.destroy()}}h(_e.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(J){this._writableState&&(this._writableState.destroyed=J)}},writable:{__proto__:null,get(){let J=this._writableState;return!!J&&J.writable!==!1&&!J.destroyed&&!J.errored&&!J.ending&&!J.ended},set(J){this._writableState&&(this._writableState.writable=!!J)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let J=this._writableState;return J?!J.destroyed&&!J.ending&&J.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var fe=N.destroy;_e.prototype.destroy=function(J,ie){let ge=this._writableState;return!ge.destroyed&&(ge.bufferedIndex<ge.buffered.length||ge[xe].length)&&r.nextTick(oe,ge),fe.call(this,J,ie),this},_e.prototype._undestroy=N.undestroy,_e.prototype._destroy=function(J,ie){ie(J)},_e.prototype[v.captureRejectionSymbol]=function(J){this.destroy(J)};var Se;function ke(){return Se===void 0&&(Se={}),Se}_e.fromWeb=function(J,ie){return ke().newStreamWritableFromWritableStream(J,ie)},_e.toWeb=function(J){return ke().newWritableStreamFromStreamWritable(J)}}),KI=$e((e,t)=>{Ue(),We(),ze();var r=vo(),i=(Rr(),jt(kr)),{isReadable:a,isWritable:s,isIterable:u,isNodeStream:h,isReadableNodeStream:f,isWritableNodeStream:d,isDuplexNodeStream:m,isReadableStream:w,isWritableStream:v}=Fi(),b=Ps(),{AbortError:C,codes:{ERR_INVALID_ARG_TYPE:N,ERR_INVALID_RETURN_VALUE:R}}=an(),{destroyer:k}=va(),S=Pi(),I=Kc(),B=$1(),{createDeferredPromise:U}=wn(),L=fx(),P=globalThis.Blob||i.Blob,W=typeof P<"u"?function(xe){return xe instanceof P}:function(xe){return!1},q=globalThis.AbortController||Rl().AbortController,{FunctionPrototypeCall:pe}=or(),Ae=class extends S{constructor(xe){super(xe),(xe==null?void 0:xe.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(xe==null?void 0:xe.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};t.exports=function xe(z,Be){if(m(z))return z;if(f(z))return ue({readable:z});if(d(z))return ue({writable:z});if(h(z))return ue({writable:!1,readable:!1});if(w(z))return ue({readable:I.fromWeb(z)});if(v(z))return ue({writable:B.fromWeb(z)});if(typeof z=="function"){let{value:he,write:Me,final:ne,destroy:Re}=H(z);if(u(he))return L(Ae,he,{objectMode:!0,write:Me,final:ne,destroy:Re});let G=he==null?void 0:he.then;if(typeof G=="function"){let Oe,Fe=pe(G,he,oe=>{if(oe!=null)throw new R("nully","body",oe)},oe=>{k(Oe,oe)});return Oe=new Ae({objectMode:!0,readable:!1,write:Me,final(oe){ne(async()=>{try{await Fe,r.nextTick(oe,null)}catch(Pe){r.nextTick(oe,Pe)}})},destroy:Re})}throw new R("Iterable, AsyncIterable or AsyncFunction",Be,he)}if(W(z))return xe(z.arrayBuffer());if(u(z))return L(Ae,z,{objectMode:!0,writable:!1});if(w(z==null?void 0:z.readable)&&v(z==null?void 0:z.writable))return Ae.fromWeb(z);if(typeof(z==null?void 0:z.writable)=="object"||typeof(z==null?void 0:z.readable)=="object"){let he=z!=null&&z.readable?f(z==null?void 0:z.readable)?z==null?void 0:z.readable:xe(z.readable):void 0,Me=z!=null&&z.writable?d(z==null?void 0:z.writable)?z==null?void 0:z.writable:xe(z.writable):void 0;return ue({readable:he,writable:Me})}let _e=z==null?void 0:z.then;if(typeof _e=="function"){let he;return pe(_e,z,Me=>{Me!=null&&he.push(Me),he.push(null)},Me=>{k(he,Me)}),he=new Ae({objectMode:!0,writable:!1,read(){}})}throw new N(Be,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],z)};function H(xe){let{promise:z,resolve:Be}=U(),_e=new q,he=_e.signal;return{value:xe(async function*(){for(;;){let Me=z;z=null;let{chunk:ne,done:Re,cb:G}=await Me;if(r.nextTick(G),Re)return;if(he.aborted)throw new C(void 0,{cause:he.reason});({promise:z,resolve:Be}=U()),yield ne}}(),{signal:he}),write(Me,ne,Re){let G=Be;Be=null,G({chunk:Me,done:!1,cb:Re})},final(Me){let ne=Be;Be=null,ne({done:!0,cb:Me})},destroy(Me,ne){_e.abort(),ne(Me)}}}function ue(xe){let z=xe.readable&&typeof xe.readable.read!="function"?I.wrap(xe.readable):xe.readable,Be=xe.writable,_e=!!a(z),he=!!s(Be),Me,ne,Re,G,Oe;function Fe(oe){let Pe=G;G=null,Pe?Pe(oe):oe&&Oe.destroy(oe)}return Oe=new Ae({readableObjectMode:!!(z!=null&&z.readableObjectMode),writableObjectMode:!!(Be!=null&&Be.writableObjectMode),readable:_e,writable:he}),he&&(b(Be,oe=>{he=!1,oe&&k(z,oe),Fe(oe)}),Oe._write=function(oe,Pe,de){Be.write(oe,Pe)?de():Me=de},Oe._final=function(oe){Be.end(),ne=oe},Be.on("drain",function(){if(Me){let oe=Me;Me=null,oe()}}),Be.on("finish",function(){if(ne){let oe=ne;ne=null,oe()}})),_e&&(b(z,oe=>{_e=!1,oe&&k(z,oe),Fe(oe)}),z.on("readable",function(){if(Re){let oe=Re;Re=null,oe()}}),z.on("end",function(){Oe.push(null)}),Oe._read=function(){for(;;){let oe=z.read();if(oe===null){Re=Oe._read;return}if(!Oe.push(oe))return}}),Oe._destroy=function(oe,Pe){!oe&&G!==null&&(oe=new C),Re=null,Me=null,ne=null,G===null?Pe(oe):(G=Pe,k(Be,oe),k(z,oe))},Oe}}),Pi=$e((e,t)=>{Ue(),We(),ze();var{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:i,ObjectKeys:a,ObjectSetPrototypeOf:s}=or();t.exports=f;var u=Kc(),h=$1();s(f.prototype,u.prototype),s(f,u);{let v=a(h.prototype);for(let b=0;b<v.length;b++){let C=v[b];f.prototype[C]||(f.prototype[C]=h.prototype[C])}}function f(v){if(!(this instanceof f))return new f(v);u.call(this,v),h.call(this,v),v?(this.allowHalfOpen=v.allowHalfOpen!==!1,v.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),v.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(f.prototype,{writable:{__proto__:null,...i(h.prototype,"writable")},writableHighWaterMark:{__proto__:null,...i(h.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...i(h.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...i(h.prototype,"writableBuffer")},writableLength:{__proto__:null,...i(h.prototype,"writableLength")},writableFinished:{__proto__:null,...i(h.prototype,"writableFinished")},writableCorked:{__proto__:null,...i(h.prototype,"writableCorked")},writableEnded:{__proto__:null,...i(h.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...i(h.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(v){this._readableState&&this._writableState&&(this._readableState.destroyed=v,this._writableState.destroyed=v)}}});var d;function m(){return d===void 0&&(d={}),d}f.fromWeb=function(v,b){return m().newStreamDuplexFromReadableWritablePair(v,b)},f.toWeb=function(v){return m().newReadableWritablePairFromDuplex(v)};var w;f.from=function(v){return w||(w=KI()),w(v,"body")}}),dx=$e((e,t)=>{Ue(),We(),ze();var{ObjectSetPrototypeOf:r,Symbol:i}=or();t.exports=f;var{ERR_METHOD_NOT_IMPLEMENTED:a}=an().codes,s=Pi(),{getHighWaterMark:u}=Qc();r(f.prototype,s.prototype),r(f,s);var h=i("kCallback");function f(w){if(!(this instanceof f))return new f(w);let v=w?u(this,w,"readableHighWaterMark",!0):null;v===0&&(w={...w,highWaterMark:null,readableHighWaterMark:v,writableHighWaterMark:w.writableHighWaterMark||0}),s.call(this,w),this._readableState.sync=!1,this[h]=null,w&&(typeof w.transform=="function"&&(this._transform=w.transform),typeof w.flush=="function"&&(this._flush=w.flush)),this.on("prefinish",m)}function d(w){typeof this._flush=="function"&&!this.destroyed?this._flush((v,b)=>{if(v){w?w(v):this.destroy(v);return}b!=null&&this.push(b),this.push(null),w&&w()}):(this.push(null),w&&w())}function m(){this._final!==d&&d.call(this)}f.prototype._final=d,f.prototype._transform=function(w,v,b){throw new a("_transform()")},f.prototype._write=function(w,v,b){let C=this._readableState,N=this._writableState,R=C.length;this._transform(w,v,(k,S)=>{if(k){b(k);return}S!=null&&this.push(S),N.ended||R===C.length||C.length<C.highWaterMark?b():this[h]=b})},f.prototype._read=function(){if(this[h]){let w=this[h];this[h]=null,w()}}}),px=$e((e,t)=>{Ue(),We(),ze();var{ObjectSetPrototypeOf:r}=or();t.exports=a;var i=dx();r(a.prototype,i.prototype),r(a,i);function a(s){if(!(this instanceof a))return new a(s);i.call(this,s)}a.prototype._transform=function(s,u,h){h(null,s)}}),G1=$e((e,t)=>{Ue(),We(),ze();var r=vo(),{ArrayIsArray:i,Promise:a,SymbolAsyncIterator:s,SymbolDispose:u}=or(),h=Ps(),{once:f}=wn(),d=va(),m=Pi(),{aggregateTwoErrors:w,codes:{ERR_INVALID_ARG_TYPE:v,ERR_INVALID_RETURN_VALUE:b,ERR_MISSING_ARGS:C,ERR_STREAM_DESTROYED:N,ERR_STREAM_PREMATURE_CLOSE:R},AbortError:k}=an(),{validateFunction:S,validateAbortSignal:I}=zl(),{isIterable:B,isReadable:U,isReadableNodeStream:L,isNodeStream:P,isTransformStream:W,isWebStream:q,isReadableStream:pe,isReadableFinished:Ae}=Fi(),H=globalThis.AbortController||Rl().AbortController,ue,xe,z;function Be(oe,Pe,de){let ee=!1;oe.on("close",()=>{ee=!0});let Ne=h(oe,{readable:Pe,writable:de},ce=>{ee=!ce});return{destroy:ce=>{ee||(ee=!0,d.destroyer(oe,ce||new N("pipe")))},cleanup:Ne}}function _e(oe){return S(oe[oe.length-1],"streams[stream.length - 1]"),oe.pop()}function he(oe){if(B(oe))return oe;if(L(oe))return Me(oe);throw new v("val",["Readable","Iterable","AsyncIterable"],oe)}async function*Me(oe){xe||(xe=Kc()),yield*xe.prototype[s].call(oe)}async function ne(oe,Pe,de,{end:ee}){let Ne,ce=null,le=ke=>{if(ke&&(Ne=ke),ce){let J=ce;ce=null,J()}},fe=()=>new a((ke,J)=>{Ne?J(Ne):ce=()=>{Ne?J(Ne):ke()}});Pe.on("drain",le);let Se=h(Pe,{readable:!1},le);try{Pe.writableNeedDrain&&await fe();for await(let ke of oe)Pe.write(ke)||await fe();ee&&(Pe.end(),await fe()),de()}catch(ke){de(Ne!==ke?w(Ne,ke):ke)}finally{Se(),Pe.off("drain",le)}}async function Re(oe,Pe,de,{end:ee}){W(Pe)&&(Pe=Pe.writable);let Ne=Pe.getWriter();try{for await(let ce of oe)await Ne.ready,Ne.write(ce).catch(()=>{});await Ne.ready,ee&&await Ne.close(),de()}catch(ce){try{await Ne.abort(ce),de(ce)}catch(le){de(le)}}}function G(...oe){return Oe(oe,f(_e(oe)))}function Oe(oe,Pe,de){if(oe.length===1&&i(oe[0])&&(oe=oe[0]),oe.length<2)throw new C("streams");let ee=new H,Ne=ee.signal,ce=de==null?void 0:de.signal,le=[];I(ce,"options.signal");function fe(){ve(new k)}z=z||wn().addAbortListener;let Se;ce&&(Se=z(ce,fe));let ke,J,ie=[],ge=0;function Ee(Ye){ve(Ye,--ge===0)}function ve(Ye,Ce){var ct;if(Ye&&(!ke||ke.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ke=Ye),!(!ke&&!Ce)){for(;ie.length;)ie.shift()(ke);(ct=Se)===null||ct===void 0||ct[u](),ee.abort(),Ce&&(ke||le.forEach(E=>E()),r.nextTick(Pe,ke,J))}}let je;for(let Ye=0;Ye<oe.length;Ye++){let Ce=oe[Ye],ct=Ye<oe.length-1,E=Ye>0,A=ct||(de==null?void 0:de.end)!==!1,T=Ye===oe.length-1;if(P(Ce)){let j=function(K){K&&K.name!=="AbortError"&&K.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ee(K)};if(A){let{destroy:K,cleanup:re}=Be(Ce,ct,E);ie.push(K),U(Ce)&&T&&le.push(re)}Ce.on("error",j),U(Ce)&&T&&le.push(()=>{Ce.removeListener("error",j)})}if(Ye===0)if(typeof Ce=="function"){if(je=Ce({signal:Ne}),!B(je))throw new b("Iterable, AsyncIterable or Stream","source",je)}else B(Ce)||L(Ce)||W(Ce)?je=Ce:je=m.from(Ce);else if(typeof Ce=="function"){if(W(je)){var X;je=he((X=je)===null||X===void 0?void 0:X.readable)}else je=he(je);if(je=Ce(je,{signal:Ne}),ct){if(!B(je,!0))throw new b("AsyncIterable",`transform[${Ye-1}]`,je)}else{var Le;ue||(ue=px());let j=new ue({objectMode:!0}),K=(Le=je)===null||Le===void 0?void 0:Le.then;if(typeof K=="function")ge++,K.call(je,Ve=>{J=Ve,Ve!=null&&j.write(Ve),A&&j.end(),r.nextTick(Ee)},Ve=>{j.destroy(Ve),r.nextTick(Ee,Ve)});else if(B(je,!0))ge++,ne(je,j,Ee,{end:A});else if(pe(je)||W(je)){let Ve=je.readable||je;ge++,ne(Ve,j,Ee,{end:A})}else throw new b("AsyncIterable or Promise","destination",je);je=j;let{destroy:re,cleanup:me}=Be(je,!1,!0);ie.push(re),T&&le.push(me)}}else if(P(Ce)){if(L(je)){ge+=2;let j=Fe(je,Ce,Ee,{end:A});U(Ce)&&T&&le.push(j)}else if(W(je)||pe(je)){let j=je.readable||je;ge++,ne(j,Ce,Ee,{end:A})}else if(B(je))ge++,ne(je,Ce,Ee,{end:A});else throw new v("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],je);je=Ce}else if(q(Ce)){if(L(je))ge++,Re(he(je),Ce,Ee,{end:A});else if(pe(je)||B(je))ge++,Re(je,Ce,Ee,{end:A});else if(W(je))ge++,Re(je.readable,Ce,Ee,{end:A});else throw new v("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],je);je=Ce}else je=m.from(Ce)}return(Ne!=null&&Ne.aborted||ce!=null&&ce.aborted)&&r.nextTick(fe),je}function Fe(oe,Pe,de,{end:ee}){let Ne=!1;if(Pe.on("close",()=>{Ne||de(new R)}),oe.pipe(Pe,{end:!1}),ee){let ce=function(){Ne=!0,Pe.end()};Ae(oe)?r.nextTick(ce):oe.once("end",ce)}else de();return h(oe,{readable:!0,writable:!1},ce=>{let le=oe._readableState;ce&&ce.code==="ERR_STREAM_PREMATURE_CLOSE"&&le&&le.ended&&!le.errored&&!le.errorEmitted?oe.once("end",de).once("error",de):de(ce)}),h(Pe,{readable:!1,writable:!0},de)}t.exports={pipelineImpl:Oe,pipeline:G}}),gx=$e((e,t)=>{Ue(),We(),ze();var{pipeline:r}=G1(),i=Pi(),{destroyer:a}=va(),{isNodeStream:s,isReadable:u,isWritable:h,isWebStream:f,isTransformStream:d,isWritableStream:m,isReadableStream:w}=Fi(),{AbortError:v,codes:{ERR_INVALID_ARG_VALUE:b,ERR_MISSING_ARGS:C}}=an(),N=Ps();t.exports=function(...R){if(R.length===0)throw new C("streams");if(R.length===1)return i.from(R[0]);let k=[...R];if(typeof R[0]=="function"&&(R[0]=i.from(R[0])),typeof R[R.length-1]=="function"){let H=R.length-1;R[H]=i.from(R[H])}for(let H=0;H<R.length;++H)if(!(!s(R[H])&&!f(R[H]))){if(H<R.length-1&&!(u(R[H])||w(R[H])||d(R[H])))throw new b(`streams[${H}]`,k[H],"must be readable");if(H>0&&!(h(R[H])||m(R[H])||d(R[H])))throw new b(`streams[${H}]`,k[H],"must be writable")}let S,I,B,U,L;function P(H){let ue=U;U=null,ue?ue(H):H?L.destroy(H):!Ae&&!pe&&L.destroy()}let W=R[0],q=r(R,P),pe=!!(h(W)||m(W)||d(W)),Ae=!!(u(q)||w(q)||d(q));if(L=new i({writableObjectMode:!!(W!=null&&W.writableObjectMode),readableObjectMode:!!(q!=null&&q.readableObjectMode),writable:pe,readable:Ae}),pe){if(s(W))L._write=function(ue,xe,z){W.write(ue,xe)?z():S=z},L._final=function(ue){W.end(),I=ue},W.on("drain",function(){if(S){let ue=S;S=null,ue()}});else if(f(W)){let ue=(d(W)?W.writable:W).getWriter();L._write=async function(xe,z,Be){try{await ue.ready,ue.write(xe).catch(()=>{}),Be()}catch(_e){Be(_e)}},L._final=async function(xe){try{await ue.ready,ue.close().catch(()=>{}),I=xe}catch(z){xe(z)}}}let H=d(q)?q.readable:q;N(H,()=>{if(I){let ue=I;I=null,ue()}})}if(Ae){if(s(q))q.on("readable",function(){if(B){let H=B;B=null,H()}}),q.on("end",function(){L.push(null)}),L._read=function(){for(;;){let H=q.read();if(H===null){B=L._read;return}if(!L.push(H))return}};else if(f(q)){let H=(d(q)?q.readable:q).getReader();L._read=async function(){for(;;)try{let{value:ue,done:xe}=await H.read();if(!L.push(ue))return;if(xe){L.push(null);return}}catch{return}}}}return L._destroy=function(H,ue){!H&&U!==null&&(H=new v),B=null,S=null,I=null,U===null?ue(H):(U=ue,s(q)&&a(q,H))},L}}),ZI=$e((e,t)=>{Ue(),We(),ze();var r=globalThis.AbortController||Rl().AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:a,ERR_MISSING_ARGS:s,ERR_OUT_OF_RANGE:u},AbortError:h}=an(),{validateAbortSignal:f,validateInteger:d,validateObject:m}=zl(),w=or().Symbol("kWeak"),v=or().Symbol("kResistStopPropagation"),{finished:b}=Ps(),C=gx(),{addAbortSignalNoValidate:N}=qc(),{isWritable:R,isNodeStream:k}=Fi(),{deprecate:S}=wn(),{ArrayPrototypePush:I,Boolean:B,MathFloor:U,Number:L,NumberIsNaN:P,Promise:W,PromiseReject:q,PromiseResolve:pe,PromisePrototypeThen:Ae,Symbol:H}=or(),ue=H("kEmpty"),xe=H("kEof");function z(ce,le){if(le!=null&&m(le,"options"),(le==null?void 0:le.signal)!=null&&f(le.signal,"options.signal"),k(ce)&&!R(ce))throw new i("stream",ce,"must be writable");let fe=C(this,ce);return le!=null&&le.signal&&N(le.signal,fe),fe}function Be(ce,le){if(typeof ce!="function")throw new a("fn",["Function","AsyncFunction"],ce);le!=null&&m(le,"options"),(le==null?void 0:le.signal)!=null&&f(le.signal,"options.signal");let fe=1;(le==null?void 0:le.concurrency)!=null&&(fe=U(le.concurrency));let Se=fe-1;return(le==null?void 0:le.highWaterMark)!=null&&(Se=U(le.highWaterMark)),d(fe,"options.concurrency",1),d(Se,"options.highWaterMark",0),Se+=fe,(async function*(){let ke=wn().AbortSignalAny([le==null?void 0:le.signal].filter(B)),J=this,ie=[],ge={signal:ke},Ee,ve,je=!1,X=0;function Le(){je=!0,Ye()}function Ye(){X-=1,Ce()}function Ce(){ve&&!je&&X<fe&&ie.length<Se&&(ve(),ve=null)}async function ct(){try{for await(let E of J){if(je)return;if(ke.aborted)throw new h;try{if(E=ce(E,ge),E===ue)continue;E=pe(E)}catch(A){E=q(A)}X+=1,Ae(E,Ye,Le),ie.push(E),Ee&&(Ee(),Ee=null),!je&&(ie.length>=Se||X>=fe)&&await new W(A=>{ve=A})}ie.push(xe)}catch(E){let A=q(E);Ae(A,Ye,Le),ie.push(A)}finally{je=!0,Ee&&(Ee(),Ee=null)}}ct();try{for(;;){for(;ie.length>0;){let E=await ie[0];if(E===xe)return;if(ke.aborted)throw new h;E!==ue&&(yield E),ie.shift(),Ce()}await new W(E=>{Ee=E})}}finally{je=!0,ve&&(ve(),ve=null)}}).call(this)}function _e(ce=void 0){return ce!=null&&m(ce,"options"),(ce==null?void 0:ce.signal)!=null&&f(ce.signal,"options.signal"),(async function*(){let le=0;for await(let Se of this){var fe;if(ce!=null&&(fe=ce.signal)!==null&&fe!==void 0&&fe.aborted)throw new h({cause:ce.signal.reason});yield[le++,Se]}}).call(this)}async function he(ce,le=void 0){for await(let fe of G.call(this,ce,le))return!0;return!1}async function Me(ce,le=void 0){if(typeof ce!="function")throw new a("fn",["Function","AsyncFunction"],ce);return!await he.call(this,async(...fe)=>!await ce(...fe),le)}async function ne(ce,le){for await(let fe of G.call(this,ce,le))return fe}async function Re(ce,le){if(typeof ce!="function")throw new a("fn",["Function","AsyncFunction"],ce);async function fe(Se,ke){return await ce(Se,ke),ue}for await(let Se of Be.call(this,fe,le));}function G(ce,le){if(typeof ce!="function")throw new a("fn",["Function","AsyncFunction"],ce);async function fe(Se,ke){return await ce(Se,ke)?Se:ue}return Be.call(this,fe,le)}var Oe=class extends s{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function Fe(ce,le,fe){var Se;if(typeof ce!="function")throw new a("reducer",["Function","AsyncFunction"],ce);fe!=null&&m(fe,"options"),(fe==null?void 0:fe.signal)!=null&&f(fe.signal,"options.signal");let ke=arguments.length>1;if(fe!=null&&(Se=fe.signal)!==null&&Se!==void 0&&Se.aborted){let ve=new h(void 0,{cause:fe.signal.reason});throw this.once("error",()=>{}),await b(this.destroy(ve)),ve}let J=new r,ie=J.signal;if(fe!=null&&fe.signal){let ve={once:!0,[w]:this,[v]:!0};fe.signal.addEventListener("abort",()=>J.abort(),ve)}let ge=!1;try{for await(let ve of this){var Ee;if(ge=!0,fe!=null&&(Ee=fe.signal)!==null&&Ee!==void 0&&Ee.aborted)throw new h;ke?le=await ce(le,ve,{signal:ie}):(le=ve,ke=!0)}if(!ge&&!ke)throw new Oe}finally{J.abort()}return le}async function oe(ce){ce!=null&&m(ce,"options"),(ce==null?void 0:ce.signal)!=null&&f(ce.signal,"options.signal");let le=[];for await(let Se of this){var fe;if(ce!=null&&(fe=ce.signal)!==null&&fe!==void 0&&fe.aborted)throw new h(void 0,{cause:ce.signal.reason});I(le,Se)}return le}function Pe(ce,le){let fe=Be.call(this,ce,le);return(async function*(){for await(let Se of fe)yield*Se}).call(this)}function de(ce){if(ce=L(ce),P(ce))return 0;if(ce<0)throw new u("number",">= 0",ce);return ce}function ee(ce,le=void 0){return le!=null&&m(le,"options"),(le==null?void 0:le.signal)!=null&&f(le.signal,"options.signal"),ce=de(ce),(async function*(){var fe;if(le!=null&&(fe=le.signal)!==null&&fe!==void 0&&fe.aborted)throw new h;for await(let ke of this){var Se;if(le!=null&&(Se=le.signal)!==null&&Se!==void 0&&Se.aborted)throw new h;ce--<=0&&(yield ke)}}).call(this)}function Ne(ce,le=void 0){return le!=null&&m(le,"options"),(le==null?void 0:le.signal)!=null&&f(le.signal,"options.signal"),ce=de(ce),(async function*(){var fe;if(le!=null&&(fe=le.signal)!==null&&fe!==void 0&&fe.aborted)throw new h;for await(let ke of this){var Se;if(le!=null&&(Se=le.signal)!==null&&Se!==void 0&&Se.aborted)throw new h;if(ce-- >0&&(yield ke),ce<=0)return}}).call(this)}t.exports.streamReturningOperators={asIndexedPairs:S(_e,"readable.asIndexedPairs will be removed in a future version."),drop:ee,filter:G,flatMap:Pe,map:Be,take:Ne,compose:z},t.exports.promiseReturningOperators={every:Me,forEach:Re,reduce:Fe,toArray:oe,some:he,find:ne}}),mx=$e((e,t)=>{Ue(),We(),ze();var{ArrayPrototypePop:r,Promise:i}=or(),{isIterable:a,isNodeStream:s,isWebStream:u}=Fi(),{pipelineImpl:h}=G1(),{finished:f}=Ps();yx();function d(...m){return new i((w,v)=>{let b,C,N=m[m.length-1];if(N&&typeof N=="object"&&!s(N)&&!a(N)&&!u(N)){let R=r(m);b=R.signal,C=R.end}h(m,(R,k)=>{R?v(R):w(k)},{signal:b,end:C})})}t.exports={finished:f,pipeline:d}}),yx=$e((e,t)=>{Ue(),We(),ze();var{Buffer:r}=(Rr(),jt(kr)),{ObjectDefineProperty:i,ObjectKeys:a,ReflectApply:s}=or(),{promisify:{custom:u}}=wn(),{streamReturningOperators:h,promiseReturningOperators:f}=ZI(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:d}}=an(),m=gx(),{setDefaultHighWaterMark:w,getDefaultHighWaterMark:v}=Qc(),{pipeline:b}=G1(),{destroyer:C}=va(),N=Ps(),R=mx(),k=Fi(),S=t.exports=V1().Stream;S.isDestroyed=k.isDestroyed,S.isDisturbed=k.isDisturbed,S.isErrored=k.isErrored,S.isReadable=k.isReadable,S.isWritable=k.isWritable,S.Readable=Kc();for(let B of a(h)){let U=function(...P){if(new.target)throw d();return S.Readable.from(s(L,this,P))},L=h[B];i(U,"name",{__proto__:null,value:L.name}),i(U,"length",{__proto__:null,value:L.length}),i(S.Readable.prototype,B,{__proto__:null,value:U,enumerable:!1,configurable:!0,writable:!0})}for(let B of a(f)){let U=function(...P){if(new.target)throw d();return s(L,this,P)},L=f[B];i(U,"name",{__proto__:null,value:L.name}),i(U,"length",{__proto__:null,value:L.length}),i(S.Readable.prototype,B,{__proto__:null,value:U,enumerable:!1,configurable:!0,writable:!0})}S.Writable=$1(),S.Duplex=Pi(),S.Transform=dx(),S.PassThrough=px(),S.pipeline=b;var{addAbortSignal:I}=qc();S.addAbortSignal=I,S.finished=N,S.destroy=C,S.compose=m,S.setDefaultHighWaterMark=w,S.getDefaultHighWaterMark=v,i(S,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return R}}),i(b,u,{__proto__:null,enumerable:!0,get(){return R.pipeline}}),i(N,u,{__proto__:null,enumerable:!0,get(){return R.finished}}),S.Stream=S,S._isUint8Array=function(B){return B instanceof Uint8Array},S._uint8ArrayToBuffer=function(B){return r.from(B.buffer,B.byteOffset,B.byteLength)}}),bo=$e((e,t)=>{Ue(),We(),ze();var r=yx(),i=mx(),a=r.Readable.destroy;t.exports=r.Readable,t.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,t.exports._isUint8Array=r._isUint8Array,t.exports.isDisturbed=r.isDisturbed,t.exports.isErrored=r.isErrored,t.exports.isReadable=r.isReadable,t.exports.Readable=r.Readable,t.exports.Writable=r.Writable,t.exports.Duplex=r.Duplex,t.exports.Transform=r.Transform,t.exports.PassThrough=r.PassThrough,t.exports.addAbortSignal=r.addAbortSignal,t.exports.finished=r.finished,t.exports.destroy=r.destroy,t.exports.destroy=a,t.exports.pipeline=r.pipeline,t.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get(){return i}}),t.exports.Stream=r.Stream,t.exports.default=t.exports}),JI=$e((e,t)=>{Ue(),We(),ze(),typeof Object.create=="function"?t.exports=function(r,i){i&&(r.super_=i,r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,i){if(i){r.super_=i;var a=function(){};a.prototype=i.prototype,r.prototype=new a,r.prototype.constructor=r}}}),eT=$e((e,t)=>{Ue(),We(),ze();var{Buffer:r}=(Rr(),jt(kr)),i=Symbol.for("BufferList");function a(s){if(!(this instanceof a))return new a(s);a._init.call(this,s)}a._init=function(s){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,s&&this.append(s)},a.prototype._new=function(s){return new a(s)},a.prototype._offset=function(s){if(s===0)return[0,0];let u=0;for(let h=0;h<this._bufs.length;h++){let f=u+this._bufs[h].length;if(s<f||h===this._bufs.length-1)return[h,s-u];u=f}},a.prototype._reverseOffset=function(s){let u=s[0],h=s[1];for(let f=0;f<u;f++)h+=this._bufs[f].length;return h},a.prototype.get=function(s){if(s>this.length||s<0)return;let u=this._offset(s);return this._bufs[u[0]][u[1]]},a.prototype.slice=function(s,u){return typeof s=="number"&&s<0&&(s+=this.length),typeof u=="number"&&u<0&&(u+=this.length),this.copy(null,0,s,u)},a.prototype.copy=function(s,u,h,f){if((typeof h!="number"||h<0)&&(h=0),(typeof f!="number"||f>this.length)&&(f=this.length),h>=this.length||f<=0)return s||r.alloc(0);let d=!!s,m=this._offset(h),w=f-h,v=w,b=d&&u||0,C=m[1];if(h===0&&f===this.length){if(!d)return this._bufs.length===1?this._bufs[0]:r.concat(this._bufs,this.length);for(let N=0;N<this._bufs.length;N++)this._bufs[N].copy(s,b),b+=this._bufs[N].length;return s}if(v<=this._bufs[m[0]].length-C)return d?this._bufs[m[0]].copy(s,u,C,C+v):this._bufs[m[0]].slice(C,C+v);d||(s=r.allocUnsafe(w));for(let N=m[0];N<this._bufs.length;N++){let R=this._bufs[N].length-C;if(v>R)this._bufs[N].copy(s,b,C),b+=R;else{this._bufs[N].copy(s,b,C,C+v),b+=R;break}v-=R,C&&(C=0)}return s.length>b?s.slice(0,b):s},a.prototype.shallowSlice=function(s,u){if(s=s||0,u=typeof u!="number"?this.length:u,s<0&&(s+=this.length),u<0&&(u+=this.length),s===u)return this._new();let h=this._offset(s),f=this._offset(u),d=this._bufs.slice(h[0],f[0]+1);return f[1]===0?d.pop():d[d.length-1]=d[d.length-1].slice(0,f[1]),h[1]!==0&&(d[0]=d[0].slice(h[1])),this._new(d)},a.prototype.toString=function(s,u,h){return this.slice(u,h).toString(s)},a.prototype.consume=function(s){if(s=Math.trunc(s),Number.isNaN(s)||s<=0)return this;for(;this._bufs.length;)if(s>=this._bufs[0].length)s-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(s),this.length-=s;break}return this},a.prototype.duplicate=function(){let s=this._new();for(let u=0;u<this._bufs.length;u++)s.append(this._bufs[u]);return s},a.prototype.append=function(s){if(s==null)return this;if(s.buffer)this._appendBuffer(r.from(s.buffer,s.byteOffset,s.byteLength));else if(Array.isArray(s))for(let u=0;u<s.length;u++)this.append(s[u]);else if(this._isBufferList(s))for(let u=0;u<s._bufs.length;u++)this.append(s._bufs[u]);else typeof s=="number"&&(s=s.toString()),this._appendBuffer(r.from(s));return this},a.prototype._appendBuffer=function(s){this._bufs.push(s),this.length+=s.length},a.prototype.indexOf=function(s,u,h){if(h===void 0&&typeof u=="string"&&(h=u,u=void 0),typeof s=="function"||Array.isArray(s))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof s=="number"?s=r.from([s]):typeof s=="string"?s=r.from(s,h):this._isBufferList(s)?s=s.slice():Array.isArray(s.buffer)?s=r.from(s.buffer,s.byteOffset,s.byteLength):r.isBuffer(s)||(s=r.from(s)),u=Number(u||0),isNaN(u)&&(u=0),u<0&&(u=this.length+u),u<0&&(u=0),s.length===0)return u>this.length?this.length:u;let f=this._offset(u),d=f[0],m=f[1];for(;d<this._bufs.length;d++){let w=this._bufs[d];for(;m<w.length;)if(w.length-m>=s.length){let v=w.indexOf(s,m);if(v!==-1)return this._reverseOffset([d,v]);m=w.length-s.length+1}else{let v=this._reverseOffset([d,m]);if(this._match(v,s))return v;m++}m=0}return-1},a.prototype._match=function(s,u){if(this.length-s<u.length)return!1;for(let h=0;h<u.length;h++)if(this.get(s+h)!==u[h])return!1;return!0},function(){let s={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let u in s)(function(h){s[h]===null?a.prototype[h]=function(f,d){return this.slice(f,f+d)[h](0,d)}:a.prototype[h]=function(f=0){return this.slice(f,f+s[h])[h](0)}})(u)}(),a.prototype._isBufferList=function(s){return s instanceof a||a.isBufferList(s)},a.isBufferList=function(s){return s!=null&&s[i]},t.exports=a}),tT=$e((e,t)=>{Ue(),We(),ze();var r=bo().Duplex,i=JI(),a=eT();function s(u){if(!(this instanceof s))return new s(u);if(typeof u=="function"){this._callback=u;let h=(function(f){this._callback&&(this._callback(f),this._callback=null)}).bind(this);this.on("pipe",function(f){f.on("error",h)}),this.on("unpipe",function(f){f.removeListener("error",h)}),u=null}a._init.call(this,u),r.call(this)}i(s,r),Object.assign(s.prototype,a.prototype),s.prototype._new=function(u){return new s(u)},s.prototype._write=function(u,h,f){this._appendBuffer(u),typeof f=="function"&&f()},s.prototype._read=function(u){if(!this.length)return this.push(null);u=Math.min(u,this.length),this.push(this.slice(0,u)),this.consume(u)},s.prototype.end=function(u){r.prototype.end.call(this,u),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype._destroy=function(u,h){this._bufs.length=0,this.length=0,h(u)},s.prototype._isBufferList=function(u){return u instanceof s||u instanceof a||s.isBufferList(u)},s.isBufferList=a.isBufferList,t.exports=s,t.exports.BufferListStream=s,t.exports.BufferList=a}),rT=$e((e,t)=>{Ue(),We(),ze();var r=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};t.exports=r}),xx=$e((e,t)=>{Ue(),We(),ze();var r=t.exports,{Buffer:i}=(Rr(),jt(kr));r.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},r.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},r.requiredHeaderFlagsErrors={};for(let s in r.requiredHeaderFlags){let u=r.requiredHeaderFlags[s];r.requiredHeaderFlagsErrors[s]="Invalid header flag bits, must be 0x"+u.toString(16)+" for "+r.types[s]+" packet"}r.codes={};for(let s in r.types){let u=r.types[s];r.codes[u]=s}r.CMD_SHIFT=4,r.CMD_MASK=240,r.DUP_MASK=8,r.QOS_MASK=3,r.QOS_SHIFT=1,r.RETAIN_MASK=1,r.VARBYTEINT_MASK=127,r.VARBYTEINT_FIN_MASK=128,r.VARBYTEINT_MAX=268435455,r.SESSIONPRESENT_MASK=1,r.SESSIONPRESENT_HEADER=i.from([r.SESSIONPRESENT_MASK]),r.CONNACK_HEADER=i.from([r.codes.connack<<r.CMD_SHIFT]),r.USERNAME_MASK=128,r.PASSWORD_MASK=64,r.WILL_RETAIN_MASK=32,r.WILL_QOS_MASK=24,r.WILL_QOS_SHIFT=3,r.WILL_FLAG_MASK=4,r.CLEAN_SESSION_MASK=2,r.CONNECT_HEADER=i.from([r.codes.connect<<r.CMD_SHIFT]),r.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},r.propertiesCodes={};for(let s in r.properties){let u=r.properties[s];r.propertiesCodes[u]=s}r.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function a(s){return[0,1,2].map(u=>[0,1].map(h=>[0,1].map(f=>{let d=i.alloc(1);return d.writeUInt8(r.codes[s]<<r.CMD_SHIFT|(h?r.DUP_MASK:0)|u<<r.QOS_SHIFT|f,0,!0),d})))}r.PUBLISH_HEADER=a("publish"),r.SUBSCRIBE_HEADER=a("subscribe"),r.SUBSCRIBE_OPTIONS_QOS_MASK=3,r.SUBSCRIBE_OPTIONS_NL_MASK=1,r.SUBSCRIBE_OPTIONS_NL_SHIFT=2,r.SUBSCRIBE_OPTIONS_RAP_MASK=1,r.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,r.SUBSCRIBE_OPTIONS_RH_MASK=3,r.SUBSCRIBE_OPTIONS_RH_SHIFT=4,r.SUBSCRIBE_OPTIONS_RH=[0,16,32],r.SUBSCRIBE_OPTIONS_NL=4,r.SUBSCRIBE_OPTIONS_RAP=8,r.SUBSCRIBE_OPTIONS_QOS=[0,1,2],r.UNSUBSCRIBE_HEADER=a("unsubscribe"),r.ACKS={unsuback:a("unsuback"),puback:a("puback"),pubcomp:a("pubcomp"),pubrel:a("pubrel"),pubrec:a("pubrec")},r.SUBACK_HEADER=i.from([r.codes.suback<<r.CMD_SHIFT]),r.VERSION3=i.from([3]),r.VERSION4=i.from([4]),r.VERSION5=i.from([5]),r.VERSION131=i.from([131]),r.VERSION132=i.from([132]),r.QOS=[0,1,2].map(s=>i.from([s])),r.EMPTY={pingreq:i.from([r.codes.pingreq<<4,0]),pingresp:i.from([r.codes.pingresp<<4,0]),disconnect:i.from([r.codes.disconnect<<4,0])},r.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},r.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},r.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},r.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},r.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},r.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),nT=$e((e,t)=>{Ue(),We(),ze();var r=1e3,i=r*60,a=i*60,s=a*24,u=s*7,h=s*365.25;t.exports=function(v,b){b=b||{};var C=typeof v;if(C==="string"&&v.length>0)return f(v);if(C==="number"&&isFinite(v))return b.long?m(v):d(v);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(v))};function f(v){if(v=String(v),!(v.length>100)){var b=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(v);if(b){var C=parseFloat(b[1]),N=(b[2]||"ms").toLowerCase();switch(N){case"years":case"year":case"yrs":case"yr":case"y":return C*h;case"weeks":case"week":case"w":return C*u;case"days":case"day":case"d":return C*s;case"hours":case"hour":case"hrs":case"hr":case"h":return C*a;case"minutes":case"minute":case"mins":case"min":case"m":return C*i;case"seconds":case"second":case"secs":case"sec":case"s":return C*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return C;default:return}}}}function d(v){var b=Math.abs(v);return b>=s?Math.round(v/s)+"d":b>=a?Math.round(v/a)+"h":b>=i?Math.round(v/i)+"m":b>=r?Math.round(v/r)+"s":v+"ms"}function m(v){var b=Math.abs(v);return b>=s?w(v,b,s,"day"):b>=a?w(v,b,a,"hour"):b>=i?w(v,b,i,"minute"):b>=r?w(v,b,r,"second"):v+" ms"}function w(v,b,C,N){var R=b>=C*1.5;return Math.round(v/C)+" "+N+(R?"s":"")}}),iT=$e((e,t)=>{Ue(),We(),ze();function r(i){s.debug=s,s.default=s,s.coerce=w,s.disable=d,s.enable=h,s.enabled=m,s.humanize=nT(),s.destroy=v,Object.keys(i).forEach(b=>{s[b]=i[b]}),s.names=[],s.skips=[],s.formatters={};function a(b){let C=0;for(let N=0;N<b.length;N++)C=(C<<5)-C+b.charCodeAt(N),C|=0;return s.colors[Math.abs(C)%s.colors.length]}s.selectColor=a;function s(b){let C,N=null,R,k;function S(...I){if(!S.enabled)return;let B=S,U=Number(new Date),L=U-(C||U);B.diff=L,B.prev=C,B.curr=U,C=U,I[0]=s.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let P=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,(W,q)=>{if(W==="%%")return"%";P++;let pe=s.formatters[q];if(typeof pe=="function"){let Ae=I[P];W=pe.call(B,Ae),I.splice(P,1),P--}return W}),s.formatArgs.call(B,I),(B.log||s.log).apply(B,I)}return S.namespace=b,S.useColors=s.useColors(),S.color=s.selectColor(b),S.extend=u,S.destroy=s.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>N!==null?N:(R!==s.namespaces&&(R=s.namespaces,k=s.enabled(b)),k),set:I=>{N=I}}),typeof s.init=="function"&&s.init(S),S}function u(b,C){let N=s(this.namespace+(typeof C>"u"?":":C)+b);return N.log=this.log,N}function h(b){s.save(b),s.namespaces=b,s.names=[],s.skips=[];let C=(typeof b=="string"?b:"").trim().replace(" ",",").split(",").filter(Boolean);for(let N of C)N[0]==="-"?s.skips.push(N.slice(1)):s.names.push(N)}function f(b,C){let N=0,R=0,k=-1,S=0;for(;N<b.length;)if(R<C.length&&(C[R]===b[N]||C[R]==="*"))C[R]==="*"?(k=R,S=N,R++):(N++,R++);else if(k!==-1)R=k+1,S++,N=S;else return!1;for(;R<C.length&&C[R]==="*";)R++;return R===C.length}function d(){let b=[...s.names,...s.skips.map(C=>"-"+C)].join(",");return s.enable(""),b}function m(b){for(let C of s.skips)if(f(b,C))return!1;for(let C of s.names)if(f(b,C))return!0;return!1}function w(b){return b instanceof Error?b.stack||b.message:b}function v(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}t.exports=r}),Li=$e((e,t)=>{Ue(),We(),ze(),e.formatArgs=i,e.save=a,e.load=s,e.useColors=r,e.storage=u(),e.destroy=(()=>{let f=!1;return()=>{f||(f=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let f;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(f=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(f[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(f){if(f[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+f[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let d="color: "+this.color;f.splice(1,0,d,"color: inherit");let m=0,w=0;f[0].replace(/%[a-zA-Z%]/g,v=>{v!=="%%"&&(m++,v==="%c"&&(w=m))}),f.splice(w,0,d)}e.log=console.debug||console.log||(()=>{});function a(f){try{f?e.storage.setItem("debug",f):e.storage.removeItem("debug")}catch{}}function s(){let f;try{f=e.storage.getItem("debug")}catch{}return!f&&typeof It<"u"&&"env"in It&&(f=It.env.DEBUG),f}function u(){try{return localStorage}catch{}}t.exports=iT()(e);var{formatters:h}=t.exports;h.j=function(f){try{return JSON.stringify(f)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}}),sT=$e((e,t)=>{Ue(),We(),ze();var r=tT(),{EventEmitter:i}=(xo(),jt(Ds)),a=rT(),s=xx(),u=Li()("mqtt-packet:parser"),h=class b0 extends i{constructor(){super(),this.parser=this.constructor.parser}static parser(d){return this instanceof b0?(this.settings=d||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new b0().parser(d)}_resetState(){u("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new a,this.error=null,this._list=r(),this._stateCounter=0}parse(d){for(this.error&&this._resetState(),this._list.append(d),u("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,u("parse: state complete. _stateCounter is now: %d",this._stateCounter),u("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return u("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let d=this._list.readUInt8(0),m=d>>s.CMD_SHIFT;this.packet.cmd=s.types[m];let w=d&15,v=s.requiredHeaderFlags[m];return v!=null&&w!==v?this._emitError(new Error(s.requiredHeaderFlagsErrors[m])):(this.packet.retain=(d&s.RETAIN_MASK)!==0,this.packet.qos=d>>s.QOS_SHIFT&s.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(d&s.DUP_MASK)!==0,u("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let d=this._parseVarByteNum(!0);return d&&(this.packet.length=d.value,this._list.consume(d.bytes)),u("_parseLength %d",d.value),!!d}_parsePayload(){u("_parsePayload: payload %O",this._list);let d=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}d=!0}return u("_parsePayload complete result: %s",d),d}_parseConnect(){u("_parseConnect");let d,m,w,v,b={},C=this.packet,N=this._parseString();if(N===null)return this._emitError(new Error("Cannot parse protocolId"));if(N!=="MQTT"&&N!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(C.protocolId=N,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(C.protocolVersion=this._list.readUInt8(this._pos),C.protocolVersion>=128&&(C.bridgeMode=!0,C.protocolVersion=C.protocolVersion-128),C.protocolVersion!==3&&C.protocolVersion!==4&&C.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));b.username=this._list.readUInt8(this._pos)&s.USERNAME_MASK,b.password=this._list.readUInt8(this._pos)&s.PASSWORD_MASK,b.will=this._list.readUInt8(this._pos)&s.WILL_FLAG_MASK;let R=!!(this._list.readUInt8(this._pos)&s.WILL_RETAIN_MASK),k=(this._list.readUInt8(this._pos)&s.WILL_QOS_MASK)>>s.WILL_QOS_SHIFT;if(b.will)C.will={},C.will.retain=R,C.will.qos=k;else{if(R)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(k)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(C.clean=(this._list.readUInt8(this._pos)&s.CLEAN_SESSION_MASK)!==0,this._pos++,C.keepalive=this._parseNum(),C.keepalive===-1)return this._emitError(new Error("Packet too short"));if(C.protocolVersion===5){let I=this._parseProperties();Object.getOwnPropertyNames(I).length&&(C.properties=I)}let S=this._parseString();if(S===null)return this._emitError(new Error("Packet too short"));if(C.clientId=S,u("_parseConnect: packet.clientId: %s",C.clientId),b.will){if(C.protocolVersion===5){let I=this._parseProperties();Object.getOwnPropertyNames(I).length&&(C.will.properties=I)}if(d=this._parseString(),d===null)return this._emitError(new Error("Cannot parse will topic"));if(C.will.topic=d,u("_parseConnect: packet.will.topic: %s",C.will.topic),m=this._parseBuffer(),m===null)return this._emitError(new Error("Cannot parse will payload"));C.will.payload=m,u("_parseConnect: packet.will.paylaod: %s",C.will.payload)}if(b.username){if(v=this._parseString(),v===null)return this._emitError(new Error("Cannot parse username"));C.username=v,u("_parseConnect: packet.username: %s",C.username)}if(b.password){if(w=this._parseBuffer(),w===null)return this._emitError(new Error("Cannot parse password"));C.password=w}return this.settings=C,u("_parseConnect: complete"),C}_parseConnack(){u("_parseConnack");let d=this.packet;if(this._list.length<1)return null;let m=this._list.readUInt8(this._pos++);if(m>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(d.sessionPresent=!!(m&s.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?d.reasonCode=this._list.readUInt8(this._pos++):d.reasonCode=0;else{if(this._list.length<2)return null;d.returnCode=this._list.readUInt8(this._pos++)}if(d.returnCode===-1||d.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(d.properties=w)}u("_parseConnack: complete")}_parsePublish(){u("_parsePublish");let d=this.packet;if(d.topic=this._parseString(),d.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(d.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let m=this._parseProperties();Object.getOwnPropertyNames(m).length&&(d.properties=m)}d.payload=this._list.slice(this._pos,d.length),u("_parsePublish: payload from buffer list: %o",d.payload)}}_parseSubscribe(){u("_parseSubscribe");let d=this.packet,m,w,v,b,C,N,R;if(d.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let k=this._parseProperties();Object.getOwnPropertyNames(k).length&&(d.properties=k)}if(d.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<d.length;){if(m=this._parseString(),m===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=d.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(w=this._parseByte(),this.settings.protocolVersion===5){if(w&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(w&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(v=w&s.SUBSCRIBE_OPTIONS_QOS_MASK,v>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(N=(w>>s.SUBSCRIBE_OPTIONS_NL_SHIFT&s.SUBSCRIBE_OPTIONS_NL_MASK)!==0,C=(w>>s.SUBSCRIBE_OPTIONS_RAP_SHIFT&s.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,b=w>>s.SUBSCRIBE_OPTIONS_RH_SHIFT&s.SUBSCRIBE_OPTIONS_RH_MASK,b>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));R={topic:m,qos:v},this.settings.protocolVersion===5?(R.nl=N,R.rap=C,R.rh=b):this.settings.bridgeMode&&(R.rh=0,R.rap=!0,R.nl=!0),u("_parseSubscribe: push subscription `%s` to subscription",R),d.subscriptions.push(R)}}}_parseSuback(){u("_parseSuback");let d=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let m=this._parseProperties();Object.getOwnPropertyNames(m).length&&(d.properties=m)}if(d.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let m=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!s.MQTT5_SUBACK_CODES[m])return this._emitError(new Error("Invalid suback code"))}else if(m>2&&m!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(m)}}}_parseUnsubscribe(){u("_parseUnsubscribe");let d=this.packet;if(d.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let m=this._parseProperties();Object.getOwnPropertyNames(m).length&&(d.properties=m)}if(d.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<d.length;){let m=this._parseString();if(m===null)return this._emitError(new Error("Cannot parse topic"));u("_parseUnsubscribe: push topic `%s` to unsubscriptions",m),d.unsubscriptions.push(m)}}}_parseUnsuback(){u("_parseUnsuback");let d=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&d.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(d.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let m=this._parseProperties();for(Object.getOwnPropertyNames(m).length&&(d.properties=m),d.granted=[];this._pos<this.packet.length;){let w=this._list.readUInt8(this._pos++);if(!s.MQTT5_UNSUBACK_CODES[w])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(w)}}}_parseConfirmation(){u("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let d=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(d.length>2){switch(d.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!s.MQTT5_PUBACK_PUBREC_CODES[d.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!s.MQTT5_PUBREL_PUBCOMP_CODES[d.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}u("_parseConfirmation: packet.reasonCode `%d`",d.reasonCode)}else d.reasonCode=0;if(d.length>3){let m=this._parseProperties();Object.getOwnPropertyNames(m).length&&(d.properties=m)}}return!0}_parseDisconnect(){let d=this.packet;if(u("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(d.reasonCode=this._parseByte(),s.MQTT5_DISCONNECT_CODES[d.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):d.reasonCode=0;let m=this._parseProperties();Object.getOwnPropertyNames(m).length&&(d.properties=m)}return u("_parseDisconnect result: true"),!0}_parseAuth(){u("_parseAuth");let d=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(d.reasonCode=this._parseByte(),!s.MQTT5_AUTH_CODES[d.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let m=this._parseProperties();return Object.getOwnPropertyNames(m).length&&(d.properties=m),u("_parseAuth: result: true"),!0}_parseMessageId(){let d=this.packet;return d.messageId=this._parseNum(),d.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(u("_parseMessageId: packet.messageId %d",d.messageId),!0)}_parseString(d){let m=this._parseNum(),w=m+this._pos;if(m===-1||w>this._list.length||w>this.packet.length)return null;let v=this._list.toString("utf8",this._pos,w);return this._pos+=m,u("_parseString: result: %s",v),v}_parseStringPair(){return u("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let d=this._parseNum(),m=d+this._pos;if(d===-1||m>this._list.length||m>this.packet.length)return null;let w=this._list.slice(this._pos,m);return this._pos+=d,u("_parseBuffer: result: %o",w),w}_parseNum(){if(this._list.length-this._pos<2)return-1;let d=this._list.readUInt16BE(this._pos);return this._pos+=2,u("_parseNum: result: %s",d),d}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let d=this._list.readUInt32BE(this._pos);return this._pos+=4,u("_parse4ByteNum: result: %s",d),d}_parseVarByteNum(d){u("_parseVarByteNum");let m=4,w=0,v=1,b=0,C=!1,N,R=this._pos?this._pos:0;for(;w<m&&R+w<this._list.length;){if(N=this._list.readUInt8(R+w++),b+=v*(N&s.VARBYTEINT_MASK),v*=128,(N&s.VARBYTEINT_FIN_MASK)===0){C=!0;break}if(this._list.length<=w)break}return!C&&w===m&&this._list.length>=w&&this._emitError(new Error("Invalid variable byte integer")),R&&(this._pos+=w),C?d?C={bytes:w,value:b}:C=b:C=!1,u("_parseVarByteNum: result: %o",C),C}_parseByte(){let d;return this._pos<this._list.length&&(d=this._list.readUInt8(this._pos),this._pos++),u("_parseByte: result: %o",d),d}_parseByType(d){switch(u("_parseByType: type: %s",d),d){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){u("_parseProperties");let d=this._parseVarByteNum(),m=this._pos+d,w={};for(;this._pos<m;){let v=this._parseByte();if(!v)return this._emitError(new Error("Cannot parse property code type")),!1;let b=s.propertiesCodes[v];if(!b)return this._emitError(new Error("Unknown property")),!1;if(b==="userProperties"){w[b]||(w[b]=Object.create(null));let C=this._parseByType(s.propertiesTypes[b]);if(w[b][C.name])if(Array.isArray(w[b][C.name]))w[b][C.name].push(C.value);else{let N=w[b][C.name];w[b][C.name]=[N],w[b][C.name].push(C.value)}else w[b][C.name]=C.value;continue}w[b]?Array.isArray(w[b])?w[b].push(this._parseByType(s.propertiesTypes[b])):(w[b]=[w[b]],w[b].push(this._parseByType(s.propertiesTypes[b]))):w[b]=this._parseByType(s.propertiesTypes[b])}return w}_newPacket(){return u("_newPacket"),this.packet&&(this._list.consume(this.packet.length),u("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),u("_newPacket: new packet"),this.packet=new a,this._pos=0,!0}_emitError(d){u("_emitError",d),this.error=d,this.emit("error",d)}};t.exports=h}),oT=$e((e,t)=>{Ue(),We(),ze();var{Buffer:r}=(Rr(),jt(kr)),i=65536,a={},s=r.isBuffer(r.from([1,2]).subarray(0,1));function u(m){let w=r.allocUnsafe(2);return w.writeUInt8(m>>8,0),w.writeUInt8(m&255,1),w}function h(){for(let m=0;m<i;m++)a[m]=u(m)}function f(m){let w=0,v=0,b=r.allocUnsafe(4);do w=m%128|0,m=m/128|0,m>0&&(w=w|128),b.writeUInt8(w,v++);while(m>0&&v<4);return m>0&&(v=0),s?b.subarray(0,v):b.slice(0,v)}function d(m){let w=r.allocUnsafe(4);return w.writeUInt32BE(m,0),w}t.exports={cache:a,generateCache:h,generateNumber:u,genBufVariableByteInt:f,generate4ByteBuffer:d}}),aT=$e((e,t)=>{Ue(),We(),ze(),typeof It>"u"||!It.version||It.version.indexOf("v0.")===0||It.version.indexOf("v1.")===0&&It.version.indexOf("v1.8.")!==0?t.exports={nextTick:r}:t.exports=It;function r(i,a,s,u){if(typeof i!="function")throw new TypeError('"callback" argument must be a function');var h=arguments.length,f,d;switch(h){case 0:case 1:return It.nextTick(i);case 2:return It.nextTick(function(){i.call(null,a)});case 3:return It.nextTick(function(){i.call(null,a,s)});case 4:return It.nextTick(function(){i.call(null,a,s,u)});default:for(f=new Array(h-1),d=0;d<f.length;)f[d++]=arguments[d];return It.nextTick(function(){i.apply(null,f)})}}}),vx=$e((e,t)=>{Ue(),We(),ze();var r=xx(),{Buffer:i}=(Rr(),jt(kr)),a=i.allocUnsafe(0),s=i.from([0]),u=oT(),h=aT().nextTick,f=Li()("mqtt-packet:writeToStream"),d=u.cache,m=u.generateNumber,w=u.generateCache,v=u.genBufVariableByteInt,b=u.generate4ByteBuffer,C=_e,N=!0;function R(de,ee,Ne){switch(f("generate called"),ee.cork&&(ee.cork(),h(k,ee)),N&&(N=!1,w()),f("generate: packet.cmd: %s",de.cmd),de.cmd){case"connect":return S(de,ee);case"connack":return I(de,ee,Ne);case"publish":return B(de,ee,Ne);case"puback":case"pubrec":case"pubrel":case"pubcomp":return U(de,ee,Ne);case"subscribe":return L(de,ee,Ne);case"suback":return P(de,ee,Ne);case"unsubscribe":return W(de,ee,Ne);case"unsuback":return q(de,ee,Ne);case"pingreq":case"pingresp":return pe(de,ee);case"disconnect":return Ae(de,ee,Ne);case"auth":return H(de,ee,Ne);default:return ee.destroy(new Error("Unknown command")),!1}}Object.defineProperty(R,"cacheNumbers",{get(){return C===_e},set(de){de?((!d||Object.keys(d).length===0)&&(N=!0),C=_e):(N=!1,C=he)}});function k(de){de.uncork()}function S(de,ee,Ne){let ce=de||{},le=ce.protocolId||"MQTT",fe=ce.protocolVersion||4,Se=ce.will,ke=ce.clean,J=ce.keepalive||0,ie=ce.clientId||"",ge=ce.username,Ee=ce.password,ve=ce.properties;ke===void 0&&(ke=!0);let je=0;if(!le||typeof le!="string"&&!i.isBuffer(le))return ee.destroy(new Error("Invalid protocolId")),!1;if(je+=le.length+2,fe!==3&&fe!==4&&fe!==5)return ee.destroy(new Error("Invalid protocol version")),!1;if(je+=1,(typeof ie=="string"||i.isBuffer(ie))&&(ie||fe>=4)&&(ie||ke))je+=i.byteLength(ie)+2;else{if(fe<4)return ee.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(ke*1===0)return ee.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof J!="number"||J<0||J>65535||J%1!==0)return ee.destroy(new Error("Invalid keepalive")),!1;je+=2,je+=1;let X,Le;if(fe===5){if(X=Re(ee,ve),!X)return!1;je+=X.length}if(Se){if(typeof Se!="object")return ee.destroy(new Error("Invalid will")),!1;if(!Se.topic||typeof Se.topic!="string")return ee.destroy(new Error("Invalid will topic")),!1;if(je+=i.byteLength(Se.topic)+2,je+=2,Se.payload)if(Se.payload.length>=0)typeof Se.payload=="string"?je+=i.byteLength(Se.payload):je+=Se.payload.length;else return ee.destroy(new Error("Invalid will payload")),!1;if(Le={},fe===5){if(Le=Re(ee,Se.properties),!Le)return!1;je+=Le.length}}let Ye=!1;if(ge!=null)if(Pe(ge))Ye=!0,je+=i.byteLength(ge)+2;else return ee.destroy(new Error("Invalid username")),!1;if(Ee!=null){if(!Ye)return ee.destroy(new Error("Username is required to use password")),!1;if(Pe(Ee))je+=oe(Ee)+2;else return ee.destroy(new Error("Invalid password")),!1}ee.write(r.CONNECT_HEADER),xe(ee,je),ne(ee,le),ce.bridgeMode&&(fe+=128),ee.write(fe===131?r.VERSION131:fe===132?r.VERSION132:fe===4?r.VERSION4:fe===5?r.VERSION5:r.VERSION3);let Ce=0;return Ce|=ge!=null?r.USERNAME_MASK:0,Ce|=Ee!=null?r.PASSWORD_MASK:0,Ce|=Se&&Se.retain?r.WILL_RETAIN_MASK:0,Ce|=Se&&Se.qos?Se.qos<<r.WILL_QOS_SHIFT:0,Ce|=Se?r.WILL_FLAG_MASK:0,Ce|=ke?r.CLEAN_SESSION_MASK:0,ee.write(i.from([Ce])),C(ee,J),fe===5&&X.write(),ne(ee,ie),Se&&(fe===5&&Le.write(),z(ee,Se.topic),ne(ee,Se.payload)),ge!=null&&ne(ee,ge),Ee!=null&&ne(ee,Ee),!0}function I(de,ee,Ne){let ce=Ne?Ne.protocolVersion:4,le=de||{},fe=ce===5?le.reasonCode:le.returnCode,Se=le.properties,ke=2;if(typeof fe!="number")return ee.destroy(new Error("Invalid return code")),!1;let J=null;if(ce===5){if(J=Re(ee,Se),!J)return!1;ke+=J.length}return ee.write(r.CONNACK_HEADER),xe(ee,ke),ee.write(le.sessionPresent?r.SESSIONPRESENT_HEADER:s),ee.write(i.from([fe])),J==null||J.write(),!0}function B(de,ee,Ne){f("publish: packet: %o",de);let ce=Ne?Ne.protocolVersion:4,le=de||{},fe=le.qos||0,Se=le.retain?r.RETAIN_MASK:0,ke=le.topic,J=le.payload||a,ie=le.messageId,ge=le.properties,Ee=0;if(typeof ke=="string")Ee+=i.byteLength(ke)+2;else if(i.isBuffer(ke))Ee+=ke.length+2;else return ee.destroy(new Error("Invalid topic")),!1;if(i.isBuffer(J)?Ee+=J.length:Ee+=i.byteLength(J),fe&&typeof ie!="number")return ee.destroy(new Error("Invalid messageId")),!1;fe&&(Ee+=2);let ve=null;if(ce===5){if(ve=Re(ee,ge),!ve)return!1;Ee+=ve.length}return ee.write(r.PUBLISH_HEADER[fe][le.dup?1:0][Se?1:0]),xe(ee,Ee),C(ee,oe(ke)),ee.write(ke),fe>0&&C(ee,ie),ve==null||ve.write(),f("publish: payload: %o",J),ee.write(J)}function U(de,ee,Ne){let ce=Ne?Ne.protocolVersion:4,le=de||{},fe=le.cmd||"puback",Se=le.messageId,ke=le.dup&&fe==="pubrel"?r.DUP_MASK:0,J=0,ie=le.reasonCode,ge=le.properties,Ee=ce===5?3:2;if(fe==="pubrel"&&(J=1),typeof Se!="number")return ee.destroy(new Error("Invalid messageId")),!1;let ve=null;if(ce===5&&typeof ge=="object"){if(ve=G(ee,ge,Ne,Ee),!ve)return!1;Ee+=ve.length}return ee.write(r.ACKS[fe][J][ke][0]),Ee===3&&(Ee+=ie!==0?1:-1),xe(ee,Ee),C(ee,Se),ce===5&&Ee!==2&&ee.write(i.from([ie])),ve!==null?ve.write():Ee===4&&ee.write(i.from([0])),!0}function L(de,ee,Ne){f("subscribe: packet: ");let ce=Ne?Ne.protocolVersion:4,le=de||{},fe=le.dup?r.DUP_MASK:0,Se=le.messageId,ke=le.subscriptions,J=le.properties,ie=0;if(typeof Se!="number")return ee.destroy(new Error("Invalid messageId")),!1;ie+=2;let ge=null;if(ce===5){if(ge=Re(ee,J),!ge)return!1;ie+=ge.length}if(typeof ke=="object"&&ke.length)for(let ve=0;ve<ke.length;ve+=1){let je=ke[ve].topic,X=ke[ve].qos;if(typeof je!="string")return ee.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof X!="number")return ee.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(ce===5){if(typeof(ke[ve].nl||!1)!="boolean")return ee.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(ke[ve].rap||!1)!="boolean")return ee.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let Le=ke[ve].rh||0;if(typeof Le!="number"||Le>2)return ee.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}ie+=i.byteLength(je)+2+1}else return ee.destroy(new Error("Invalid subscriptions")),!1;f("subscribe: writing to stream: %o",r.SUBSCRIBE_HEADER),ee.write(r.SUBSCRIBE_HEADER[1][fe?1:0][0]),xe(ee,ie),C(ee,Se),ge!==null&&ge.write();let Ee=!0;for(let ve of ke){let je=ve.topic,X=ve.qos,Le=+ve.nl,Ye=+ve.rap,Ce=ve.rh,ct;z(ee,je),ct=r.SUBSCRIBE_OPTIONS_QOS[X],ce===5&&(ct|=Le?r.SUBSCRIBE_OPTIONS_NL:0,ct|=Ye?r.SUBSCRIBE_OPTIONS_RAP:0,ct|=Ce?r.SUBSCRIBE_OPTIONS_RH[Ce]:0),Ee=ee.write(i.from([ct]))}return Ee}function P(de,ee,Ne){let ce=Ne?Ne.protocolVersion:4,le=de||{},fe=le.messageId,Se=le.granted,ke=le.properties,J=0;if(typeof fe!="number")return ee.destroy(new Error("Invalid messageId")),!1;if(J+=2,typeof Se=="object"&&Se.length)for(let ge=0;ge<Se.length;ge+=1){if(typeof Se[ge]!="number")return ee.destroy(new Error("Invalid qos vector")),!1;J+=1}else return ee.destroy(new Error("Invalid qos vector")),!1;let ie=null;if(ce===5){if(ie=G(ee,ke,Ne,J),!ie)return!1;J+=ie.length}return ee.write(r.SUBACK_HEADER),xe(ee,J),C(ee,fe),ie!==null&&ie.write(),ee.write(i.from(Se))}function W(de,ee,Ne){let ce=Ne?Ne.protocolVersion:4,le=de||{},fe=le.messageId,Se=le.dup?r.DUP_MASK:0,ke=le.unsubscriptions,J=le.properties,ie=0;if(typeof fe!="number")return ee.destroy(new Error("Invalid messageId")),!1;if(ie+=2,typeof ke=="object"&&ke.length)for(let ve=0;ve<ke.length;ve+=1){if(typeof ke[ve]!="string")return ee.destroy(new Error("Invalid unsubscriptions")),!1;ie+=i.byteLength(ke[ve])+2}else return ee.destroy(new Error("Invalid unsubscriptions")),!1;let ge=null;if(ce===5){if(ge=Re(ee,J),!ge)return!1;ie+=ge.length}ee.write(r.UNSUBSCRIBE_HEADER[1][Se?1:0][0]),xe(ee,ie),C(ee,fe),ge!==null&&ge.write();let Ee=!0;for(let ve=0;ve<ke.length;ve++)Ee=z(ee,ke[ve]);return Ee}function q(de,ee,Ne){let ce=Ne?Ne.protocolVersion:4,le=de||{},fe=le.messageId,Se=le.dup?r.DUP_MASK:0,ke=le.granted,J=le.properties,ie=le.cmd,ge=0,Ee=2;if(typeof fe!="number")return ee.destroy(new Error("Invalid messageId")),!1;if(ce===5)if(typeof ke=="object"&&ke.length)for(let je=0;je<ke.length;je+=1){if(typeof ke[je]!="number")return ee.destroy(new Error("Invalid qos vector")),!1;Ee+=1}else return ee.destroy(new Error("Invalid qos vector")),!1;let ve=null;if(ce===5){if(ve=G(ee,J,Ne,Ee),!ve)return!1;Ee+=ve.length}return ee.write(r.ACKS[ie][ge][Se][0]),xe(ee,Ee),C(ee,fe),ve!==null&&ve.write(),ce===5&&ee.write(i.from(ke)),!0}function pe(de,ee,Ne){return ee.write(r.EMPTY[de.cmd])}function Ae(de,ee,Ne){let ce=Ne?Ne.protocolVersion:4,le=de||{},fe=le.reasonCode,Se=le.properties,ke=ce===5?1:0,J=null;if(ce===5){if(J=G(ee,Se,Ne,ke),!J)return!1;ke+=J.length}return ee.write(i.from([r.codes.disconnect<<4])),xe(ee,ke),ce===5&&ee.write(i.from([fe])),J!==null&&J.write(),!0}function H(de,ee,Ne){let ce=Ne?Ne.protocolVersion:4,le=de||{},fe=le.reasonCode,Se=le.properties,ke=ce===5?1:0;ce!==5&&ee.destroy(new Error("Invalid mqtt version for auth packet"));let J=G(ee,Se,Ne,ke);return J?(ke+=J.length,ee.write(i.from([r.codes.auth<<4])),xe(ee,ke),ee.write(i.from([fe])),J!==null&&J.write(),!0):!1}var ue={};function xe(de,ee){if(ee>r.VARBYTEINT_MAX)return de.destroy(new Error(`Invalid variable byte integer: ${ee}`)),!1;let Ne=ue[ee];return Ne||(Ne=v(ee),ee<16384&&(ue[ee]=Ne)),f("writeVarByteInt: writing to stream: %o",Ne),de.write(Ne)}function z(de,ee){let Ne=i.byteLength(ee);return C(de,Ne),f("writeString: %s",ee),de.write(ee,"utf8")}function Be(de,ee,Ne){z(de,ee),z(de,Ne)}function _e(de,ee){return f("writeNumberCached: number: %d",ee),f("writeNumberCached: %o",d[ee]),de.write(d[ee])}function he(de,ee){let Ne=m(ee);return f("writeNumberGenerated: %o",Ne),de.write(Ne)}function Me(de,ee){let Ne=b(ee);return f("write4ByteNumber: %o",Ne),de.write(Ne)}function ne(de,ee){typeof ee=="string"?z(de,ee):ee?(C(de,ee.length),de.write(ee)):C(de,0)}function Re(de,ee){if(typeof ee!="object"||ee.length!=null)return{length:1,write(){Fe(de,{},0)}};let Ne=0;function ce(le,fe){let Se=r.propertiesTypes[le],ke=0;switch(Se){case"byte":{if(typeof fe!="boolean")return de.destroy(new Error(`Invalid ${le}: ${fe}`)),!1;ke+=2;break}case"int8":{if(typeof fe!="number"||fe<0||fe>255)return de.destroy(new Error(`Invalid ${le}: ${fe}`)),!1;ke+=2;break}case"binary":{if(fe&&fe===null)return de.destroy(new Error(`Invalid ${le}: ${fe}`)),!1;ke+=1+i.byteLength(fe)+2;break}case"int16":{if(typeof fe!="number"||fe<0||fe>65535)return de.destroy(new Error(`Invalid ${le}: ${fe}`)),!1;ke+=3;break}case"int32":{if(typeof fe!="number"||fe<0||fe>4294967295)return de.destroy(new Error(`Invalid ${le}: ${fe}`)),!1;ke+=5;break}case"var":{if(typeof fe!="number"||fe<0||fe>268435455)return de.destroy(new Error(`Invalid ${le}: ${fe}`)),!1;ke+=1+i.byteLength(v(fe));break}case"string":{if(typeof fe!="string")return de.destroy(new Error(`Invalid ${le}: ${fe}`)),!1;ke+=3+i.byteLength(fe.toString());break}case"pair":{if(typeof fe!="object")return de.destroy(new Error(`Invalid ${le}: ${fe}`)),!1;ke+=Object.getOwnPropertyNames(fe).reduce((J,ie)=>{let ge=fe[ie];return Array.isArray(ge)?J+=ge.reduce((Ee,ve)=>(Ee+=3+i.byteLength(ie.toString())+2+i.byteLength(ve.toString()),Ee),0):J+=3+i.byteLength(ie.toString())+2+i.byteLength(fe[ie].toString()),J},0);break}default:return de.destroy(new Error(`Invalid property ${le}: ${fe}`)),!1}return ke}if(ee)for(let le in ee){let fe=0,Se=0,ke=ee[le];if(ke!==void 0){if(Array.isArray(ke))for(let J=0;J<ke.length;J++){if(Se=ce(le,ke[J]),!Se)return!1;fe+=Se}else{if(Se=ce(le,ke),!Se)return!1;fe=Se}if(!fe)return!1;Ne+=fe}}return{length:i.byteLength(v(Ne))+Ne,write(){Fe(de,ee,Ne)}}}function G(de,ee,Ne,ce){let le=["reasonString","userProperties"],fe=Ne&&Ne.properties&&Ne.properties.maximumPacketSize?Ne.properties.maximumPacketSize:0,Se=Re(de,ee);if(fe)for(;ce+Se.length>fe;){let ke=le.shift();if(ke&&ee[ke])delete ee[ke],Se=Re(de,ee);else return!1}return Se}function Oe(de,ee,Ne){switch(r.propertiesTypes[ee]){case"byte":{de.write(i.from([r.properties[ee]])),de.write(i.from([+Ne]));break}case"int8":{de.write(i.from([r.properties[ee]])),de.write(i.from([Ne]));break}case"binary":{de.write(i.from([r.properties[ee]])),ne(de,Ne);break}case"int16":{de.write(i.from([r.properties[ee]])),C(de,Ne);break}case"int32":{de.write(i.from([r.properties[ee]])),Me(de,Ne);break}case"var":{de.write(i.from([r.properties[ee]])),xe(de,Ne);break}case"string":{de.write(i.from([r.properties[ee]])),z(de,Ne);break}case"pair":{Object.getOwnPropertyNames(Ne).forEach(ce=>{let le=Ne[ce];Array.isArray(le)?le.forEach(fe=>{de.write(i.from([r.properties[ee]])),Be(de,ce.toString(),fe.toString())}):(de.write(i.from([r.properties[ee]])),Be(de,ce.toString(),le.toString()))});break}default:return de.destroy(new Error(`Invalid property ${ee} value: ${Ne}`)),!1}}function Fe(de,ee,Ne){xe(de,Ne);for(let ce in ee)if(Object.prototype.hasOwnProperty.call(ee,ce)&&ee[ce]!=null){let le=ee[ce];if(Array.isArray(le))for(let fe=0;fe<le.length;fe++)Oe(de,ce,le[fe]);else Oe(de,ce,le)}}function oe(de){return de?de instanceof i?de.length:i.byteLength(de):0}function Pe(de){return typeof de=="string"||de instanceof i}t.exports=R}),lT=$e((e,t)=>{Ue(),We(),ze();var r=vx(),{EventEmitter:i}=(xo(),jt(Ds)),{Buffer:a}=(Rr(),jt(kr));function s(h,f){let d=new u;return r(h,d,f),d.concat()}var u=class extends i{constructor(){super(),this._array=new Array(20),this._i=0}write(h){return this._array[this._i++]=h,!0}concat(){let h=0,f=new Array(this._array.length),d=this._array,m=0,w;for(w=0;w<d.length&&d[w]!==void 0;w++)typeof d[w]!="string"?f[w]=d[w].length:f[w]=a.byteLength(d[w]),h+=f[w];let v=a.allocUnsafe(h);for(w=0;w<d.length&&d[w]!==void 0;w++)typeof d[w]!="string"?(d[w].copy(v,m),m+=f[w]):(v.write(d[w],m),m+=f[w]);return v}destroy(h){h&&this.emit("error",h)}};t.exports=s}),uT=$e(e=>{Ue(),We(),ze(),e.parser=sT().parser,e.generate=lT(),e.writeToStream=vx()}),bx=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"__esModule",{value:!0});var t=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let r=this.nextId++;return this.nextId===65536&&(this.nextId=1),r}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(r){return!0}deallocate(r){}clear(){}};e.default=t}),cT=$e((e,t)=>{Ue(),We(),ze(),t.exports=i;function r(s){return s instanceof vc?vc.from(s):new s.constructor(s.buffer.slice(),s.byteOffset,s.length)}function i(s){if(s=s||{},s.circles)return a(s);let u=new Map;if(u.set(Date,w=>new Date(w)),u.set(Map,(w,v)=>new Map(f(Array.from(w),v))),u.set(Set,(w,v)=>new Set(f(Array.from(w),v))),s.constructorHandlers)for(let w of s.constructorHandlers)u.set(w[0],w[1]);let h=null;return s.proto?m:d;function f(w,v){let b=Object.keys(w),C=new Array(b.length);for(let N=0;N<b.length;N++){let R=b[N],k=w[R];typeof k!="object"||k===null?C[R]=k:k.constructor!==Object&&(h=u.get(k.constructor))?C[R]=h(k,v):ArrayBuffer.isView(k)?C[R]=r(k):C[R]=v(k)}return C}function d(w){if(typeof w!="object"||w===null)return w;if(Array.isArray(w))return f(w,d);if(w.constructor!==Object&&(h=u.get(w.constructor)))return h(w,d);let v={};for(let b in w){if(Object.hasOwnProperty.call(w,b)===!1)continue;let C=w[b];typeof C!="object"||C===null?v[b]=C:C.constructor!==Object&&(h=u.get(C.constructor))?v[b]=h(C,d):ArrayBuffer.isView(C)?v[b]=r(C):v[b]=d(C)}return v}function m(w){if(typeof w!="object"||w===null)return w;if(Array.isArray(w))return f(w,m);if(w.constructor!==Object&&(h=u.get(w.constructor)))return h(w,m);let v={};for(let b in w){let C=w[b];typeof C!="object"||C===null?v[b]=C:C.constructor!==Object&&(h=u.get(C.constructor))?v[b]=h(C,m):ArrayBuffer.isView(C)?v[b]=r(C):v[b]=m(C)}return v}}function a(s){let u=[],h=[],f=new Map;if(f.set(Date,b=>new Date(b)),f.set(Map,(b,C)=>new Map(m(Array.from(b),C))),f.set(Set,(b,C)=>new Set(m(Array.from(b),C))),s.constructorHandlers)for(let b of s.constructorHandlers)f.set(b[0],b[1]);let d=null;return s.proto?v:w;function m(b,C){let N=Object.keys(b),R=new Array(N.length);for(let k=0;k<N.length;k++){let S=N[k],I=b[S];if(typeof I!="object"||I===null)R[S]=I;else if(I.constructor!==Object&&(d=f.get(I.constructor)))R[S]=d(I,C);else if(ArrayBuffer.isView(I))R[S]=r(I);else{let B=u.indexOf(I);B!==-1?R[S]=h[B]:R[S]=C(I)}}return R}function w(b){if(typeof b!="object"||b===null)return b;if(Array.isArray(b))return m(b,w);if(b.constructor!==Object&&(d=f.get(b.constructor)))return d(b,w);let C={};u.push(b),h.push(C);for(let N in b){if(Object.hasOwnProperty.call(b,N)===!1)continue;let R=b[N];if(typeof R!="object"||R===null)C[N]=R;else if(R.constructor!==Object&&(d=f.get(R.constructor)))C[N]=d(R,w);else if(ArrayBuffer.isView(R))C[N]=r(R);else{let k=u.indexOf(R);k!==-1?C[N]=h[k]:C[N]=w(R)}}return u.pop(),h.pop(),C}function v(b){if(typeof b!="object"||b===null)return b;if(Array.isArray(b))return m(b,v);if(b.constructor!==Object&&(d=f.get(b.constructor)))return d(b,v);let C={};u.push(b),h.push(C);for(let N in b){let R=b[N];if(typeof R!="object"||R===null)C[N]=R;else if(R.constructor!==Object&&(d=f.get(R.constructor)))C[N]=d(R,v);else if(ArrayBuffer.isView(R))C[N]=r(R);else{let k=u.indexOf(R);k!==-1?C[N]=h[k]:C[N]=v(R)}}return u.pop(),h.pop(),C}}}),hT=$e((e,t)=>{Ue(),We(),ze(),t.exports=cT()()}),fT=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopic=t,e.validateTopics=r;function t(i){let a=i.split("/");for(let s=0;s<a.length;s++)if(a[s]!=="+"){if(a[s]==="#")return s===a.length-1;if(a[s].indexOf("+")!==-1||a[s].indexOf("#")!==-1)return!1}return!0}function r(i){if(i.length===0)return"empty_topic_list";for(let a=0;a<i.length;a++)if(!t(i[a]))return i[a];return null}}),_x=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"__esModule",{value:!0});var t=bo(),r={objectMode:!0},i={clean:!0},a=class{constructor(s){this.options=s||{},this.options=Object.assign(Object.assign({},i),s),this._inflights=new Map}put(s,u){return this._inflights.set(s.messageId,s),u&&u(),this}createStream(){let s=new t.Readable(r),u=[],h=!1,f=0;return this._inflights.forEach((d,m)=>{u.push(d)}),s._read=()=>{!h&&f<u.length?s.push(u[f++]):s.push(null)},s.destroy=d=>{if(!h)return h=!0,setTimeout(()=>{s.emit("close")},0),s},s}del(s,u){let h=this._inflights.get(s.messageId);return h?(this._inflights.delete(s.messageId),u(null,h)):u&&u(new Error("missing packet")),this}get(s,u){let h=this._inflights.get(s.messageId);return h?u(null,h):u&&u(new Error("missing packet")),this}close(s){this.options.clean&&(this._inflights=null),s&&s()}};e.default=a}),dT=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"__esModule",{value:!0});var t=[0,16,128,131,135,144,145,151,153],r=(i,a,s)=>{i.log("handlePublish: packet %o",a),s=typeof s<"u"?s:i.noop;let u=a.topic.toString(),h=a.payload,{qos:f}=a,{messageId:d}=a,{options:m}=i;if(i.options.protocolVersion===5){let w;if(a.properties&&(w=a.properties.topicAlias),typeof w<"u")if(u.length===0)if(w>0&&w<=65535){let v=i.topicAliasRecv.getTopicByAlias(w);if(v)u=v,i.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",u,w);else{i.log("handlePublish :: unregistered topic alias. alias: %d",w),i.emit("error",new Error("Received unregistered Topic Alias"));return}}else{i.log("handlePublish :: topic alias out of range. alias: %d",w),i.emit("error",new Error("Received Topic Alias is out of range"));return}else if(i.topicAliasRecv.put(u,w))i.log("handlePublish :: registered topic: %s - alias: %d",u,w);else{i.log("handlePublish :: topic alias out of range. alias: %d",w),i.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(i.log("handlePublish: qos %d",f),f){case 2:{m.customHandleAcks(u,h,a,(w,v)=>{if(typeof w=="number"&&(v=w,w=null),w)return i.emit("error",w);if(t.indexOf(v)===-1)return i.emit("error",new Error("Wrong reason code for pubrec"));v?i._sendPacket({cmd:"pubrec",messageId:d,reasonCode:v},s):i.incomingStore.put(a,()=>{i._sendPacket({cmd:"pubrec",messageId:d},s)})});break}case 1:{m.customHandleAcks(u,h,a,(w,v)=>{if(typeof w=="number"&&(v=w,w=null),w)return i.emit("error",w);if(t.indexOf(v)===-1)return i.emit("error",new Error("Wrong reason code for puback"));v||i.emit("message",u,h,a),i.handleMessage(a,b=>{if(b)return s&&s(b);i._sendPacket({cmd:"puback",messageId:d,reasonCode:v},s)})});break}case 0:i.emit("message",u,h,a),i.handleMessage(a,s);break;default:i.log("handlePublish: unknown QoS. Doing nothing.");break}};e.default=r}),pT=$e((e,t)=>{t.exports={version:"5.11.1"}}),ba=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"__esModule",{value:!0}),e.MQTTJS_VERSION=e.nextTick=e.ErrorWithReasonCode=void 0,e.applyMixin=r;var t=class Ex extends Error{constructor(a,s){super(a),this.code=s,Object.setPrototypeOf(this,Ex.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};e.ErrorWithReasonCode=t;function r(i,a,s=!1){var u;let h=[a];for(;;){let f=h[0],d=Object.getPrototypeOf(f);if(d!=null&&d.prototype)h.unshift(d);else break}for(let f of h)for(let d of Object.getOwnPropertyNames(f.prototype))(s||d!=="constructor")&&Object.defineProperty(i.prototype,d,(u=Object.getOwnPropertyDescriptor(f.prototype,d))!==null&&u!==void 0?u:Object.create(null))}e.nextTick=typeof(It==null?void 0:It.nextTick)=="function"?It.nextTick:i=>{setTimeout(i,0)},e.MQTTJS_VERSION=pT().version}),Zc=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=void 0;var t=ba();e.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var r=(i,a)=>{let{messageId:s}=a,u=a.cmd,h=null,f=i.outgoing[s]?i.outgoing[s].cb:null,d=null;if(!f){i.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(i.log("_handleAck :: packet type",u),u){case"pubcomp":case"puback":{let m=a.reasonCode;m&&m>0&&m!==16?(d=new t.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[m]}`,m),i._removeOutgoingAndStoreMessage(s,()=>{f(d,a)})):i._removeOutgoingAndStoreMessage(s,f);break}case"pubrec":{h={cmd:"pubrel",qos:2,messageId:s};let m=a.reasonCode;m&&m>0&&m!==16?(d=new t.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[m]}`,m),i._removeOutgoingAndStoreMessage(s,()=>{f(d,a)})):i._sendPacket(h);break}case"suback":{delete i.outgoing[s],i.messageIdProvider.deallocate(s);let m=a.granted;for(let w=0;w<m.length;w++){let v=m[w];if(v&128){d=new Error(`Subscribe error: ${e.ReasonCodes[v]}`),d.code=v;let b=i.messageIdToTopic[s];b&&b.forEach(C=>{delete i._resubscribeTopics[C]})}}delete i.messageIdToTopic[s],i._invokeStoreProcessingQueue(),f(d,a);break}case"unsuback":{delete i.outgoing[s],i.messageIdProvider.deallocate(s),i._invokeStoreProcessingQueue(),f(null,a);break}default:i.emit("error",new Error("unrecognized packet type"))}i.disconnecting&&Object.keys(i.outgoing).length===0&&i.emit("outgoingEmpty")};e.default=r}),gT=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"__esModule",{value:!0});var t=ba(),r=Zc(),i=(a,s)=>{let{options:u}=a,h=u.protocolVersion,f=h===5?s.reasonCode:s.returnCode;if(h!==5){let d=new t.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${h}`,f);a.emit("error",d);return}a.handleAuth(s,(d,m)=>{if(d){a.emit("error",d);return}if(f===24)a.reconnecting=!1,a._sendPacket(m);else{let w=new t.ErrorWithReasonCode(`Connection refused: ${r.ReasonCodes[f]}`,f);a.emit("error",w)}})};e.default=i}),mT=$e(e=>{var b,C,N,R,k,S,I,B,U,L,P,W,q,pe,Ae,H,ue,xe,z,Be,_e,he,Me,ne,Re,G,Oe,Fe,oe,_0,de,ee,Ne,ce,Sx,fe,Se,ke,rs,ns,E0,Fu,Uu,Yt,S0,Xa,is,A0,ct;Ue(),We(),ze(),Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=void 0;var t=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,r=new Set,i=typeof It=="object"&&It?It:{},a=(E,A,T,j)=>{typeof i.emitWarning=="function"?i.emitWarning(E,A,T,j):console.error(`[${T}] ${A}: ${E}`)},s=globalThis.AbortController,u=globalThis.AbortSignal;if(typeof s>"u"){u=class{constructor(){Kt(this,"onabort");Kt(this,"_onabort",[]);Kt(this,"reason");Kt(this,"aborted",!1)}addEventListener(T,j){this._onabort.push(j)}},s=class{constructor(){Kt(this,"signal",new u);A()}abort(T){var j,K;if(!this.signal.aborted){this.signal.reason=T,this.signal.aborted=!0;for(let re of this.signal._onabort)re(T);(K=(j=this.signal).onabort)==null||K.call(j,T)}}};let E=((b=i.env)==null?void 0:b.LRU_CACHE_IGNORE_AC_WARNING)!=="1",A=()=>{E&&(E=!1,a("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",A))}}var h=E=>!r.has(E),f=E=>E&&E===Math.floor(E)&&E>0&&isFinite(E),d=E=>f(E)?E<=Math.pow(2,8)?Uint8Array:E<=Math.pow(2,16)?Uint16Array:E<=Math.pow(2,32)?Uint32Array:E<=Number.MAX_SAFE_INTEGER?m:null:null,m=class extends Array{constructor(E){super(E),this.fill(0)}},w=(C=class{constructor(A,T){Kt(this,"heap");Kt(this,"length");if(!Z(C,N))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new T(A),this.length=0}static create(A){let T=d(A);if(!T)return[];dt(C,N,!0);let j=new C(A,T);return dt(C,N,!1),j}push(A){this.heap[this.length++]=A}pop(){return this.heap[--this.length]}},N=new WeakMap,St(C,N,!1),C),v=(ct=class{constructor(A){St(this,oe);St(this,S);St(this,I);St(this,B);St(this,U);St(this,L);St(this,P);Kt(this,"ttl");Kt(this,"ttlResolution");Kt(this,"ttlAutopurge");Kt(this,"updateAgeOnGet");Kt(this,"updateAgeOnHas");Kt(this,"allowStale");Kt(this,"noDisposeOnSet");Kt(this,"noUpdateTTL");Kt(this,"maxEntrySize");Kt(this,"sizeCalculation");Kt(this,"noDeleteOnFetchRejection");Kt(this,"noDeleteOnStaleGet");Kt(this,"allowStaleOnFetchAbort");Kt(this,"allowStaleOnFetchRejection");Kt(this,"ignoreFetchAbort");St(this,W);St(this,q);St(this,pe);St(this,Ae);St(this,H);St(this,ue);St(this,xe);St(this,z);St(this,Be);St(this,_e);St(this,he);St(this,Me);St(this,ne);St(this,Re);St(this,G);St(this,Oe);St(this,Fe);St(this,de,()=>{});St(this,ee,()=>{});St(this,Ne,()=>{});St(this,ce,()=>!1);St(this,fe,A=>{});St(this,Se,(A,T,j)=>{});St(this,ke,(A,T,j,K)=>{if(j||K)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Kt(this,R,"LRUCache");let{max:T=0,ttl:j,ttlResolution:K=1,ttlAutopurge:re,updateAgeOnGet:me,updateAgeOnHas:Ve,allowStale:ye,dispose:Je,disposeAfter:tt,noDisposeOnSet:et,noUpdateTTL:Wr,maxSize:Ar=0,maxEntrySize:Hr=0,sizeCalculation:at,fetchMethod:zt,memoMethod:ht,noDeleteOnFetchRejection:kt,noDeleteOnStaleGet:Dt,allowStaleOnFetchRejection:tr,allowStaleOnFetchAbort:Ct,ignoreFetchAbort:Zr}=A;if(T!==0&&!f(T))throw new TypeError("max option must be a nonnegative integer");let V=T?d(T):Array;if(!V)throw new Error("invalid max value: "+T);if(dt(this,S,T),dt(this,I,Ar),this.maxEntrySize=Hr||Z(this,I),this.sizeCalculation=at,this.sizeCalculation){if(!Z(this,I)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(ht!==void 0&&typeof ht!="function")throw new TypeError("memoMethod must be a function if defined");if(dt(this,P,ht),zt!==void 0&&typeof zt!="function")throw new TypeError("fetchMethod must be a function if specified");if(dt(this,L,zt),dt(this,Oe,!!zt),dt(this,pe,new Map),dt(this,Ae,new Array(T).fill(void 0)),dt(this,H,new Array(T).fill(void 0)),dt(this,ue,new V(T)),dt(this,xe,new V(T)),dt(this,z,0),dt(this,Be,0),dt(this,_e,w.create(T)),dt(this,W,0),dt(this,q,0),typeof Je=="function"&&dt(this,B,Je),typeof tt=="function"?(dt(this,U,tt),dt(this,he,[])):(dt(this,U,void 0),dt(this,he,void 0)),dt(this,G,!!Z(this,B)),dt(this,Fe,!!Z(this,U)),this.noDisposeOnSet=!!et,this.noUpdateTTL=!!Wr,this.noDeleteOnFetchRejection=!!kt,this.allowStaleOnFetchRejection=!!tr,this.allowStaleOnFetchAbort=!!Ct,this.ignoreFetchAbort=!!Zr,this.maxEntrySize!==0){if(Z(this,I)!==0&&!f(Z(this,I)))throw new TypeError("maxSize must be a positive integer if specified");if(!f(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");ot(this,oe,Sx).call(this)}if(this.allowStale=!!ye,this.noDeleteOnStaleGet=!!Dt,this.updateAgeOnGet=!!me,this.updateAgeOnHas=!!Ve,this.ttlResolution=f(K)||K===0?K:1,this.ttlAutopurge=!!re,this.ttl=j||0,this.ttl){if(!f(this.ttl))throw new TypeError("ttl must be a positive integer if specified");ot(this,oe,_0).call(this)}if(Z(this,S)===0&&this.ttl===0&&Z(this,I)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!Z(this,S)&&!Z(this,I)){let Q="LRU_CACHE_UNBOUNDED";h(Q)&&(r.add(Q),a("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Q,ct))}}static unsafeExposeInternals(A){return{starts:Z(A,ne),ttls:Z(A,Re),sizes:Z(A,Me),keyMap:Z(A,pe),keyList:Z(A,Ae),valList:Z(A,H),next:Z(A,ue),prev:Z(A,xe),get head(){return Z(A,z)},get tail(){return Z(A,Be)},free:Z(A,_e),isBackgroundFetch:T=>{var j;return ot(j=A,oe,Yt).call(j,T)},backgroundFetch:(T,j,K,re)=>{var me;return ot(me=A,oe,Uu).call(me,T,j,K,re)},moveToTail:T=>{var j;return ot(j=A,oe,Xa).call(j,T)},indexes:T=>{var j;return ot(j=A,oe,rs).call(j,T)},rindexes:T=>{var j;return ot(j=A,oe,ns).call(j,T)},isStale:T=>{var j;return Z(j=A,ce).call(j,T)}}}get max(){return Z(this,S)}get maxSize(){return Z(this,I)}get calculatedSize(){return Z(this,q)}get size(){return Z(this,W)}get fetchMethod(){return Z(this,L)}get memoMethod(){return Z(this,P)}get dispose(){return Z(this,B)}get disposeAfter(){return Z(this,U)}getRemainingTTL(A){return Z(this,pe).has(A)?1/0:0}*entries(){for(let A of ot(this,oe,rs).call(this))Z(this,H)[A]!==void 0&&Z(this,Ae)[A]!==void 0&&!ot(this,oe,Yt).call(this,Z(this,H)[A])&&(yield[Z(this,Ae)[A],Z(this,H)[A]])}*rentries(){for(let A of ot(this,oe,ns).call(this))Z(this,H)[A]!==void 0&&Z(this,Ae)[A]!==void 0&&!ot(this,oe,Yt).call(this,Z(this,H)[A])&&(yield[Z(this,Ae)[A],Z(this,H)[A]])}*keys(){for(let A of ot(this,oe,rs).call(this)){let T=Z(this,Ae)[A];T!==void 0&&!ot(this,oe,Yt).call(this,Z(this,H)[A])&&(yield T)}}*rkeys(){for(let A of ot(this,oe,ns).call(this)){let T=Z(this,Ae)[A];T!==void 0&&!ot(this,oe,Yt).call(this,Z(this,H)[A])&&(yield T)}}*values(){for(let A of ot(this,oe,rs).call(this))Z(this,H)[A]!==void 0&&!ot(this,oe,Yt).call(this,Z(this,H)[A])&&(yield Z(this,H)[A])}*rvalues(){for(let A of ot(this,oe,ns).call(this))Z(this,H)[A]!==void 0&&!ot(this,oe,Yt).call(this,Z(this,H)[A])&&(yield Z(this,H)[A])}[(k=Symbol.iterator,R=Symbol.toStringTag,k)](){return this.entries()}find(A,T={}){for(let j of ot(this,oe,rs).call(this)){let K=Z(this,H)[j],re=ot(this,oe,Yt).call(this,K)?K.__staleWhileFetching:K;if(re!==void 0&&A(re,Z(this,Ae)[j],this))return this.get(Z(this,Ae)[j],T)}}forEach(A,T=this){for(let j of ot(this,oe,rs).call(this)){let K=Z(this,H)[j],re=ot(this,oe,Yt).call(this,K)?K.__staleWhileFetching:K;re!==void 0&&A.call(T,re,Z(this,Ae)[j],this)}}rforEach(A,T=this){for(let j of ot(this,oe,ns).call(this)){let K=Z(this,H)[j],re=ot(this,oe,Yt).call(this,K)?K.__staleWhileFetching:K;re!==void 0&&A.call(T,re,Z(this,Ae)[j],this)}}purgeStale(){let A=!1;for(let T of ot(this,oe,ns).call(this,{allowStale:!0}))Z(this,ce).call(this,T)&&(ot(this,oe,is).call(this,Z(this,Ae)[T],"expire"),A=!0);return A}info(A){let T=Z(this,pe).get(A);if(T===void 0)return;let j=Z(this,H)[T],K=ot(this,oe,Yt).call(this,j)?j.__staleWhileFetching:j;if(K===void 0)return;let re={value:K};if(Z(this,Re)&&Z(this,ne)){let me=Z(this,Re)[T],Ve=Z(this,ne)[T];if(me&&Ve){let ye=me-(t.now()-Ve);re.ttl=ye,re.start=Date.now()}}return Z(this,Me)&&(re.size=Z(this,Me)[T]),re}dump(){let A=[];for(let T of ot(this,oe,rs).call(this,{allowStale:!0})){let j=Z(this,Ae)[T],K=Z(this,H)[T],re=ot(this,oe,Yt).call(this,K)?K.__staleWhileFetching:K;if(re===void 0||j===void 0)continue;let me={value:re};if(Z(this,Re)&&Z(this,ne)){me.ttl=Z(this,Re)[T];let Ve=t.now()-Z(this,ne)[T];me.start=Math.floor(Date.now()-Ve)}Z(this,Me)&&(me.size=Z(this,Me)[T]),A.unshift([j,me])}return A}load(A){this.clear();for(let[T,j]of A){if(j.start){let K=Date.now()-j.start;j.start=t.now()-K}this.set(T,j.value,j)}}set(A,T,j={}){var Wr,Ar,Hr,at,zt;if(T===void 0)return this.delete(A),this;let{ttl:K=this.ttl,start:re,noDisposeOnSet:me=this.noDisposeOnSet,sizeCalculation:Ve=this.sizeCalculation,status:ye}=j,{noUpdateTTL:Je=this.noUpdateTTL}=j,tt=Z(this,ke).call(this,A,T,j.size||0,Ve);if(this.maxEntrySize&&tt>this.maxEntrySize)return ye&&(ye.set="miss",ye.maxEntrySizeExceeded=!0),ot(this,oe,is).call(this,A,"set"),this;let et=Z(this,W)===0?void 0:Z(this,pe).get(A);if(et===void 0)et=Z(this,W)===0?Z(this,Be):Z(this,_e).length!==0?Z(this,_e).pop():Z(this,W)===Z(this,S)?ot(this,oe,Fu).call(this,!1):Z(this,W),Z(this,Ae)[et]=A,Z(this,H)[et]=T,Z(this,pe).set(A,et),Z(this,ue)[Z(this,Be)]=et,Z(this,xe)[et]=Z(this,Be),dt(this,Be,et),Xl(this,W)._++,Z(this,Se).call(this,et,tt,ye),ye&&(ye.set="add"),Je=!1;else{ot(this,oe,Xa).call(this,et);let ht=Z(this,H)[et];if(T!==ht){if(Z(this,Oe)&&ot(this,oe,Yt).call(this,ht)){ht.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:kt}=ht;kt!==void 0&&!me&&(Z(this,G)&&((Wr=Z(this,B))==null||Wr.call(this,kt,A,"set")),Z(this,Fe)&&((Ar=Z(this,he))==null||Ar.push([kt,A,"set"])))}else me||(Z(this,G)&&((Hr=Z(this,B))==null||Hr.call(this,ht,A,"set")),Z(this,Fe)&&((at=Z(this,he))==null||at.push([ht,A,"set"])));if(Z(this,fe).call(this,et),Z(this,Se).call(this,et,tt,ye),Z(this,H)[et]=T,ye){ye.set="replace";let kt=ht&&ot(this,oe,Yt).call(this,ht)?ht.__staleWhileFetching:ht;kt!==void 0&&(ye.oldValue=kt)}}else ye&&(ye.set="update")}if(K!==0&&!Z(this,Re)&&ot(this,oe,_0).call(this),Z(this,Re)&&(Je||Z(this,Ne).call(this,et,K,re),ye&&Z(this,ee).call(this,ye,et)),!me&&Z(this,Fe)&&Z(this,he)){let ht=Z(this,he),kt;for(;kt=ht==null?void 0:ht.shift();)(zt=Z(this,U))==null||zt.call(this,...kt)}return this}pop(){var A;try{for(;Z(this,W);){let T=Z(this,H)[Z(this,z)];if(ot(this,oe,Fu).call(this,!0),ot(this,oe,Yt).call(this,T)){if(T.__staleWhileFetching)return T.__staleWhileFetching}else if(T!==void 0)return T}}finally{if(Z(this,Fe)&&Z(this,he)){let T=Z(this,he),j;for(;j=T==null?void 0:T.shift();)(A=Z(this,U))==null||A.call(this,...j)}}}has(A,T={}){let{updateAgeOnHas:j=this.updateAgeOnHas,status:K}=T,re=Z(this,pe).get(A);if(re!==void 0){let me=Z(this,H)[re];if(ot(this,oe,Yt).call(this,me)&&me.__staleWhileFetching===void 0)return!1;if(Z(this,ce).call(this,re))K&&(K.has="stale",Z(this,ee).call(this,K,re));else return j&&Z(this,de).call(this,re),K&&(K.has="hit",Z(this,ee).call(this,K,re)),!0}else K&&(K.has="miss");return!1}peek(A,T={}){let{allowStale:j=this.allowStale}=T,K=Z(this,pe).get(A);if(K===void 0||!j&&Z(this,ce).call(this,K))return;let re=Z(this,H)[K];return ot(this,oe,Yt).call(this,re)?re.__staleWhileFetching:re}async fetch(A,T={}){let{allowStale:j=this.allowStale,updateAgeOnGet:K=this.updateAgeOnGet,noDeleteOnStaleGet:re=this.noDeleteOnStaleGet,ttl:me=this.ttl,noDisposeOnSet:Ve=this.noDisposeOnSet,size:ye=0,sizeCalculation:Je=this.sizeCalculation,noUpdateTTL:tt=this.noUpdateTTL,noDeleteOnFetchRejection:et=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Wr=this.allowStaleOnFetchRejection,ignoreFetchAbort:Ar=this.ignoreFetchAbort,allowStaleOnFetchAbort:Hr=this.allowStaleOnFetchAbort,context:at,forceRefresh:zt=!1,status:ht,signal:kt}=T;if(!Z(this,Oe))return ht&&(ht.fetch="get"),this.get(A,{allowStale:j,updateAgeOnGet:K,noDeleteOnStaleGet:re,status:ht});let Dt={allowStale:j,updateAgeOnGet:K,noDeleteOnStaleGet:re,ttl:me,noDisposeOnSet:Ve,size:ye,sizeCalculation:Je,noUpdateTTL:tt,noDeleteOnFetchRejection:et,allowStaleOnFetchRejection:Wr,allowStaleOnFetchAbort:Hr,ignoreFetchAbort:Ar,status:ht,signal:kt},tr=Z(this,pe).get(A);if(tr===void 0){ht&&(ht.fetch="miss");let Ct=ot(this,oe,Uu).call(this,A,tr,Dt,at);return Ct.__returned=Ct}else{let Ct=Z(this,H)[tr];if(ot(this,oe,Yt).call(this,Ct)){let Xe=j&&Ct.__staleWhileFetching!==void 0;return ht&&(ht.fetch="inflight",Xe&&(ht.returnedStale=!0)),Xe?Ct.__staleWhileFetching:Ct.__returned=Ct}let Zr=Z(this,ce).call(this,tr);if(!zt&&!Zr)return ht&&(ht.fetch="hit"),ot(this,oe,Xa).call(this,tr),K&&Z(this,de).call(this,tr),ht&&Z(this,ee).call(this,ht,tr),Ct;let V=ot(this,oe,Uu).call(this,A,tr,Dt,at),Q=V.__staleWhileFetching!==void 0&&j;return ht&&(ht.fetch=Zr?"stale":"refresh",Q&&Zr&&(ht.returnedStale=!0)),Q?V.__staleWhileFetching:V.__returned=V}}async forceFetch(A,T={}){let j=await this.fetch(A,T);if(j===void 0)throw new Error("fetch() returned undefined");return j}memo(A,T={}){let j=Z(this,P);if(!j)throw new Error("no memoMethod provided to constructor");let{context:K,forceRefresh:re,...me}=T,Ve=this.get(A,me);if(!re&&Ve!==void 0)return Ve;let ye=j(A,Ve,{options:me,context:K});return this.set(A,ye,me),ye}get(A,T={}){let{allowStale:j=this.allowStale,updateAgeOnGet:K=this.updateAgeOnGet,noDeleteOnStaleGet:re=this.noDeleteOnStaleGet,status:me}=T,Ve=Z(this,pe).get(A);if(Ve!==void 0){let ye=Z(this,H)[Ve],Je=ot(this,oe,Yt).call(this,ye);return me&&Z(this,ee).call(this,me,Ve),Z(this,ce).call(this,Ve)?(me&&(me.get="stale"),Je?(me&&j&&ye.__staleWhileFetching!==void 0&&(me.returnedStale=!0),j?ye.__staleWhileFetching:void 0):(re||ot(this,oe,is).call(this,A,"expire"),me&&j&&(me.returnedStale=!0),j?ye:void 0)):(me&&(me.get="hit"),Je?ye.__staleWhileFetching:(ot(this,oe,Xa).call(this,Ve),K&&Z(this,de).call(this,Ve),ye))}else me&&(me.get="miss")}delete(A){return ot(this,oe,is).call(this,A,"delete")}clear(){return ot(this,oe,A0).call(this,"delete")}},S=new WeakMap,I=new WeakMap,B=new WeakMap,U=new WeakMap,L=new WeakMap,P=new WeakMap,W=new WeakMap,q=new WeakMap,pe=new WeakMap,Ae=new WeakMap,H=new WeakMap,ue=new WeakMap,xe=new WeakMap,z=new WeakMap,Be=new WeakMap,_e=new WeakMap,he=new WeakMap,Me=new WeakMap,ne=new WeakMap,Re=new WeakMap,G=new WeakMap,Oe=new WeakMap,Fe=new WeakMap,oe=new WeakSet,_0=function(){let A=new m(Z(this,S)),T=new m(Z(this,S));dt(this,Re,A),dt(this,ne,T),dt(this,Ne,(re,me,Ve=t.now())=>{if(T[re]=me!==0?Ve:0,A[re]=me,me!==0&&this.ttlAutopurge){let ye=setTimeout(()=>{Z(this,ce).call(this,re)&&ot(this,oe,is).call(this,Z(this,Ae)[re],"expire")},me+1);ye.unref&&ye.unref()}}),dt(this,de,re=>{T[re]=A[re]!==0?t.now():0}),dt(this,ee,(re,me)=>{if(A[me]){let Ve=A[me],ye=T[me];if(!Ve||!ye)return;re.ttl=Ve,re.start=ye,re.now=j||K();let Je=re.now-ye;re.remainingTTL=Ve-Je}});let j=0,K=()=>{let re=t.now();if(this.ttlResolution>0){j=re;let me=setTimeout(()=>j=0,this.ttlResolution);me.unref&&me.unref()}return re};this.getRemainingTTL=re=>{let me=Z(this,pe).get(re);if(me===void 0)return 0;let Ve=A[me],ye=T[me];if(!Ve||!ye)return 1/0;let Je=(j||K())-ye;return Ve-Je},dt(this,ce,re=>{let me=T[re],Ve=A[re];return!!Ve&&!!me&&(j||K())-me>Ve})},de=new WeakMap,ee=new WeakMap,Ne=new WeakMap,ce=new WeakMap,Sx=function(){let A=new m(Z(this,S));dt(this,q,0),dt(this,Me,A),dt(this,fe,T=>{dt(this,q,Z(this,q)-A[T]),A[T]=0}),dt(this,ke,(T,j,K,re)=>{if(ot(this,oe,Yt).call(this,j))return 0;if(!f(K))if(re){if(typeof re!="function")throw new TypeError("sizeCalculation must be a function");if(K=re(j,T),!f(K))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return K}),dt(this,Se,(T,j,K)=>{if(A[T]=j,Z(this,I)){let re=Z(this,I)-A[T];for(;Z(this,q)>re;)ot(this,oe,Fu).call(this,!0)}dt(this,q,Z(this,q)+A[T]),K&&(K.entrySize=j,K.totalCalculatedSize=Z(this,q))})},fe=new WeakMap,Se=new WeakMap,ke=new WeakMap,rs=function*({allowStale:A=this.allowStale}={}){if(Z(this,W))for(let T=Z(this,Be);!(!ot(this,oe,E0).call(this,T)||((A||!Z(this,ce).call(this,T))&&(yield T),T===Z(this,z)));)T=Z(this,xe)[T]},ns=function*({allowStale:A=this.allowStale}={}){if(Z(this,W))for(let T=Z(this,z);!(!ot(this,oe,E0).call(this,T)||((A||!Z(this,ce).call(this,T))&&(yield T),T===Z(this,Be)));)T=Z(this,ue)[T]},E0=function(A){return A!==void 0&&Z(this,pe).get(Z(this,Ae)[A])===A},Fu=function(A){var re,me;let T=Z(this,z),j=Z(this,Ae)[T],K=Z(this,H)[T];return Z(this,Oe)&&ot(this,oe,Yt).call(this,K)?K.__abortController.abort(new Error("evicted")):(Z(this,G)||Z(this,Fe))&&(Z(this,G)&&((re=Z(this,B))==null||re.call(this,K,j,"evict")),Z(this,Fe)&&((me=Z(this,he))==null||me.push([K,j,"evict"]))),Z(this,fe).call(this,T),A&&(Z(this,Ae)[T]=void 0,Z(this,H)[T]=void 0,Z(this,_e).push(T)),Z(this,W)===1?(dt(this,z,dt(this,Be,0)),Z(this,_e).length=0):dt(this,z,Z(this,ue)[T]),Z(this,pe).delete(j),Xl(this,W)._--,T},Uu=function(A,T,j,K){let re=T===void 0?void 0:Z(this,H)[T];if(ot(this,oe,Yt).call(this,re))return re;let me=new s,{signal:Ve}=j;Ve==null||Ve.addEventListener("abort",()=>me.abort(Ve.reason),{signal:me.signal});let ye={signal:me.signal,options:j,context:K},Je=(at,zt=!1)=>{let{aborted:ht}=me.signal,kt=j.ignoreFetchAbort&&at!==void 0;if(j.status&&(ht&&!zt?(j.status.fetchAborted=!0,j.status.fetchError=me.signal.reason,kt&&(j.status.fetchAbortIgnored=!0)):j.status.fetchResolved=!0),ht&&!kt&&!zt)return et(me.signal.reason);let Dt=Ar;return Z(this,H)[T]===Ar&&(at===void 0?Dt.__staleWhileFetching?Z(this,H)[T]=Dt.__staleWhileFetching:ot(this,oe,is).call(this,A,"fetch"):(j.status&&(j.status.fetchUpdated=!0),this.set(A,at,ye.options))),at},tt=at=>(j.status&&(j.status.fetchRejected=!0,j.status.fetchError=at),et(at)),et=at=>{let{aborted:zt}=me.signal,ht=zt&&j.allowStaleOnFetchAbort,kt=ht||j.allowStaleOnFetchRejection,Dt=kt||j.noDeleteOnFetchRejection,tr=Ar;if(Z(this,H)[T]===Ar&&(!Dt||tr.__staleWhileFetching===void 0?ot(this,oe,is).call(this,A,"fetch"):ht||(Z(this,H)[T]=tr.__staleWhileFetching)),kt)return j.status&&tr.__staleWhileFetching!==void 0&&(j.status.returnedStale=!0),tr.__staleWhileFetching;if(tr.__returned===tr)throw at},Wr=(at,zt)=>{var kt;let ht=(kt=Z(this,L))==null?void 0:kt.call(this,A,re,ye);ht&&ht instanceof Promise&&ht.then(Dt=>at(Dt===void 0?void 0:Dt),zt),me.signal.addEventListener("abort",()=>{(!j.ignoreFetchAbort||j.allowStaleOnFetchAbort)&&(at(void 0),j.allowStaleOnFetchAbort&&(at=Dt=>Je(Dt,!0)))})};j.status&&(j.status.fetchDispatched=!0);let Ar=new Promise(Wr).then(Je,tt),Hr=Object.assign(Ar,{__abortController:me,__staleWhileFetching:re,__returned:void 0});return T===void 0?(this.set(A,Hr,{...ye.options,status:void 0}),T=Z(this,pe).get(A)):Z(this,H)[T]=Hr,Hr},Yt=function(A){if(!Z(this,Oe))return!1;let T=A;return!!T&&T instanceof Promise&&T.hasOwnProperty("__staleWhileFetching")&&T.__abortController instanceof s},S0=function(A,T){Z(this,xe)[T]=A,Z(this,ue)[A]=T},Xa=function(A){A!==Z(this,Be)&&(A===Z(this,z)?dt(this,z,Z(this,ue)[A]):ot(this,oe,S0).call(this,Z(this,xe)[A],Z(this,ue)[A]),ot(this,oe,S0).call(this,Z(this,Be),A),dt(this,Be,A))},is=function(A,T){var K,re,me,Ve;let j=!1;if(Z(this,W)!==0){let ye=Z(this,pe).get(A);if(ye!==void 0)if(j=!0,Z(this,W)===1)ot(this,oe,A0).call(this,T);else{Z(this,fe).call(this,ye);let Je=Z(this,H)[ye];if(ot(this,oe,Yt).call(this,Je)?Je.__abortController.abort(new Error("deleted")):(Z(this,G)||Z(this,Fe))&&(Z(this,G)&&((K=Z(this,B))==null||K.call(this,Je,A,T)),Z(this,Fe)&&((re=Z(this,he))==null||re.push([Je,A,T]))),Z(this,pe).delete(A),Z(this,Ae)[ye]=void 0,Z(this,H)[ye]=void 0,ye===Z(this,Be))dt(this,Be,Z(this,xe)[ye]);else if(ye===Z(this,z))dt(this,z,Z(this,ue)[ye]);else{let tt=Z(this,xe)[ye];Z(this,ue)[tt]=Z(this,ue)[ye];let et=Z(this,ue)[ye];Z(this,xe)[et]=Z(this,xe)[ye]}Xl(this,W)._--,Z(this,_e).push(ye)}}if(Z(this,Fe)&&((me=Z(this,he))!=null&&me.length)){let ye=Z(this,he),Je;for(;Je=ye==null?void 0:ye.shift();)(Ve=Z(this,U))==null||Ve.call(this,...Je)}return j},A0=function(A){var T,j,K;for(let re of ot(this,oe,ns).call(this,{allowStale:!0})){let me=Z(this,H)[re];if(ot(this,oe,Yt).call(this,me))me.__abortController.abort(new Error("deleted"));else{let Ve=Z(this,Ae)[re];Z(this,G)&&((T=Z(this,B))==null||T.call(this,me,Ve,A)),Z(this,Fe)&&((j=Z(this,he))==null||j.push([me,Ve,A]))}}if(Z(this,pe).clear(),Z(this,H).fill(void 0),Z(this,Ae).fill(void 0),Z(this,Re)&&Z(this,ne)&&(Z(this,Re).fill(0),Z(this,ne).fill(0)),Z(this,Me)&&Z(this,Me).fill(0),dt(this,z,0),dt(this,Be,0),Z(this,_e).length=0,dt(this,q,0),dt(this,W,0),Z(this,Fe)&&Z(this,he)){let re=Z(this,he),me;for(;me=re==null?void 0:re.shift();)(K=Z(this,U))==null||K.call(this,...me)}},ct);e.LRUCache=v}),Ui=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.ContainerIterator=e.Container=e.Base=void 0;var t=class{constructor(a=0){this.iteratorType=a}equals(a){return this.o===a.o}};e.ContainerIterator=t;var r=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};e.Base=r;var i=class extends r{};e.Container=i}),yT=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Ui(),r=class extends t.Base{constructor(a=[]){super(),this.S=[];let s=this;a.forEach(function(u){s.push(u)})}clear(){this.i=0,this.S=[]}push(a){return this.S.push(a),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},i=r;e.default=i}),wT=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Ui(),r=class extends t.Base{constructor(a=[]){super(),this.j=0,this.q=[];let s=this;a.forEach(function(u){s.push(u)})}clear(){this.q=[],this.i=this.j=0}push(a){let s=this.q.length;if(this.j/s>.5&&this.j+this.i>=s&&s>4096){let u=this.i;for(let h=0;h<u;++h)this.q[h]=this.q[this.j+h];this.j=0,this.q[this.i]=a}else this.q[this.j+this.i]=a;return++this.i}pop(){if(this.i===0)return;let a=this.q[this.j++];return this.i-=1,a}front(){if(this.i!==0)return this.q[this.j]}},i=r;e.default=i}),xT=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Ui(),r=class extends t.Base{constructor(a=[],s=function(h,f){return h>f?-1:h<f?1:0},u=!0){if(super(),this.v=s,Array.isArray(a))this.C=u?[...a]:a;else{this.C=[];let f=this;a.forEach(function(d){f.C.push(d)})}this.i=this.C.length;let h=this.i>>1;for(let f=this.i-1>>1;f>=0;--f)this.k(f,h)}m(a){let s=this.C[a];for(;a>0;){let u=a-1>>1,h=this.C[u];if(this.v(h,s)<=0)break;this.C[a]=h,a=u}this.C[a]=s}k(a,s){let u=this.C[a];for(;a<s;){let h=a<<1|1,f=h+1,d=this.C[h];if(f<this.i&&this.v(d,this.C[f])>0&&(h=f,d=this.C[f]),this.v(d,u)>=0)break;this.C[a]=d,a=h}this.C[a]=u}clear(){this.i=0,this.C.length=0}push(a){this.C.push(a),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let a=this.C[0],s=this.C.pop();return this.i-=1,this.i&&(this.C[0]=s,this.k(0,this.i>>1)),a}top(){return this.C[0]}find(a){return this.C.indexOf(a)>=0}remove(a){let s=this.C.indexOf(a);return s<0?!1:(s===0?this.pop():s===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(s,1,this.C.pop()),this.i-=1,this.m(s),this.k(s,this.i>>1)),!0)}updateItem(a){let s=this.C.indexOf(a);return s<0?!1:(this.m(s),this.k(s,this.i>>1),!0)}toArray(){return[...this.C]}},i=r;e.default=i}),Y1=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Ui(),r=class extends t.Container{},i=r;e.default=i}),zi=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.throwIteratorAccessError=t;function t(){throw new RangeError("Iterator access denied!")}}),Ax=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.RandomIterator=void 0;var t=Ui(),r=zi(),i=class extends t.ContainerIterator{constructor(a,s){super(s),this.o=a,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,r.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,r.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,r.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,r.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(a){this.container.setElementByPos(this.o,a)}};e.RandomIterator=i}),vT=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=i(Y1()),r=Ax();function i(h){return h&&h.t?h:{default:h}}var a=class Cx extends r.RandomIterator{constructor(f,d,m){super(f,m),this.container=d}copy(){return new Cx(this.o,this.container,this.iteratorType)}},s=class extends t.default{constructor(h=[],f=!0){if(super(),Array.isArray(h))this.J=f?[...h]:h,this.i=h.length;else{this.J=[];let d=this;h.forEach(function(m){d.pushBack(m)})}}clear(){this.i=0,this.J.length=0}begin(){return new a(0,this)}end(){return new a(this.i,this)}rBegin(){return new a(this.i-1,this,1)}rEnd(){return new a(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(h){if(h<0||h>this.i-1)throw new RangeError;return this.J[h]}eraseElementByPos(h){if(h<0||h>this.i-1)throw new RangeError;return this.J.splice(h,1),this.i-=1,this.i}eraseElementByValue(h){let f=0;for(let d=0;d<this.i;++d)this.J[d]!==h&&(this.J[f++]=this.J[d]);return this.i=this.J.length=f,this.i}eraseElementByIterator(h){let f=h.o;return h=h.next(),this.eraseElementByPos(f),h}pushBack(h){return this.J.push(h),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(h,f){if(h<0||h>this.i-1)throw new RangeError;this.J[h]=f}insert(h,f,d=1){if(h<0||h>this.i)throw new RangeError;return this.J.splice(h,0,...new Array(d).fill(f)),this.i+=d,this.i}find(h){for(let f=0;f<this.i;++f)if(this.J[f]===h)return new a(f,this);return this.end()}reverse(){this.J.reverse()}unique(){let h=1;for(let f=1;f<this.i;++f)this.J[f]!==this.J[f-1]&&(this.J[h++]=this.J[f]);return this.i=this.J.length=h,this.i}sort(h){this.J.sort(h)}forEach(h){for(let f=0;f<this.i;++f)h(this.J[f],f,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},u=s;e.default=u}),bT=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=a(Y1()),r=Ui(),i=zi();function a(f){return f&&f.t?f:{default:f}}var s=class Ix extends r.ContainerIterator{constructor(d,m,w,v){super(v),this.o=d,this.h=m,this.container=w,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o.l}set pointer(d){this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o.l=d}copy(){return new Ix(this.o,this.h,this.container,this.iteratorType)}},u=class extends t.default{constructor(f=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let d=this;f.forEach(function(m){d.pushBack(m)})}V(f){let{L:d,B:m}=f;d.B=m,m.L=d,f===this.p&&(this.p=m),f===this._&&(this._=d),this.i-=1}G(f,d){let m=d.B,w={l:f,L:d,B:m};d.B=w,m.L=w,d===this.h&&(this.p=w),m===this.h&&(this._=w),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new s(this.p,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this._,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(f){if(f<0||f>this.i-1)throw new RangeError;let d=this.p;for(;f--;)d=d.B;return d.l}eraseElementByPos(f){if(f<0||f>this.i-1)throw new RangeError;let d=this.p;for(;f--;)d=d.B;return this.V(d),this.i}eraseElementByValue(f){let d=this.p;for(;d!==this.h;)d.l===f&&this.V(d),d=d.B;return this.i}eraseElementByIterator(f){let d=f.o;return d===this.h&&(0,i.throwIteratorAccessError)(),f=f.next(),this.V(d),f}pushBack(f){return this.G(f,this._),this.i}popBack(){if(this.i===0)return;let f=this._.l;return this.V(this._),f}pushFront(f){return this.G(f,this.h),this.i}popFront(){if(this.i===0)return;let f=this.p.l;return this.V(this.p),f}setElementByPos(f,d){if(f<0||f>this.i-1)throw new RangeError;let m=this.p;for(;f--;)m=m.B;m.l=d}insert(f,d,m=1){if(f<0||f>this.i)throw new RangeError;if(m<=0)return this.i;if(f===0)for(;m--;)this.pushFront(d);else if(f===this.i)for(;m--;)this.pushBack(d);else{let w=this.p;for(let b=1;b<f;++b)w=w.B;let v=w.B;for(this.i+=m;m--;)w.B={l:d,L:w},w.B.L=w,w=w.B;w.B=v,v.L=w}return this.i}find(f){let d=this.p;for(;d!==this.h;){if(d.l===f)return new s(d,this.h,this);d=d.B}return this.end()}reverse(){if(this.i<=1)return;let f=this.p,d=this._,m=0;for(;m<<1<this.i;){let w=f.l;f.l=d.l,d.l=w,f=f.B,d=d.L,m+=1}}unique(){if(this.i<=1)return this.i;let f=this.p;for(;f!==this.h;){let d=f;for(;d.B!==this.h&&d.l===d.B.l;)d=d.B,this.i-=1;f.B=d.B,f.B.L=f,f=f.B}return this.i}sort(f){if(this.i<=1)return;let d=[];this.forEach(function(w){d.push(w)}),d.sort(f);let m=this.p;d.forEach(function(w){m.l=w,m=m.B})}merge(f){let d=this;if(this.i===0)f.forEach(function(m){d.pushBack(m)});else{let m=this.p;f.forEach(function(w){for(;m!==d.h&&m.l<=w;)m=m.B;d.G(w,m.L)})}return this.i}forEach(f){let d=this.p,m=0;for(;d!==this.h;)f(d.l,m++,this),d=d.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let f=this.p;for(;f!==this.h;)yield f.l,f=f.B}).bind(this)()}},h=u;e.default=h}),_T=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=i(Y1()),r=Ax();function i(h){return h&&h.t?h:{default:h}}var a=class Tx extends r.RandomIterator{constructor(f,d,m){super(f,m),this.container=d}copy(){return new Tx(this.o,this.container,this.iteratorType)}},s=class extends t.default{constructor(h=[],f=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let d=(()=>{if(typeof h.length=="number")return h.length;if(typeof h.size=="number")return h.size;if(typeof h.size=="function")return h.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=f,this.P=Math.max(Math.ceil(d/this.F),1);for(let v=0;v<this.P;++v)this.A.push(new Array(this.F));let m=Math.ceil(d/this.F);this.j=this.R=(this.P>>1)-(m>>1),this.D=this.N=this.F-d%this.F>>1;let w=this;h.forEach(function(v){w.pushBack(v)})}T(){let h=[],f=Math.max(this.P>>1,1);for(let d=0;d<f;++d)h[d]=new Array(this.F);for(let d=this.j;d<this.P;++d)h[h.length]=this.A[d];for(let d=0;d<this.R;++d)h[h.length]=this.A[d];h[h.length]=[...this.A[this.R]],this.j=f,this.R=h.length-1;for(let d=0;d<f;++d)h[h.length]=new Array(this.F);this.A=h,this.P=h.length}O(h){let f=this.D+h+1,d=f%this.F,m=d-1,w=this.j+(f-d)/this.F;return d===0&&(w-=1),w%=this.P,m<0&&(m+=this.F),{curNodeBucketIndex:w,curNodePointerIndex:m}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new a(0,this)}end(){return new a(this.i,this)}rBegin(){return new a(this.i-1,this,1)}rEnd(){return new a(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(h){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=h,this.i}popBack(){if(this.i===0)return;let h=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,h}pushFront(h){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=h,this.i}popFront(){if(this.i===0)return;let h=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,h}getElementByPos(h){if(h<0||h>this.i-1)throw new RangeError;let{curNodeBucketIndex:f,curNodePointerIndex:d}=this.O(h);return this.A[f][d]}setElementByPos(h,f){if(h<0||h>this.i-1)throw new RangeError;let{curNodeBucketIndex:d,curNodePointerIndex:m}=this.O(h);this.A[d][m]=f}insert(h,f,d=1){if(h<0||h>this.i)throw new RangeError;if(h===0)for(;d--;)this.pushFront(f);else if(h===this.i)for(;d--;)this.pushBack(f);else{let m=[];for(let w=h;w<this.i;++w)m.push(this.getElementByPos(w));this.cut(h-1);for(let w=0;w<d;++w)this.pushBack(f);for(let w=0;w<m.length;++w)this.pushBack(m[w])}return this.i}cut(h){if(h<0)return this.clear(),0;let{curNodeBucketIndex:f,curNodePointerIndex:d}=this.O(h);return this.R=f,this.N=d,this.i=h+1,this.i}eraseElementByPos(h){if(h<0||h>this.i-1)throw new RangeError;if(h===0)this.popFront();else if(h===this.i-1)this.popBack();else{let f=[];for(let m=h+1;m<this.i;++m)f.push(this.getElementByPos(m));this.cut(h),this.popBack();let d=this;f.forEach(function(m){d.pushBack(m)})}return this.i}eraseElementByValue(h){if(this.i===0)return 0;let f=[];for(let m=0;m<this.i;++m){let w=this.getElementByPos(m);w!==h&&f.push(w)}let d=f.length;for(let m=0;m<d;++m)this.setElementByPos(m,f[m]);return this.cut(d-1)}eraseElementByIterator(h){let f=h.o;return this.eraseElementByPos(f),h=h.next(),h}find(h){for(let f=0;f<this.i;++f)if(this.getElementByPos(f)===h)return new a(f,this);return this.end()}reverse(){let h=0,f=this.i-1;for(;h<f;){let d=this.getElementByPos(h);this.setElementByPos(h,this.getElementByPos(f)),this.setElementByPos(f,d),h+=1,f-=1}}unique(){if(this.i<=1)return this.i;let h=1,f=this.getElementByPos(0);for(let d=1;d<this.i;++d){let m=this.getElementByPos(d);m!==f&&(f=m,this.setElementByPos(h++,m))}for(;this.i>h;)this.popBack();return this.i}sort(h){let f=[];for(let d=0;d<this.i;++d)f.push(this.getElementByPos(d));f.sort(h);for(let d=0;d<this.i;++d)this.setElementByPos(d,f[d])}shrinkToFit(){if(this.i===0)return;let h=[];this.forEach(function(f){h.push(f)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let f=0;f<this.P;++f)this.A.push(new Array(this.F));for(let f=0;f<h.length;++f)this.pushBack(h[f])}forEach(h){for(let f=0;f<this.i;++f)h(this.getElementByPos(f),f,this)}[Symbol.iterator](){return(function*(){for(let h=0;h<this.i;++h)yield this.getElementByPos(h)}).bind(this)()}},u=s;e.default=u}),ET=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.TreeNodeEnableIndex=e.TreeNode=void 0;var t=class{constructor(i,a){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=i,this.l=a}L(){let i=this;if(i.ee===1&&i.tt.tt===i)i=i.W;else if(i.U)for(i=i.U;i.W;)i=i.W;else{let a=i.tt;for(;a.U===i;)i=a,a=i.tt;i=a}return i}B(){let i=this;if(i.W){for(i=i.W;i.U;)i=i.U;return i}else{let a=i.tt;for(;a.W===i;)i=a,a=i.tt;return i.W!==a?a:i}}te(){let i=this.tt,a=this.W,s=a.U;return i.tt===this?i.tt=a:i.U===this?i.U=a:i.W=a,a.tt=i,a.U=this,this.tt=a,this.W=s,s&&(s.tt=this),a}se(){let i=this.tt,a=this.U,s=a.W;return i.tt===this?i.tt=a:i.U===this?i.U=a:i.W=a,a.tt=i,a.W=this,this.tt=a,this.U=s,s&&(s.tt=this),a}};e.TreeNode=t;var r=class extends t{constructor(){super(...arguments),this.rt=1}te(){let i=super.te();return this.ie(),i.ie(),i}se(){let i=super.se();return this.ie(),i.ie(),i}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};e.TreeNodeEnableIndex=r}),Nx=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=ET(),r=Ui(),i=zi(),a=class extends r.Container{constructor(u=function(f,d){return f<d?-1:f>d?1:0},h=!1){super(),this.Y=void 0,this.v=u,h?(this.re=t.TreeNodeEnableIndex,this.M=function(f,d,m){let w=this.ne(f,d,m);if(w){let v=w.tt;for(;v!==this.h;)v.rt+=1,v=v.tt;let b=this.he(w);if(b){let{parentNode:C,grandParent:N,curNode:R}=b;C.ie(),N.ie(),R.ie()}}return this.i},this.V=function(f){let d=this.fe(f);for(;d!==this.h;)d.rt-=1,d=d.tt}):(this.re=t.TreeNode,this.M=function(f,d,m){let w=this.ne(f,d,m);return w&&this.he(w),this.i},this.V=this.fe),this.h=new this.re}X(u,h){let f=this.h;for(;u;){let d=this.v(u.u,h);if(d<0)u=u.W;else if(d>0)f=u,u=u.U;else return u}return f}Z(u,h){let f=this.h;for(;u;)this.v(u.u,h)<=0?u=u.W:(f=u,u=u.U);return f}$(u,h){let f=this.h;for(;u;){let d=this.v(u.u,h);if(d<0)f=u,u=u.W;else if(d>0)u=u.U;else return u}return f}rr(u,h){let f=this.h;for(;u;)this.v(u.u,h)<0?(f=u,u=u.W):u=u.U;return f}ue(u){for(;;){let h=u.tt;if(h===this.h)return;if(u.ee===1){u.ee=0;return}if(u===h.U){let f=h.W;if(f.ee===1)f.ee=0,h.ee=1,h===this.Y?this.Y=h.te():h.te();else if(f.W&&f.W.ee===1){f.ee=h.ee,h.ee=0,f.W.ee=0,h===this.Y?this.Y=h.te():h.te();return}else f.U&&f.U.ee===1?(f.ee=1,f.U.ee=0,f.se()):(f.ee=1,u=h)}else{let f=h.U;if(f.ee===1)f.ee=0,h.ee=1,h===this.Y?this.Y=h.se():h.se();else if(f.U&&f.U.ee===1){f.ee=h.ee,h.ee=0,f.U.ee=0,h===this.Y?this.Y=h.se():h.se();return}else f.W&&f.W.ee===1?(f.ee=1,f.W.ee=0,f.te()):(f.ee=1,u=h)}}}fe(u){if(this.i===1)return this.clear(),this.h;let h=u;for(;h.U||h.W;){if(h.W)for(h=h.W;h.U;)h=h.U;else h=h.U;[u.u,h.u]=[h.u,u.u],[u.l,h.l]=[h.l,u.l],u=h}this.h.U===h?this.h.U=h.tt:this.h.W===h&&(this.h.W=h.tt),this.ue(h);let f=h.tt;return h===f.U?f.U=void 0:f.W=void 0,this.i-=1,this.Y.ee=0,f}oe(u,h){return u===void 0?!1:this.oe(u.U,h)||h(u)?!0:this.oe(u.W,h)}he(u){for(;;){let h=u.tt;if(h.ee===0)return;let f=h.tt;if(h===f.U){let d=f.W;if(d&&d.ee===1){if(d.ee=h.ee=0,f===this.Y)return;f.ee=1,u=f;continue}else if(u===h.W){if(u.ee=0,u.U&&(u.U.tt=h),u.W&&(u.W.tt=f),h.W=u.U,f.U=u.W,u.U=h,u.W=f,f===this.Y)this.Y=u,this.h.tt=u;else{let m=f.tt;m.U===f?m.U=u:m.W=u}return u.tt=f.tt,h.tt=u,f.tt=u,f.ee=1,{parentNode:h,grandParent:f,curNode:u}}else h.ee=0,f===this.Y?this.Y=f.se():f.se(),f.ee=1}else{let d=f.U;if(d&&d.ee===1){if(d.ee=h.ee=0,f===this.Y)return;f.ee=1,u=f;continue}else if(u===h.U){if(u.ee=0,u.U&&(u.U.tt=f),u.W&&(u.W.tt=h),f.W=u.U,h.U=u.W,u.U=f,u.W=h,f===this.Y)this.Y=u,this.h.tt=u;else{let m=f.tt;m.U===f?m.U=u:m.W=u}return u.tt=f.tt,h.tt=u,f.tt=u,f.ee=1,{parentNode:h,grandParent:f,curNode:u}}else h.ee=0,f===this.Y?this.Y=f.te():f.te(),f.ee=1}return}}ne(u,h,f){if(this.Y===void 0){this.i+=1,this.Y=new this.re(u,h),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let d,m=this.h.U,w=this.v(m.u,u);if(w===0){m.l=h;return}else if(w>0)m.U=new this.re(u,h),m.U.tt=m,d=m.U,this.h.U=d;else{let v=this.h.W,b=this.v(v.u,u);if(b===0){v.l=h;return}else if(b<0)v.W=new this.re(u,h),v.W.tt=v,d=v.W,this.h.W=d;else{if(f!==void 0){let C=f.o;if(C!==this.h){let N=this.v(C.u,u);if(N===0){C.l=h;return}else if(N>0){let R=C.L(),k=this.v(R.u,u);if(k===0){R.l=h;return}else k<0&&(d=new this.re(u,h),R.W===void 0?(R.W=d,d.tt=R):(C.U=d,d.tt=C))}}}if(d===void 0)for(d=this.Y;;){let C=this.v(d.u,u);if(C>0){if(d.U===void 0){d.U=new this.re(u,h),d.U.tt=d,d=d.U;break}d=d.U}else if(C<0){if(d.W===void 0){d.W=new this.re(u,h),d.W.tt=d,d=d.W;break}d=d.W}else{d.l=h;return}}}}return this.i+=1,d}I(u,h){for(;u;){let f=this.v(u.u,h);if(f<0)u=u.W;else if(f>0)u=u.U;else return u}return u||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(u,h){let f=u.o;if(f===this.h&&(0,i.throwIteratorAccessError)(),this.i===1)return f.u=h,!0;if(f===this.h.U)return this.v(f.B().u,h)>0?(f.u=h,!0):!1;if(f===this.h.W)return this.v(f.L().u,h)<0?(f.u=h,!0):!1;let d=f.L().u;if(this.v(d,h)>=0)return!1;let m=f.B().u;return this.v(m,h)<=0?!1:(f.u=h,!0)}eraseElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;let h=0,f=this;return this.oe(this.Y,function(d){return u===h?(f.V(d),!0):(h+=1,!1)}),this.i}eraseElementByKey(u){if(this.i===0)return!1;let h=this.I(this.Y,u);return h===this.h?!1:(this.V(h),!0)}eraseElementByIterator(u){let h=u.o;h===this.h&&(0,i.throwIteratorAccessError)();let f=h.W===void 0;return u.iteratorType===0?f&&u.next():(!f||h.U===void 0)&&u.next(),this.V(h),u}forEach(u){let h=0;for(let f of this)u(f,h++,this)}getElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;let h,f=0;for(let d of this){if(f===u){h=d;break}f+=1}return h}getHeight(){if(this.i===0)return 0;let u=function(h){return h?Math.max(u(h.U),u(h.W))+1:0};return u(this.Y)}},s=a;e.default=s}),Ox=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Ui(),r=zi(),i=class extends t.ContainerIterator{constructor(s,u,h){super(h),this.o=s,this.h=u,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,r.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,r.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let s=this.o,u=this.h.tt;if(s===this.h)return u?u.rt-1:0;let h=0;for(s.U&&(h+=s.U.rt);s!==u;){let f=s.tt;s===f.W&&(h+=1,f.U&&(h+=f.U.rt)),s=f}return h}},a=i;e.default=a}),ST=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=a(Nx()),r=a(Ox()),i=zi();function a(f){return f&&f.t?f:{default:f}}var s=class kx extends r.default{constructor(d,m,w,v){super(d,m,v),this.container=w}get pointer(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o.u}copy(){return new kx(this.o,this.h,this.container,this.iteratorType)}},u=class extends t.default{constructor(f=[],d,m){super(d,m);let w=this;f.forEach(function(v){w.insert(v)})}*K(f){f!==void 0&&(yield*this.K(f.U),yield f.u,yield*this.K(f.W))}begin(){return new s(this.h.U||this.h,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this.h.W||this.h,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(f,d){return this.M(f,void 0,d)}find(f){let d=this.I(this.Y,f);return new s(d,this.h,this)}lowerBound(f){let d=this.X(this.Y,f);return new s(d,this.h,this)}upperBound(f){let d=this.Z(this.Y,f);return new s(d,this.h,this)}reverseLowerBound(f){let d=this.$(this.Y,f);return new s(d,this.h,this)}reverseUpperBound(f){let d=this.rr(this.Y,f);return new s(d,this.h,this)}union(f){let d=this;return f.forEach(function(m){d.insert(m)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},h=u;e.default=h}),AT=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=a(Nx()),r=a(Ox()),i=zi();function a(f){return f&&f.t?f:{default:f}}var s=class Rx extends r.default{constructor(d,m,w,v){super(d,m,v),this.container=w}get pointer(){this.o===this.h&&(0,i.throwIteratorAccessError)();let d=this;return new Proxy([],{get(m,w){if(w==="0")return d.o.u;if(w==="1")return d.o.l},set(m,w,v){if(w!=="1")throw new TypeError("props must be 1");return d.o.l=v,!0}})}copy(){return new Rx(this.o,this.h,this.container,this.iteratorType)}},u=class extends t.default{constructor(f=[],d,m){super(d,m);let w=this;f.forEach(function(v){w.setElement(v[0],v[1])})}*K(f){f!==void 0&&(yield*this.K(f.U),yield[f.u,f.l],yield*this.K(f.W))}begin(){return new s(this.h.U||this.h,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this.h.W||this.h,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){if(this.i===0)return;let f=this.h.U;return[f.u,f.l]}back(){if(this.i===0)return;let f=this.h.W;return[f.u,f.l]}lowerBound(f){let d=this.X(this.Y,f);return new s(d,this.h,this)}upperBound(f){let d=this.Z(this.Y,f);return new s(d,this.h,this)}reverseLowerBound(f){let d=this.$(this.Y,f);return new s(d,this.h,this)}reverseUpperBound(f){let d=this.rr(this.Y,f);return new s(d,this.h,this)}setElement(f,d,m){return this.M(f,d,m)}find(f){let d=this.I(this.Y,f);return new s(d,this.h,this)}getElementByKey(f){return this.I(this.Y,f).l}union(f){let d=this;return f.forEach(function(m){d.setElement(m[0],m[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},h=u;e.default=h}),Mx=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.default=t;function t(r){let i=typeof r;return i==="object"&&r!==null||i==="function"}}),Dx=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.HashContainerIterator=e.HashContainer=void 0;var t=Ui(),r=a(Mx()),i=zi();function a(h){return h&&h.t?h:{default:h}}var s=class extends t.ContainerIterator{constructor(h,f,d){super(d),this.o=h,this.h=f,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.L,this})}};e.HashContainerIterator=s;var u=class extends t.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(h){let{L:f,B:d}=h;f.B=d,d.L=f,h===this.p&&(this.p=d),h===this._&&(this._=f),this.i-=1}M(h,f,d){d===void 0&&(d=(0,r.default)(h));let m;if(d){let w=h[this.HASH_TAG];if(w!==void 0)return this.H[w].l=f,this.i;Object.defineProperty(h,this.HASH_TAG,{value:this.H.length,configurable:!0}),m={u:h,l:f,L:this._,B:this.h},this.H.push(m)}else{let w=this.g[h];if(w)return w.l=f,this.i;m={u:h,l:f,L:this._,B:this.h},this.g[h]=m}return this.i===0?(this.p=m,this.h.B=m):this._.B=m,this._=m,this.h.L=m,++this.i}I(h,f){if(f===void 0&&(f=(0,r.default)(h)),f){let d=h[this.HASH_TAG];return d===void 0?this.h:this.H[d]}else return this.g[h]||this.h}clear(){let h=this.HASH_TAG;this.H.forEach(function(f){delete f.u[h]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(h,f){let d;if(f===void 0&&(f=(0,r.default)(h)),f){let m=h[this.HASH_TAG];if(m===void 0)return!1;delete h[this.HASH_TAG],d=this.H[m],delete this.H[m]}else{if(d=this.g[h],d===void 0)return!1;delete this.g[h]}return this.V(d),!0}eraseElementByIterator(h){let f=h.o;return f===this.h&&(0,i.throwIteratorAccessError)(),this.V(f),h.next()}eraseElementByPos(h){if(h<0||h>this.i-1)throw new RangeError;let f=this.p;for(;h--;)f=f.B;return this.V(f),this.i}};e.HashContainer=u}),CT=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Dx(),r=zi(),i=class Px extends t.HashContainerIterator{constructor(h,f,d,m){super(h,f,m),this.container=d}get pointer(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o.u}copy(){return new Px(this.o,this.h,this.container,this.iteratorType)}},a=class extends t.HashContainer{constructor(u=[]){super();let h=this;u.forEach(function(f){h.insert(f)})}begin(){return new i(this.p,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this._,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(u,h){return this.M(u,void 0,h)}getElementByPos(u){if(u<0||u>this.i-1)throw new RangeError;let h=this.p;for(;u--;)h=h.B;return h.u}find(u,h){let f=this.I(u,h);return new i(f,this.h,this)}forEach(u){let h=0,f=this.p;for(;f!==this.h;)u(f.u,h++,this),f=f.B}[Symbol.iterator](){return(function*(){let u=this.p;for(;u!==this.h;)yield u.u,u=u.B}).bind(this)()}},s=a;e.default=s}),IT=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Dx(),r=a(Mx()),i=zi();function a(f){return f&&f.t?f:{default:f}}var s=class Lx extends t.HashContainerIterator{constructor(d,m,w,v){super(d,m,v),this.container=w}get pointer(){this.o===this.h&&(0,i.throwIteratorAccessError)();let d=this;return new Proxy([],{get(m,w){if(w==="0")return d.o.u;if(w==="1")return d.o.l},set(m,w,v){if(w!=="1")throw new TypeError("props must be 1");return d.o.l=v,!0}})}copy(){return new Lx(this.o,this.h,this.container,this.iteratorType)}},u=class extends t.HashContainer{constructor(f=[]){super();let d=this;f.forEach(function(m){d.setElement(m[0],m[1])})}begin(){return new s(this.p,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this._,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(f,d,m){return this.M(f,d,m)}getElementByKey(f,d){if(d===void 0&&(d=(0,r.default)(f)),d){let w=f[this.HASH_TAG];return w!==void 0?this.H[w].l:void 0}let m=this.g[f];return m?m.l:void 0}getElementByPos(f){if(f<0||f>this.i-1)throw new RangeError;let d=this.p;for(;f--;)d=d.B;return[d.u,d.l]}find(f,d){let m=this.I(f,d);return new s(m,this.h,this)}forEach(f){let d=0,m=this.p;for(;m!==this.h;)f([m.u,m.l],d++,this),m=m.B}[Symbol.iterator](){return(function*(){let f=this.p;for(;f!==this.h;)yield[f.u,f.l],f=f.B}).bind(this)()}},h=u;e.default=h}),TT=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"t",{value:!0}),Object.defineProperty(e,"Deque",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"HashMap",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"HashSet",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"LinkList",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"OrderedMap",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"OrderedSet",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"PriorityQueue",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Queue",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Stack",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Vector",{enumerable:!0,get:function(){return a.default}});var t=w(yT()),r=w(wT()),i=w(xT()),a=w(vT()),s=w(bT()),u=w(_T()),h=w(ST()),f=w(AT()),d=w(CT()),m=w(IT());function w(v){return v&&v.t?v:{default:v}}}),NT=$e((e,t)=>{Ue(),We(),ze();var r=TT().OrderedSet,i=Li()("number-allocator:trace"),a=Li()("number-allocator:error");function s(h,f){this.low=h,this.high=f}s.prototype.equals=function(h){return this.low===h.low&&this.high===h.high},s.prototype.compare=function(h){return this.low<h.low&&this.high<h.low?-1:h.low<this.low&&h.high<this.low?1:0};function u(h,f){if(!(this instanceof u))return new u(h,f);this.min=h,this.max=f,this.ss=new r([],(d,m)=>d.compare(m)),i("Create"),this.clear()}u.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},u.prototype.alloc=function(){if(this.ss.size()===0)return i("alloc():empty"),null;let h=this.ss.begin(),f=h.pointer.low,d=h.pointer.high,m=f;return m+1<=d?this.ss.updateKeyByIterator(h,new s(f+1,d)):this.ss.eraseElementByPos(0),i("alloc():"+m),m},u.prototype.use=function(h){let f=new s(h,h),d=this.ss.lowerBound(f);if(!d.equals(this.ss.end())){let m=d.pointer.low,w=d.pointer.high;return d.pointer.equals(f)?(this.ss.eraseElementByIterator(d),i("use():"+h),!0):m>h?!1:m===h?(this.ss.updateKeyByIterator(d,new s(m+1,w)),i("use():"+h),!0):w===h?(this.ss.updateKeyByIterator(d,new s(m,w-1)),i("use():"+h),!0):(this.ss.updateKeyByIterator(d,new s(h+1,w)),this.ss.insert(new s(m,h-1)),i("use():"+h),!0)}return i("use():failed"),!1},u.prototype.free=function(h){if(h<this.min||h>this.max){a("free():"+h+" is out of range");return}let f=new s(h,h),d=this.ss.upperBound(f);if(d.equals(this.ss.end())){if(d.equals(this.ss.begin())){this.ss.insert(f);return}d.pre();let m=d.pointer.high;d.pointer.high+1===h?this.ss.updateKeyByIterator(d,new s(m,h)):this.ss.insert(f)}else if(d.equals(this.ss.begin()))if(h+1===d.pointer.low){let m=d.pointer.high;this.ss.updateKeyByIterator(d,new s(h,m))}else this.ss.insert(f);else{let m=d.pointer.low,w=d.pointer.high;d.pre();let v=d.pointer.low;d.pointer.high+1===h?h+1===m?(this.ss.eraseElementByIterator(d),this.ss.updateKeyByIterator(d,new s(v,w))):this.ss.updateKeyByIterator(d,new s(v,h)):h+1===m?(this.ss.eraseElementByIterator(d.next()),this.ss.insert(new s(h,w))):this.ss.insert(f)}i("free():"+h)},u.prototype.clear=function(){i("clear()"),this.ss.clear(),this.ss.insert(new s(this.min,this.max))},u.prototype.intervalCount=function(){return this.ss.size()},u.prototype.dump=function(){console.log("length:"+this.ss.size());for(let h of this.ss)console.log(h)},t.exports=u}),Bx=$e((e,t)=>{Ue(),We(),ze();var r=NT();t.exports.NumberAllocator=r}),OT=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"__esModule",{value:!0});var t=mT(),r=Bx(),i=class{constructor(a){a>0&&(this.aliasToTopic=new t.LRUCache({max:a}),this.topicToAlias={},this.numberAllocator=new r.NumberAllocator(1,a),this.max=a,this.length=0)}put(a,s){if(s===0||s>this.max)return!1;let u=this.aliasToTopic.get(s);return u&&delete this.topicToAlias[u],this.aliasToTopic.set(s,a),this.topicToAlias[a]=s,this.numberAllocator.use(s),this.length=this.aliasToTopic.size,!0}getTopicByAlias(a){return this.aliasToTopic.get(a)}getAliasByTopic(a){let s=this.topicToAlias[a];return typeof s<"u"&&this.aliasToTopic.get(s),s}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};e.default=i}),kT=$e(e=>{Ue(),We(),ze();var t=e&&e.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0});var r=Zc(),i=t(OT()),a=ba(),s=(u,h)=>{u.log("_handleConnack");let{options:f}=u,d=f.protocolVersion===5?h.reasonCode:h.returnCode;if(clearTimeout(u.connackTimer),delete u.topicAliasSend,h.properties){if(h.properties.topicAliasMaximum){if(h.properties.topicAliasMaximum>65535){u.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}h.properties.topicAliasMaximum>0&&(u.topicAliasSend=new i.default(h.properties.topicAliasMaximum))}h.properties.serverKeepAlive&&f.keepalive&&(f.keepalive=h.properties.serverKeepAlive),h.properties.maximumPacketSize&&(f.properties||(f.properties={}),f.properties.maximumPacketSize=h.properties.maximumPacketSize)}if(d===0)u.reconnecting=!1,u._onConnect(h);else if(d>0){let m=new a.ErrorWithReasonCode(`Connection refused: ${r.ReasonCodes[d]}`,d);u.emit("error",m),u.options.reconnectOnConnackError&&u._cleanUp(!0)}};e.default=s}),RT=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"__esModule",{value:!0});var t=(r,i,a)=>{r.log("handling pubrel packet");let s=typeof a<"u"?a:r.noop,{messageId:u}=i,h={cmd:"pubcomp",messageId:u};r.incomingStore.get(i,(f,d)=>{f?r._sendPacket(h,s):(r.emit("message",d.topic,d.payload,d),r.handleMessage(d,m=>{if(m)return s(m);r.incomingStore.del(d,r.noop),r._sendPacket(h,s)}))})};e.default=t}),MT=$e(e=>{Ue(),We(),ze();var t=e&&e.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0});var r=t(dT()),i=t(gT()),a=t(kT()),s=t(Zc()),u=t(RT()),h=(f,d,m)=>{let{options:w}=f;if(w.protocolVersion===5&&w.properties&&w.properties.maximumPacketSize&&w.properties.maximumPacketSize<d.length)return f.emit("error",new Error(`exceeding packets size ${d.cmd}`)),f.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),f;switch(f.log("_handlePacket :: emitting packetreceive"),f.emit("packetreceive",d),d.cmd){case"publish":(0,r.default)(f,d,m);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":f.reschedulePing(),(0,s.default)(f,d),m();break;case"pubrel":f.reschedulePing(),(0,u.default)(f,d,m);break;case"connack":(0,a.default)(f,d),m();break;case"auth":f.reschedulePing(),(0,i.default)(f,d),m();break;case"pingresp":f.log("_handlePacket :: received pingresp"),f.reschedulePing(!0),m();break;case"disconnect":f.emit("disconnect",d),m();break;default:f.log("_handlePacket :: unknown command"),m();break}};e.default=h}),DT=$e(e=>{Ue(),We(),ze();var t=e&&e.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEventEmitter=void 0;var r=t((xo(),jt(Ds))),i=ba(),a=class{};e.TypedEventEmitter=a,(0,i.applyMixin)(a,r.default)}),Jc=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"__esModule",{value:!0}),e.isReactNativeBrowser=e.isWebWorker=void 0;var t=()=>{var s;return typeof window<"u"?typeof navigator<"u"&&((s=navigator.userAgent)===null||s===void 0?void 0:s.toLowerCase().indexOf(" electron/"))>-1&&It!=null&&It.versions?!Object.prototype.hasOwnProperty.call(It.versions,"electron"):typeof window.document<"u":!1},r=()=>{var s,u;return!!(typeof self=="object"&&!((u=(s=self==null?void 0:self.constructor)===null||s===void 0?void 0:s.name)===null||u===void 0)&&u.includes("WorkerGlobalScope"))},i=()=>typeof navigator<"u"&&navigator.product==="ReactNative",a=t()||r()||i();e.isWebWorker=r(),e.isReactNativeBrowser=i(),e.default=a}),PT=$e((e,t)=>{Ue(),We(),ze(),function(r,i){typeof e=="object"&&typeof t<"u"?i(e):typeof define=="function"&&define.amd?define(["exports"],i):(r=typeof globalThis<"u"?globalThis:r||self,i(r.fastUniqueNumbers={}))}(e,function(r){var i=function(b){return function(C){var N=b(C);return C.add(N),N}},a=function(b){return function(C,N){return b.set(C,N),N}},s=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,u=536870912,h=u*2,f=function(b,C){return function(N){var R=C.get(N),k=R===void 0?N.size:R<h?R+1:0;if(!N.has(k))return b(N,k);if(N.size<u){for(;N.has(k);)k=Math.floor(Math.random()*h);return b(N,k)}if(N.size>s)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;N.has(k);)k=Math.floor(Math.random()*s);return b(N,k)}},d=new WeakMap,m=a(d),w=f(m,d),v=i(w);r.addUniqueNumber=v,r.generateUniqueNumber=w})}),LT=$e((e,t)=>{Ue(),We(),ze(),function(r,i){typeof e=="object"&&typeof t<"u"?i(e,PT()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],i):(r=typeof globalThis<"u"?globalThis:r||self,i(r.workerTimersBroker={},r.fastUniqueNumbers))}(e,function(r,i){var a=function(h){return h.method!==void 0&&h.method==="call"},s=function(h){return h.error===null&&typeof h.id=="number"},u=function(h){var f=new Map([[0,function(){}]]),d=new Map([[0,function(){}]]),m=new Map,w=new Worker(h);w.addEventListener("message",function(R){var k=R.data;if(a(k)){var S=k.params,I=S.timerId,B=S.timerType;if(B==="interval"){var U=f.get(I);if(typeof U=="number"){var L=m.get(U);if(L===void 0||L.timerId!==I||L.timerType!==B)throw new Error("The timer is in an undefined state.")}else if(typeof U<"u")U();else throw new Error("The timer is in an undefined state.")}else if(B==="timeout"){var P=d.get(I);if(typeof P=="number"){var W=m.get(P);if(W===void 0||W.timerId!==I||W.timerType!==B)throw new Error("The timer is in an undefined state.")}else if(typeof P<"u")P(),d.delete(I);else throw new Error("The timer is in an undefined state.")}}else if(s(k)){var q=k.id,pe=m.get(q);if(pe===void 0)throw new Error("The timer is in an undefined state.");var Ae=pe.timerId,H=pe.timerType;m.delete(q),H==="interval"?f.delete(Ae):d.delete(Ae)}else{var ue=k.error.message;throw new Error(ue)}});var v=function(R){var k=i.generateUniqueNumber(m);m.set(k,{timerId:R,timerType:"interval"}),f.set(R,k),w.postMessage({id:k,method:"clear",params:{timerId:R,timerType:"interval"}})},b=function(R){var k=i.generateUniqueNumber(m);m.set(k,{timerId:R,timerType:"timeout"}),d.set(R,k),w.postMessage({id:k,method:"clear",params:{timerId:R,timerType:"timeout"}})},C=function(R){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=i.generateUniqueNumber(f);return f.set(S,function(){R(),typeof f.get(S)=="function"&&w.postMessage({id:null,method:"set",params:{delay:k,now:performance.now(),timerId:S,timerType:"interval"}})}),w.postMessage({id:null,method:"set",params:{delay:k,now:performance.now(),timerId:S,timerType:"interval"}}),S},N=function(R){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=i.generateUniqueNumber(d);return d.set(S,R),w.postMessage({id:null,method:"set",params:{delay:k,now:performance.now(),timerId:S,timerType:"timeout"}}),S};return{clearInterval:v,clearTimeout:b,setInterval:C,setTimeout:N}};r.load=u})}),BT=$e((e,t)=>{Ue(),We(),ze(),function(r,i){typeof e=="object"&&typeof t<"u"?i(e,LT()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],i):(r=typeof globalThis<"u"?globalThis:r||self,i(r.workerTimers={},r.workerTimersBroker))}(e,function(r,i){var a=function(w,v){var b=null;return function(){if(b!==null)return b;var C=new Blob([v],{type:"application/javascript; charset=utf-8"}),N=URL.createObjectURL(C);return b=w(N),setTimeout(function(){return URL.revokeObjectURL(N)}),b}},s=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,u=a(i.load,s),h=function(w){return u().clearInterval(w)},f=function(w){return u().clearTimeout(w)},d=function(){var w;return(w=u()).setInterval.apply(w,arguments)},m=function(){var w;return(w=u()).setTimeout.apply(w,arguments)};r.clearInterval=h,r.clearTimeout=f,r.setInterval=d,r.setTimeout=m})}),jT=$e(e=>{Ue(),We(),ze();var t=e&&e.__createBinding||(Object.create?function(d,m,w,v){v===void 0&&(v=w);var b=Object.getOwnPropertyDescriptor(m,w);(!b||("get"in b?!m.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return m[w]}}),Object.defineProperty(d,v,b)}:function(d,m,w,v){v===void 0&&(v=w),d[v]=m[w]}),r=e&&e.__setModuleDefault||(Object.create?function(d,m){Object.defineProperty(d,"default",{enumerable:!0,value:m})}:function(d,m){d.default=m}),i=e&&e.__importStar||function(){var d=function(m){return d=Object.getOwnPropertyNames||function(w){var v=[];for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(v[v.length]=b);return v},d(m)};return function(m){if(m&&m.__esModule)return m;var w={};if(m!=null)for(var v=d(m),b=0;b<v.length;b++)v[b]!=="default"&&t(w,m,v[b]);return r(w,m),w}}();Object.defineProperty(e,"__esModule",{value:!0});var a=i(Jc()),s=BT(),u={set:s.setInterval,clear:s.clearInterval},h={set:(d,m)=>setInterval(d,m),clear:d=>clearInterval(d)},f=d=>{switch(d){case"native":return h;case"worker":return u;case"auto":default:return a.default&&!a.isWebWorker&&!a.isReactNativeBrowser?u:h}};e.default=f}),jx=$e(e=>{Ue(),We(),ze();var t=e&&e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var r=t(jT()),i=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(a,s){this.destroyed=!1,this.client=a,this.timer=typeof s=="object"&&"set"in s&&"clear"in s?s:(0,r.default)(s),this.setKeepalive(a.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(a){if(a*=1e3,isNaN(a)||a<=0||a>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${a}`);this._keepalive=a,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${a}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let a=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+a,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};e.default=i}),C0=$e(e=>{Ue(),We(),ze();var t=e&&e.__createBinding||(Object.create?function(U,L,P,W){W===void 0&&(W=P);var q=Object.getOwnPropertyDescriptor(L,P);(!q||("get"in q?!L.__esModule:q.writable||q.configurable))&&(q={enumerable:!0,get:function(){return L[P]}}),Object.defineProperty(U,W,q)}:function(U,L,P,W){W===void 0&&(W=P),U[W]=L[P]}),r=e&&e.__setModuleDefault||(Object.create?function(U,L){Object.defineProperty(U,"default",{enumerable:!0,value:L})}:function(U,L){U.default=L}),i=e&&e.__importStar||function(){var U=function(L){return U=Object.getOwnPropertyNames||function(P){var W=[];for(var q in P)Object.prototype.hasOwnProperty.call(P,q)&&(W[W.length]=q);return W},U(L)};return function(L){if(L&&L.__esModule)return L;var P={};if(L!=null)for(var W=U(L),q=0;q<W.length;q++)W[q]!=="default"&&t(P,L,W[q]);return r(P,L),P}}(),a=e&&e.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(GI()),u=a(uT()),h=a(bx()),f=bo(),d=a(hT()),m=i(fT()),w=a(Li()),v=a(_x()),b=a(MT()),C=ba(),N=DT(),R=a(jx()),k=i(Jc()),S=globalThis.setImmediate||((...U)=>{let L=U.shift();(0,C.nextTick)(()=>{L(...U)})}),I={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},B=class I0 extends N.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(L,P){super(),this.options=P||{};for(let W in I)typeof this.options[W]>"u"?this.options[W]=I[W]:this.options[W]=P[W];this.log=this.options.log||(0,w.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",I0.VERSION),k.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",k.default?"browser":"node"),this.log("MqttClient :: options.protocol",P.protocol),this.log("MqttClient :: options.protocolVersion",P.protocolVersion),this.log("MqttClient :: options.username",P.username),this.log("MqttClient :: options.keepalive",P.keepalive),this.log("MqttClient :: options.reconnectPeriod",P.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",P.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",P.properties?P.properties.topicAliasMaximum:void 0),this.options.clientId=typeof P.clientId=="string"?P.clientId:I0.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=P.protocolVersion===5&&P.customHandleAcks?P.customHandleAcks:(...W)=>{W[3](null,0)},this.options.writeCache||(u.default.writeToStream.cacheNumbers=!1),this.streamBuilder=L,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new h.default:this.options.messageIdProvider,this.outgoingStore=P.outgoingStore||new v.default,this.incomingStore=P.incomingStore||new v.default,this.queueQoSZero=P.queueQoSZero===void 0?!0:P.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,P.properties&&P.properties.topicAliasMaximum>0&&(P.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new s.default(P.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:W}=this,q=()=>{let pe=W.shift();this.log("deliver :: entry %o",pe);let Ae=null;if(!pe){this._resubscribe();return}Ae=pe.packet,this.log("deliver :: call _sendPacket for %o",Ae);let H=!0;Ae.messageId&&Ae.messageId!==0&&(this.messageIdProvider.register(Ae.messageId)||(H=!1)),H?this._sendPacket(Ae,ue=>{pe.cb&&pe.cb(ue),q()}):(this.log("messageId: %d has already used. The message is skipped and removed.",Ae.messageId),q())};this.log("connect :: sending queued packets"),q()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(L,P){P()}handleMessage(L,P){P()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var L;let P=new f.Writable,W=u.default.parser(this.options),q=null,pe=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new v.default,this.outgoingStore=this.options.outgoingStore||new v.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),W.on("packet",z=>{this.log("parser :: on packet push to packets array."),pe.push(z)});let Ae=()=>{this.log("work :: getting next packet in queue");let z=pe.shift();if(z)this.log("work :: packet pulled from queue"),(0,b.default)(this,z,H);else{this.log("work :: no packets in queue");let Be=q;q=null,this.log("work :: done flag is %s",!!Be),Be&&Be()}},H=()=>{if(pe.length)(0,C.nextTick)(Ae);else{let z=q;q=null,z()}};P._write=(z,Be,_e)=>{q=_e,this.log("writable stream :: parsing buffer"),W.parse(z),Ae()};let ue=z=>{this.log("streamErrorHandler :: error",z.message),z.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",z)):this.noop(z)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(P),this.stream.on("error",ue),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let xe={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(xe.will=Object.assign(Object.assign({},this.options.will),{payload:(L=this.options.will)===null||L===void 0?void 0:L.payload})),this.topicAliasRecv&&(xe.properties||(xe.properties={}),this.topicAliasRecv&&(xe.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(xe),W.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let z=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(z)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(L,P,W,q){this.log("publish :: message `%s` to topic `%s`",P,L);let{options:pe}=this;typeof W=="function"&&(q=W,W=null),W=W||{},W=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),W);let{qos:Ae,retain:H,dup:ue,properties:xe,cbStorePut:z}=W;if(this._checkDisconnecting(q))return this;let Be=()=>{let _e=0;if((Ae===1||Ae===2)&&(_e=this._nextId(),_e===null))return this.log("No messageId left"),!1;let he={cmd:"publish",topic:L,payload:P,qos:Ae,retain:H,messageId:_e,dup:ue};switch(pe.protocolVersion===5&&(he.properties=xe),this.log("publish :: qos",Ae),Ae){case 1:case 2:this.outgoing[he.messageId]={volatile:!1,cb:q||this.noop},this.log("MqttClient:publish: packet cmd: %s",he.cmd),this._sendPacket(he,void 0,z);break;default:this.log("MqttClient:publish: packet cmd: %s",he.cmd),this._sendPacket(he,q,z);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Be())&&this._storeProcessingQueue.push({invoke:Be,cbStorePut:W.cbStorePut,callback:q}),this}publishAsync(L,P,W){return new Promise((q,pe)=>{this.publish(L,P,W,(Ae,H)=>{Ae?pe(Ae):q(H)})})}subscribe(L,P,W){let q=this.options.protocolVersion;typeof P=="function"&&(W=P),W=W||this.noop;let pe=!1,Ae=[];typeof L=="string"?(L=[L],Ae=L):Array.isArray(L)?Ae=L:typeof L=="object"&&(pe=L.resubscribe,delete L.resubscribe,Ae=Object.keys(L));let H=m.validateTopics(Ae);if(H!==null)return S(W,new Error(`Invalid topic ${H}`)),this;if(this._checkDisconnecting(W))return this.log("subscribe: discconecting true"),this;let ue={qos:0};q===5&&(ue.nl=!1,ue.rap=!1,ue.rh=0),P=Object.assign(Object.assign({},ue),P);let xe=P.properties,z=[],Be=(he,Me)=>{if(Me=Me||P,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,he)||this._resubscribeTopics[he].qos<Me.qos||pe){let ne={topic:he,qos:Me.qos};q===5&&(ne.nl=Me.nl,ne.rap=Me.rap,ne.rh=Me.rh,ne.properties=xe),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",ne.topic,ne.qos),z.push(ne)}};if(Array.isArray(L)?L.forEach(he=>{this.log("subscribe: array topic %s",he),Be(he)}):Object.keys(L).forEach(he=>{this.log("subscribe: object topic %s, %o",he,L[he]),Be(he,L[he])}),!z.length)return W(null,[]),this;let _e=()=>{let he=this._nextId();if(he===null)return this.log("No messageId left"),!1;let Me={cmd:"subscribe",subscriptions:z,messageId:he};if(xe&&(Me.properties=xe),this.options.resubscribe){this.log("subscribe :: resubscribe true");let ne=[];z.forEach(Re=>{if(this.options.reconnectPeriod>0){let G={qos:Re.qos};q===5&&(G.nl=Re.nl||!1,G.rap=Re.rap||!1,G.rh=Re.rh||0,G.properties=Re.properties),this._resubscribeTopics[Re.topic]=G,ne.push(Re.topic)}}),this.messageIdToTopic[Me.messageId]=ne}return this.outgoing[Me.messageId]={volatile:!0,cb(ne,Re){if(!ne){let{granted:G}=Re;for(let Oe=0;Oe<G.length;Oe+=1)z[Oe].qos=G[Oe]}W(ne,z,Re)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(Me),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!_e())&&this._storeProcessingQueue.push({invoke:_e,callback:W}),this}subscribeAsync(L,P){return new Promise((W,q)=>{this.subscribe(L,P,(pe,Ae)=>{pe?q(pe):W(Ae)})})}unsubscribe(L,P,W){typeof L=="string"&&(L=[L]),typeof P=="function"&&(W=P),W=W||this.noop;let q=m.validateTopics(L);if(q!==null)return S(W,new Error(`Invalid topic ${q}`)),this;if(this._checkDisconnecting(W))return this;let pe=()=>{let Ae=this._nextId();if(Ae===null)return this.log("No messageId left"),!1;let H={cmd:"unsubscribe",messageId:Ae,unsubscriptions:[]};return typeof L=="string"?H.unsubscriptions=[L]:Array.isArray(L)&&(H.unsubscriptions=L),this.options.resubscribe&&H.unsubscriptions.forEach(ue=>{delete this._resubscribeTopics[ue]}),typeof P=="object"&&P.properties&&(H.properties=P.properties),this.outgoing[H.messageId]={volatile:!0,cb:W},this.log("unsubscribe: call _sendPacket"),this._sendPacket(H),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!pe())&&this._storeProcessingQueue.push({invoke:pe,callback:W}),this}unsubscribeAsync(L,P){return new Promise((W,q)=>{this.unsubscribe(L,P,(pe,Ae)=>{pe?q(pe):W(Ae)})})}end(L,P,W){this.log("end :: (%s)",this.options.clientId),(L==null||typeof L!="boolean")&&(W=W||P,P=L,L=!1),typeof P!="object"&&(W=W||P,P=null),this.log("end :: cb? %s",!!W),(!W||typeof W!="function")&&(W=this.noop);let q=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(Ae=>{this.outgoingStore.close(H=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),W){let ue=Ae||H;this.log("end :: closeStores: invoking callback with args"),W(ue)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},pe=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,L),this._cleanUp(L,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,C.nextTick)(q)},P)};return this.disconnecting?(W(),this):(this._clearReconnect(),this.disconnecting=!0,!L&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,pe,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),pe()),this)}endAsync(L,P){return new Promise((W,q)=>{this.end(L,P,pe=>{pe?q(pe):W()})})}removeOutgoingMessage(L){if(this.outgoing[L]){let{cb:P}=this.outgoing[L];this._removeOutgoingAndStoreMessage(L,()=>{P(new Error("Message removed"))})}return this}reconnect(L){this.log("client reconnect");let P=()=>{L?(this.options.incomingStore=L.incomingStore,this.options.outgoingStore=L.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new v.default,this.outgoingStore=this.options.outgoingStore||new v.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=P:P(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(L=>{this.outgoing[L].volatile&&typeof this.outgoing[L].cb=="function"&&(this.outgoing[L].cb(new Error("Connection closed")),delete this.outgoing[L])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(L=>{typeof this.outgoing[L].cb=="function"&&(this.outgoing[L].cb(new Error("Connection closed")),delete this.outgoing[L])}))}_removeTopicAliasAndRecoverTopicName(L){let P;L.properties&&(P=L.properties.topicAlias);let W=L.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",P,W),W.length===0){if(typeof P>"u")return new Error("Unregistered Topic Alias");if(W=this.topicAliasSend.getTopicByAlias(P),typeof W>"u")return new Error("Unregistered Topic Alias");L.topic=W}P&&delete L.properties.topicAlias}_checkDisconnecting(L){return this.disconnecting&&(L&&L!==this.noop?L(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(L,P,W={}){if(P&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",P)),this.log("_cleanUp :: forced? %s",L),L)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let q=Object.assign({cmd:"disconnect"},W);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(q,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),S(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),P&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",P),P())}_storeAndSend(L,P,W){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",L.cmd);let q=L,pe;if(q.cmd==="publish"&&(q=(0,d.default)(L),pe=this._removeTopicAliasAndRecoverTopicName(q),pe))return P&&P(pe);this.outgoingStore.put(q,Ae=>{if(Ae)return P&&P(Ae);W(),this._writePacket(L,P)})}_applyTopicAlias(L){if(this.options.protocolVersion===5&&L.cmd==="publish"){let P;L.properties&&(P=L.properties.topicAlias);let W=L.topic.toString();if(this.topicAliasSend)if(P){if(W.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",W,P),!this.topicAliasSend.put(W,P)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",W,P),new Error("Sending Topic Alias out of range")}else W.length!==0&&(this.options.autoAssignTopicAlias?(P=this.topicAliasSend.getAliasByTopic(W),P?(L.topic="",L.properties=Object.assign(Object.assign({},L.properties),{topicAlias:P}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",W,P)):(P=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(W,P),L.properties=Object.assign(Object.assign({},L.properties),{topicAlias:P}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",W,P))):this.options.autoUseTopicAlias&&(P=this.topicAliasSend.getAliasByTopic(W),P&&(L.topic="",L.properties=Object.assign(Object.assign({},L.properties),{topicAlias:P}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",W,P))));else if(P)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",W,P),new Error("Sending Topic Alias out of range")}}_noop(L){this.log("noop ::",L)}_writePacket(L,P){this.log("_writePacket :: packet: %O",L),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",L),this.log("_writePacket :: writing to stream");let W=u.default.writeToStream(L,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",W),!W&&P&&P!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",P)):P&&(this.log("_writePacket :: invoking cb"),P())}_sendPacket(L,P,W,q){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),W=W||this.noop,P=P||this.noop;let pe=this._applyTopicAlias(L);if(pe){P(pe);return}if(!this.connected){if(L.cmd==="auth"){this._writePacket(L,P);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(L,P,W);return}if(q){this._writePacket(L,P);return}switch(L.cmd){case"publish":break;case"pubrel":this._storeAndSend(L,P,W);return;default:this._writePacket(L,P);return}switch(L.qos){case 2:case 1:this._storeAndSend(L,P,W);break;case 0:default:this._writePacket(L,P);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(L,P,W){this.log("_storePacket :: packet: %o",L),this.log("_storePacket :: cb? %s",!!P),W=W||this.noop;let q=L;if(q.cmd==="publish"){q=(0,d.default)(L);let Ae=this._removeTopicAliasAndRecoverTopicName(q);if(Ae)return P&&P(Ae)}let pe=q.qos||0;pe===0&&this.queueQoSZero||q.cmd!=="publish"?this.queue.push({packet:q,cb:P}):pe>0?(P=this.outgoing[q.messageId]?this.outgoing[q.messageId].cb:null,this.outgoingStore.put(q,Ae=>{if(Ae)return P&&P(Ae);W()})):P&&P(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new R.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(L=!1){this.keepaliveManager&&this.options.keepalive&&(L||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let L=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&L.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let P=0;P<L.length;P++){let W={};W[L[P]]=this._resubscribeTopics[L[P]],W.resubscribe=!0,this.subscribe(W,{properties:W[L[P]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(L){if(this.disconnected){this.emit("connect",L);return}this.connackPacket=L,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let P=()=>{let W=this.outgoingStore.createStream(),q=()=>{W.destroy(),W=null,this._flushStoreProcessingQueue(),pe()},pe=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",q),W.on("error",H=>{pe(),this._flushStoreProcessingQueue(),this.removeListener("close",q),this.emit("error",H)});let Ae=()=>{if(!W)return;let H=W.read(1),ue;if(!H){W.once("readable",Ae);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[H.messageId]){Ae();return}!this.disconnecting&&!this.reconnectTimer?(ue=this.outgoing[H.messageId]?this.outgoing[H.messageId].cb:null,this.outgoing[H.messageId]={volatile:!1,cb(xe,z){ue&&ue(xe,z),Ae()}},this._packetIdsDuringStoreProcessing[H.messageId]=!0,this.messageIdProvider.register(H.messageId)?this._sendPacket(H,void 0,void 0,!0):this.log("messageId: %d has already used.",H.messageId)):W.destroy&&W.destroy()};W.on("end",()=>{let H=!0;for(let ue in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[ue]){H=!1;break}this.removeListener("close",q),H?(pe(),this._invokeAllStoreProcessingQueue(),this.emit("connect",L)):P()}),Ae()};P()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let L=this._storeProcessingQueue[0];if(L&&L.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let L of this._storeProcessingQueue)L.cbStorePut&&L.cbStorePut(new Error("Connection closed")),L.callback&&L.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(L,P){delete this.outgoing[L],this.outgoingStore.del({messageId:L},(W,q)=>{P(W,q),this.messageIdProvider.deallocate(L),this._invokeStoreProcessingQueue()})}};B.VERSION=C.MQTTJS_VERSION,e.default=B}),FT=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"__esModule",{value:!0});var t=Bx(),r=class{constructor(){this.numberAllocator=new t.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(i){return this.numberAllocator.use(i)}deallocate(i){this.numberAllocator.free(i)}clear(){this.numberAllocator.clear()}};e.default=r});function zs(e){throw new RangeError(Ux[e])}function fm(e,t){let r=e.split("@"),i="";r.length>1&&(i=r[0]+"@",e=r[1]);let a=function(s,u){let h=[],f=s.length;for(;f--;)h[f]=u(s[f]);return h}((e=e.replace(Fx,".")).split("."),t).join(".");return i+a}function dm(e){let t=[],r=0,i=e.length;for(;r<i;){let a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<i){let s=e.charCodeAt(r++);(64512&s)==56320?t.push(((1023&a)<<10)+(1023&s)+65536):(t.push(a),r--)}else t.push(a)}return t}var pm,gm,Fx,Ux,Vn,yu,Jh,ef,tf,rf,ss,UT=on(()=>{Ue(),We(),ze(),pm=/^xn--/,gm=/[^\0-\x7E]/,Fx=/[\x2E\u3002\uFF0E\uFF61]/g,Ux={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Vn=Math.floor,yu=String.fromCharCode,Jh=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},ef=function(e,t,r){let i=0;for(e=r?Vn(e/700):e>>1,e+=Vn(e/t);e>455;i+=36)e=Vn(e/35);return Vn(i+36*e/(e+38))},tf=function(e){let t=[],r=e.length,i=0,a=128,s=72,u=e.lastIndexOf("-");u<0&&(u=0);for(let f=0;f<u;++f)e.charCodeAt(f)>=128&&zs("not-basic"),t.push(e.charCodeAt(f));for(let f=u>0?u+1:0;f<r;){let d=i;for(let w=1,v=36;;v+=36){f>=r&&zs("invalid-input");let b=(h=e.charCodeAt(f++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36;(b>=36||b>Vn((2147483647-i)/w))&&zs("overflow"),i+=b*w;let C=v<=s?1:v>=s+26?26:v-s;if(b<C)break;let N=36-C;w>Vn(2147483647/N)&&zs("overflow"),w*=N}let m=t.length+1;s=ef(i-d,m,d==0),Vn(i/m)>2147483647-a&&zs("overflow"),a+=Vn(i/m),i%=m,t.splice(i++,0,a)}var h;return String.fromCodePoint(...t)},rf=function(e){let t=[],r=(e=dm(e)).length,i=128,a=0,s=72;for(let f of e)f<128&&t.push(yu(f));let u=t.length,h=u;for(u&&t.push("-");h<r;){let f=2147483647;for(let m of e)m>=i&&m<f&&(f=m);let d=h+1;f-i>Vn((2147483647-a)/d)&&zs("overflow"),a+=(f-i)*d,i=f;for(let m of e)if(m<i&&++a>2147483647&&zs("overflow"),m==i){let w=a;for(let v=36;;v+=36){let b=v<=s?1:v>=s+26?26:v-s;if(w<b)break;let C=w-b,N=36-b;t.push(yu(Jh(b+C%N,0))),w=Vn(C/N)}t.push(yu(Jh(w,0))),s=ef(a,d,h==u),a=0,++h}++a,++i}return t.join("")},ss={version:"2.1.0",ucs2:{decode:dm,encode:e=>String.fromCodePoint(...e)},decode:tf,encode:rf,toASCII:function(e){return fm(e,function(t){return gm.test(t)?"xn--"+rf(t):t})},toUnicode:function(e){return fm(e,function(t){return pm.test(t)?tf(t.slice(4).toLowerCase()):t})}},ss.decode,ss.encode,ss.toASCII,ss.toUnicode,ss.ucs2,ss.version});function zT(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var mm,Mo,ym,ai,WT=on(()=>{Ue(),We(),ze(),mm=function(e,t,r,i){t=t||"&",r=r||"=";var a={};if(typeof e!="string"||e.length===0)return a;var s=/\+/g;e=e.split(t);var u=1e3;i&&typeof i.maxKeys=="number"&&(u=i.maxKeys);var h=e.length;u>0&&h>u&&(h=u);for(var f=0;f<h;++f){var d,m,w,v,b=e[f].replace(s,"%20"),C=b.indexOf(r);C>=0?(d=b.substr(0,C),m=b.substr(C+1)):(d=b,m=""),w=decodeURIComponent(d),v=decodeURIComponent(m),zT(a,w)?Array.isArray(a[w])?a[w].push(v):a[w]=[a[w],v]:a[w]=v}return a},Mo=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},ym=function(e,t,r,i){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(a){var s=encodeURIComponent(Mo(a))+r;return Array.isArray(e[a])?e[a].map(function(u){return s+encodeURIComponent(Mo(u))}).join(t):s+encodeURIComponent(Mo(e[a]))}).join(t):i?encodeURIComponent(Mo(i))+r+encodeURIComponent(Mo(e)):""},ai={},ai.decode=ai.parse=mm,ai.encode=ai.stringify=ym,ai.decode,ai.encode,ai.parse,ai.stringify});function T0(){throw new Error("setTimeout has not been defined")}function N0(){throw new Error("clearTimeout has not been defined")}function zx(e){if(_i===setTimeout)return setTimeout(e,0);if((_i===T0||!_i)&&setTimeout)return _i=setTimeout,setTimeout(e,0);try{return _i(e,0)}catch{try{return _i.call(null,e,0)}catch{return _i.call(this||no,e,0)}}}function HT(){io&&Js&&(io=!1,Js.length?fi=Js.concat(fi):cl=-1,fi.length&&Wx())}function Wx(){if(!io){var e=zx(HT);io=!0;for(var t=fi.length;t;){for(Js=fi,fi=[];++cl<t;)Js&&Js[cl].run();cl=-1,t=fi.length}Js=null,io=!1,function(r){if(Ei===clearTimeout)return clearTimeout(r);if((Ei===N0||!Ei)&&clearTimeout)return Ei=clearTimeout,clearTimeout(r);try{Ei(r)}catch{try{return Ei.call(null,r)}catch{return Ei.call(this||no,r)}}}(e)}}function wm(e,t){(this||no).fun=e,(this||no).array=t}function yi(){}var xm,_i,Ei,no,cr,Js,fi,io,cl,nr,VT=on(()=>{Ue(),We(),ze(),no=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,cr=xm={},function(){try{_i=typeof setTimeout=="function"?setTimeout:T0}catch{_i=T0}try{Ei=typeof clearTimeout=="function"?clearTimeout:N0}catch{Ei=N0}}(),fi=[],io=!1,cl=-1,cr.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];fi.push(new wm(e,t)),fi.length!==1||io||zx(Wx)},wm.prototype.run=function(){(this||no).fun.apply(null,(this||no).array)},cr.title="browser",cr.browser=!0,cr.env={},cr.argv=[],cr.version="",cr.versions={},cr.on=yi,cr.addListener=yi,cr.once=yi,cr.off=yi,cr.removeListener=yi,cr.removeAllListeners=yi,cr.emit=yi,cr.prependListener=yi,cr.prependOnceListener=yi,cr.listeners=function(e){return[]},cr.binding=function(e){throw new Error("process.binding is not supported")},cr.cwd=function(){return"/"},cr.chdir=function(e){throw new Error("process.chdir is not supported")},cr.umask=function(){return 0},nr=xm,nr.addListener,nr.argv,nr.binding,nr.browser,nr.chdir,nr.cwd,nr.emit,nr.env,nr.listeners,nr.nextTick,nr.off,nr.on,nr.once,nr.prependListener,nr.prependOnceListener,nr.removeAllListeners,nr.removeListener,nr.title,nr.umask,nr.version,nr.versions});function $T(){if(O0)return zu;O0=!0;var e=zu={},t,r;function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=i}catch{t=i}try{typeof clearTimeout=="function"?r=clearTimeout:r=a}catch{r=a}})();function s(N){if(t===setTimeout)return setTimeout(N,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(N,0);try{return t(N,0)}catch{try{return t.call(null,N,0)}catch{return t.call(this||Gs,N,0)}}}function u(N){if(r===clearTimeout)return clearTimeout(N);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(N);try{return r(N)}catch{try{return r.call(null,N)}catch{return r.call(this||Gs,N)}}}var h=[],f=!1,d,m=-1;function w(){!f||!d||(f=!1,d.length?h=d.concat(h):m=-1,h.length&&v())}function v(){if(!f){var N=s(w);f=!0;for(var R=h.length;R;){for(d=h,h=[];++m<R;)d&&d[m].run();m=-1,R=h.length}d=null,f=!1,u(N)}}e.nextTick=function(N){var R=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)R[k-1]=arguments[k];h.push(new b(N,R)),h.length===1&&!f&&s(v)};function b(N,R){(this||Gs).fun=N,(this||Gs).array=R}b.prototype.run=function(){(this||Gs).fun.apply(null,(this||Gs).array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function C(){}return e.on=C,e.addListener=C,e.once=C,e.off=C,e.removeListener=C,e.removeAllListeners=C,e.emit=C,e.prependListener=C,e.prependOnceListener=C,e.listeners=function(N){return[]},e.binding=function(N){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(N){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},zu}var zu,O0,Gs,Zt,Hx=on(()=>{Ue(),We(),ze(),zu={},O0=!1,Gs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Zt=$T(),Zt.platform="browser",Zt.addListener,Zt.argv,Zt.binding,Zt.browser,Zt.chdir,Zt.cwd,Zt.emit,Zt.env,Zt.listeners,Zt.nextTick,Zt.off,Zt.on,Zt.once,Zt.prependListener,Zt.prependOnceListener,Zt.removeAllListeners,Zt.removeListener,Zt.title,Zt.umask,Zt.version,Zt.versions});function GT(){if(k0)return Wu;k0=!0;var e=Zt;function t(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}function r(s,u){for(var h="",f=0,d=-1,m=0,w,v=0;v<=s.length;++v){if(v<s.length)w=s.charCodeAt(v);else{if(w===47)break;w=47}if(w===47){if(!(d===v-1||m===1))if(d!==v-1&&m===2){if(h.length<2||f!==2||h.charCodeAt(h.length-1)!==46||h.charCodeAt(h.length-2)!==46){if(h.length>2){var b=h.lastIndexOf("/");if(b!==h.length-1){b===-1?(h="",f=0):(h=h.slice(0,b),f=h.length-1-h.lastIndexOf("/")),d=v,m=0;continue}}else if(h.length===2||h.length===1){h="",f=0,d=v,m=0;continue}}u&&(h.length>0?h+="/..":h="..",f=2)}else h.length>0?h+="/"+s.slice(d+1,v):h=s.slice(d+1,v),f=v-d-1;d=v,m=0}else w===46&&m!==-1?++m:m=-1}return h}function i(s,u){var h=u.dir||u.root,f=u.base||(u.name||"")+(u.ext||"");return h?h===u.root?h+f:h+s+f:f}var a={resolve:function(){for(var s="",u=!1,h,f=arguments.length-1;f>=-1&&!u;f--){var d;f>=0?d=arguments[f]:(h===void 0&&(h=e.cwd()),d=h),t(d),d.length!==0&&(s=d+"/"+s,u=d.charCodeAt(0)===47)}return s=r(s,!u),u?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(t(s),s.length===0)return".";var u=s.charCodeAt(0)===47,h=s.charCodeAt(s.length-1)===47;return s=r(s,!u),s.length===0&&!u&&(s="."),s.length>0&&h&&(s+="/"),u?"/"+s:s},isAbsolute:function(s){return t(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,u=0;u<arguments.length;++u){var h=arguments[u];t(h),h.length>0&&(s===void 0?s=h:s+="/"+h)}return s===void 0?".":a.normalize(s)},relative:function(s,u){if(t(s),t(u),s===u||(s=a.resolve(s),u=a.resolve(u),s===u))return"";for(var h=1;h<s.length&&s.charCodeAt(h)===47;++h);for(var f=s.length,d=f-h,m=1;m<u.length&&u.charCodeAt(m)===47;++m);for(var w=u.length,v=w-m,b=d<v?d:v,C=-1,N=0;N<=b;++N){if(N===b){if(v>b){if(u.charCodeAt(m+N)===47)return u.slice(m+N+1);if(N===0)return u.slice(m+N)}else d>b&&(s.charCodeAt(h+N)===47?C=N:N===0&&(C=0));break}var R=s.charCodeAt(h+N),k=u.charCodeAt(m+N);if(R!==k)break;R===47&&(C=N)}var S="";for(N=h+C+1;N<=f;++N)(N===f||s.charCodeAt(N)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+u.slice(m+C):(m+=C,u.charCodeAt(m)===47&&++m,u.slice(m))},_makeLong:function(s){return s},dirname:function(s){if(t(s),s.length===0)return".";for(var u=s.charCodeAt(0),h=u===47,f=-1,d=!0,m=s.length-1;m>=1;--m)if(u=s.charCodeAt(m),u===47){if(!d){f=m;break}}else d=!1;return f===-1?h?"/":".":h&&f===1?"//":s.slice(0,f)},basename:function(s,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');t(s);var h=0,f=-1,d=!0,m;if(u!==void 0&&u.length>0&&u.length<=s.length){if(u.length===s.length&&u===s)return"";var w=u.length-1,v=-1;for(m=s.length-1;m>=0;--m){var b=s.charCodeAt(m);if(b===47){if(!d){h=m+1;break}}else v===-1&&(d=!1,v=m+1),w>=0&&(b===u.charCodeAt(w)?--w===-1&&(f=m):(w=-1,f=v))}return h===f?f=v:f===-1&&(f=s.length),s.slice(h,f)}else{for(m=s.length-1;m>=0;--m)if(s.charCodeAt(m)===47){if(!d){h=m+1;break}}else f===-1&&(d=!1,f=m+1);return f===-1?"":s.slice(h,f)}},extname:function(s){t(s);for(var u=-1,h=0,f=-1,d=!0,m=0,w=s.length-1;w>=0;--w){var v=s.charCodeAt(w);if(v===47){if(!d){h=w+1;break}continue}f===-1&&(d=!1,f=w+1),v===46?u===-1?u=w:m!==1&&(m=1):u!==-1&&(m=-1)}return u===-1||f===-1||m===0||m===1&&u===f-1&&u===h+1?"":s.slice(u,f)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return i("/",s)},parse:function(s){t(s);var u={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return u;var h=s.charCodeAt(0),f=h===47,d;f?(u.root="/",d=1):d=0;for(var m=-1,w=0,v=-1,b=!0,C=s.length-1,N=0;C>=d;--C){if(h=s.charCodeAt(C),h===47){if(!b){w=C+1;break}continue}v===-1&&(b=!1,v=C+1),h===46?m===-1?m=C:N!==1&&(N=1):m!==-1&&(N=-1)}return m===-1||v===-1||N===0||N===1&&m===v-1&&m===w+1?v!==-1&&(w===0&&f?u.base=u.name=s.slice(1,v):u.base=u.name=s.slice(w,v)):(w===0&&f?(u.name=s.slice(1,m),u.base=s.slice(1,v)):(u.name=s.slice(w,m),u.base=s.slice(w,v)),u.ext=s.slice(m,v)),w>0?u.dir=s.slice(0,w-1):f&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};return a.posix=a,Wu=a,Wu}var Wu,k0,R0,YT=on(()=>{Ue(),We(),ze(),Hx(),Wu={},k0=!1,R0=GT()}),Vx={};xa(Vx,{URL:()=>lv,Url:()=>nv,default:()=>Lt,fileURLToPath:()=>$x,format:()=>iv,parse:()=>av,pathToFileURL:()=>Gx,resolve:()=>sv,resolveObject:()=>ov});function Dn(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Ua(e,t,r){if(e&&$n.isObject(e)&&e instanceof Dn)return e;var i=new Dn;return i.parse(e,t,r),i}function XT(){if(M0)return Hu;M0=!0;var e=nr;function t(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}function r(s,u){for(var h="",f=0,d=-1,m=0,w,v=0;v<=s.length;++v){if(v<s.length)w=s.charCodeAt(v);else{if(w===47)break;w=47}if(w===47){if(!(d===v-1||m===1))if(d!==v-1&&m===2){if(h.length<2||f!==2||h.charCodeAt(h.length-1)!==46||h.charCodeAt(h.length-2)!==46){if(h.length>2){var b=h.lastIndexOf("/");if(b!==h.length-1){b===-1?(h="",f=0):(h=h.slice(0,b),f=h.length-1-h.lastIndexOf("/")),d=v,m=0;continue}}else if(h.length===2||h.length===1){h="",f=0,d=v,m=0;continue}}u&&(h.length>0?h+="/..":h="..",f=2)}else h.length>0?h+="/"+s.slice(d+1,v):h=s.slice(d+1,v),f=v-d-1;d=v,m=0}else w===46&&m!==-1?++m:m=-1}return h}function i(s,u){var h=u.dir||u.root,f=u.base||(u.name||"")+(u.ext||"");return h?h===u.root?h+f:h+s+f:f}var a={resolve:function(){for(var s="",u=!1,h,f=arguments.length-1;f>=-1&&!u;f--){var d;f>=0?d=arguments[f]:(h===void 0&&(h=e.cwd()),d=h),t(d),d.length!==0&&(s=d+"/"+s,u=d.charCodeAt(0)===47)}return s=r(s,!u),u?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(t(s),s.length===0)return".";var u=s.charCodeAt(0)===47,h=s.charCodeAt(s.length-1)===47;return s=r(s,!u),s.length===0&&!u&&(s="."),s.length>0&&h&&(s+="/"),u?"/"+s:s},isAbsolute:function(s){return t(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,u=0;u<arguments.length;++u){var h=arguments[u];t(h),h.length>0&&(s===void 0?s=h:s+="/"+h)}return s===void 0?".":a.normalize(s)},relative:function(s,u){if(t(s),t(u),s===u||(s=a.resolve(s),u=a.resolve(u),s===u))return"";for(var h=1;h<s.length&&s.charCodeAt(h)===47;++h);for(var f=s.length,d=f-h,m=1;m<u.length&&u.charCodeAt(m)===47;++m);for(var w=u.length,v=w-m,b=d<v?d:v,C=-1,N=0;N<=b;++N){if(N===b){if(v>b){if(u.charCodeAt(m+N)===47)return u.slice(m+N+1);if(N===0)return u.slice(m+N)}else d>b&&(s.charCodeAt(h+N)===47?C=N:N===0&&(C=0));break}var R=s.charCodeAt(h+N),k=u.charCodeAt(m+N);if(R!==k)break;R===47&&(C=N)}var S="";for(N=h+C+1;N<=f;++N)(N===f||s.charCodeAt(N)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+u.slice(m+C):(m+=C,u.charCodeAt(m)===47&&++m,u.slice(m))},_makeLong:function(s){return s},dirname:function(s){if(t(s),s.length===0)return".";for(var u=s.charCodeAt(0),h=u===47,f=-1,d=!0,m=s.length-1;m>=1;--m)if(u=s.charCodeAt(m),u===47){if(!d){f=m;break}}else d=!1;return f===-1?h?"/":".":h&&f===1?"//":s.slice(0,f)},basename:function(s,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');t(s);var h=0,f=-1,d=!0,m;if(u!==void 0&&u.length>0&&u.length<=s.length){if(u.length===s.length&&u===s)return"";var w=u.length-1,v=-1;for(m=s.length-1;m>=0;--m){var b=s.charCodeAt(m);if(b===47){if(!d){h=m+1;break}}else v===-1&&(d=!1,v=m+1),w>=0&&(b===u.charCodeAt(w)?--w===-1&&(f=m):(w=-1,f=v))}return h===f?f=v:f===-1&&(f=s.length),s.slice(h,f)}else{for(m=s.length-1;m>=0;--m)if(s.charCodeAt(m)===47){if(!d){h=m+1;break}}else f===-1&&(d=!1,f=m+1);return f===-1?"":s.slice(h,f)}},extname:function(s){t(s);for(var u=-1,h=0,f=-1,d=!0,m=0,w=s.length-1;w>=0;--w){var v=s.charCodeAt(w);if(v===47){if(!d){h=w+1;break}continue}f===-1&&(d=!1,f=w+1),v===46?u===-1?u=w:m!==1&&(m=1):u!==-1&&(m=-1)}return u===-1||f===-1||m===0||m===1&&u===f-1&&u===h+1?"":s.slice(u,f)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return i("/",s)},parse:function(s){t(s);var u={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return u;var h=s.charCodeAt(0),f=h===47,d;f?(u.root="/",d=1):d=0;for(var m=-1,w=0,v=-1,b=!0,C=s.length-1,N=0;C>=d;--C){if(h=s.charCodeAt(C),h===47){if(!b){w=C+1;break}continue}v===-1&&(b=!1,v=C+1),h===46?m===-1?m=C:N!==1&&(N=1):m!==-1&&(N=-1)}return m===-1||v===-1||N===0||N===1&&m===v-1&&m===w+1?v!==-1&&(w===0&&f?u.base=u.name=s.slice(1,v):u.base=u.name=s.slice(w,v)):(w===0&&f?(u.name=s.slice(1,m),u.base=s.slice(1,v)):(u.name=s.slice(w,m),u.base=s.slice(w,v)),u.ext=s.slice(m,v)),w>0?u.dir=s.slice(0,w-1):f&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};return a.posix=a,Hu=a,Hu}function qT(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return bc?QT(e):KT(e)}function QT(e){let t=e.hostname,r=e.pathname;for(let i=0;i<r.length;i++)if(r[i]==="%"){let a=r.codePointAt(i+2)||32;if(r[i+1]==="2"&&a===102||r[i+1]==="5"&&a===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(r=r.replace(Kx,"\\"),r=decodeURIComponent(r),t!=="")return`\\\\${t}${r}`;{let i=r.codePointAt(1)|32,a=r[2];if(i<qx||i>Qx||a!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return r.slice(1)}}function KT(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let t=e.pathname;for(let r=0;r<t.length;r++)if(t[r]==="%"){let i=t.codePointAt(r+2)||32;if(t[r+1]==="2"&&i===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(t)}function ZT(e){let t=D0.resolve(e),r=e.charCodeAt(e.length-1);(r===Xx||bc&&r===Yx)&&t[t.length-1]!==D0.sep&&(t+="/");let i=new URL("file://");return t.includes("%")&&(t=t.replace(Zx,"%25")),!bc&&t.includes("\\")&&(t=t.replace(Jx,"%5C")),t.includes(`
`)&&(t=t.replace(ev,"%0A")),t.includes("\r")&&(t=t.replace(tv,"%0D")),t.includes("	")&&(t=t.replace(rv,"%09")),i.pathname=t,i}function $x(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return _c?JT(e):e4(e)}function JT(e){let t=e.hostname,r=e.pathname;for(let i=0;i<r.length;i++)if(r[i]==="%"){let a=r.codePointAt(i+2)||32;if(r[i+1]==="2"&&a===102||r[i+1]==="5"&&a===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(r=r.replace(dv,"\\"),r=decodeURIComponent(r),t!=="")return`\\\\${t}${r}`;{let i=r.codePointAt(1)|32,a=r[2];if(i<hv||i>fv||a!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return r.slice(1)}}function e4(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let t=e.pathname;for(let r=0;r<t.length;r++)if(t[r]==="%"){let i=t.codePointAt(r+2)||32;if(t[r+1]==="2"&&i===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(t)}function Gx(e){let t=R0.resolve(e),r=e.charCodeAt(e.length-1);(r===cv||_c&&r===uv)&&t[t.length-1]!==R0.sep&&(t+="/");let i=new URL("file://");return t.includes("%")&&(t=t.replace(pv,"%25")),!_c&&t.includes("\\")&&(t=t.replace(gv,"%5C")),t.includes(`
`)&&(t=t.replace(mv,"%0A")),t.includes("\r")&&(t=t.replace(yv,"%0D")),t.includes("	")&&(t=t.replace(wv,"%09")),i.pathname=t,i}var Lt,vm,$n,bm,_m,Em,Sm,wu,nf,sf,of,Am,Cm,xu,Ws,vu,Hu,M0,D0,Im,Yx,Xx,qx,Qx,bc,Kx,Zx,Jx,ev,tv,rv,Tm,nv,iv,sv,ov,av,lv,uv,cv,hv,fv,_c,dv,pv,gv,mv,yv,wv,t4=on(()=>{Ue(),We(),ze(),UT(),WT(),VT(),YT(),Hx(),Lt={},vm=ss,$n={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},Lt.parse=Ua,Lt.resolve=function(e,t){return Ua(e,!1,!0).resolve(t)},Lt.resolveObject=function(e,t){return e?Ua(e,!1,!0).resolveObject(t):t},Lt.format=function(e){return $n.isString(e)&&(e=Ua(e)),e instanceof Dn?e.format():Dn.prototype.format.call(e)},Lt.Url=Dn,bm=/^([a-z0-9.+-]+:)/i,_m=/:[0-9]*$/,Em=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Sm=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),wu=["'"].concat(Sm),nf=["%","/","?",";","#"].concat(wu),sf=["/","?","#"],of=/^[+a-z0-9A-Z_-]{0,63}$/,Am=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Cm={javascript:!0,"javascript:":!0},xu={javascript:!0,"javascript:":!0},Ws={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},vu=ai,Dn.prototype.parse=function(e,t,r){if(!$n.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),a=i!==-1&&i<e.indexOf("#")?"?":"#",s=e.split(a);s[0]=s[0].replace(/\\/g,"/");var u=e=s.join(a);if(u=u.trim(),!r&&e.split("#").length===1){var h=Em.exec(u);if(h)return this.path=u,this.href=u,this.pathname=h[1],h[2]?(this.search=h[2],this.query=t?vu.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var f=bm.exec(u);if(f){var d=(f=f[0]).toLowerCase();this.protocol=d,u=u.substr(f.length)}if(r||f||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var m=u.substr(0,2)==="//";!m||f&&xu[f]||(u=u.substr(2),this.slashes=!0)}if(!xu[f]&&(m||f&&!Ws[f])){for(var w,v,b=-1,C=0;C<sf.length;C++)(N=u.indexOf(sf[C]))!==-1&&(b===-1||N<b)&&(b=N);for((v=b===-1?u.lastIndexOf("@"):u.lastIndexOf("@",b))!==-1&&(w=u.slice(0,v),u=u.slice(v+1),this.auth=decodeURIComponent(w)),b=-1,C=0;C<nf.length;C++){var N;(N=u.indexOf(nf[C]))!==-1&&(b===-1||N<b)&&(b=N)}b===-1&&(b=u.length),this.host=u.slice(0,b),u=u.slice(b),this.parseHost(),this.hostname=this.hostname||"";var R=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!R)for(var k=this.hostname.split(/\./),S=(C=0,k.length);C<S;C++){var I=k[C];if(I&&!I.match(of)){for(var B="",U=0,L=I.length;U<L;U++)I.charCodeAt(U)>127?B+="x":B+=I[U];if(!B.match(of)){var P=k.slice(0,C),W=k.slice(C+1),q=I.match(Am);q&&(P.push(q[1]),W.unshift(q[2])),W.length&&(u="/"+W.join(".")+u),this.hostname=P.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=vm.toASCII(this.hostname));var pe=this.port?":"+this.port:"",Ae=this.hostname||"";this.host=Ae+pe,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),u[0]!=="/"&&(u="/"+u))}if(!Cm[d])for(C=0,S=wu.length;C<S;C++){var H=wu[C];if(u.indexOf(H)!==-1){var ue=encodeURIComponent(H);ue===H&&(ue=escape(H)),u=u.split(H).join(ue)}}var xe=u.indexOf("#");xe!==-1&&(this.hash=u.substr(xe),u=u.slice(0,xe));var z=u.indexOf("?");if(z!==-1?(this.search=u.substr(z),this.query=u.substr(z+1),t&&(this.query=vu.parse(this.query)),u=u.slice(0,z)):t&&(this.search="",this.query={}),u&&(this.pathname=u),Ws[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){pe=this.pathname||"";var Be=this.search||"";this.path=pe+Be}return this.href=this.format(),this},Dn.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",a=!1,s="";this.host?a=e+this.host:this.hostname&&(a=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&$n.isObject(this.query)&&Object.keys(this.query).length&&(s=vu.stringify(this.query));var u=this.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Ws[t])&&a!==!1?(a="//"+(a||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):a||(a=""),i&&i.charAt(0)!=="#"&&(i="#"+i),u&&u.charAt(0)!=="?"&&(u="?"+u),t+a+(r=r.replace(/[?#]/g,function(h){return encodeURIComponent(h)}))+(u=u.replace("#","%23"))+i},Dn.prototype.resolve=function(e){return this.resolveObject(Ua(e,!1,!0)).format()},Dn.prototype.resolveObject=function(e){if($n.isString(e)){var t=new Dn;t.parse(e,!1,!0),e=t}for(var r=new Dn,i=Object.keys(this),a=0;a<i.length;a++){var s=i[a];r[s]=this[s]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),h=0;h<u.length;h++){var f=u[h];f!=="protocol"&&(r[f]=e[f])}return Ws[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!Ws[e.protocol]){for(var d=Object.keys(e),m=0;m<d.length;m++){var w=d[m];r[w]=e[w]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||xu[e.protocol])r.pathname=e.pathname;else{for(var v=(e.pathname||"").split("/");v.length&&!(e.host=v.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),v[0]!==""&&v.unshift(""),v.length<2&&v.unshift(""),r.pathname=v.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var b=r.pathname||"",C=r.search||"";r.path=b+C}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var N=r.pathname&&r.pathname.charAt(0)==="/",R=e.host||e.pathname&&e.pathname.charAt(0)==="/",k=R||N||r.host&&e.pathname,S=k,I=r.pathname&&r.pathname.split("/")||[],B=(v=e.pathname&&e.pathname.split("/")||[],r.protocol&&!Ws[r.protocol]);if(B&&(r.hostname="",r.port=null,r.host&&(I[0]===""?I[0]=r.host:I.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(v[0]===""?v[0]=e.host:v.unshift(e.host)),e.host=null),k=k&&(v[0]===""||I[0]==="")),R)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,I=v;else if(v.length)I||(I=[]),I.pop(),I=I.concat(v),r.search=e.search,r.query=e.query;else if(!$n.isNullOrUndefined(e.search))return B&&(r.hostname=r.host=I.shift(),(q=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=q.shift(),r.host=r.hostname=q.shift())),r.search=e.search,r.query=e.query,$n.isNull(r.pathname)&&$n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!I.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var U=I.slice(-1)[0],L=(r.host||e.host||I.length>1)&&(U==="."||U==="..")||U==="",P=0,W=I.length;W>=0;W--)(U=I[W])==="."?I.splice(W,1):U===".."?(I.splice(W,1),P++):P&&(I.splice(W,1),P--);if(!k&&!S)for(;P--;P)I.unshift("..");!k||I[0]===""||I[0]&&I[0].charAt(0)==="/"||I.unshift(""),L&&I.join("/").substr(-1)!=="/"&&I.push("");var q,pe=I[0]===""||I[0]&&I[0].charAt(0)==="/";return B&&(r.hostname=r.host=pe?"":I.length?I.shift():"",(q=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=q.shift(),r.host=r.hostname=q.shift())),(k=k||r.host&&I.length)&&!pe&&I.unshift(""),I.length?r.pathname=I.join("/"):(r.pathname=null,r.path=null),$n.isNull(r.pathname)&&$n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},Dn.prototype.parseHost=function(){var e=this.host,t=_m.exec(e);t&&((t=t[0])!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},Lt.Url,Lt.format,Lt.resolve,Lt.resolveObject,Hu={},M0=!1,D0=XT(),Im=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Lt.URL=typeof URL<"u"?URL:null,Lt.pathToFileURL=ZT,Lt.fileURLToPath=qT,Lt.Url,Lt.format,Lt.resolve,Lt.resolveObject,Lt.URL,Yx=92,Xx=47,qx=97,Qx=122,bc=Im==="win32",Kx=/\//g,Zx=/%/g,Jx=/\\/g,ev=/\n/g,tv=/\r/g,rv=/\t/g,Tm=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Lt.URL=typeof URL<"u"?URL:null,Lt.pathToFileURL=Gx,Lt.fileURLToPath=$x,nv=Lt.Url,iv=Lt.format,sv=Lt.resolve,ov=Lt.resolveObject,av=Lt.parse,lv=Lt.URL,uv=92,cv=47,hv=97,fv=122,_c=Tm==="win32",dv=/\//g,pv=/%/g,gv=/\\/g,mv=/\n/g,yv=/\r/g,wv=/\t/g}),r4=$e((e,t)=>{Ue(),We(),ze(),t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),X1=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferedDuplex=void 0,e.writev=i;var t=bo(),r=(Rr(),jt(kr));function i(s,u){let h=new Array(s.length);for(let f=0;f<s.length;f++)typeof s[f].chunk=="string"?h[f]=r.Buffer.from(s[f].chunk,"utf8"):h[f]=s[f].chunk;this._write(r.Buffer.concat(h),"binary",u)}var a=class extends t.Duplex{constructor(s,u,h){super({objectMode:!0}),this.proxy=u,this.socket=h,this.writeQueue=[],s.objectMode||(this._writev=i.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",f=>{!this.destroyed&&this.readable&&this.push(f)})}_read(s){this.proxy.read(s)}_write(s,u,h){this.isSocketOpen?this.writeToProxy(s,u,h):this.writeQueue.push({chunk:s,encoding:u,cb:h})}_final(s){this.writeQueue=[],this.proxy.end(s)}_destroy(s,u){this.writeQueue=[],this.proxy.destroy(),u(s)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(s,u,h){this.proxy.write(s,u)===!1?this.proxy.once("drain",h):h()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:s,encoding:u,cb:h}=this.writeQueue.shift();this.writeToProxy(s,u,h)}}};e.BufferedDuplex=a}),bu=$e(e=>{Ue(),We(),ze();var t=e&&e.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(e,"__esModule",{value:!0}),e.streamBuilder=e.browserStreamBuilder=void 0;var r=(Rr(),jt(kr)),i=t(r4()),a=t(Li()),s=bo(),u=t(Jc()),h=X1(),f=(0,a.default)("mqttjs:ws"),d=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function m(k,S){let I=`${k.protocol}://${k.hostname}:${k.port}${k.path}`;return typeof k.transformWsUrl=="function"&&(I=k.transformWsUrl(I,k,S)),I}function w(k){let S=k;return k.port||(k.protocol==="wss"?S.port=443:S.port=80),k.path||(S.path="/"),k.wsOptions||(S.wsOptions={}),!u.default&&!k.forceNativeWebSocket&&k.protocol==="wss"&&d.forEach(I=>{Object.prototype.hasOwnProperty.call(k,I)&&!Object.prototype.hasOwnProperty.call(k.wsOptions,I)&&(S.wsOptions[I]=k[I])}),S}function v(k){let S=w(k);if(S.hostname||(S.hostname=S.host),!S.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let I=new URL(document.URL);S.hostname=I.hostname,S.port||(S.port=Number(I.port))}return S.objectMode===void 0&&(S.objectMode=!(S.binary===!0||S.binary===void 0)),S}function b(k,S,I){f("createWebSocket"),f(`protocol: ${I.protocolId} ${I.protocolVersion}`);let B=I.protocolId==="MQIsdp"&&I.protocolVersion===3?"mqttv3.1":"mqtt";f(`creating new Websocket for url: ${S} and protocol: ${B}`);let U;return I.createWebsocket?U=I.createWebsocket(S,[B],I):U=new i.default(S,[B],I.wsOptions),U}function C(k,S){let I=S.protocolId==="MQIsdp"&&S.protocolVersion===3?"mqttv3.1":"mqtt",B=m(S,k),U;return S.createWebsocket?U=S.createWebsocket(B,[I],S):U=new WebSocket(B,[I]),U.binaryType="arraybuffer",U}var N=(k,S)=>{f("streamBuilder");let I=w(S);I.hostname=I.hostname||I.host||"localhost";let B=m(I,k),U=b(k,B,I),L=i.default.createWebSocketStream(U,I.wsOptions);return L.url=B,U.on("close",()=>{L.destroy()}),L};e.streamBuilder=N;var R=(k,S)=>{f("browserStreamBuilder");let I,B=v(S).browserBufferSize||1024*512,U=S.browserBufferTimeout||1e3,L=!S.objectMode,P=C(k,S),W=pe(S,z,Be);S.objectMode||(W._writev=h.writev.bind(W)),W.on("close",()=>{P.close()});let q=typeof P.addEventListener<"u";P.readyState===P.OPEN?(I=W,I.socket=P):(I=new h.BufferedDuplex(S,W,P),q?P.addEventListener("open",Ae):P.onopen=Ae),q?(P.addEventListener("close",H),P.addEventListener("error",ue),P.addEventListener("message",xe)):(P.onclose=H,P.onerror=ue,P.onmessage=xe);function pe(_e,he,Me){let ne=new s.Transform({objectMode:_e.objectMode});return ne._write=he,ne._flush=Me,ne}function Ae(){f("WebSocket onOpen"),I instanceof h.BufferedDuplex&&I.socketReady()}function H(_e){f("WebSocket onClose",_e),I.end(),I.destroy()}function ue(_e){f("WebSocket onError",_e);let he=new Error("WebSocket error");he.event=_e,I.destroy(he)}async function xe(_e){if(!W||W.destroyed||!W.readable)return;let{data:he}=_e;he instanceof ArrayBuffer?he=r.Buffer.from(he):he instanceof Blob?he=r.Buffer.from(await new Response(he).arrayBuffer()):he=r.Buffer.from(he,"utf8"),W.push(he)}function z(_e,he,Me){if(P.bufferedAmount>B){setTimeout(z,U,_e,he,Me);return}L&&typeof _e=="string"&&(_e=r.Buffer.from(_e,"utf8"));try{P.send(_e)}catch(ne){return Me(ne)}Me()}function Be(_e){P.close(),_e()}return I};e.browserStreamBuilder=R}),q1={};xa(q1,{Server:()=>Jt,Socket:()=>Jt,Stream:()=>Jt,_createServerHandle:()=>Jt,_normalizeArgs:()=>Jt,_setSimultaneousAccepts:()=>Jt,connect:()=>Jt,createConnection:()=>Jt,createServer:()=>Jt,default:()=>xv,isIP:()=>Jt,isIPv4:()=>Jt,isIPv6:()=>Jt});function Jt(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var xv,vv=on(()=>{Ue(),We(),ze(),xv={_createServerHandle:Jt,_normalizeArgs:Jt,_setSimultaneousAccepts:Jt,connect:Jt,createConnection:Jt,createServer:Jt,isIP:Jt,isIPv4:Jt,isIPv6:Jt,Server:Jt,Socket:Jt,Stream:Jt}}),bv=$e((e,t)=>{Ue(),We(),ze(),t.exports={}}),Nm=$e(e=>{Ue(),We(),ze();var t=e&&e.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});var r=t((vv(),jt(q1))),i=t(Li()),a=t(bv()),s=(0,i.default)("mqttjs:tcp"),u=(h,f)=>{if(f.port=f.port||1883,f.hostname=f.hostname||f.host||"localhost",f.socksProxy)return(0,a.default)(f.hostname,f.port,f.socksProxy,{timeout:f.socksTimeout});let{port:d,path:m}=f,w=f.hostname;return s("port %d and host %s",d,w),r.default.createConnection({port:d,host:w,path:m})};e.default=u}),_v={};xa(_v,{default:()=>Ev});var Ev,n4=on(()=>{Ue(),We(),ze(),Ev={}}),Om=$e(e=>{Ue(),We(),ze();var t=e&&e.__rest||function(m,w){var v={};for(var b in m)Object.prototype.hasOwnProperty.call(m,b)&&w.indexOf(b)<0&&(v[b]=m[b]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var C=0,b=Object.getOwnPropertySymbols(m);C<b.length;C++)w.indexOf(b[C])<0&&Object.prototype.propertyIsEnumerable.call(m,b[C])&&(v[b[C]]=m[b[C]]);return v},r=e&&e.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0});var i=r((n4(),jt(_v))),a=r((vv(),jt(q1))),s=r(Li()),u=r(bv()),h=(0,s.default)("mqttjs:tls");function f(m){let{host:w,port:v,socksProxy:b}=m,C=t(m,["host","port","socksProxy"]);return i.default.connect(b?Object.assign(Object.assign({},C),{socket:(0,u.default)(w,v,b,{timeout:m.socksTimeout})}):m)}var d=(m,w)=>{w.port=w.port||8883,w.host=w.hostname||w.host||"localhost",a.default.isIP(w.host)===0&&(w.servername=w.host),w.rejectUnauthorized=w.rejectUnauthorized!==!1,delete w.path,h("port %d host %s rejectUnauthorized %b",w.port,w.host,w.rejectUnauthorized);let v=f(w);v.on("secureConnect",()=>{w.rejectUnauthorized&&!v.authorized?v.emit("error",new Error("TLS not authorized")):v.removeListener("error",b)});function b(C){w.rejectUnauthorized&&m.emit("error",C),v.end()}return v.on("error",b),v};e.default=d}),km=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"__esModule",{value:!0});var t=(Rr(),jt(kr)),r=bo(),i=X1(),a,s,u;function h(){let v=new r.Transform;return v._write=(b,C,N)=>{a.send({data:b.buffer,success(){N()},fail(R){N(new Error(R))}})},v._flush=b=>{a.close({success(){b()}})},v}function f(v){v.hostname||(v.hostname="localhost"),v.path||(v.path="/"),v.wsOptions||(v.wsOptions={})}function d(v,b){let C=v.protocol==="wxs"?"wss":"ws",N=`${C}://${v.hostname}${v.path}`;return v.port&&v.port!==80&&v.port!==443&&(N=`${C}://${v.hostname}:${v.port}${v.path}`),typeof v.transformWsUrl=="function"&&(N=v.transformWsUrl(N,v,b)),N}function m(){a.onOpen(()=>{u.socketReady()}),a.onMessage(v=>{let{data:b}=v;b instanceof ArrayBuffer?b=t.Buffer.from(b):b=t.Buffer.from(b,"utf8"),s.push(b)}),a.onClose(()=>{u.emit("close"),u.end(),u.destroy()}),a.onError(v=>{let b=new Error(v.errMsg);u.destroy(b)})}var w=(v,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let C=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";f(b);let N=d(b,v);a=wx.connectSocket({url:N,protocols:[C]}),s=h(),u=new i.BufferedDuplex(b,s,a),u._destroy=(k,S)=>{a.close({success(){S&&S(k)}})};let R=u.destroy;return u.destroy=(k,S)=>(u.destroy=R,setTimeout(()=>{a.close({fail(){u._destroy(k,S)}})},0),u),m(),u};e.default=w}),Rm=$e(e=>{Ue(),We(),ze(),Object.defineProperty(e,"__esModule",{value:!0});var t=(Rr(),jt(kr)),r=bo(),i=X1(),a,s,u,h=!1;function f(){let b=new r.Transform;return b._write=(C,N,R)=>{a.sendSocketMessage({data:C.buffer,success(){R()},fail(){R(new Error)}})},b._flush=C=>{a.closeSocket({success(){C()}})},b}function d(b){b.hostname||(b.hostname="localhost"),b.path||(b.path="/"),b.wsOptions||(b.wsOptions={})}function m(b,C){let N=b.protocol==="alis"?"wss":"ws",R=`${N}://${b.hostname}${b.path}`;return b.port&&b.port!==80&&b.port!==443&&(R=`${N}://${b.hostname}:${b.port}${b.path}`),typeof b.transformWsUrl=="function"&&(R=b.transformWsUrl(R,b,C)),R}function w(){h||(h=!0,a.onSocketOpen(()=>{u.socketReady()}),a.onSocketMessage(b=>{if(typeof b.data=="string"){let C=t.Buffer.from(b.data,"base64");s.push(C)}else{let C=new FileReader;C.addEventListener("load",()=>{let N=C.result;N instanceof ArrayBuffer?N=t.Buffer.from(N):N=t.Buffer.from(N,"utf8"),s.push(N)}),C.readAsArrayBuffer(b.data)}}),a.onSocketClose(()=>{u.end(),u.destroy()}),a.onSocketError(b=>{u.destroy(b)}))}var v=(b,C)=>{if(C.hostname=C.hostname||C.host,!C.hostname)throw new Error("Could not determine host. Specify host manually.");let N=C.protocolId==="MQIsdp"&&C.protocolVersion===3?"mqttv3.1":"mqtt";d(C);let R=m(C,b);return a=C.my,a.connectSocket({url:R,protocols:N}),s=f(),u=new i.BufferedDuplex(C,s,a),w(),u};e.default=v}),i4=$e(e=>{Ue(),We(),ze();var t=e&&e.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectAsync=m;var r=t(Li()),i=t((t4(),jt(Vx))),a=t(C0()),s=t(Jc());typeof(It==null?void 0:It.nextTick)!="function"&&(It.nextTick=setImmediate);var u=(0,r.default)("mqttjs"),h=null;function f(w){let v;w.auth&&(v=w.auth.match(/^(.+):(.+)$/),v?(w.username=v[1],w.password=v[2]):w.username=w.auth)}function d(w,v){var b,C,N;if(u("connecting to an MQTT broker..."),typeof w=="object"&&!v&&(v=w,w=""),v=v||{},w&&typeof w=="string"){let S=i.default.parse(w,!0),I={};if(S.port!=null&&(I.port=Number(S.port)),I.host=S.hostname,I.query=S.query,I.auth=S.auth,I.protocol=S.protocol,I.path=S.path,v=Object.assign(Object.assign({},I),v),!v.protocol)throw new Error("Missing protocol");v.protocol=v.protocol.replace(/:$/,"")}if(v.unixSocket=v.unixSocket||((b=v.protocol)===null||b===void 0?void 0:b.includes("+unix")),v.unixSocket?v.protocol=v.protocol.replace("+unix",""):!(!((C=v.protocol)===null||C===void 0)&&C.startsWith("ws"))&&!(!((N=v.protocol)===null||N===void 0)&&N.startsWith("wx"))&&delete v.path,f(v),v.query&&typeof v.query.clientId=="string"&&(v.clientId=v.query.clientId),s.default||v.unixSocket?v.socksProxy=void 0:v.socksProxy===void 0&&typeof It<"u"&&(v.socksProxy=It.env.MQTTJS_SOCKS_PROXY),v.cert&&v.key)if(v.protocol){if(["mqtts","wss","wxs","alis"].indexOf(v.protocol)===-1)switch(v.protocol){case"mqtt":v.protocol="mqtts";break;case"ws":v.protocol="wss";break;case"wx":v.protocol="wxs";break;case"ali":v.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${v.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(h||(h={},!s.default&&!v.forceNativeWebSocket?(h.ws=bu().streamBuilder,h.wss=bu().streamBuilder,h.mqtt=Nm().default,h.tcp=Nm().default,h.ssl=Om().default,h.tls=h.ssl,h.mqtts=Om().default):(h.ws=bu().browserStreamBuilder,h.wss=bu().browserStreamBuilder,h.wx=km().default,h.wxs=km().default,h.ali=Rm().default,h.alis=Rm().default)),!h[v.protocol]){let S=["mqtts","wss"].indexOf(v.protocol)!==-1;v.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((I,B)=>S&&B%2===0?!1:typeof h[I]=="function")[0]}if(v.clean===!1&&!v.clientId)throw new Error("Missing clientId for unclean clients");v.protocol&&(v.defaultProtocol=v.protocol);function R(S){return v.servers&&((!S._reconnectCount||S._reconnectCount===v.servers.length)&&(S._reconnectCount=0),v.host=v.servers[S._reconnectCount].host,v.port=v.servers[S._reconnectCount].port,v.protocol=v.servers[S._reconnectCount].protocol?v.servers[S._reconnectCount].protocol:v.defaultProtocol,v.hostname=v.host,S._reconnectCount++),u("calling streambuilder for",v.protocol),h[v.protocol](S,v)}let k=new a.default(R,v);return k.on("error",()=>{}),k}function m(w,v,b=!0){return new Promise((C,N)=>{let R=d(w,v),k={connect:I=>{S(),C(R)},end:()=>{S(),C(R)},error:I=>{S(),R.end(),N(I)}};b===!1&&(k.close=()=>{k.error(new Error("Couldn't connect to server"))});function S(){Object.keys(k).forEach(I=>{R.off(I,k[I])})}Object.keys(k).forEach(I=>{R.on(I,k[I])})})}e.default=d}),Mm=$e(e=>{Ue(),We(),ze();var t=e&&e.__createBinding||(Object.create?function(b,C,N,R){R===void 0&&(R=N);var k=Object.getOwnPropertyDescriptor(C,N);(!k||("get"in k?!C.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return C[N]}}),Object.defineProperty(b,R,k)}:function(b,C,N,R){R===void 0&&(R=N),b[R]=C[N]}),r=e&&e.__setModuleDefault||(Object.create?function(b,C){Object.defineProperty(b,"default",{enumerable:!0,value:C})}:function(b,C){b.default=C}),i=e&&e.__importStar||function(){var b=function(C){return b=Object.getOwnPropertyNames||function(N){var R=[];for(var k in N)Object.prototype.hasOwnProperty.call(N,k)&&(R[R.length]=k);return R},b(C)};return function(C){if(C&&C.__esModule)return C;var N={};if(C!=null)for(var R=b(C),k=0;k<R.length;k++)R[k]!=="default"&&t(N,C,R[k]);return r(N,C),N}}(),a=e&&e.__exportStar||function(b,C){for(var N in b)N!=="default"&&!Object.prototype.hasOwnProperty.call(C,N)&&t(C,b,N)},s=e&&e.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=e.KeepaliveManager=e.UniqueMessageIdProvider=e.DefaultMessageIdProvider=e.Store=e.MqttClient=e.connectAsync=e.connect=e.Client=void 0;var u=s(C0());e.MqttClient=u.default;var h=s(bx());e.DefaultMessageIdProvider=h.default;var f=s(FT());e.UniqueMessageIdProvider=f.default;var d=s(_x());e.Store=d.default;var m=i(i4());e.connect=m.default,Object.defineProperty(e,"connectAsync",{enumerable:!0,get:function(){return m.connectAsync}});var w=s(jx());e.KeepaliveManager=w.default,e.Client=u.default,a(C0(),e),a(ba(),e);var v=Zc();Object.defineProperty(e,"ReasonCodes",{enumerable:!0,get:function(){return v.ReasonCodes}})}),s4=$e(e=>{Ue(),We(),ze();var t=e&&e.__createBinding||(Object.create?function(u,h,f,d){d===void 0&&(d=f);var m=Object.getOwnPropertyDescriptor(h,f);(!m||("get"in m?!h.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return h[f]}}),Object.defineProperty(u,d,m)}:function(u,h,f,d){d===void 0&&(d=f),u[d]=h[f]}),r=e&&e.__setModuleDefault||(Object.create?function(u,h){Object.defineProperty(u,"default",{enumerable:!0,value:h})}:function(u,h){u.default=h}),i=e&&e.__importStar||function(){var u=function(h){return u=Object.getOwnPropertyNames||function(f){var d=[];for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(d[d.length]=m);return d},u(h)};return function(h){if(h&&h.__esModule)return h;var f={};if(h!=null)for(var d=u(h),m=0;m<d.length;m++)d[m]!=="default"&&t(f,h,d[m]);return r(f,h),f}}(),a=e&&e.__exportStar||function(u,h){for(var f in u)f!=="default"&&!Object.prototype.hasOwnProperty.call(h,f)&&t(h,u,f)};Object.defineProperty(e,"__esModule",{value:!0});var s=i(Mm());e.default=s,a(Mm(),e)});const o4=s4();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/let _u;const a4=new Uint8Array(16);function l4(){if(!_u&&(_u=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_u))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _u(a4)}const Br=[];for(let e=0;e<256;++e)Br.push((e+256).toString(16).slice(1));function u4(e,t=0){return Br[e[t+0]]+Br[e[t+1]]+Br[e[t+2]]+Br[e[t+3]]+"-"+Br[e[t+4]]+Br[e[t+5]]+"-"+Br[e[t+6]]+Br[e[t+7]]+"-"+Br[e[t+8]]+Br[e[t+9]]+"-"+Br[e[t+10]]+Br[e[t+11]]+Br[e[t+12]]+Br[e[t+13]]+Br[e[t+14]]+Br[e[t+15]]}const c4=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Dm={randomUUID:c4};function Pm(e,t,r){if(Dm.randomUUID&&!t&&!e)return Dm.randomUUID();e=e||{};const i=e.random||(e.rng||l4)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,u4(i)}const h4="167.71.237.218",f4=8083,d4=window.location.protocol==="https:"?"wss":"ws",Lm="/mqtt",p4=async(e,t,r,i)=>{const a=`cheeko_web_${Pm()}`,s=`${d4}://${h4}:${f4}${Lm}`,u=o4.connect(s,{clientId:a,clean:!0,connectTimeout:4e3,username:"admin",password:"public",reconnectPeriod:1e3,protocol:"ws",path:Lm,rejectUnauthorized:!1});return u.on("connecting",()=>{console.log("Connecting to MQTT broker...")}),new Promise((h,f)=>{const d=setTimeout(()=>{u.end(),f(new Error("Connection timeout - MQTT broker unreachable"))},3e4);u.on("connect",()=>{clearTimeout(d),console.log("Connected to MQTT broker");const m={msgId:Pm(),identifier:"updaterole",outParams:{roleType:t,language:r,voice:i}},w=`user/cheekotoy/${e}/thing/data/post`;let v=!1;u.publish(w,JSON.stringify(m),{qos:1},b=>{v||(v=!0,u.end(!1,()=>{b?(console.error("MQTT publish error:",b),f(new Error(`Failed to publish message: ${b.message}`))):(console.log("Message published successfully"),h(!0))}))})}),u.on("error",m=>{clearTimeout(d),console.error("MQTT client error:",m),u.end(),f(new Error(`MQTT connection error: ${m.message}`))}),u.on("close",()=>{console.log("MQTT connection closed")}),u.on("offline",()=>{console.log("MQTT client is offline")})})};function g4(){const{id:e}=tS(),t=mo(),[r,i]=De.useState(null),[a,s]=De.useState(!0),[u,h]=De.useState(!1),[f,d]=De.useState(!1),[m,w]=De.useState(""),[v,b]=De.useState("Puzzle Solver"),[C,N]=De.useState("English"),[R,k]=De.useState("Sparkles for Kids");De.useEffect(()=>{S()},[e]);const S=async()=>{try{if(!e){t("/");return}const{data:U,error:L}=await Er.from("toys").select("*").eq("id",e).single();if(L||!U)throw new Error("Toy not found");i(U),w(U.name),b(U.role_type),N(U.language),k(U.voice)}catch(U){console.error("Error loading toy:",U),dr.error("Toy not found"),t("/")}finally{s(!1)}},I=async U=>{U.preventDefault(),h(!0);try{const{error:L}=await Er.from("toys").update({name:m,role_type:v,language:C,voice:R}).eq("id",e);if(L)throw L;if(r)try{const P=await p4(r.serial_number,v,C,R);dr.success("Settings saved and toy updated successfully!"),console.log("MQTT Update Result:",P)}catch(P){console.error("MQTT Error:",P),dr.success("Settings saved to database, but failed to update toy. It will update when the toy comes online.")}t("/")}catch(L){console.error("Error saving settings:",L),dr.error("Failed to save settings")}finally{h(!1)}},B=async()=>{if(window.confirm("Are you sure you want to delete this toy? This action cannot be undone.")){d(!0);try{const{error:U}=await Er.from("toys").delete().eq("id",e);if(U)throw U;dr.success("Toy deleted successfully"),t("/")}catch(U){console.error("Error deleting toy:",U),dr.error("Failed to delete toy")}finally{d(!1)}}};return a?te.jsxs("div",{className:"min-h-screen bg-primary-50",children:[te.jsx(co,{}),te.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:te.jsx("div",{className:"flex items-center justify-center h-64",children:te.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})})})]}):r?te.jsxs("div",{className:"min-h-screen bg-primary-50",children:[te.jsx(co,{}),te.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[te.jsx(Xc,{}),te.jsx("div",{className:"max-w-2xl mx-auto",children:te.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-primary-200 p-8",children:[te.jsx("div",{className:"flex items-center justify-center mb-8",children:te.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center",children:te.jsx(id,{className:"h-8 w-8 text-primary-500"})})}),te.jsxs("form",{onSubmit:I,className:"space-y-6",children:[te.jsxs("div",{children:[te.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-primary-700 mb-1",children:"Toy Name"}),te.jsx("input",{id:"name",type:"text",value:m,onChange:U=>w(U.target.value),className:"block w-full px-4 py-3 rounded-lg border border-primary-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter toy name",required:!0})]}),te.jsxs("div",{children:[te.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-primary-700 mb-1",children:"Role Type"}),te.jsxs("select",{id:"role",value:v,onChange:U=>b(U.target.value),className:"block w-full px-4 py-3 rounded-lg border border-primary-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[te.jsx("option",{value:"Puzzle Solver",children:"Puzzle Solver"}),te.jsx("option",{value:"Story Teller",children:"Story Teller"}),te.jsx("option",{value:"Math Tutor",children:"Math Tutor"})]})]}),te.jsxs("div",{children:[te.jsx("label",{htmlFor:"language",className:"block text-sm font-medium text-primary-700 mb-1",children:"Language"}),te.jsxs("select",{id:"language",value:C,onChange:U=>N(U.target.value),className:"block w-full px-4 py-3 rounded-lg border border-primary-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[te.jsx("option",{value:"English",children:"English"}),te.jsx("option",{value:"Spanish",children:"Spanish"}),te.jsx("option",{value:"French",children:"French"}),te.jsx("option",{value:"Hindi",children:"Hindi"})]})]}),te.jsxs("div",{children:[te.jsx("label",{htmlFor:"voice",className:"block text-sm font-medium text-primary-700 mb-1",children:"Voice"}),te.jsxs("select",{id:"voice",value:R,onChange:U=>k(U.target.value),className:"block w-full px-4 py-3 rounded-lg border border-primary-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[te.jsx("option",{value:"Sparkles for Kids",children:"Sparkles for Kids"}),te.jsx("option",{value:"Deep Voice",children:"Deep Voice"}),te.jsx("option",{value:"Soft Calm Voice",children:"Soft Calm Voice"})]})]}),te.jsxs("div",{className:"flex items-center justify-between pt-6",children:[te.jsx("button",{type:"button",onClick:B,disabled:f,className:"inline-flex items-center px-4 py-2 border border-primary-300 text-sm font-medium rounded-md text-primary-700 bg-white hover:bg-primary-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:f?te.jsxs(te.Fragment,{children:[te.jsx(Ol,{className:"animate-spin h-4 w-4 mr-2"}),"Deleting..."]}):te.jsxs(te.Fragment,{children:[te.jsx(TA,{className:"h-4 w-4 mr-2"}),"Delete Toy"]})}),te.jsx("button",{type:"submit",disabled:u,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-500 hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:u?te.jsxs(te.Fragment,{children:[te.jsx(Ol,{className:"animate-spin h-4 w-4 mr-2"}),"Saving..."]}):te.jsxs(te.Fragment,{children:[te.jsx(CA,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})]})})]})]}):null}function m4(){const[e,t]=De.useState([]),[r,i]=De.useState(!0),[a,s]=De.useState(!1),[u,h]=De.useState(""),[f,d]=De.useState(!1);De.useEffect(()=>{m(),w()},[]);const m=async()=>{const{data:{user:C}}=await Er.auth.getUser();s((C==null?void 0:C.email)==="admin@gmail.com"||(C==null?void 0:C.email)==="rahul@craftech360.com")},w=async()=>{try{const{data:C,error:N}=await Er.from("mqtt_auth").select("*").order("created_at",{ascending:!1});if(N)throw N;t(C||[])}catch(C){console.error("Error loading devices:",C),dr.error("Failed to load devices")}finally{i(!1)}},v=async C=>{if(C.preventDefault(),!!u.trim()){d(!0);try{const{error:N}=await Er.from("mqtt_auth").insert([{serial_number:u,password_hash:"default_hash",is_active:!0}]);if(N)throw N;dr.success("Device added successfully"),h(""),w()}catch(N){console.error("Error adding device:",N),dr.error("Failed to add device")}finally{d(!1)}}},b=async(C,N)=>{try{const{error:R}=await Er.from("mqtt_auth").update({is_active:!N}).eq("serial_number",C);if(R)throw R;dr.success("Device status updated"),w()}catch(R){console.error("Error updating device:",R),dr.error("Failed to update device")}};return a?te.jsxs("div",{className:"min-h-screen bg-primary-50",children:[te.jsx(co,{}),te.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[te.jsx(Xc,{}),te.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-primary-200 p-8",children:[te.jsx("h2",{className:"text-2xl font-bold text-primary-900 mb-8",children:"Device Management"}),te.jsx("form",{onSubmit:v,className:"mb-8",children:te.jsxs("div",{className:"flex gap-4",children:[te.jsx("input",{type:"text",value:u,onChange:C=>h(C.target.value),placeholder:"Enter device serial number",className:"flex-1 px-4 py-2 rounded-lg border border-primary-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),te.jsxs("button",{type:"submit",disabled:f||!u.trim(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-500 hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[f?te.jsx(Ol,{className:"animate-spin h-4 w-4"}):te.jsx(c2,{className:"h-4 w-4"}),te.jsx("span",{className:"ml-2",children:"Add Device"})]})]})}),r?te.jsx("div",{className:"flex justify-center py-8",children:te.jsx(Ol,{className:"animate-spin h-8 w-8 text-primary-500"})}):te.jsx("div",{className:"overflow-x-auto",children:te.jsxs("table",{className:"min-w-full divide-y divide-primary-200",children:[te.jsx("thead",{children:te.jsxs("tr",{children:[te.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-500 uppercase tracking-wider",children:"Serial Number"}),te.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-500 uppercase tracking-wider",children:"Status"}),te.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-500 uppercase tracking-wider",children:"Created At"}),te.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-500 uppercase tracking-wider",children:"Actions"})]})}),te.jsx("tbody",{className:"bg-white divide-y divide-primary-100",children:e.map(C=>te.jsxs("tr",{children:[te.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-primary-900",children:C.serial_number}),te.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:te.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${C.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[C.is_active?te.jsx(xA,{className:"h-3 w-3 mr-1"}):te.jsx(h2,{className:"h-3 w-3 mr-1"}),C.is_active?"Active":"Inactive"]})}),te.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-primary-500",children:new Date(C.created_at).toLocaleDateString()}),te.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:te.jsx("button",{onClick:()=>b(C.serial_number,C.is_active),className:"text-primary-600 hover:text-primary-900",children:C.is_active?"Deactivate":"Activate"})})]},C.serial_number))})]})})]})]})]}):te.jsxs("div",{className:"min-h-screen bg-primary-50",children:[te.jsx(co,{}),te.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:te.jsxs("div",{className:"text-center",children:[te.jsx("h2",{className:"text-2xl font-bold text-primary-900",children:"Access Denied"}),te.jsx("p",{className:"mt-2 text-primary-600",children:"You don't have permission to access this page."})]})})]})}function y4(){const e=mo(),t=go();return De.useEffect(()=>{(async()=>{const i=new URLSearchParams(t.hash.substring(1)),a=i.get("error"),s=i.get("error_description");a&&(dr.error(s||"Authentication failed"),e("/login"))})()},[t,e]),null}function w4(){const[e,t]=De.useState(null),[r,i]=De.useState(!0);return De.useEffect(()=>{Er.auth.getSession().then(({data:{session:s}})=>{t(s),i(!1)});const{data:{subscription:a}}=Er.auth.onAuthStateChange((s,u)=>{t(u)});return()=>a.unsubscribe()},[]),r?te.jsx("div",{children:"Loading..."}):te.jsxs(te.Fragment,{children:[te.jsx(mA,{position:"top-center"}),te.jsxs(ES,{children:[te.jsx(y4,{}),te.jsxs(mS,{children:[te.jsx(Do,{path:"/",element:e?te.jsx(K3,{}):te.jsx(ja,{to:"/login",replace:!0})}),te.jsx(Do,{path:"/login",element:e?te.jsx(ja,{to:"/",replace:!0}):te.jsx(Q3,{})}),te.jsx(Do,{path:"/add-toy",element:e?te.jsx(LI,{}):te.jsx(ja,{to:"/login",replace:!0})}),te.jsx(Do,{path:"/toy/:id/settings",element:e?te.jsx(g4,{}):te.jsx(ja,{to:"/login",replace:!0})}),te.jsx(Do,{path:"/admin",element:e?te.jsx(m4,{}):te.jsx(ja,{to:"/login",replace:!0})})]})]})]})}Kw(document.getElementById("root")).render(te.jsx(De.StrictMode,{children:te.jsx(w4,{})}));export{jm as g};
